{"version":3,"sources":["tmp/js/components/cookie-functions.js","tmp/js/components/helpers.js","tmp/js/components/postcode.js","tmp/js/components/analytics.js","tmp/js/components/cookie-banner.js","tmp/js/components/cookies-page.js","tmp/js/app.js"],"names":["CONSENT_COOKIE_NAME","COOKIE_CATEGORIES","analytics","window","GA_CONTAINER_ID","essential","DEFAULT_COOKIE_CONSENT","version","GDS_CONSENT_COOKIE_VERSION","getConsentCookie","consentCookie","getCookie","consentCookieObj","JSON","parse","err","isValidConsentCookie","options","setConsentCookie","cookieConsent","option","stringify","setCookie","days","resetCookies","cookieType","forEach","cookie","deleteCookie","userAllowsCookieCategory","cookieCategory","cookiePreferences","e","console","error","userAllowsCookie","cookieName","category","indexOf","name","nameEQ","cookies","document","split","i","len","length","charAt","substring","decodeURIComponent","value","cookieString","date","Date","setTime","getTime","toUTCString","location","protocol","hostname","nodeListForEach","nodes","callback","NodeList","prototype","call","INCODE_REGEX","POSTCODE_REGEX","SPACE_REGEX","sanitize","s","replace","toUpperCase","isValid","postcode","match","toOutcode","gtag","command","args","dataLayer","push","arguments","GaMeasurementId","initAnalytics","gaMeasurementId","Boolean","setDefaultConsent","loadGaScript","pageViewParams","getPiiSafePageView","send_page_view","page_path","page_location","page_referrer","referrer","cookie_flags","userConsent","updateAnalyticsStorageConsent","sendPageViewEvent","sendFilterPageCustomEvent","analytics_storage","granted","delayMs","element","getElementById","totalResults","getAttribute","undefined","total_results","sendAnalyticsCustomEvent","accepted","source","f","getElementsByTagName","j","createElement","async","src","parentNode","insertBefore","pageView","page_title","title","send_to","piiSafeReferrerQueryString","getPiiSafeQueryString","URL","search","urlArray","piiSafeQueryString","href","pathname","queryString","queryParams","URLSearchParams","get","set","delete","toString","cookieBannerAcceptSelector","cookieBannerRejectSelector","cookieBannerHideButtonSelector","cookieMessageSelector","cookieConfirmationAcceptSelector","cookieConfirmationRejectSelector","CookieBanner","$module","this","CookiesPage","init","$cookieBanner","$acceptButton","querySelector","$rejectButton","$cookieMessage","$cookieConfirmationAccept","$cookieConfirmationReject","$cookieBannerHideButtons","querySelectorAll","onCookiesPage","currentConsentCookie","CookieFunctions.getConsentCookie","CookieFunctions.isValidConsentCookie","CookieFunctions.resetCookies","removeAttribute","addEventListener","acceptCookies","bind","rejectCookies","$cookieBannerHideButton","hideBanner","setAttribute","CookieFunctions.setConsentCookie","revealConfirmationMessage","confirmationMessage","focus","$cookiePage","$cookieForm","$cookieFormFieldsets","$successNotification","$successLink","$cookieFormFieldset","showUserPreference","savePreferences","event","preventDefault","preferences","getCookieType","selectedItem","analyticsAccepted","showSuccessNotification","preference","radioValue","checked","scrollTo","id","GA_MEASUREMENT_ID","$cookiesPage","backLinks","link","history","back","button","filterButton","style","display"],"mappings":"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","file":"app.js","sourcesContent":["/* Name of the cookie to save users cookie preferences to. */\nconst CONSENT_COOKIE_NAME = 'service_directory_cookies_policy';\n/* Users can (dis)allow different groups of cookies. */\nconst COOKIE_CATEGORIES = {\n    analytics: ['_ga', '_ga_' + window.GA_CONTAINER_ID],\n    /* Essential cookies\n     *\n     * Essential cookies cannot be deselected, but we want our cookie code to\n     * only allow adding cookies that are documented in this object, so they need\n     * to be added here.\n     */\n    essential: ['service_directory_cookies_policy']\n};\n/*\n * Default cookie preferences if user has no cookie preferences.\n *\n * Note that this doesn't include a key for essential cookies, essential\n * cookies cannot be disallowed. If the object contains { essential: false }\n * this will be ignored.\n */\nconst DEFAULT_COOKIE_CONSENT = {\n    analytics: false,\n    version: window.GDS_CONSENT_COOKIE_VERSION\n};\n/** Return the user's cookie preferences.\n *\n * If the consent cookie is malformed, or not present,\n * returns null.\n */\nexport function getConsentCookie() {\n    const consentCookie = getCookie(CONSENT_COOKIE_NAME);\n    let consentCookieObj;\n    if (consentCookie) {\n        try {\n            consentCookieObj = JSON.parse(consentCookie);\n        }\n        catch (err) {\n            return null;\n        }\n    }\n    else {\n        return null;\n    }\n    return consentCookieObj;\n}\n/** Check the cookie preferences object.\n *\n * If the consent object is not present, malformed, or incorrect version,\n * returns false, otherwise returns true.\n */\nexport function isValidConsentCookie(options) {\n    return (options && options.version >= window.GDS_CONSENT_COOKIE_VERSION);\n}\n/** Update the user's cookie preferences. */\nexport function setConsentCookie(options) {\n    let cookieConsent = getConsentCookie();\n    if (!cookieConsent) {\n        cookieConsent = JSON.parse(JSON.stringify(DEFAULT_COOKIE_CONSENT));\n    }\n    // Merge current cookie preferences and new preferences\n    for (var option in options) {\n        cookieConsent[option] = options[option];\n    }\n    // Essential cookies cannot be deselected, ignore this cookie type\n    delete cookieConsent.essential;\n    cookieConsent.version = window.GDS_CONSENT_COOKIE_VERSION;\n    // Set the consent cookie\n    setCookie(CONSENT_COOKIE_NAME, JSON.stringify(cookieConsent), { days: 365 });\n    // Update the other cookies\n    resetCookies();\n}\n/** Apply the user's cookie preferences\n *\n * Deletes any cookies the user has not consented to.\n */\nexport function resetCookies() {\n    var options = getConsentCookie();\n    // If no preferences or old version use the default\n    if (!isValidConsentCookie(options)) {\n        options = JSON.parse(JSON.stringify(DEFAULT_COOKIE_CONSENT));\n    }\n    for (var cookieType in options) {\n        if (cookieType === 'version') {\n            continue;\n        }\n        // Essential cookies cannot be deselected, ignore this cookie type\n        if (cookieType === 'essential') {\n            continue;\n        }\n        if (!options[cookieType]) {\n            // Fetch the cookies in that category\n            var cookiesInCategory = COOKIE_CATEGORIES[cookieType];\n            cookiesInCategory.forEach(function (cookie) {\n                deleteCookie(cookie);\n            });\n        }\n    }\n}\nfunction userAllowsCookieCategory(cookieCategory, cookiePreferences) {\n    // Essential cookies are always allowed\n    if (cookieCategory === 'essential') {\n        return true;\n    }\n    // Sometimes cookiePreferences is malformed in some of the tests, so we need to handle these\n    try {\n        return cookiePreferences[cookieCategory];\n    }\n    catch (e) {\n        console.error(e);\n        return false;\n    }\n}\nfunction userAllowsCookie(cookieName) {\n    // Always allow setting the consent cookie\n    if (cookieName === CONSENT_COOKIE_NAME) {\n        return true;\n    }\n    // Get the current cookie preferences\n    var cookiePreferences = getConsentCookie();\n    // If no preferences or old version use the default\n    if (!isValidConsentCookie(cookiePreferences)) {\n        cookiePreferences = DEFAULT_COOKIE_CONSENT;\n    }\n    for (var category in COOKIE_CATEGORIES) {\n        var cookiesInCategory = COOKIE_CATEGORIES[category];\n        if (cookiesInCategory.indexOf(cookieName) !== '-1') {\n            return userAllowsCookieCategory(category, cookiePreferences);\n        }\n    }\n    // Deny the cookie if it is not known to us\n    return false;\n}\nfunction getCookie(name) {\n    var nameEQ = name + '=';\n    var cookies = document.cookie.split(';');\n    for (var i = 0, len = cookies.length; i < len; i++) {\n        var cookie = cookies[i];\n        while (cookie.charAt(0) === ' ') {\n            cookie = cookie.substring(1, cookie.length);\n        }\n        if (cookie.indexOf(nameEQ) === 0) {\n            return decodeURIComponent(cookie.substring(nameEQ.length));\n        }\n    }\n    return null;\n}\n// do we need to set the domain?\nfunction setCookie(name, value, options) {\n    if (userAllowsCookie(name)) {\n        if (typeof options === 'undefined') {\n            options = {};\n        }\n        var cookieString = name + '=' + value + '; path=/; SameSite=Strict';\n        if (options.days) {\n            var date = new Date();\n            date.setTime(date.getTime() + (options.days * 24 * 60 * 60 * 1000));\n            cookieString = cookieString + '; expires=' + date.toUTCString();\n        }\n        if (document.location.protocol === 'https:') {\n            cookieString = cookieString + '; Secure';\n        }\n        document.cookie = cookieString;\n    }\n}\nfunction deleteCookie(name) {\n    if (getCookie(name)) {\n        // Cookies need to be deleted in the same level of specificity in which they were set\n        // If a cookie was set with a specified domain, it needs to be specified when deleted\n        // If a cookie wasn't set with the domain attribute, it shouldn't be there when deleted\n        // You can't tell if a cookie was set with a domain attribute or not, so try both options\n        document.cookie = name + '=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/';\n        document.cookie = name + '=;expires=Thu, 01 Jan 1970 00:00:00 GMT;domain=' + window.location.hostname + ';path=/';\n        document.cookie = name + '=;expires=Thu, 01 Jan 1970 00:00:00 GMT;domain=.' + window.location.hostname + ';path=/';\n    }\n}\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvY29va2llLWZ1bmN0aW9ucy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFpQkEsNkRBQTZEO0FBQzdELE1BQU0sbUJBQW1CLEdBQUcsa0NBQWtDLENBQUM7QUFFL0QsdURBQXVEO0FBQ3ZELE1BQU0saUJBQWlCLEdBQXFCO0lBQ3hDLFNBQVMsRUFBRSxDQUFDLEtBQUssRUFBRSxNQUFNLEdBQUcsTUFBTSxDQUFDLGVBQWUsQ0FBQztJQUNuRDs7Ozs7T0FLRztJQUNILFNBQVMsRUFBRSxDQUFDLGtDQUFrQyxDQUFDO0NBQ2xELENBQUE7QUFFRDs7Ozs7O0dBTUc7QUFDSCxNQUFNLHNCQUFzQixHQUFrQjtJQUMxQyxTQUFTLEVBQUUsS0FBSztJQUNoQixPQUFPLEVBQUUsTUFBTSxDQUFDLDBCQUEwQjtDQUM3QyxDQUFBO0FBRUQ7Ozs7R0FJRztBQUNILE1BQU0sVUFBVSxnQkFBZ0I7SUFDNUIsTUFBTSxhQUFhLEdBQUcsU0FBUyxDQUFDLG1CQUFtQixDQUFDLENBQUM7SUFDckQsSUFBSSxnQkFBc0MsQ0FBQztJQUUzQyxJQUFJLGFBQWEsRUFBRTtRQUNmLElBQUk7WUFDQSxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1NBQ2hEO1FBQUMsT0FBTyxHQUFHLEVBQUU7WUFDVixPQUFPLElBQUksQ0FBQztTQUNmO0tBQ0o7U0FBTTtRQUNILE9BQU8sSUFBSSxDQUFDO0tBQ2Y7SUFFRCxPQUFPLGdCQUFnQixDQUFDO0FBQzVCLENBQUM7QUFFRDs7OztHQUlHO0FBQ0gsTUFBTSxVQUFVLG9CQUFvQixDQUFDLE9BQXNCO0lBQ3ZELE9BQU8sQ0FBQyxPQUFPLElBQUksT0FBTyxDQUFDLE9BQU8sSUFBSSxNQUFNLENBQUMsMEJBQTBCLENBQUMsQ0FBQztBQUM3RSxDQUFDO0FBRUQsNENBQTRDO0FBQzVDLE1BQU0sVUFBVSxnQkFBZ0IsQ0FBQyxPQUFzQjtJQUNuRCxJQUFJLGFBQWEsR0FBRyxnQkFBZ0Is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Q0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ3BFLFlBQVksR0FBRyxZQUFZLEdBQUcsWUFBWSxHQUFHLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztTQUNuRTtRQUNELElBQUksUUFBUSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEtBQUssUUFBUSxFQUFFO1lBQ3pDLFlBQVksR0FBRyxZQUFZLEdBQUcsVUFBVSxDQUFDO1NBQzVDO1FBQ0QsUUFBUSxDQUFDLE1BQU0sR0FBRyxZQUFZLENBQUM7S0FDbEM7QUFDTCxDQUFDO0FBRUQsU0FBUyxZQUFZLENBQUMsSUFBWTtJQUM5QixJQUFJLFNBQVMsQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUNqQixxRkFBcUY7UUFDckYscUZBQXFGO1FBQ3JGLHVGQUF1RjtRQUN2Rix5RkFBeUY7UUFDekYsUUFBUSxDQUFDLE1BQU0sR0FBRyxJQUFJLEdBQUcsZ0RBQWdELENBQUM7UUFDMUUsUUFBUSxDQUFDLE1BQU0sR0FBRyxJQUFJLEdBQUcsaURBQWlELEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEdBQUcsU0FBUyxDQUFDO1FBQ2xILFFBQVEsQ0FBQyxNQUFNLEdBQUcsSUFBSSxHQUFHLGtEQUFrRCxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsUUFBUSxHQUFHLFNBQVMsQ0FBQztLQUN0SDtBQUNMLENBQUMiLCJmaWxlIjoiY29tcG9uZW50cy9jb29raWUtZnVuY3Rpb25zLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ29uc2VudENvb2tpZSB7XHJcbiAgICAvL3RvZG86IGp1c3QgcmVtb3ZlIGVzc2VudGlhbD9cclxuICAgIGVzc2VudGlhbD86IGJvb2xlYW47XHJcbiAgICBhbmFseXRpY3M/OiBib29sZWFuO1xyXG4gICAgdmVyc2lvbj86IG51bWJlcjtcclxufVxyXG5cclxuaW50ZXJmYWNlIENvb2tpZUNhdGVnb3JpZXMge1xyXG4gICAgYW5hbHl0aWNzOiBzdHJpbmdbXTtcclxuICAgIGVzc2VudGlhbDogc3RyaW5nW107XHJcbn1cclxuXHJcbmludGVyZmFjZSBDb29raWVPcHRpb25zIHtcclxuICAgIGRheXM/OiBudW1iZXI7XHJcbn1cclxuXHJcbi8qIE5hbWUgb2YgdGhlIGNvb2tpZSB0byBzYXZlIHVzZXJzIGNvb2tpZSBwcmVmZXJlbmNlcyB0by4gKi9cclxuY29uc3QgQ09OU0VOVF9DT09LSUVfTkFNRSA9ICdzZXJ2aWNlX2RpcmVjdG9yeV9jb29raWVzX3BvbGljeSc7XHJcblxyXG4vKiBVc2VycyBjYW4gKGRpcylhbGxvdyBkaWZmZXJlbnQgZ3JvdXBzIG9mIGNvb2tpZXMuICovXHJcbmNvbnN0IENPT0tJRV9DQVRFR09SSUVTOiBDb29raWVDYXRlZ29yaWVzID0ge1xyXG4gICAgYW5hbHl0aWNzOiBbJ19nYScsICdfZ2FfJyArIHdpbmRvdy5HQV9DT05UQUlORVJfSURdLFxyXG4gICAgLyogRXNzZW50aWFsIGNvb2tpZXNcclxuICAgICAqXHJcbiAgICAgKiBFc3NlbnRpYWwgY29va2llcyBjYW5ub3QgYmUgZGVzZWxlY3RlZCwgYnV0IHdlIHdhbnQgb3VyIGNvb2tpZSBjb2RlIHRvXHJcbiAgICAgKiBvbmx5IGFsbG93IGFkZGluZyBjb29raWVzIHRoYXQgYXJlIGRvY3VtZW50ZWQgaW4gdGhpcyBvYmplY3QsIHNvIHRoZXkgbmVlZFxyXG4gICAgICogdG8gYmUgYWRkZWQgaGVyZS5cclxuICAgICAqL1xyXG4gICAgZXNzZW50aWFsOiBbJ3NlcnZpY2VfZGlyZWN0b3J5X2Nvb2tpZXNfcG9saWN5J11cclxufVxyXG5cclxuLypcclxuICogRGVmYXVsdCBjb29raWUgcHJlZmVyZW5jZXMgaWYgdXNlciBoYXMgbm8gY29va2llIHByZWZlcmVuY2VzLlxyXG4gKlxyXG4gKiBOb3RlIHRoYXQgdGhpcyBkb2Vzbid0IGluY2x1ZGUgYSBrZXkgZm9yIGVzc2VudGlhbCBjb29raWVzLCBlc3NlbnRpYWxcclxuICogY29va2llcyBjYW5ub3QgYmUgZGlzYWxsb3dlZC4gSWYgdGhlIG9iamVjdCBjb250YWlucyB7IGVzc2VudGlhbDogZmFsc2UgfVxyXG4gKiB0aGlzIHdpbGwgYmUgaWdub3JlZC5cclxuICovXHJcbmNvbnN0IERFRkFVTFRfQ09PS0lFX0NPTlNFTlQ6IENvbnNlbnRDb29raWUgPSB7XHJcbiAgICBhbmFseXRpY3M6IGZhbHNlLFxyXG4gICAgdmVyc2lvbjogd2luZG93LkdEU19DT05TRU5UX0NPT0tJRV9WRVJTSU9OXHJcbn1cclxuXHJcbi8qKiBSZXR1cm4gdGhlIHVzZXIncyBjb29raWUgcHJlZmVyZW5jZXMuXHJcbiAqXHJcbiAqIElmIHRoZSBjb25zZW50IGNvb2tpZSBpcyBtYWxmb3JtZWQsIG9yIG5vdCBwcmVzZW50LFxyXG4gKiByZXR1cm5zIG51bGwuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29uc2VudENvb2tpZSgpOiBDb25zZW50Q29va2llIHwgbnVsbCB7XHJcbiAgICBjb25zdCBjb25zZW50Q29va2llID0gZ2V0Q29va2llKENPTlNFTlRfQ09PS0lFX05BTUUpO1xyXG4gICAgbGV0IGNvbnNlbnRDb29raWVPYmo6IENvbnNlbnRDb29raWUgfCBudWxsO1xyXG5cclxuICAgIGlmIChjb25zZW50Q29va2llKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc2VudENvb2tpZU9iaiA9IEpTT04ucGFyc2UoY29uc2VudENvb2tpZSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGNvbnNlbnRDb29raWVPYmo7XHJcbn1cclxuXHJcbi8qKiBDaGVjayB0aGUgY29va2llIHByZWZlcmVuY2VzIG9iamVjdC5cclxuICpcclxuICogSWYgdGhlIGNvbnNlbnQgb2JqZWN0IGlzIG5vdCBwcmVzZW50LCBtYWxmb3JtZWQsIG9yIGluY29ycmVjdCB2ZXJzaW9uLFxyXG4gKiByZXR1cm5zIGZhbHNlLCBvdGhlcndpc2UgcmV0dXJucyB0cnVlLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsaWRDb25zZW50Q29va2llKG9wdGlvbnM6IENvbnNlbnRDb29raWUpIHtcclxuICAgIHJldHVybiAob3B0aW9ucyAmJiBvcHRpb25zLnZlcnNpb24gPj0gd2luZG93LkdEU19DT05TRU5UX0NPT0tJRV9WRVJTSU9OKTtcclxufVxyXG5cclxuLyoqIFVwZGF0ZSB0aGUgdXNlcidzIGNvb2tpZSBwcmVmZXJlbmNlcy4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldENvbnNlbnRDb29raWUob3B0aW9uczogQ29uc2VudENvb2tpZSkge1xyXG4gICAgbGV0IGNvb2tpZUNvbnNlbnQgPSBnZXRDb25zZW50Q29va2llKCk7XHJcblxyXG4gICAgaWYgKCFjb29raWVDb25zZW50KSB7XHJcbiAgICAgICAgY29va2llQ29uc2VudCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoREVGQVVMVF9DT09LSUVfQ09OU0VOVCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE1lcmdlIGN1cnJlbnQgY29va2llIHByZWZlcmVuY2VzIGFuZCBuZXcgcHJlZmVyZW5jZXNcclxuICAgIGZvciAodmFyIG9wdGlvbiBpbiBvcHRpb25zKSB7XHJcbiAgICAgICAgY29va2llQ29uc2VudFtvcHRpb25dID0gb3B0aW9uc1tvcHRpb25dO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEVzc2VudGlhbCBjb29raWVzIGNhbm5vdCBiZSBkZXNlbGVjdGVkLCBpZ25vcmUgdGhpcyBjb29raWUgdHlwZVxyXG4gICAgZGVsZXRlIGNvb2tpZUNvbnNlbnQuZXNzZW50aWFsO1xyXG5cclxuICAgIGNvb2tpZUNvbnNlbnQudmVyc2lvbiA9IHdpbmRvdy5HRFNfQ09OU0VOVF9DT09LSUVfVkVSU0lPTjtcclxuXHJcbiAgICAvLyBTZXQgdGhlIGNvbnNlbnQgY29va2llXHJcbiAgICBzZXRDb29raWUoQ09OU0VOVF9DT09LSUVfTkFNRSwgSlNPTi5zdHJpbmdpZnkoY29va2llQ29uc2VudCksIHsgZGF5czogMzY1IH0pO1xyXG5cclxuICAgIC8vIFVwZGF0ZSB0aGUgb3RoZXIgY29va2llc1xyXG4gICAgcmVzZXRDb29raWVzKCk7XHJcbn1cclxuXHJcbi8qKiBBcHBseSB0aGUgdXNlcidzIGNvb2tpZSBwcmVmZXJlbmNlc1xyXG4gKlxyXG4gKiBEZWxldGVzIGFueSBjb29raWVzIHRoZSB1c2VyIGhhcyBub3QgY29uc2VudGVkIHRvLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0Q29va2llcygpIHtcclxuICAgIHZhciBvcHRpb25zID0gZ2V0Q29uc2VudENvb2tpZSgpO1xyXG5cclxuICAgIC8vIElmIG5vIHByZWZlcmVuY2VzIG9yIG9sZCB2ZXJzaW9uIHVzZSB0aGUgZGVmYXVsdFxyXG4gICAgaWYgKCFpc1ZhbGlkQ29uc2VudENvb2tpZShvcHRpb25zKSkge1xyXG4gICAgICAgIG9wdGlvbnMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KERFRkFVTFRfQ09PS0lFX0NPTlNFTlQpKTtcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKHZhciBjb29raWVUeXBlIGluIG9wdGlvbnMpIHtcclxuICAgICAgICBpZiAoY29va2llVHlwZSA9PT0gJ3ZlcnNpb24nKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRXNzZW50aWFsIGNvb2tpZXMgY2Fubm90IGJlIGRlc2VsZWN0ZWQsIGlnbm9yZSB0aGlzIGNvb2tpZSB0eXBlXHJcbiAgICAgICAgaWYgKGNvb2tpZVR5cGUgPT09ICdlc3NlbnRpYWwnKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFvcHRpb25zW2Nvb2tpZVR5cGVdKSB7XHJcbiAgICAgICAgICAgIC8vIEZldGNoIHRoZSBjb29raWVzIGluIHRoYXQgY2F0ZWdvcnlcclxuICAgICAgICAgICAgdmFyIGNvb2tpZXNJbkNhdGVnb3J5ID0gQ09PS0lFX0NBVEVHT1JJRVNbY29va2llVHlwZV1cclxuXHJcbiAgICAgICAgICAgIGNvb2tpZXNJbkNhdGVnb3J5LmZvckVhY2goZnVuY3Rpb24gKGNvb2tpZSkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlQ29va2llKGNvb2tpZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gdXNlckFsbG93c0Nvb2tpZUNhdGVnb3J5KGNvb2tpZUNhdGVnb3J5LCBjb29raWVQcmVmZXJlbmNlcykge1xyXG4gICAgLy8gRXNzZW50aWFsIGNvb2tpZXMgYXJlIGFsd2F5cyBhbGxvd2VkXHJcbiAgICBpZiAoY29va2llQ2F0ZWdvcnkgPT09ICdlc3NlbnRpYWwnKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU29tZXRpbWVzIGNvb2tpZVByZWZlcmVuY2VzIGlzIG1hbGZvcm1lZCBpbiBzb21lIG9mIHRoZSB0ZXN0cywgc28gd2UgbmVlZCB0byBoYW5kbGUgdGhlc2VcclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIGNvb2tpZVByZWZlcmVuY2VzW2Nvb2tpZUNhdGVnb3J5XTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gdXNlckFsbG93c0Nvb2tpZShjb29raWVOYW1lOiBzdHJpbmcpIHtcclxuICAgIC8vIEFsd2F5cyBhbGxvdyBzZXR0aW5nIHRoZSBjb25zZW50IGNvb2tpZVxyXG4gICAgaWYgKGNvb2tpZU5hbWUgPT09IENPTlNFTlRfQ09PS0lFX05BTUUpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZXQgdGhlIGN1cnJlbnQgY29va2llIHByZWZlcmVuY2VzXHJcbiAgICB2YXIgY29va2llUHJlZmVyZW5jZXMgPSBnZXRDb25zZW50Q29va2llKCk7XHJcblxyXG4gICAgLy8gSWYgbm8gcHJlZmVyZW5jZXMgb3Igb2xkIHZlcnNpb24gdXNlIHRoZSBkZWZhdWx0XHJcbiAgICBpZiAoIWlzVmFsaWRDb25zZW50Q29va2llKGNvb2tpZVByZWZlcmVuY2VzKSkge1xyXG4gICAgICAgIGNvb2tpZVByZWZlcmVuY2VzID0gREVGQVVMVF9DT09LSUVfQ09OU0VOVDtcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKHZhciBjYXRlZ29yeSBpbiBDT09LSUVfQ0FURUdPUklFUykge1xyXG4gICAgICAgIHZhciBjb29raWVzSW5DYXRlZ29yeSA9IENPT0tJRV9DQVRFR09SSUVTW2NhdGVnb3J5XTtcclxuXHJcbiAgICAgICAgaWYgKGNvb2tpZXNJbkNhdGVnb3J5LmluZGV4T2YoY29va2llTmFtZSkgIT09ICctMScpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVzZXJBbGxvd3NDb29raWVDYXRlZ29yeShjYXRlZ29yeSwgY29va2llUHJlZmVyZW5jZXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBEZW55IHRoZSBjb29raWUgaWYgaXQgaXMgbm90IGtub3duIHRvIHVzXHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldENvb2tpZShuYW1lOiBzdHJpbmcpIHtcclxuICAgIHZhciBuYW1lRVEgPSBuYW1lICsgJz0nO1xyXG4gICAgdmFyIGNvb2tpZXMgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsnKTtcclxuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb29raWVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgdmFyIGNvb2tpZSA9IGNvb2tpZXNbaV07XHJcbiAgICAgICAgd2hpbGUgKGNvb2tpZS5jaGFyQXQoMCkgPT09ICcgJykge1xyXG4gICAgICAgICAgICBjb29raWUgPSBjb29raWUuc3Vic3RyaW5nKDEsIGNvb2tpZS5sZW5ndGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY29va2llLmluZGV4T2YobmFtZUVRKSA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGNvb2tpZS5zdWJzdHJpbmcobmFtZUVRLmxlbmd0aCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59XHJcblxyXG4vLyBkbyB3ZSBuZWVkIHRvIHNldCB0aGUgZG9tYWluP1xyXG5mdW5jdGlvbiBzZXRDb29raWUobmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBvcHRpb25zPzogQ29va2llT3B0aW9ucykge1xyXG4gICAgaWYgKHVzZXJBbGxvd3NDb29raWUobmFtZSkpIHtcclxuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgY29va2llU3RyaW5nID0gbmFtZSArICc9JyArIHZhbHVlICsgJzsgcGF0aD0vOyBTYW1lU2l0ZT1TdHJpY3QnO1xyXG4gICAgICAgIGlmIChvcHRpb25zLmRheXMpIHtcclxuICAgICAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICBkYXRlLnNldFRpbWUoZGF0ZS5nZXRUaW1lKCkgKyAob3B0aW9ucy5kYXlzICogMjQgKiA2MCAqIDYwICogMTAwMCkpO1xyXG4gICAgICAgICAgICBjb29raWVTdHJpbmcgPSBjb29raWVTdHJpbmcgKyAnOyBleHBpcmVzPScgKyBkYXRlLnRvVVRDU3RyaW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkb2N1bWVudC5sb2NhdGlvbi5wcm90b2NvbCA9PT0gJ2h0dHBzOicpIHtcclxuICAgICAgICAgICAgY29va2llU3RyaW5nID0gY29va2llU3RyaW5nICsgJzsgU2VjdXJlJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZG9jdW1lbnQuY29va2llID0gY29va2llU3RyaW5nO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBkZWxldGVDb29raWUobmFtZTogc3RyaW5nKSB7XHJcbiAgICBpZiAoZ2V0Q29va2llKG5hbWUpKSB7XHJcbiAgICAgICAgLy8gQ29va2llcyBuZWVkIHRvIGJlIGRlbGV0ZWQgaW4gdGhlIHNhbWUgbGV2ZWwgb2Ygc3BlY2lmaWNpdHkgaW4gd2hpY2ggdGhleSB3ZXJlIHNldFxyXG4gICAgICAgIC8vIElmIGEgY29va2llIHdhcyBzZXQgd2l0aCBhIHNwZWNpZmllZCBkb21haW4sIGl0IG5lZWRzIHRvIGJlIHNwZWNpZmllZCB3aGVuIGRlbGV0ZWRcclxuICAgICAgICAvLyBJZiBhIGNvb2tpZSB3YXNuJ3Qgc2V0IHdpdGggdGhlIGRvbWFpbiBhdHRyaWJ1dGUsIGl0IHNob3VsZG4ndCBiZSB0aGVyZSB3aGVuIGRlbGV0ZWRcclxuICAgICAgICAvLyBZb3UgY2FuJ3QgdGVsbCBpZiBhIGNvb2tpZSB3YXMgc2V0IHdpdGggYSBkb21haW4gYXR0cmlidXRlIG9yIG5vdCwgc28gdHJ5IGJvdGggb3B0aW9uc1xyXG4gICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IG5hbWUgKyAnPTtleHBpcmVzPVRodSwgMDEgSmFuIDE5NzAgMDA6MDA6MDAgR01UO3BhdGg9Lyc7XHJcbiAgICAgICAgZG9jdW1lbnQuY29va2llID0gbmFtZSArICc9O2V4cGlyZXM9VGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMCBHTVQ7ZG9tYWluPScgKyB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgKyAnO3BhdGg9Lyc7XHJcbiAgICAgICAgZG9jdW1lbnQuY29va2llID0gbmFtZSArICc9O2V4cGlyZXM9VGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMCBHTVQ7ZG9tYWluPS4nICsgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lICsgJztwYXRoPS8nO1xyXG4gICAgfVxyXG59Il19\n","export function nodeListForEach(nodes, callback) {\n    if (window.NodeList.prototype.forEach) {\n        return nodes.forEach(callback);\n    }\n    for (var i = 0; i < nodes.length; i++) {\n        callback.call(window, nodes[i], i, nodes);\n    }\n}\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvaGVscGVycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxNQUFNLFVBQVUsZUFBZSxDQUMzQixLQUEwQixFQUMxQixRQUE0RTtJQUU1RSxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLE9BQU8sRUFBRTtRQUNuQyxPQUFPLEtBQUssQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7S0FDbEM7SUFDRCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUNuQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO0tBQzdDO0FBQ0wsQ0FBQyIsImZpbGUiOiJjb21wb25lbnRzL2hlbHBlcnMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuZXhwb3J0IGZ1bmN0aW9uIG5vZGVMaXN0Rm9yRWFjaChcclxuICAgIG5vZGVzOiBOb2RlTGlzdE9mPEVsZW1lbnQ+LFxyXG4gICAgY2FsbGJhY2s6IChub2RlOiBFbGVtZW50LCBpbmRleDogbnVtYmVyLCBub2RlczogTm9kZUxpc3RPZjxFbGVtZW50PikgPT4gdm9pZFxyXG4pOiB2b2lkIHtcclxuICAgIGlmICh3aW5kb3cuTm9kZUxpc3QucHJvdG90eXBlLmZvckVhY2gpIHtcclxuICAgICAgICByZXR1cm4gbm9kZXMuZm9yRWFjaChjYWxsYmFjayk7XHJcbiAgICB9XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY2FsbGJhY2suY2FsbCh3aW5kb3csIG5vZGVzW2ldLCBpLCBub2Rlcyk7XHJcbiAgICB9XHJcbn1cclxuIl19\n","// from https://github.com/ideal-postcodes/postcode\n/**\n * @hidden\n */\nexport const DISTRICT_SPLIT_REGEX = /^([a-z]{1,2}\\d)([a-z])$/i;\n/**\n * Tests for the unit section of a postcode\n */\nexport const UNIT_REGEX = /[a-z]{2}$/i;\n/**\n * Tests for the inward code section of a postcode\n */\nexport const INCODE_REGEX = /\\d[a-z]{2}$/i;\n/**\n * Tests for the outward code section of a postcode\n */\nexport const OUTCODE_REGEX = /^[a-z]{1,2}\\d[a-z\\d]?$/i;\n/**\n * Tests for a valid postcode\n */\nexport const POSTCODE_REGEX = /^[a-z]{1,2}\\d[a-z\\d]?\\s*\\d[a-z]{2}$/i;\n/**\n * Test for a valid postcode embedded in text\n */\nexport const POSTCODE_CORPUS_REGEX = /[a-z]{1,2}\\d[a-z\\d]?\\s*\\d[a-z]{2}/gi;\n/**\n * Tests for the area section of a postcode\n */\nexport const AREA_REGEX = /^[a-z]{1,2}/i;\n/**\n * Invalid postcode prototype\n * @hidden\n */\nconst invalidPostcode = {\n    valid: false,\n    postcode: null,\n    incode: null,\n    outcode: null,\n    area: null,\n    district: null,\n    subDistrict: null,\n    sector: null,\n    unit: null,\n};\n/**\n * Return first elem of input is RegExpMatchArray or null if input null\n * @hidden\n */\nconst firstOrNull = (match) => {\n    if (match === null)\n        return null;\n    return match[0];\n};\nconst SPACE_REGEX = /\\s+/gi;\n/**\n * Drop all spaces and uppercase\n * @hidden\n */\nconst sanitize = (s) => s.replace(SPACE_REGEX, \"\").toUpperCase();\n/**\n * Sanitizes string and returns regex matches\n * @hidden\n */\nconst matchOn = (s, regex) => sanitize(s).match(regex);\n/**\n * Detects a \"valid\" postcode\n * - Starts and ends on a non-space character\n * - Any length of intervening space is allowed\n * - Must conform to one of following schemas:\n *  - AA1A 1AA\n *  - A1A 1AA\n *  - A1 1AA\n *  - A99 9AA\n *  - AA9 9AA\n *  - AA99 9AA\n */\nexport const isValid = (postcode) => postcode.match(POSTCODE_REGEX) !== null;\n/**\n * Returns true if string is a valid outcode\n */\nexport const validOutcode = (outcode) => outcode.match(OUTCODE_REGEX) !== null;\n/**\n * Returns a normalised postcode string (i.e. uppercased and properly spaced)\n *\n * Returns null if invalid postcode\n */\nexport const toNormalised = (postcode) => {\n    const outcode = toOutcode(postcode);\n    if (outcode === null)\n        return null;\n    const incode = toIncode(postcode);\n    if (incode === null)\n        return null;\n    return `${outcode} ${incode}`;\n};\n/**\n * Returns a correctly formatted outcode given a postcode\n *\n * Returns null if invalid postcode\n */\nexport const toOutcode = (postcode) => {\n    if (!isValid(postcode))\n        return null;\n    return sanitize(postcode).replace(INCODE_REGEX, \"\");\n};\n/**\n * Returns a correctly formatted incode given a postcode\n *\n * Returns null if invalid postcode\n */\nexport const toIncode = (postcode) => {\n    if (!isValid(postcode))\n        return null;\n    const match = matchOn(postcode, INCODE_REGEX);\n    return firstOrNull(match);\n};\n/**\n * Returns a correctly formatted area given a postcode\n *\n * Returns null if invalid postcode\n */\nexport const toArea = (postcode) => {\n    if (!isValid(postcode))\n        return null;\n    const match = matchOn(postcode, AREA_REGEX);\n    return firstOrNull(match);\n};\n/**\n * Returns a correctly formatted sector given a postcode\n *\n * Returns null if invalid postcode\n */\nexport const toSector = (postcode) => {\n    const outcode = toOutcode(postcode);\n    if (outcode === null)\n        return null;\n    const incode = toIncode(postcode);\n    if (incode === null)\n        return null;\n    return `${outcode} ${incode[0]}`;\n};\n/**\n * Returns a correctly formatted unit given a postcode\n *\n * Returns null if invalid postcode\n */\nexport const toUnit = (postcode) => {\n    if (!isValid(postcode))\n        return null;\n    const match = matchOn(postcode, UNIT_REGEX);\n    return firstOrNull(match);\n};\n/**\n * Returns a correctly formatted district given a postcode\n *\n * Returns null if invalid postcode\n *\n * @example\n *\n * ```\n * toDistrict(\"AA9 9AA\") // => \"AA9\"\n * toDistrict(\"A9A 9AA\") // => \"A9\"\n * ```\n */\nexport const toDistrict = (postcode) => {\n    const outcode = toOutcode(postcode);\n    if (outcode === null)\n        return null;\n    const match = outcode.match(DISTRICT_SPLIT_REGEX);\n    if (match === null)\n        return outcode;\n    return match[1];\n};\n/**\n * Returns a correctly formatted subdistrict given a postcode\n *\n * Returns null if no subdistrict is available on valid postcode\n * Returns null if invalid postcode\n *\n * @example\n *\n * ```\n * toSubDistrict(\"AA9A 9AA\") // => \"AA9A\"\n * toSubDistrict(\"A9A 9AA\") // => \"A9A\"\n * toSubDistrict(\"AA9 9AA\") // => null\n * toSubDistrict(\"A9 9AA\") // => null\n * ```\n */\nexport const toSubDistrict = (postcode) => {\n    const outcode = toOutcode(postcode);\n    if (outcode === null)\n        return null;\n    const split = outcode.match(DISTRICT_SPLIT_REGEX);\n    if (split === null)\n        return null;\n    return outcode;\n};\n/**\n * Returns a ValidPostcode or InvalidPostcode object from a postcode string\n *\n * @example\n *\n * ```\n * import { parse } from \"postcode\";\n *\n * const {\n * postcode,    // => \"SW1A 2AA\"\n * outcode,     // => \"SW1A\"\n * incode,      // => \"2AA\"\n * area,        // => \"SW\"\n * district,    // => \"SW1\"\n * unit,        // => \"AA\"\n * sector,      // => \"SW1A 2\"\n * subDistrict, // => \"SW1A\"\n * valid,       // => true\n * } = parse(\"Sw1A     2aa\");\n *\n * const {\n * postcode,    // => null\n * outcode,     // => null\n * incode,      // => null\n * area,        // => null\n * district,    // => null\n * unit,        // => null\n * sector,      // => null\n * subDistrict, // => null\n * valid,       // => false\n * } = parse(\"    Oh no, ):   \");\n * ```\n */\nexport const parse = (postcode) => {\n    if (!isValid(postcode))\n        return Object.assign({}, invalidPostcode);\n    return {\n        valid: true,\n        postcode: toNormalised(postcode),\n        incode: toIncode(postcode),\n        outcode: toOutcode(postcode),\n        area: toArea(postcode),\n        district: toDistrict(postcode),\n        subDistrict: toSubDistrict(postcode),\n        sector: toSector(postcode),\n        unit: toUnit(postcode),\n    };\n};\n/**\n * Searches a body of text for postcode matches\n *\n * Returns an empty array if no match\n *\n * @example\n *\n * ```\n * // Retrieve valid postcodes in a body of text\n * const matches = match(\"The PM and her no.2 live at SW1A2aa and SW1A 2AB\"); // => [\"SW1A2aa\", \"SW1A 2AB\"]\n *\n * // Perform transformations like normalisation postcodes using `.map` and `toNormalised`\n * matches.map(toNormalised); // => [\"SW1A 2AA\", \"SW1A 2AB\"]\n *\n * // No matches yields empty array\n * match(\"Some London outward codes are SW1A, NW1 and E1\"); // => []\n * ```\n */\nexport const match = (corpus) => corpus.match(POSTCODE_CORPUS_REGEX) || [];\n/**\n * Replaces postcodes in a body of text with a string\n *\n * By default the replacement string is empty string `\"\"`\n *\n * @example\n *\n * ```\n * // Replace postcodes in a body of text\n * replace(\"The PM and her no.2 live at SW1A2AA and SW1A 2AB\");\n * // => { match: [\"SW1A2AA\", \"SW1A 2AB\"], result: \"The PM and her no.2 live at  and \" }\n *\n * // Add custom replacement\n * replace(\"The PM lives at SW1A 2AA\", \"Downing Street\");\n * // => { match: [\"SW1A 2AA\"], result: \"The PM lives at Downing Street\" };\n *\n * // No match\n * replace(\"Some London outward codes are SW1A, NW1 and E1\");\n * // => { match: [], result: \"Some London outward codes are SW1A, NW1 and E1\" }\n * ```\n */\nexport const replace = (corpus, replaceWith = \"\") => ({\n    match: match(corpus),\n    result: corpus.replace(POSTCODE_CORPUS_REGEX, replaceWith),\n});\nexport const FIXABLE_REGEX = /^\\s*[a-z01]{1,2}[0-9oi][a-z\\d]?\\s*[0-9oi][a-z01]{2}\\s*$/i;\n/**\n * Attempts to fix and clean a postcode. Specifically:\n * - Performs character conversion on obviously wrong and commonly mixed up letters (e.g. O => 0 and vice versa)\n * - Trims string\n * - Properly adds space between outward and inward codes\n *\n * If the postcode cannot be coerced into a valid format, the original string is returned\n *\n * @example\n * ```javascript\n * fix(\" SW1A  2AO\") => \"SW1A 2AO\" // Properly spaces\n * fix(\"SW1A 2A0\") => \"SW1A 2AO\" // 0 is coerced into \"0\"\n * ```\n *\n * Aims to be used in conjunction with parse to make postcode entry more forgiving:\n *\n * @example\n * ```javascript\n * const { inward } = parse(fix(\"SW1A 2A0\")); // inward = \"2AO\"\n * ```\n */\nexport const fix = (s) => {\n    const match = s.match(FIXABLE_REGEX);\n    if (match === null)\n        return s;\n    s = s.toUpperCase().trim().replace(/\\s+/gi, \"\");\n    const l = s.length;\n    const inward = s.slice(l - 3, l);\n    return `${coerceOutcode(s.slice(0, l - 3))} ${coerce(\"NLL\", inward)}`;\n};\nconst toLetter = {\n    \"0\": \"O\",\n    \"1\": \"I\",\n};\nconst toNumber = {\n    O: \"0\",\n    I: \"1\",\n};\nconst coerceOutcode = (i) => {\n    if (i.length === 2)\n        return coerce(\"LN\", i);\n    if (i.length === 3)\n        return coerce(\"L??\", i);\n    if (i.length === 4)\n        return coerce(\"LLN?\", i);\n    return i;\n};\n/**\n * Given a pattern of letters, numbers and unknowns represented as a sequence\n * of L, Ns and ? respectively; coerce them into the correct type given a\n * mapping of potentially confused letters\n *\n * @hidden\n *\n * @example coerce(\"LLN\", \"0O8\") => \"OO8\"\n */\nconst coerce = (pattern, input) => input\n    .split(\"\")\n    .reduce((acc, c, i) => {\n    const target = pattern.charAt(i);\n    if (target === \"N\")\n        acc.push(toNumber[c] || c);\n    if (target === \"L\")\n        acc.push(toLetter[c] || c);\n    if (target === \"?\")\n        acc.push(c);\n    return acc;\n}, [])\n    .join(\"\");\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvcG9zdGNvZGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsbURBQW1EO0FBRW5EOztHQUVHO0FBQ0gsTUFBTSxDQUFDLE1BQU0sb0JBQW9CLEdBQUcsMEJBQTBCLENBQUM7QUFDL0Q7O0dBRUc7QUFDSCxNQUFNLENBQUMsTUFBTSxVQUFVLEdBQUcsWUFBWSxDQUFDO0FBQ3ZDOztHQUVHO0FBQ0gsTUFBTSxDQUFDLE1BQU0sWUFBWSxHQUFHLGNBQWMsQ0FBQztBQUMzQzs7R0FFRztBQUNILE1BQU0sQ0FBQyxNQUFNLGFBQWEsR0FBRyx5QkFBeUIsQ0FBQztBQUN2RDs7R0FFRztBQUNILE1BQU0sQ0FBQyxNQUFNLGNBQWMsR0FBRyxzQ0FBc0MsQ0FBQztBQUVyRTs7R0FFRztBQUNILE1BQU0sQ0FBQyxNQUFNLHFCQUFxQixHQUFHLHFDQUFxQyxDQUFDO0FBRTNFOztHQUVHO0FBQ0gsTUFBTSxDQUFDLE1BQU0sVUFBVSxHQUFHLGNBQWMsQ0FBQztBQWdEekM7OztHQUdHO0FBQ0gsTUFBTSxlQUFlLEdBQW9CO0lBQ3JDLEtBQUssRUFBRSxLQUFLO0lBQ1osUUFBUSxFQUFFLElBQUk7SUFDZCxNQUFNLEVBQUUsSUFBSTtJQUNaLE9BQU8sRUFBRSxJQUFJO0lBQ2IsSUFBSSxFQUFFLElBQUk7SUFDVixRQUFRLEVBQUUsSUFBSTtJQUNkLFdBQVcsRUFBRSxJQUFJO0lBQ2pCLE1BQU0sRUFBRSxJQUFJO0lBQ1osSUFBSSxFQUFFLElBQUk7Q0FDYixDQUFDO0FBRUY7OztHQUdHO0FBQ0gsTUFBTSxXQUFXLEdBQUcsQ0FBQyxLQUE4QixFQUFpQixFQUFFO0lBQ2xFLElBQUksS0FBSyxLQUFLLElBQUk7UUFBRSxPQUFPLElBQUksQ0FBQztJQUNoQyxPQUFPLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNwQixDQUFDLENBQUM7QUFFRixNQUFNLFdBQVcsR0FBRyxPQUFPLENBQUM7QUFFNUI7OztHQUdHO0FBQ0gsTUFBTSxRQUFRLEdB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RyxDQUFDLE9BQWUsRUFBRSxLQUFhLEVBQVUsRUFBRSxDQUN0RCxLQUFLO0tBQ0EsS0FBSyxDQUFDLEVBQUUsQ0FBQztLQUNULE1BQU0sQ0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7SUFDNUIsTUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNqQyxJQUFJLE1BQU0sS0FBSyxHQUFHO1FBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDL0MsSUFBSSxNQUFNLEtBQUssR0FBRztRQUFFLEdBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQy9DLElBQUksTUFBTSxLQUFLLEdBQUc7UUFBRSxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2hDLE9BQU8sR0FBRyxDQUFDO0FBQ2YsQ0FBQyxFQUFFLEVBQUUsQ0FBQztLQUNMLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyIsImZpbGUiOiJjb21wb25lbnRzL3Bvc3Rjb2RlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gZnJvbSBodHRwczovL2dpdGh1Yi5jb20vaWRlYWwtcG9zdGNvZGVzL3Bvc3Rjb2RlXHJcblxyXG4vKipcclxuICogQGhpZGRlblxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IERJU1RSSUNUX1NQTElUX1JFR0VYID0gL14oW2Etel17MSwyfVxcZCkoW2Etel0pJC9pO1xyXG4vKipcclxuICogVGVzdHMgZm9yIHRoZSB1bml0IHNlY3Rpb24gb2YgYSBwb3N0Y29kZVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFVOSVRfUkVHRVggPSAvW2Etel17Mn0kL2k7XHJcbi8qKlxyXG4gKiBUZXN0cyBmb3IgdGhlIGlud2FyZCBjb2RlIHNlY3Rpb24gb2YgYSBwb3N0Y29kZVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IElOQ09ERV9SRUdFWCA9IC9cXGRbYS16XXsyfSQvaTtcclxuLyoqXHJcbiAqIFRlc3RzIGZvciB0aGUgb3V0d2FyZCBjb2RlIHNlY3Rpb24gb2YgYSBwb3N0Y29kZVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IE9VVENPREVfUkVHRVggPSAvXlthLXpdezEsMn1cXGRbYS16XFxkXT8kL2k7XHJcbi8qKlxyXG4gKiBUZXN0cyBmb3IgYSB2YWxpZCBwb3N0Y29kZVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFBPU1RDT0RFX1JFR0VYID0gL15bYS16XXsxLDJ9XFxkW2EtelxcZF0/XFxzKlxcZFthLXpdezJ9JC9pO1xyXG5cclxuLyoqXHJcbiAqIFRlc3QgZm9yIGEgdmFsaWQgcG9zdGNvZGUgZW1iZWRkZWQgaW4gdGV4dFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFBPU1RDT0RFX0NPUlBVU19SRUdFWCA9IC9bYS16XXsxLDJ9XFxkW2EtelxcZF0/XFxzKlxcZFthLXpdezJ9L2dpO1xyXG5cclxuLyoqXHJcbiAqIFRlc3RzIGZvciB0aGUgYXJlYSBzZWN0aW9uIG9mIGEgcG9zdGNvZGVcclxuICovXHJcbmV4cG9ydCBjb25zdCBBUkVBX1JFR0VYID0gL15bYS16XXsxLDJ9L2k7XHJcblxyXG4vKipcclxuICogQGhpZGRlblxyXG4gKi9cclxuaW50ZXJmYWNlIFZhbGlkYXRvciB7XHJcbiAgICAoaW5wdXQ6IHN0cmluZyk6IGJvb2xlYW47XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAaGlkZGVuXHJcbiAqL1xyXG5pbnRlcmZhY2UgUGFyc2VyIHtcclxuICAgIC8qKlxyXG4gICAgICogQGhpZGRlblxyXG4gICAgICovXHJcbiAgICAocG9zdGNvZGU6IHN0cmluZyk6IHN0cmluZyB8IG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIGEgdmFsaWQgcG9zdGNvZGVcclxuICpcclxuICogTm90ZSB0aGF0IHJlc3VsdHMgd2lsbCBiZSBub3JtYWxpc2VkIChpLmUuIGNvcnJlY3RseSBmb3JtYXR0ZWQpLCBpbmNsdWRpbmcgYHBvc3Rjb2RlYFxyXG4gKi9cclxudHlwZSBWYWxpZFBvc3Rjb2RlID0ge1xyXG4gICAgdmFsaWQ6IHRydWU7XHJcbiAgICBwb3N0Y29kZTogc3RyaW5nO1xyXG4gICAgaW5jb2RlOiBzdHJpbmc7XHJcbiAgICBvdXRjb2RlOiBzdHJpbmc7XHJcbiAgICBhcmVhOiBzdHJpbmc7XHJcbiAgICBkaXN0cmljdDogc3RyaW5nO1xyXG4gICAgc3ViRGlzdHJpY3Q6IHN0cmluZyB8IG51bGw7XHJcbiAgICBzZWN0b3I6IHN0cmluZztcclxuICAgIHVuaXQ6IHN0cmluZztcclxufTtcclxuXHJcbnR5cGUgSW52YWxpZFBvc3Rjb2RlID0ge1xyXG4gICAgdmFsaWQ6IGZhbHNlO1xyXG4gICAgcG9zdGNvZGU6IG51bGw7XHJcbiAgICBpbmNvZGU6IG51bGw7XHJcbiAgICBvdXRjb2RlOiBudWxsO1xyXG4gICAgYXJlYTogbnVsbDtcclxuICAgIGRpc3RyaWN0OiBudWxsO1xyXG4gICAgc3ViRGlzdHJpY3Q6IG51bGw7XHJcbiAgICBzZWN0b3I6IG51bGw7XHJcbiAgICB1bml0OiBudWxsO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEludmFsaWQgcG9zdGNvZGUgcHJvdG90eXBlXHJcbiAqIEBoaWRkZW5cclxuICovXHJcbmNvbnN0IGludmFsaWRQb3N0Y29kZTogSW52YWxpZFBvc3Rjb2RlID0ge1xyXG4gICAgdmFsaWQ6IGZhbHNlLFxyXG4gICAgcG9zdGNvZGU6IG51bGwsXHJcbiAgICBpbmNvZGU6IG51bGwsXHJcbiAgICBvdXRjb2RlOiBudWxsLFxyXG4gICAgYXJlYTogbnVsbCxcclxuICAgIGRpc3RyaWN0OiBudWxsLFxyXG4gICAgc3ViRGlzdHJpY3Q6IG51bGwsXHJcbiAgICBzZWN0b3I6IG51bGwsXHJcbiAgICB1bml0OiBudWxsLFxyXG59O1xyXG5cclxuLyoqXHJcbiAqIFJldHVybiBmaXJzdCBlbGVtIG9mIGlucHV0IGlzIFJlZ0V4cE1hdGNoQXJyYXkgb3IgbnVsbCBpZiBpbnB1dCBudWxsXHJcbiAqIEBoaWRkZW5cclxuICovXHJcbmNvbnN0IGZpcnN0T3JOdWxsID0gKG1hdGNoOiBSZWdFeHBNYXRjaEFycmF5IHwgbnVsbCk6IHN0cmluZyB8IG51bGwgPT4ge1xyXG4gICAgaWYgKG1hdGNoID09PSBudWxsKSByZXR1cm4gbnVsbDtcclxuICAgIHJldHVybiBtYXRjaFswXTtcclxufTtcclxuXHJcbmNvbnN0IFNQQUNFX1JFR0VYID0gL1xccysvZ2k7XHJcblxyXG4vKipcclxuICogRHJvcCBhbGwgc3BhY2VzIGFuZCB1cHBlcmNhc2VcclxuICogQGhpZGRlblxyXG4gKi9cclxuY29uc3Qgc2FuaXRpemUgPSAoczogc3RyaW5nKTogc3RyaW5nID0+XHJcbiAgICBzLnJlcGxhY2UoU1BBQ0VfUkVHRVgsIFwiXCIpLnRvVXBwZXJDYXNlKCk7XHJcblxyXG4vKipcclxuICogU2FuaXRpemVzIHN0cmluZyBhbmQgcmV0dXJucyByZWdleCBtYXRjaGVzXHJcbiAqIEBoaWRkZW5cclxuICovXHJcbmNvbnN0IG1hdGNoT24gPSAoczogc3RyaW5nLCByZWdleDogUmVnRXhwKTogUmVnRXhwTWF0Y2hBcnJheSB8IG51bGwgPT5cclxuICAgIHNhbml0aXplKHMpLm1hdGNoKHJlZ2V4KTtcclxuXHJcbi8qKlxyXG4gKiBEZXRlY3RzIGEgXCJ2YWxpZFwiIHBvc3Rjb2RlXHJcbiAqIC0gU3RhcnRzIGFuZCBlbmRzIG9uIGEgbm9uLXNwYWNlIGNoYXJhY3RlclxyXG4gKiAtIEFueSBsZW5ndGggb2YgaW50ZXJ2ZW5pbmcgc3BhY2UgaXMgYWxsb3dlZFxyXG4gKiAtIE11c3QgY29uZm9ybSB0byBvbmUgb2YgZm9sbG93aW5nIHNjaGVtYXM6XHJcbiAqICAtIEFBMUEgMUFBXHJcbiAqICAtIEExQSAxQUFcclxuICogIC0gQTEgMUFBXHJcbiAqICAtIEE5OSA5QUFcclxuICogIC0gQUE5IDlBQVxyXG4gKiAgLSBBQTk5IDlBQVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGlzVmFsaWQ6IFZhbGlkYXRvciA9IChwb3N0Y29kZSkgPT5cclxuICAgIHBvc3Rjb2RlLm1hdGNoKFBPU1RDT0RFX1JFR0VYKSAhPT0gbnVsbDtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRydWUgaWYgc3RyaW5nIGlzIGEgdmFsaWQgb3V0Y29kZVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHZhbGlkT3V0Y29kZTogVmFsaWRhdG9yID0gKG91dGNvZGUpID0+XHJcbiAgICBvdXRjb2RlLm1hdGNoKE9VVENPREVfUkVHRVgpICE9PSBudWxsO1xyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgYSBub3JtYWxpc2VkIHBvc3Rjb2RlIHN0cmluZyAoaS5lLiB1cHBlcmNhc2VkIGFuZCBwcm9wZXJseSBzcGFjZWQpXHJcbiAqXHJcbiAqIFJldHVybnMgbnVsbCBpZiBpbnZhbGlkIHBvc3Rjb2RlXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgdG9Ob3JtYWxpc2VkOiBQYXJzZXIgPSAocG9zdGNvZGUpID0+IHtcclxuICAgIGNvbnN0IG91dGNvZGUgPSB0b091dGNvZGUocG9zdGNvZGUpO1xyXG4gICAgaWYgKG91dGNvZGUgPT09IG51bGwpIHJldHVybiBudWxsO1xyXG4gICAgY29uc3QgaW5jb2RlID0gdG9JbmNvZGUocG9zdGNvZGUpO1xyXG4gICAgaWYgKGluY29kZSA9PT0gbnVsbCkgcmV0dXJuIG51bGw7XHJcbiAgICByZXR1cm4gYCR7b3V0Y29kZX0gJHtpbmNvZGV9YDtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgY29ycmVjdGx5IGZvcm1hdHRlZCBvdXRjb2RlIGdpdmVuIGEgcG9zdGNvZGVcclxuICpcclxuICogUmV0dXJucyBudWxsIGlmIGludmFsaWQgcG9zdGNvZGVcclxuICovXHJcbmV4cG9ydCBjb25zdCB0b091dGNvZGU6IFBhcnNlciA9IChwb3N0Y29kZSkgPT4ge1xyXG4gICAgaWYgKCFpc1ZhbGlkKHBvc3Rjb2RlKSkgcmV0dXJuIG51bGw7XHJcbiAgICByZXR1cm4gc2FuaXRpemUocG9zdGNvZGUpLnJlcGxhY2UoSU5DT0RFX1JFR0VYLCBcIlwiKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgY29ycmVjdGx5IGZvcm1hdHRlZCBpbmNvZGUgZ2l2ZW4gYSBwb3N0Y29kZVxyXG4gKlxyXG4gKiBSZXR1cm5zIG51bGwgaWYgaW52YWxpZCBwb3N0Y29kZVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHRvSW5jb2RlOiBQYXJzZXIgPSAocG9zdGNvZGUpID0+IHtcclxuICAgIGlmICghaXNWYWxpZChwb3N0Y29kZSkpIHJldHVybiBudWxsO1xyXG4gICAgY29uc3QgbWF0Y2ggPSBtYXRjaE9uKHBvc3Rjb2RlLCBJTkNPREVfUkVHRVgpO1xyXG4gICAgcmV0dXJuIGZpcnN0T3JOdWxsKG1hdGNoKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgY29ycmVjdGx5IGZvcm1hdHRlZCBhcmVhIGdpdmVuIGEgcG9zdGNvZGVcclxuICpcclxuICogUmV0dXJucyBudWxsIGlmIGludmFsaWQgcG9zdGNvZGVcclxuICovXHJcbmV4cG9ydCBjb25zdCB0b0FyZWE6IFBhcnNlciA9IChwb3N0Y29kZSkgPT4ge1xyXG4gICAgaWYgKCFpc1ZhbGlkKHBvc3Rjb2RlKSkgcmV0dXJuIG51bGw7XHJcbiAgICBjb25zdCBtYXRjaCA9IG1hdGNoT24ocG9zdGNvZGUsIEFSRUFfUkVHRVgpO1xyXG4gICAgcmV0dXJuIGZpcnN0T3JOdWxsKG1hdGNoKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgY29ycmVjdGx5IGZvcm1hdHRlZCBzZWN0b3IgZ2l2ZW4gYSBwb3N0Y29kZVxyXG4gKlxyXG4gKiBSZXR1cm5zIG51bGwgaWYgaW52YWxpZCBwb3N0Y29kZVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHRvU2VjdG9yOiBQYXJzZXIgPSAocG9zdGNvZGUpID0+IHtcclxuICAgIGNvbnN0IG91dGNvZGUgPSB0b091dGNvZGUocG9zdGNvZGUpO1xyXG4gICAgaWYgKG91dGNvZGUgPT09IG51bGwpIHJldHVybiBudWxsO1xyXG4gICAgY29uc3QgaW5jb2RlID0gdG9JbmNvZGUocG9zdGNvZGUpO1xyXG4gICAgaWYgKGluY29kZSA9PT0gbnVsbCkgcmV0dXJuIG51bGw7XHJcbiAgICByZXR1cm4gYCR7b3V0Y29kZX0gJHtpbmNvZGVbMF19YDtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgY29ycmVjdGx5IGZvcm1hdHRlZCB1bml0IGdpdmVuIGEgcG9zdGNvZGVcclxuICpcclxuICogUmV0dXJucyBudWxsIGlmIGludmFsaWQgcG9zdGNvZGVcclxuICovXHJcbmV4cG9ydCBjb25zdCB0b1VuaXQ6IFBhcnNlciA9IChwb3N0Y29kZSkgPT4ge1xyXG4gICAgaWYgKCFpc1ZhbGlkKHBvc3Rjb2RlKSkgcmV0dXJuIG51bGw7XHJcbiAgICBjb25zdCBtYXRjaCA9IG1hdGNoT24ocG9zdGNvZGUsIFVOSVRfUkVHRVgpO1xyXG4gICAgcmV0dXJuIGZpcnN0T3JOdWxsKG1hdGNoKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgY29ycmVjdGx5IGZvcm1hdHRlZCBkaXN0cmljdCBnaXZlbiBhIHBvc3Rjb2RlXHJcbiAqXHJcbiAqIFJldHVybnMgbnVsbCBpZiBpbnZhbGlkIHBvc3Rjb2RlXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqXHJcbiAqIGBgYFxyXG4gKiB0b0Rpc3RyaWN0KFwiQUE5IDlBQVwiKSAvLyA9PiBcIkFBOVwiXHJcbiAqIHRvRGlzdHJpY3QoXCJBOUEgOUFBXCIpIC8vID0+IFwiQTlcIlxyXG4gKiBgYGBcclxuICovXHJcbmV4cG9ydCBjb25zdCB0b0Rpc3RyaWN0OiBQYXJzZXIgPSAocG9zdGNvZGUpID0+IHtcclxuICAgIGNvbnN0IG91dGNvZGUgPSB0b091dGNvZGUocG9zdGNvZGUpO1xyXG4gICAgaWYgKG91dGNvZGUgPT09IG51bGwpIHJldHVybiBudWxsO1xyXG4gICAgY29uc3QgbWF0Y2ggPSBvdXRjb2RlLm1hdGNoKERJU1RSSUNUX1NQTElUX1JFR0VYKTtcclxuICAgIGlmIChtYXRjaCA9PT0gbnVsbCkgcmV0dXJuIG91dGNvZGU7XHJcbiAgICByZXR1cm4gbWF0Y2hbMV07XHJcbn07XHJcblxyXG4vKipcclxuICogUmV0dXJucyBhIGNvcnJlY3RseSBmb3JtYXR0ZWQgc3ViZGlzdHJpY3QgZ2l2ZW4gYSBwb3N0Y29kZVxyXG4gKlxyXG4gKiBSZXR1cm5zIG51bGwgaWYgbm8gc3ViZGlzdHJpY3QgaXMgYXZhaWxhYmxlIG9uIHZhbGlkIHBvc3Rjb2RlXHJcbiAqIFJldHVybnMgbnVsbCBpZiBpbnZhbGlkIHBvc3Rjb2RlXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqXHJcbiAqIGBgYFxyXG4gKiB0b1N1YkRpc3RyaWN0KFwiQUE5QSA5QUFcIikgLy8gPT4gXCJBQTlBXCJcclxuICogdG9TdWJEaXN0cmljdChcIkE5QSA5QUFcIikgLy8gPT4gXCJBOUFcIlxyXG4gKiB0b1N1YkRpc3RyaWN0KFwiQUE5IDlBQVwiKSAvLyA9PiBudWxsXHJcbiAqIHRvU3ViRGlzdHJpY3QoXCJBOSA5QUFcIikgLy8gPT4gbnVsbFxyXG4gKiBgYGBcclxuICovXHJcbmV4cG9ydCBjb25zdCB0b1N1YkRpc3RyaWN0OiBQYXJzZXIgPSAocG9zdGNvZGUpID0+IHtcclxuICAgIGNvbnN0IG91dGNvZGUgPSB0b091dGNvZGUocG9zdGNvZGUpO1xyXG4gICAgaWYgKG91dGNvZGUgPT09IG51bGwpIHJldHVybiBudWxsO1xyXG4gICAgY29uc3Qgc3BsaXQgPSBvdXRjb2RlLm1hdGNoKERJU1RSSUNUX1NQTElUX1JFR0VYKTtcclxuICAgIGlmIChzcGxpdCA9PT0gbnVsbCkgcmV0dXJuIG51bGw7XHJcbiAgICByZXR1cm4gb3V0Y29kZTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgVmFsaWRQb3N0Y29kZSBvciBJbnZhbGlkUG9zdGNvZGUgb2JqZWN0IGZyb20gYSBwb3N0Y29kZSBzdHJpbmdcclxuICpcclxuICogQGV4YW1wbGVcclxuICpcclxuICogYGBgXHJcbiAqIGltcG9ydCB7IHBhcnNlIH0gZnJvbSBcInBvc3Rjb2RlXCI7XHJcbiAqXHJcbiAqIGNvbnN0IHtcclxuICogcG9zdGNvZGUsICAgIC8vID0+IFwiU1cxQSAyQUFcIlxyXG4gKiBvdXRjb2RlLCAgICAgLy8gPT4gXCJTVzFBXCJcclxuICogaW5jb2RlLCAgICAgIC8vID0+IFwiMkFBXCJcclxuICogYXJlYSwgICAgICAgIC8vID0+IFwiU1dcIlxyXG4gKiBkaXN0cmljdCwgICAgLy8gPT4gXCJTVzFcIlxyXG4gKiB1bml0LCAgICAgICAgLy8gPT4gXCJBQVwiXHJcbiAqIHNlY3RvciwgICAgICAvLyA9PiBcIlNXMUEgMlwiXHJcbiAqIHN1YkRpc3RyaWN0LCAvLyA9PiBcIlNXMUFcIlxyXG4gKiB2YWxpZCwgICAgICAgLy8gPT4gdHJ1ZVxyXG4gKiB9ID0gcGFyc2UoXCJTdzFBICAgICAyYWFcIik7XHJcbiAqXHJcbiAqIGNvbnN0IHtcclxuICogcG9zdGNvZGUsICAgIC8vID0+IG51bGxcclxuICogb3V0Y29kZSwgICAgIC8vID0+IG51bGxcclxuICogaW5jb2RlLCAgICAgIC8vID0+IG51bGxcclxuICogYXJlYSwgICAgICAgIC8vID0+IG51bGxcclxuICogZGlzdHJpY3QsICAgIC8vID0+IG51bGxcclxuICogdW5pdCwgICAgICAgIC8vID0+IG51bGxcclxuICogc2VjdG9yLCAgICAgIC8vID0+IG51bGxcclxuICogc3ViRGlzdHJpY3QsIC8vID0+IG51bGxcclxuICogdmFsaWQsICAgICAgIC8vID0+IGZhbHNlXHJcbiAqIH0gPSBwYXJzZShcIiAgICBPaCBubywgKTogICBcIik7XHJcbiAqIGBgYFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHBhcnNlID0gKHBvc3Rjb2RlOiBzdHJpbmcpOiBWYWxpZFBvc3Rjb2RlIHwgSW52YWxpZFBvc3Rjb2RlID0+IHtcclxuICAgIGlmICghaXNWYWxpZChwb3N0Y29kZSkpIHJldHVybiB7IC4uLmludmFsaWRQb3N0Y29kZSB9O1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB2YWxpZDogdHJ1ZSxcclxuICAgICAgICBwb3N0Y29kZTogdG9Ob3JtYWxpc2VkKHBvc3Rjb2RlKSBhcyBzdHJpbmcsXHJcbiAgICAgICAgaW5jb2RlOiB0b0luY29kZShwb3N0Y29kZSkgYXMgc3RyaW5nLFxyXG4gICAgICAgIG91dGNvZGU6IHRvT3V0Y29kZShwb3N0Y29kZSkgYXMgc3RyaW5nLFxyXG4gICAgICAgIGFyZWE6IHRvQXJlYShwb3N0Y29kZSkgYXMgc3RyaW5nLFxyXG4gICAgICAgIGRpc3RyaWN0OiB0b0Rpc3RyaWN0KHBvc3Rjb2RlKSBhcyBzdHJpbmcsXHJcbiAgICAgICAgc3ViRGlzdHJpY3Q6IHRvU3ViRGlzdHJpY3QocG9zdGNvZGUpLFxyXG4gICAgICAgIHNlY3RvcjogdG9TZWN0b3IocG9zdGNvZGUpIGFzIHN0cmluZyxcclxuICAgICAgICB1bml0OiB0b1VuaXQocG9zdGNvZGUpIGFzIHN0cmluZyxcclxuICAgIH07XHJcbn07XHJcblxyXG4vKipcclxuICogU2VhcmNoZXMgYSBib2R5IG9mIHRleHQgZm9yIHBvc3Rjb2RlIG1hdGNoZXNcclxuICpcclxuICogUmV0dXJucyBhbiBlbXB0eSBhcnJheSBpZiBubyBtYXRjaFxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKlxyXG4gKiBgYGBcclxuICogLy8gUmV0cmlldmUgdmFsaWQgcG9zdGNvZGVzIGluIGEgYm9keSBvZiB0ZXh0XHJcbiAqIGNvbnN0IG1hdGNoZXMgPSBtYXRjaChcIlRoZSBQTSBhbmQgaGVyIG5vLjIgbGl2ZSBhdCBTVzFBMmFhIGFuZCBTVzFBIDJBQlwiKTsgLy8gPT4gW1wiU1cxQTJhYVwiLCBcIlNXMUEgMkFCXCJdXHJcbiAqXHJcbiAqIC8vIFBlcmZvcm0gdHJhbnNmb3JtYXRpb25zIGxpa2Ugbm9ybWFsaXNhdGlvbiBwb3N0Y29kZXMgdXNpbmcgYC5tYXBgIGFuZCBgdG9Ob3JtYWxpc2VkYFxyXG4gKiBtYXRjaGVzLm1hcCh0b05vcm1hbGlzZWQpOyAvLyA9PiBbXCJTVzFBIDJBQVwiLCBcIlNXMUEgMkFCXCJdXHJcbiAqXHJcbiAqIC8vIE5vIG1hdGNoZXMgeWllbGRzIGVtcHR5IGFycmF5XHJcbiAqIG1hdGNoKFwiU29tZSBMb25kb24gb3V0d2FyZCBjb2RlcyBhcmUgU1cxQSwgTlcxIGFuZCBFMVwiKTsgLy8gPT4gW11cclxuICogYGBgXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgbWF0Y2ggPSAoY29ycHVzOiBzdHJpbmcpOiBzdHJpbmdbXSA9PlxyXG4gICAgY29ycHVzLm1hdGNoKFBPU1RDT0RFX0NPUlBVU19SRUdFWCkgfHwgW107XHJcblxyXG4vKipcclxuICogQGhpZGRlblxyXG4gKi9cclxuaW50ZXJmYWNlIFJlcGxhY2VSZXN1bHQge1xyXG4gICAgLyoqXHJcbiAgICAgKiBMaXN0IG9mIG1hdGNoaW5nIHBvc3Rjb2RlcyBmb3VuZCBpbnRleHRcclxuICAgICAqL1xyXG4gICAgbWF0Y2g6IHN0cmluZ1tdO1xyXG4gICAgLyoqXHJcbiAgICAgKiBCb2R5IG9mIHRleHQgd2l0aCBwb3N0Y29kZXMgcmVwbGFjZWQgKHdpdGggZW1wdHkgc3RyaW5nIGJ5IGRlZmF1bHQpXHJcbiAgICAgKi9cclxuICAgIHJlc3VsdDogc3RyaW5nO1xyXG59XHJcblxyXG4vKipcclxuICogUmVwbGFjZXMgcG9zdGNvZGVzIGluIGEgYm9keSBvZiB0ZXh0IHdpdGggYSBzdHJpbmdcclxuICpcclxuICogQnkgZGVmYXVsdCB0aGUgcmVwbGFjZW1lbnQgc3RyaW5nIGlzIGVtcHR5IHN0cmluZyBgXCJcImBcclxuICpcclxuICogQGV4YW1wbGVcclxuICpcclxuICogYGBgXHJcbiAqIC8vIFJlcGxhY2UgcG9zdGNvZGVzIGluIGEgYm9keSBvZiB0ZXh0XHJcbiAqIHJlcGxhY2UoXCJUaGUgUE0gYW5kIGhlciBuby4yIGxpdmUgYXQgU1cxQTJBQSBhbmQgU1cxQSAyQUJcIik7XHJcbiAqIC8vID0+IHsgbWF0Y2g6IFtcIlNXMUEyQUFcIiwgXCJTVzFBIDJBQlwiXSwgcmVzdWx0OiBcIlRoZSBQTSBhbmQgaGVyIG5vLjIgbGl2ZSBhdCAgYW5kIFwiIH1cclxuICpcclxuICogLy8gQWRkIGN1c3RvbSByZXBsYWNlbWVudFxyXG4gKiByZXBsYWNlKFwiVGhlIFBNIGxpdmVzIGF0IFNXMUEgMkFBXCIsIFwiRG93bmluZyBTdHJlZXRcIik7XHJcbiAqIC8vID0+IHsgbWF0Y2g6IFtcIlNXMUEgMkFBXCJdLCByZXN1bHQ6IFwiVGhlIFBNIGxpdmVzIGF0IERvd25pbmcgU3RyZWV0XCIgfTtcclxuICpcclxuICogLy8gTm8gbWF0Y2hcclxuICogcmVwbGFjZShcIlNvbWUgTG9uZG9uIG91dHdhcmQgY29kZXMgYXJlIFNXMUEsIE5XMSBhbmQgRTFcIik7XHJcbiAqIC8vID0+IHsgbWF0Y2g6IFtdLCByZXN1bHQ6IFwiU29tZSBMb25kb24gb3V0d2FyZCBjb2RlcyBhcmUgU1cxQSwgTlcxIGFuZCBFMVwiIH1cclxuICogYGBgXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgcmVwbGFjZSA9IChjb3JwdXM6IHN0cmluZywgcmVwbGFjZVdpdGggPSBcIlwiKTogUmVwbGFjZVJlc3VsdCA9PiAoe1xyXG4gICAgbWF0Y2g6IG1hdGNoKGNvcnB1cyksXHJcbiAgICByZXN1bHQ6IGNvcnB1cy5yZXBsYWNlKFBPU1RDT0RFX0NPUlBVU19SRUdFWCwgcmVwbGFjZVdpdGgpLFxyXG59KTtcclxuXHJcbmV4cG9ydCBjb25zdCBGSVhBQkxFX1JFR0VYID0gL15cXHMqW2EtejAxXXsxLDJ9WzAtOW9pXVthLXpcXGRdP1xccypbMC05b2ldW2EtejAxXXsyfVxccyokL2k7XHJcblxyXG4vKipcclxuICogQXR0ZW1wdHMgdG8gZml4IGFuZCBjbGVhbiBhIHBvc3Rjb2RlLiBTcGVjaWZpY2FsbHk6XHJcbiAqIC0gUGVyZm9ybXMgY2hhcmFjdGVyIGNvbnZlcnNpb24gb24gb2J2aW91c2x5IHdyb25nIGFuZCBjb21tb25seSBtaXhlZCB1cCBsZXR0ZXJzIChlLmcuIE8gPT4gMCBhbmQgdmljZSB2ZXJzYSlcclxuICogLSBUcmltcyBzdHJpbmdcclxuICogLSBQcm9wZXJseSBhZGRzIHNwYWNlIGJldHdlZW4gb3V0d2FyZCBhbmQgaW53YXJkIGNvZGVzXHJcbiAqXHJcbiAqIElmIHRoZSBwb3N0Y29kZSBjYW5ub3QgYmUgY29lcmNlZCBpbnRvIGEgdmFsaWQgZm9ybWF0LCB0aGUgb3JpZ2luYWwgc3RyaW5nIGlzIHJldHVybmVkXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogZml4KFwiIFNXMUEgIDJBT1wiKSA9PiBcIlNXMUEgMkFPXCIgLy8gUHJvcGVybHkgc3BhY2VzXHJcbiAqIGZpeChcIlNXMUEgMkEwXCIpID0+IFwiU1cxQSAyQU9cIiAvLyAwIGlzIGNvZXJjZWQgaW50byBcIjBcIlxyXG4gKiBgYGBcclxuICpcclxuICogQWltcyB0byBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggcGFyc2UgdG8gbWFrZSBwb3N0Y29kZSBlbnRyeSBtb3JlIGZvcmdpdmluZzpcclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiBjb25zdCB7IGlud2FyZCB9ID0gcGFyc2UoZml4KFwiU1cxQSAyQTBcIikpOyAvLyBpbndhcmQgPSBcIjJBT1wiXHJcbiAqIGBgYFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGZpeCA9IChzOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xyXG4gICAgY29uc3QgbWF0Y2ggPSBzLm1hdGNoKEZJWEFCTEVfUkVHRVgpO1xyXG4gICAgaWYgKG1hdGNoID09PSBudWxsKSByZXR1cm4gcztcclxuICAgIHMgPSBzLnRvVXBwZXJDYXNlKCkudHJpbSgpLnJlcGxhY2UoL1xccysvZ2ksIFwiXCIpO1xyXG4gICAgY29uc3QgbCA9IHMubGVuZ3RoO1xyXG4gICAgY29uc3QgaW53YXJkID0gcy5zbGljZShsIC0gMywgbCk7XHJcbiAgICByZXR1cm4gYCR7Y29lcmNlT3V0Y29kZShzLnNsaWNlKDAsIGwgLSAzKSl9ICR7Y29lcmNlKFwiTkxMXCIsIGlud2FyZCl9YDtcclxufTtcclxuXHJcbmNvbnN0IHRvTGV0dGVyOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xyXG4gICAgXCIwXCI6IFwiT1wiLFxyXG4gICAgXCIxXCI6IFwiSVwiLFxyXG59O1xyXG5cclxuY29uc3QgdG9OdW1iZXI6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XHJcbiAgICBPOiBcIjBcIixcclxuICAgIEk6IFwiMVwiLFxyXG59O1xyXG5cclxuY29uc3QgY29lcmNlT3V0Y29kZSA9IChpOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xyXG4gICAgaWYgKGkubGVuZ3RoID09PSAyKSByZXR1cm4gY29lcmNlKFwiTE5cIiwgaSk7XHJcbiAgICBpZiAoaS5sZW5ndGggPT09IDMpIHJldHVybiBjb2VyY2UoXCJMPz9cIiwgaSk7XHJcbiAgICBpZiAoaS5sZW5ndGggPT09IDQpIHJldHVybiBjb2VyY2UoXCJMTE4/XCIsIGkpO1xyXG4gICAgcmV0dXJuIGk7XHJcbn07XHJcblxyXG4vKipcclxuICogR2l2ZW4gYSBwYXR0ZXJuIG9mIGxldHRlcnMsIG51bWJlcnMgYW5kIHVua25vd25zIHJlcHJlc2VudGVkIGFzIGEgc2VxdWVuY2VcclxuICogb2YgTCwgTnMgYW5kID8gcmVzcGVjdGl2ZWx5OyBjb2VyY2UgdGhlbSBpbnRvIHRoZSBjb3JyZWN0IHR5cGUgZ2l2ZW4gYVxyXG4gKiBtYXBwaW5nIG9mIHBvdGVudGlhbGx5IGNvbmZ1c2VkIGxldHRlcnNcclxuICpcclxuICogQGhpZGRlblxyXG4gKlxyXG4gKiBAZXhhbXBsZSBjb2VyY2UoXCJMTE5cIiwgXCIwTzhcIikgPT4gXCJPTzhcIlxyXG4gKi9cclxuY29uc3QgY29lcmNlID0gKHBhdHRlcm46IHN0cmluZywgaW5wdXQ6IHN0cmluZyk6IHN0cmluZyA9PlxyXG4gICAgaW5wdXRcclxuICAgICAgICAuc3BsaXQoXCJcIilcclxuICAgICAgICAucmVkdWNlPHN0cmluZ1tdPigoYWNjLCBjLCBpKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IHBhdHRlcm4uY2hhckF0KGkpO1xyXG4gICAgICAgICAgICBpZiAodGFyZ2V0ID09PSBcIk5cIikgYWNjLnB1c2godG9OdW1iZXJbY10gfHwgYyk7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXQgPT09IFwiTFwiKSBhY2MucHVzaCh0b0xldHRlcltjXSB8fCBjKTtcclxuICAgICAgICAgICAgaWYgKHRhcmdldCA9PT0gXCI/XCIpIGFjYy5wdXNoKGMpO1xyXG4gICAgICAgICAgICByZXR1cm4gYWNjO1xyXG4gICAgICAgIH0sIFtdKVxyXG4gICAgICAgIC5qb2luKFwiXCIpOyJdfQ==\n","//todo: consent mode debugging/check: https://developers.google.com/tag-platform/devguides/consent-debugging\nimport { getConsentCookie, isValidConsentCookie } from './cookie-functions';\nimport { toOutcode } from './postcode';\nfunction gtag(command, ...args) {\n    window.dataLayer = window.dataLayer || [];\n    window.dataLayer.push(arguments);\n}\nlet GaMeasurementId = '';\n//todo: use prototype? (or class?)\n// (having an object (prototype/class) will ensure that GaMeasurementId will have already been set)\nexport default function initAnalytics(gaMeasurementId) {\n    // if the environment doesn't have a measurement id, don't load analytics\n    if (!Boolean(gaMeasurementId)) {\n        return;\n    }\n    GaMeasurementId = gaMeasurementId;\n    setDefaultConsent();\n    loadGaScript(gaMeasurementId);\n    gtag('js', new Date());\n    const pageViewParams = getPiiSafePageView(gaMeasurementId);\n    // set the config for auto generated events other than page_view\n    gtag('config', gaMeasurementId, {\n        send_page_view: false,\n        page_path: pageViewParams.page_path,\n        page_location: pageViewParams.page_location,\n        page_referrer: pageViewParams.referrer,\n        cookie_flags: 'secure'\n    });\n    const userConsent = getConsentCookie();\n    if (userConsent && isValidConsentCookie(userConsent) && userConsent.analytics) {\n        updateAnalyticsStorageConsent(true);\n    }\n    sendPageViewEvent();\n    sendFilterPageCustomEvent();\n}\nfunction setDefaultConsent() {\n    gtag('consent', 'default', {\n        'analytics_storage': 'denied'\n    });\n    gtag('set', 'url_passthrough', true);\n}\nexport function updateAnalyticsStorageConsent(granted, delayMs) {\n    let options = {\n        'analytics_storage': granted ? 'granted' : 'denied'\n    };\n    if (typeof delayMs !== 'undefined') {\n        options['wait_for_update'] = delayMs;\n    }\n    gtag('consent', 'update', options);\n}\nexport function sendPageViewEvent() {\n    // send the page_view event manually (https://developers.google.com/analytics/devguides/collection/gtagjs/pages#default_behavior)\n    gtag('event', 'page_view', getPiiSafePageView(GaMeasurementId));\n}\nexport function sendFilterPageCustomEvent() {\n    //todo: make filter page only\n    const element = document.getElementById('results');\n    const totalResults = element === null || element === void 0 ? void 0 : element.getAttribute('data-total-results');\n    if (totalResults === undefined)\n        return;\n    gtag('event', 'filter_page', {\n        'total_results': totalResults\n    });\n}\nexport function sendAnalyticsCustomEvent(accepted, source) {\n    gtag('event', 'analytics', {\n        'accepted': accepted,\n        'source': source\n    });\n}\nfunction loadGaScript(gaMeasurementId) {\n    const f = document.getElementsByTagName('script')[0];\n    const j = document.createElement('script');\n    j.async = true;\n    j.src = 'https://www.googletagmanager.com/gtag/js?id=' + gaMeasurementId;\n    f.parentNode.insertBefore(j, f);\n}\nfunction getPiiSafePageView(gaMeasurementId) {\n    const pageView = {\n        page_title: document.title,\n        send_to: gaMeasurementId,\n        referrer: '',\n        page_location: '',\n        page_path: ''\n    };\n    //todo: set as referrer or page_referrer in pageView - does it matter? is it only picking it up from the config?\n    //todo: get piisafe referrer function\n    if (document.referrer !== '') {\n        const referrerUrl = new URL(document.referrer);\n        const piiSafeReferrerQueryString = getPiiSafeQueryString(referrerUrl.search);\n        if (piiSafeReferrerQueryString == null) {\n            pageView.referrer = document.referrer;\n        }\n        else {\n            const urlArray = document.referrer.split('?');\n            pageView.referrer = urlArray[0] + piiSafeReferrerQueryString;\n        }\n    }\n    const piiSafeQueryString = getPiiSafeQueryString(window.location.search);\n    if (piiSafeQueryString == null) {\n        pageView.page_location = window.location.href;\n        pageView.page_path = window.location.pathname + window.location.search;\n        return pageView;\n    }\n    const urlArray = window.location.href.split('?');\n    pageView.page_location = urlArray[0] + piiSafeQueryString;\n    pageView.page_path = window.location.pathname + piiSafeQueryString;\n    return pageView;\n}\nfunction getPiiSafeQueryString(queryString) {\n    //todo: for safety, convert to lowercase, so that if the user changes the case of the url, we still don't collect pii\n    const queryParams = new URLSearchParams(queryString);\n    let postcode = queryParams.get('postcode');\n    if (postcode == null) {\n        // null indicates original query params were already pii safe\n        return null;\n    }\n    postcode = toOutcode(postcode);\n    queryParams.set('postcode', postcode);\n    queryParams.delete('latitude');\n    queryParams.delete('longitude');\n    return '?' + queryParams.toString();\n}\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvYW5hbHl0aWNzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLDRHQUE0RztBQUU1RyxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQTtBQUMzRSxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sWUFBWSxDQUFBO0FBRXRDLFNBQVMsSUFBSSxDQUFDLE9BQWUsRUFBRSxHQUFHLElBQVc7SUFDekMsTUFBTSxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUMsU0FBUyxJQUFJLEVBQUUsQ0FBQztJQUMxQyxNQUFNLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUNyQyxDQUFDO0FBRUQsSUFBSSxlQUFlLEdBQVcsRUFBRSxDQUFDO0FBRWpDLGtDQUFrQztBQUNsQyxtR0FBbUc7QUFDbkcsTUFBTSxDQUFDLE9BQU8sVUFBVSxhQUFhLENBQUMsZUFBdUI7SUFFekQseUVBQXlFO0lBQ3pFLElBQUksQ0FBQyxPQUFPLENBQUMsZUFBZSxDQUFDLEVBQUU7UUFDM0IsT0FBTztLQUNWO0lBRUQsZUFBZSxHQUFHLGVBQWUsQ0FBQztJQUVsQyxpQkFBaUIsRUFBRSxDQUFDO0lBRXBCLFlBQVksQ0FBQyxlQUFlLENBQUMsQ0FBQztJQUU5QixJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksSUFBSSxFQUFFLENBQUMsQ0FBQztJQUV2QixNQUFNLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQyxlQUFlLENBQUMsQ0FBQztJQUUzRCxnRUFBZ0U7SUFDaEUsSUFBSSxDQUFDLFFBQVEsRUFBRSxlQUFlLEVBQUU7UUFDNUIsY0FBYyxFQUFFLEtBQUs7UUFDckIsU0FBUyxFQUFFLGNBQWMsQ0FBQyxTQUFTO1FBQ25DLGFBQWEsRUFBRSxjQUFjLENBQUMsYUFBYTtRQUMzQyxhQUFhLEVBQUUsY0FBYyxDQUFDLFFBQVE7UUFDdEMsWUFBWSxFQUFFLFFBQVE7S0FDekIsQ0FBQyxDQUFDO0lBRUgsTUFBTSxX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QVcsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDM0MsSUFBSSxRQUFRLElBQUksSUFBSSxFQUFFO1FBQ2xCLDZEQUE2RDtRQUM3RCxPQUFPLElBQUksQ0FBQztLQUNmO0lBRUQsUUFBUSxHQUFHLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUMvQixXQUFXLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUN0QyxXQUFXLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQy9CLFdBQVcsQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUM7SUFFaEMsT0FBTyxHQUFHLEdBQUcsV0FBVyxDQUFDLFFBQVEsRUFBRSxDQUFDO0FBQ3hDLENBQUMiLCJmaWxlIjoiY29tcG9uZW50cy9hbmFseXRpY3MuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuLy90b2RvOiBjb25zZW50IG1vZGUgZGVidWdnaW5nL2NoZWNrOiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS90YWctcGxhdGZvcm0vZGV2Z3VpZGVzL2NvbnNlbnQtZGVidWdnaW5nXHJcblxyXG5pbXBvcnQgeyBnZXRDb25zZW50Q29va2llLCBpc1ZhbGlkQ29uc2VudENvb2tpZSB9IGZyb20gJy4vY29va2llLWZ1bmN0aW9ucydcclxuaW1wb3J0IHsgdG9PdXRjb2RlIH0gZnJvbSAnLi9wb3N0Y29kZSdcclxuXHJcbmZ1bmN0aW9uIGd0YWcoY29tbWFuZDogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xyXG4gICAgd2luZG93LmRhdGFMYXllciA9IHdpbmRvdy5kYXRhTGF5ZXIgfHwgW107XHJcbiAgICB3aW5kb3cuZGF0YUxheWVyLnB1c2goYXJndW1lbnRzKTtcclxufVxyXG5cclxubGV0IEdhTWVhc3VyZW1lbnRJZDogc3RyaW5nID0gJyc7XHJcblxyXG4vL3RvZG86IHVzZSBwcm90b3R5cGU/IChvciBjbGFzcz8pXHJcbi8vIChoYXZpbmcgYW4gb2JqZWN0IChwcm90b3R5cGUvY2xhc3MpIHdpbGwgZW5zdXJlIHRoYXQgR2FNZWFzdXJlbWVudElkIHdpbGwgaGF2ZSBhbHJlYWR5IGJlZW4gc2V0KVxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpbml0QW5hbHl0aWNzKGdhTWVhc3VyZW1lbnRJZDogc3RyaW5nKSB7XHJcblxyXG4gICAgLy8gaWYgdGhlIGVudmlyb25tZW50IGRvZXNuJ3QgaGF2ZSBhIG1lYXN1cmVtZW50IGlkLCBkb24ndCBsb2FkIGFuYWx5dGljc1xyXG4gICAgaWYgKCFCb29sZWFuKGdhTWVhc3VyZW1lbnRJZCkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgR2FNZWFzdXJlbWVudElkID0gZ2FNZWFzdXJlbWVudElkO1xyXG5cclxuICAgIHNldERlZmF1bHRDb25zZW50KCk7XHJcblxyXG4gICAgbG9hZEdhU2NyaXB0KGdhTWVhc3VyZW1lbnRJZCk7XHJcblxyXG4gICAgZ3RhZygnanMnLCBuZXcgRGF0ZSgpKTtcclxuXHJcbiAgICBjb25zdCBwYWdlVmlld1BhcmFtcyA9IGdldFBpaVNhZmVQYWdlVmlldyhnYU1lYXN1cmVtZW50SWQpO1xyXG5cclxuICAgIC8vIHNldCB0aGUgY29uZmlnIGZvciBhdXRvIGdlbmVyYXRlZCBldmVudHMgb3RoZXIgdGhhbiBwYWdlX3ZpZXdcclxuICAgIGd0YWcoJ2NvbmZpZycsIGdhTWVhc3VyZW1lbnRJZCwge1xyXG4gICAgICAgIHNlbmRfcGFnZV92aWV3OiBmYWxzZSwgLy9kaXNhYmxlIGF1dG8gcGFnZV92aWV3IG1lYXN1cmVtZW50XHJcbiAgICAgICAgcGFnZV9wYXRoOiBwYWdlVmlld1BhcmFtcy5wYWdlX3BhdGgsXHJcbiAgICAgICAgcGFnZV9sb2NhdGlvbjogcGFnZVZpZXdQYXJhbXMucGFnZV9sb2NhdGlvbixcclxuICAgICAgICBwYWdlX3JlZmVycmVyOiBwYWdlVmlld1BhcmFtcy5yZWZlcnJlcixcclxuICAgICAgICBjb29raWVfZmxhZ3M6ICdzZWN1cmUnXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCB1c2VyQ29uc2VudCA9IGdldENvbnNlbnRDb29raWUoKTtcclxuICAgIGlmICh1c2VyQ29uc2VudCAmJiBpc1ZhbGlkQ29uc2VudENvb2tpZSh1c2VyQ29uc2VudCkgJiYgdXNlckNvbnNlbnQuYW5hbHl0aWNzKSB7XHJcbiAgICAgICAgdXBkYXRlQW5hbHl0aWNzU3RvcmFnZUNvbnNlbnQodHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2VuZFBhZ2VWaWV3RXZlbnQoKTtcclxuICAgIHNlbmRGaWx0ZXJQYWdlQ3VzdG9tRXZlbnQoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0RGVmYXVsdENvbnNlbnQoKSB7XHJcbiAgICBndGFnKCdjb25zZW50JywgJ2RlZmF1bHQnLCB7XHJcbiAgICAgICAgJ2FuYWx5dGljc19zdG9yYWdlJzogJ2RlbmllZCdcclxuICAgIH0pO1xyXG5cclxuICAgIGd0YWcoJ3NldCcsICd1cmxfcGFzc3Rocm91Z2gnLCB0cnVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUFuYWx5dGljc1N0b3JhZ2VDb25zZW50KGdyYW50ZWQ6IGJvb2xlYW4sIGRlbGF5TXM/OiBudW1iZXIpIHtcclxuXHJcbiAgICBsZXQgb3B0aW9ucyA9IHtcclxuICAgICAgICAnYW5hbHl0aWNzX3N0b3JhZ2UnOiBncmFudGVkID8gJ2dyYW50ZWQnIDogJ2RlbmllZCdcclxuICAgIH07XHJcblxyXG4gICAgaWYgKHR5cGVvZiBkZWxheU1zICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIG9wdGlvbnNbJ3dhaXRfZm9yX3VwZGF0ZSddID0gZGVsYXlNcztcclxuICAgIH1cclxuXHJcbiAgICBndGFnKCdjb25zZW50JywgJ3VwZGF0ZScsIG9wdGlvbnMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2VuZFBhZ2VWaWV3RXZlbnQoKSB7XHJcbiAgICAvLyBzZW5kIHRoZSBwYWdlX3ZpZXcgZXZlbnQgbWFudWFsbHkgKGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2FuYWx5dGljcy9kZXZndWlkZXMvY29sbGVjdGlvbi9ndGFnanMvcGFnZXMjZGVmYXVsdF9iZWhhdmlvcilcclxuICAgIGd0YWcoJ2V2ZW50JywgJ3BhZ2VfdmlldycsIGdldFBpaVNhZmVQYWdlVmlldyhHYU1lYXN1cmVtZW50SWQpKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNlbmRGaWx0ZXJQYWdlQ3VzdG9tRXZlbnQoKSB7XHJcbiAgICAvL3RvZG86IG1ha2UgZmlsdGVyIHBhZ2Ugb25seVxyXG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN1bHRzJyk7XHJcbiAgICBjb25zdCB0b3RhbFJlc3VsdHMgPSBlbGVtZW50Py5nZXRBdHRyaWJ1dGUoJ2RhdGEtdG90YWwtcmVzdWx0cycpO1xyXG4gICAgaWYgKHRvdGFsUmVzdWx0cyA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgIHJldHVybjtcclxuXHJcbiAgICBndGFnKCdldmVudCcsICdmaWx0ZXJfcGFnZScsIHtcclxuICAgICAgICAndG90YWxfcmVzdWx0cyc6IHRvdGFsUmVzdWx0c1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZW5kQW5hbHl0aWNzQ3VzdG9tRXZlbnQoYWNjZXB0ZWQ6IGJvb2xlYW4sIHNvdXJjZTogc3RyaW5nKSB7XHJcblxyXG4gICAgZ3RhZygnZXZlbnQnLCAnYW5hbHl0aWNzJywge1xyXG4gICAgICAgICdhY2NlcHRlZCc6IGFjY2VwdGVkLFxyXG4gICAgICAgICdzb3VyY2UnOiBzb3VyY2VcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBsb2FkR2FTY3JpcHQoZ2FNZWFzdXJlbWVudElkOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGYgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0JylbMF07XHJcbiAgICBjb25zdCBqID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgICBqLmFzeW5jID0gdHJ1ZTtcclxuICAgIGouc3JjID0gJ2h0dHBzOi8vd3d3Lmdvb2dsZXRhZ21hbmFnZXIuY29tL2d0YWcvanM/aWQ9JyArIGdhTWVhc3VyZW1lbnRJZDtcclxuICAgIGYucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoaiwgZik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFBpaVNhZmVQYWdlVmlldyhnYU1lYXN1cmVtZW50SWQ6IHN0cmluZykge1xyXG5cclxuICAgIGNvbnN0IHBhZ2VWaWV3ID0ge1xyXG4gICAgICAgIHBhZ2VfdGl0bGU6IGRvY3VtZW50LnRpdGxlLFxyXG4gICAgICAgIHNlbmRfdG86IGdhTWVhc3VyZW1lbnRJZCxcclxuICAgICAgICByZWZlcnJlcjogJycsXHJcbiAgICAgICAgcGFnZV9sb2NhdGlvbjogJycsXHJcbiAgICAgICAgcGFnZV9wYXRoOiAnJ1xyXG4gICAgfTtcclxuXHJcbiAgICAvL3RvZG86IHNldCBhcyByZWZlcnJlciBvciBwYWdlX3JlZmVycmVyIGluIHBhZ2VWaWV3IC0gZG9lcyBpdCBtYXR0ZXI/IGlzIGl0IG9ubHkgcGlja2luZyBpdCB1cCBmcm9tIHRoZSBjb25maWc/XHJcbiAgICAvL3RvZG86IGdldCBwaWlzYWZlIHJlZmVycmVyIGZ1bmN0aW9uXHJcbiAgICBpZiAoZG9jdW1lbnQucmVmZXJyZXIgIT09ICcnKSB7XHJcbiAgICAgICAgY29uc3QgcmVmZXJyZXJVcmwgPSBuZXcgVVJMKGRvY3VtZW50LnJlZmVycmVyKTtcclxuICAgICAgICBjb25zdCBwaWlTYWZlUmVmZXJyZXJRdWVyeVN0cmluZyA9IGdldFBpaVNhZmVRdWVyeVN0cmluZyhyZWZlcnJlclVybC5zZWFyY2gpO1xyXG4gICAgICAgIGlmIChwaWlTYWZlUmVmZXJyZXJRdWVyeVN0cmluZyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHBhZ2VWaWV3LnJlZmVycmVyID0gZG9jdW1lbnQucmVmZXJyZXI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgdXJsQXJyYXkgPSBkb2N1bWVudC5yZWZlcnJlci5zcGxpdCgnPycpO1xyXG5cclxuICAgICAgICAgICAgcGFnZVZpZXcucmVmZXJyZXIgPSB1cmxBcnJheVswXSArIHBpaVNhZmVSZWZlcnJlclF1ZXJ5U3RyaW5nO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBwaWlTYWZlUXVlcnlTdHJpbmcgPSBnZXRQaWlTYWZlUXVlcnlTdHJpbmcod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7XHJcblxyXG4gICAgaWYgKHBpaVNhZmVRdWVyeVN0cmluZyA9PSBudWxsKSB7XHJcbiAgICAgICAgcGFnZVZpZXcucGFnZV9sb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xyXG4gICAgICAgIHBhZ2VWaWV3LnBhZ2VfcGF0aCA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSArIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2g7XHJcblxyXG4gICAgICAgIHJldHVybiBwYWdlVmlldztcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB1cmxBcnJheSA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KCc/Jyk7XHJcblxyXG4gICAgcGFnZVZpZXcucGFnZV9sb2NhdGlvbiA9IHVybEFycmF5WzBdICsgcGlpU2FmZVF1ZXJ5U3RyaW5nO1xyXG4gICAgcGFnZVZpZXcucGFnZV9wYXRoID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsgcGlpU2FmZVF1ZXJ5U3RyaW5nO1xyXG5cclxuICAgIHJldHVybiBwYWdlVmlldztcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0UGlpU2FmZVF1ZXJ5U3RyaW5nKHF1ZXJ5U3RyaW5nOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcclxuXHJcbiAgICAvL3RvZG86IGZvciBzYWZldHksIGNvbnZlcnQgdG8gbG93ZXJjYXNlLCBzbyB0aGF0IGlmIHRoZSB1c2VyIGNoYW5nZXMgdGhlIGNhc2Ugb2YgdGhlIHVybCwgd2Ugc3RpbGwgZG9uJ3QgY29sbGVjdCBwaWlcclxuICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhxdWVyeVN0cmluZyk7XHJcblxyXG4gICAgbGV0IHBvc3Rjb2RlID0gcXVlcnlQYXJhbXMuZ2V0KCdwb3N0Y29kZScpO1xyXG4gICAgaWYgKHBvc3Rjb2RlID09IG51bGwpIHtcclxuICAgICAgICAvLyBudWxsIGluZGljYXRlcyBvcmlnaW5hbCBxdWVyeSBwYXJhbXMgd2VyZSBhbHJlYWR5IHBpaSBzYWZlXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcG9zdGNvZGUgPSB0b091dGNvZGUocG9zdGNvZGUpO1xyXG4gICAgcXVlcnlQYXJhbXMuc2V0KCdwb3N0Y29kZScsIHBvc3Rjb2RlKTtcclxuICAgIHF1ZXJ5UGFyYW1zLmRlbGV0ZSgnbGF0aXR1ZGUnKTtcclxuICAgIHF1ZXJ5UGFyYW1zLmRlbGV0ZSgnbG9uZ2l0dWRlJyk7XHJcblxyXG4gICAgcmV0dXJuICc/JyArIHF1ZXJ5UGFyYW1zLnRvU3RyaW5nKCk7XHJcbn1cclxuIl19\n","import * as CookieFunctions from './cookie-functions.js';\n/*todo: we don't meed a pollyfill for bind, as long as we server up the non js version of the site for ie8 (https://caniuse.com/?search=bind) */\n/*import 'govuk-frontend/govuk/vendor/polyfills/Function/prototype/bind'*/\n/*todo: i think we're ok for this too (see above about ie8), but we _might_ need it for >8 ie (use? https://www.npmjs.com/package/events-polyfill)*/\n/*import 'govuk-frontend/govuk/vendor/polyfills/Event'*/\nimport { nodeListForEach } from './helpers';\nimport { sendPageViewEvent, sendFilterPageCustomEvent, sendAnalyticsCustomEvent, updateAnalyticsStorageConsent } from './analytics';\nconst cookieBannerAcceptSelector = '.js-cookie-banner-accept';\nconst cookieBannerRejectSelector = '.js-cookie-banner-reject';\nconst cookieBannerHideButtonSelector = '.js-cookie-banner-hide';\nconst cookieMessageSelector = '.js-cookie-banner-message';\nconst cookieConfirmationAcceptSelector = '.js-cookie-banner-confirmation-accept';\nconst cookieConfirmationRejectSelector = '.js-cookie-banner-confirmation-reject';\nexport default function CookieBanner($module) {\n    this.$module = $module;\n}\nCookieBanner.prototype.init = function () {\n    this.$cookieBanner = this.$module;\n    this.$acceptButton = this.$module.querySelector(cookieBannerAcceptSelector);\n    this.$rejectButton = this.$module.querySelector(cookieBannerRejectSelector);\n    this.$cookieMessage = this.$module.querySelector(cookieMessageSelector);\n    this.$cookieConfirmationAccept = this.$module.querySelector(cookieConfirmationAcceptSelector);\n    this.$cookieConfirmationReject = this.$module.querySelector(cookieConfirmationRejectSelector);\n    this.$cookieBannerHideButtons = this.$module.querySelectorAll(cookieBannerHideButtonSelector);\n    // Exit if no cookie banner module\n    // or if we're on the cookies page to avoid circular journeys\n    if (!this.$cookieBanner || this.onCookiesPage()) {\n        return;\n    }\n    // Show the cookie banner to users who have not consented or have an\n    // outdated consent cookie\n    var currentConsentCookie = CookieFunctions.getConsentCookie();\n    if (!currentConsentCookie || !CookieFunctions.isValidConsentCookie(currentConsentCookie)) {\n        // If the consent cookie version is not valid, we need to remove any cookies which have been\n        // set previously\n        CookieFunctions.resetCookies();\n        this.$cookieBanner.removeAttribute('hidden');\n    }\n    this.$acceptButton.addEventListener('click', this.acceptCookies.bind(this));\n    this.$rejectButton.addEventListener('click', this.rejectCookies.bind(this));\n    nodeListForEach(this.$cookieBannerHideButtons, function ($cookieBannerHideButton) {\n        $cookieBannerHideButton.addEventListener('click', this.hideBanner.bind(this));\n    }.bind(this));\n};\nCookieBanner.prototype.hideBanner = function () {\n    this.$cookieBanner.setAttribute('hidden', true);\n};\nCookieBanner.prototype.acceptCookies = function () {\n    // Do actual cookie consent bit\n    CookieFunctions.setConsentCookie({ analytics: true });\n    updateAnalyticsStorageConsent(true);\n    sendAnalyticsCustomEvent(true, 'banner');\n    sendPageViewEvent();\n    sendFilterPageCustomEvent();\n    // Hide banner and show confirmation message\n    this.$cookieMessage.setAttribute('hidden', true);\n    this.revealConfirmationMessage(this.$cookieConfirmationAccept);\n};\nCookieBanner.prototype.rejectCookies = function () {\n    updateAnalyticsStorageConsent(true);\n    sendAnalyticsCustomEvent(false, 'banner');\n    updateAnalyticsStorageConsent(false);\n    //setTimeout(CookieFunctions.setConsentCookie.bind({ analytics: false }), 250);\n    CookieFunctions.setConsentCookie({ analytics: false });\n    // Hide banner and show confirmation message\n    this.$cookieMessage.setAttribute('hidden', true);\n    this.revealConfirmationMessage(this.$cookieConfirmationReject);\n};\nCookieBanner.prototype.revealConfirmationMessage = function (confirmationMessage) {\n    confirmationMessage.removeAttribute('hidden');\n    // Set tabindex to -1 to make the confirmation banner focusable with JavaScript\n    if (!confirmationMessage.getAttribute('tabindex')) {\n        confirmationMessage.setAttribute('tabindex', '-1');\n        confirmationMessage.addEventListener('blur', function () {\n            confirmationMessage.removeAttribute('tabindex');\n        });\n    }\n    confirmationMessage.focus();\n};\nCookieBanner.prototype.onCookiesPage = function () {\n    return window.location.pathname === '/cookies/';\n};\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvY29va2llLWJhbm5lci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEtBQUssZUFBZSxNQUFNLHVCQUF1QixDQUFBO0FBQ3hELGdKQUFnSjtBQUNoSiwwRUFBMEU7QUFDMUUsb0pBQW9KO0FBQ3BKLHdEQUF3RDtBQUN4RCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sV0FBVyxDQUFBO0FBQzNDLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSx5QkFBeUIsRUFBRSx3QkFBd0IsRUFBRSw2QkFBNkIsRUFBRSxNQUFNLGFBQWEsQ0FBQztBQUVwSSxNQUFNLDBCQUEwQixHQUFHLDBCQUEwQixDQUFBO0FBQzdELE1BQU0sMEJBQTBCLEdBQUcsMEJBQTBCLENBQUE7QUFDN0QsTUFBTSw4QkFBOEIsR0FBRyx3QkFBd0IsQ0FBQTtBQUMvRCxNQUFNLHFCQUFxQixHQUFHLDJCQUEyQixDQUFBO0FBQ3pELE1BQU0sZ0NBQWdDLEdBQUcsdUNBQXVDLENBQUE7QUFDaEYsTUFBTSxnQ0FBZ0MsR0FBRyx1Q0FBdUMsQ0FBQTtBQUVoRixNQUFNLENBQUMsT0FBTyxVQUFVLFlBQVksQ0FBQyxPQUFvQjtJQUNyRCxJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztBQUMzQixDQUFDO0FBRUQsWUFBWSxDQUFDLFNBQVMsQ0FBQyxJQUFJLEdBQUc7SUFDMUIsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFBO0lBQ2pDLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsMEJBQTBCLENBQUMsQ0FBQTtJQUMzRSxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLDBCQUEwQixDQUFDLENBQUE7SUFDM0UsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFBO0lBQ3ZFLElBQUksQ0FB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eUIsQ0FBQyxDQUFBO0FBQ2xFLENBQUMsQ0FBQTtBQUVELFlBQVksQ0FBQyxTQUFTLENBQUMseUJBQXlCLEdBQUcsVUFBVSxtQkFBbUI7SUFDNUUsbUJBQW1CLENBQUMsZUFBZSxDQUFDLFFBQVEsQ0FBQyxDQUFBO0lBRTdDLCtFQUErRTtJQUMvRSxJQUFJLENBQUMsbUJBQW1CLENBQUMsWUFBWSxDQUFDLFVBQVUsQ0FBQyxFQUFFO1FBQy9DLG1CQUFtQixDQUFDLFlBQVksQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLENBQUE7UUFFbEQsbUJBQW1CLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxFQUFFO1lBQ3pDLG1CQUFtQixDQUFDLGVBQWUsQ0FBQyxVQUFVLENBQUMsQ0FBQTtRQUNuRCxDQUFDLENBQUMsQ0FBQTtLQUNMO0lBRUQsbUJBQW1CLENBQUMsS0FBSyxFQUFFLENBQUE7QUFDL0IsQ0FBQyxDQUFBO0FBRUQsWUFBWSxDQUFDLFNBQVMsQ0FBQyxhQUFhLEdBQUc7SUFDbkMsT0FBTyxNQUFNLENBQUMsUUFBUSxDQUFDLFFBQVEsS0FBSyxXQUFXLENBQUE7QUFDbkQsQ0FBQyxDQUFBIiwiZmlsZSI6ImNvbXBvbmVudHMvY29va2llLWJhbm5lci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIENvb2tpZUZ1bmN0aW9ucyBmcm9tICcuL2Nvb2tpZS1mdW5jdGlvbnMuanMnXHJcbi8qdG9kbzogd2UgZG9uJ3QgbWVlZCBhIHBvbGx5ZmlsbCBmb3IgYmluZCwgYXMgbG9uZyBhcyB3ZSBzZXJ2ZXIgdXAgdGhlIG5vbiBqcyB2ZXJzaW9uIG9mIHRoZSBzaXRlIGZvciBpZTggKGh0dHBzOi8vY2FuaXVzZS5jb20vP3NlYXJjaD1iaW5kKSAqL1xyXG4vKmltcG9ydCAnZ292dWstZnJvbnRlbmQvZ292dWsvdmVuZG9yL3BvbHlmaWxscy9GdW5jdGlvbi9wcm90b3R5cGUvYmluZCcqL1xyXG4vKnRvZG86IGkgdGhpbmsgd2UncmUgb2sgZm9yIHRoaXMgdG9vIChzZWUgYWJvdmUgYWJvdXQgaWU4KSwgYnV0IHdlIF9taWdodF8gbmVlZCBpdCBmb3IgPjggaWUgKHVzZT8gaHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvZXZlbnRzLXBvbHlmaWxsKSovXHJcbi8qaW1wb3J0ICdnb3Z1ay1mcm9udGVuZC9nb3Z1ay92ZW5kb3IvcG9seWZpbGxzL0V2ZW50JyovXHJcbmltcG9ydCB7IG5vZGVMaXN0Rm9yRWFjaCB9IGZyb20gJy4vaGVscGVycydcclxuaW1wb3J0IHsgc2VuZFBhZ2VWaWV3RXZlbnQsIHNlbmRGaWx0ZXJQYWdlQ3VzdG9tRXZlbnQsIHNlbmRBbmFseXRpY3NDdXN0b21FdmVudCwgdXBkYXRlQW5hbHl0aWNzU3RvcmFnZUNvbnNlbnQgfSBmcm9tICcuL2FuYWx5dGljcyc7XHJcblxyXG5jb25zdCBjb29raWVCYW5uZXJBY2NlcHRTZWxlY3RvciA9ICcuanMtY29va2llLWJhbm5lci1hY2NlcHQnXHJcbmNvbnN0IGNvb2tpZUJhbm5lclJlamVjdFNlbGVjdG9yID0gJy5qcy1jb29raWUtYmFubmVyLXJlamVjdCdcclxuY29uc3QgY29va2llQmFubmVySGlkZUJ1dHRvblNlbGVjdG9yID0gJy5qcy1jb29raWUtYmFubmVyLWhpZGUnXHJcbmNvbnN0IGNvb2tpZU1lc3NhZ2VTZWxlY3RvciA9ICcuanMtY29va2llLWJhbm5lci1tZXNzYWdlJ1xyXG5jb25zdCBjb29raWVDb25maXJtYXRpb25BY2NlcHRTZWxlY3RvciA9ICcuanMtY29va2llLWJhbm5lci1jb25maXJtYXRpb24tYWNjZXB0J1xyXG5jb25zdCBjb29raWVDb25maXJtYXRpb25SZWplY3RTZWxlY3RvciA9ICcuanMtY29va2llLWJhbm5lci1jb25maXJtYXRpb24tcmVqZWN0J1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ29va2llQmFubmVyKCRtb2R1bGU6IEhUTUxFbGVtZW50KSB7XHJcbiAgICB0aGlzLiRtb2R1bGUgPSAkbW9kdWxlO1xyXG59XHJcblxyXG5Db29raWVCYW5uZXIucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLiRjb29raWVCYW5uZXIgPSB0aGlzLiRtb2R1bGVcclxuICAgIHRoaXMuJGFjY2VwdEJ1dHRvbiA9IHRoaXMuJG1vZHVsZS5xdWVyeVNlbGVjdG9yKGNvb2tpZUJhbm5lckFjY2VwdFNlbGVjdG9yKVxyXG4gICAgdGhpcy4kcmVqZWN0QnV0dG9uID0gdGhpcy4kbW9kdWxlLnF1ZXJ5U2VsZWN0b3IoY29va2llQmFubmVyUmVqZWN0U2VsZWN0b3IpXHJcbiAgICB0aGlzLiRjb29raWVNZXNzYWdlID0gdGhpcy4kbW9kdWxlLnF1ZXJ5U2VsZWN0b3IoY29va2llTWVzc2FnZVNlbGVjdG9yKVxyXG4gICAgdGhpcy4kY29va2llQ29uZmlybWF0aW9uQWNjZXB0ID0gdGhpcy4kbW9kdWxlLnF1ZXJ5U2VsZWN0b3IoY29va2llQ29uZmlybWF0aW9uQWNjZXB0U2VsZWN0b3IpXHJcbiAgICB0aGlzLiRjb29raWVDb25maXJtYXRpb25SZWplY3QgPSB0aGlzLiRtb2R1bGUucXVlcnlTZWxlY3Rvcihjb29raWVDb25maXJtYXRpb25SZWplY3RTZWxlY3RvcilcclxuICAgIHRoaXMuJGNvb2tpZUJhbm5lckhpZGVCdXR0b25zID0gdGhpcy4kbW9kdWxlLnF1ZXJ5U2VsZWN0b3JBbGwoY29va2llQmFubmVySGlkZUJ1dHRvblNlbGVjdG9yKVxyXG5cclxuICAgIC8vIEV4aXQgaWYgbm8gY29va2llIGJhbm5lciBtb2R1bGVcclxuICAgIC8vIG9yIGlmIHdlJ3JlIG9uIHRoZSBjb29raWVzIHBhZ2UgdG8gYXZvaWQgY2lyY3VsYXIgam91cm5leXNcclxuICAgIGlmICghdGhpcy4kY29va2llQmFubmVyIHx8IHRoaXMub25Db29raWVzUGFnZSgpKSB7XHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2hvdyB0aGUgY29va2llIGJhbm5lciB0byB1c2VycyB3aG8gaGF2ZSBub3QgY29uc2VudGVkIG9yIGhhdmUgYW5cclxuICAgIC8vIG91dGRhdGVkIGNvbnNlbnQgY29va2llXHJcbiAgICB2YXIgY3VycmVudENvbnNlbnRDb29raWUgPSBDb29raWVGdW5jdGlvbnMuZ2V0Q29uc2VudENvb2tpZSgpXHJcblxyXG4gICAgaWYgKCFjdXJyZW50Q29uc2VudENvb2tpZSB8fCAhQ29va2llRnVuY3Rpb25zLmlzVmFsaWRDb25zZW50Q29va2llKGN1cnJlbnRDb25zZW50Q29va2llKSkge1xyXG4gICAgICAgIC8vIElmIHRoZSBjb25zZW50IGNvb2tpZSB2ZXJzaW9uIGlzIG5vdCB2YWxpZCwgd2UgbmVlZCB0byByZW1vdmUgYW55IGNvb2tpZXMgd2hpY2ggaGF2ZSBiZWVuXHJcbiAgICAgICAgLy8gc2V0IHByZXZpb3VzbHlcclxuICAgICAgICBDb29raWVGdW5jdGlvbnMucmVzZXRDb29raWVzKClcclxuXHJcbiAgICAgICAgdGhpcy4kY29va2llQmFubmVyLnJlbW92ZUF0dHJpYnV0ZSgnaGlkZGVuJylcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLiRhY2NlcHRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmFjY2VwdENvb2tpZXMuYmluZCh0aGlzKSlcclxuICAgIHRoaXMuJHJlamVjdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMucmVqZWN0Q29va2llcy5iaW5kKHRoaXMpKVxyXG5cclxuICAgIG5vZGVMaXN0Rm9yRWFjaCh0aGlzLiRjb29raWVCYW5uZXJIaWRlQnV0dG9ucywgZnVuY3Rpb24gKCRjb29raWVCYW5uZXJIaWRlQnV0dG9uKSB7XHJcbiAgICAgICAgJGNvb2tpZUJhbm5lckhpZGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhpZGVCYW5uZXIuYmluZCh0aGlzKSlcclxuICAgIH0uYmluZCh0aGlzKSlcclxufVxyXG5cclxuQ29va2llQmFubmVyLnByb3RvdHlwZS5oaWRlQmFubmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy4kY29va2llQmFubmVyLnNldEF0dHJpYnV0ZSgnaGlkZGVuJywgdHJ1ZSlcclxufVxyXG5cclxuQ29va2llQmFubmVyLnByb3RvdHlwZS5hY2NlcHRDb29raWVzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gRG8gYWN0dWFsIGNvb2tpZSBjb25zZW50IGJpdFxyXG4gICAgQ29va2llRnVuY3Rpb25zLnNldENvbnNlbnRDb29raWUoeyBhbmFseXRpY3M6IHRydWUgfSk7XHJcblxyXG4gICAgdXBkYXRlQW5hbHl0aWNzU3RvcmFnZUNvbnNlbnQodHJ1ZSk7XHJcblxyXG4gICAgc2VuZEFuYWx5dGljc0N1c3RvbUV2ZW50KHRydWUsICdiYW5uZXInKTtcclxuICAgIHNlbmRQYWdlVmlld0V2ZW50KCk7XHJcbiAgICBzZW5kRmlsdGVyUGFnZUN1c3RvbUV2ZW50KCk7XHJcblxyXG4gICAgLy8gSGlkZSBiYW5uZXIgYW5kIHNob3cgY29uZmlybWF0aW9uIG1lc3NhZ2VcclxuICAgIHRoaXMuJGNvb2tpZU1lc3NhZ2Uuc2V0QXR0cmlidXRlKCdoaWRkZW4nLCB0cnVlKVxyXG4gICAgdGhpcy5yZXZlYWxDb25maXJtYXRpb25NZXNzYWdlKHRoaXMuJGNvb2tpZUNvbmZpcm1hdGlvbkFjY2VwdClcclxufVxyXG5cclxuQ29va2llQmFubmVyLnByb3RvdHlwZS5yZWplY3RDb29raWVzID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIHVwZGF0ZUFuYWx5dGljc1N0b3JhZ2VDb25zZW50KHRydWUpO1xyXG5cclxuICAgIHNlbmRBbmFseXRpY3NDdXN0b21FdmVudChmYWxzZSwgJ2Jhbm5lcicpO1xyXG5cclxuICAgIHVwZGF0ZUFuYWx5dGljc1N0b3JhZ2VDb25zZW50KGZhbHNlKTtcclxuXHJcbiAgICAvL3NldFRpbWVvdXQoQ29va2llRnVuY3Rpb25zLnNldENvbnNlbnRDb29raWUuYmluZCh7IGFuYWx5dGljczogZmFsc2UgfSksIDI1MCk7XHJcbiAgICBDb29raWVGdW5jdGlvbnMuc2V0Q29uc2VudENvb2tpZSh7IGFuYWx5dGljczogZmFsc2UgfSk7XHJcblxyXG4gICAgLy8gSGlkZSBiYW5uZXIgYW5kIHNob3cgY29uZmlybWF0aW9uIG1lc3NhZ2VcclxuICAgIHRoaXMuJGNvb2tpZU1lc3NhZ2Uuc2V0QXR0cmlidXRlKCdoaWRkZW4nLCB0cnVlKVxyXG4gICAgdGhpcy5yZXZlYWxDb25maXJtYXRpb25NZXNzYWdlKHRoaXMuJGNvb2tpZUNvbmZpcm1hdGlvblJlamVjdClcclxufVxyXG5cclxuQ29va2llQmFubmVyLnByb3RvdHlwZS5yZXZlYWxDb25maXJtYXRpb25NZXNzYWdlID0gZnVuY3Rpb24gKGNvbmZpcm1hdGlvbk1lc3NhZ2UpIHtcclxuICAgIGNvbmZpcm1hdGlvbk1lc3NhZ2UucmVtb3ZlQXR0cmlidXRlKCdoaWRkZW4nKVxyXG5cclxuICAgIC8vIFNldCB0YWJpbmRleCB0byAtMSB0byBtYWtlIHRoZSBjb25maXJtYXRpb24gYmFubmVyIGZvY3VzYWJsZSB3aXRoIEphdmFTY3JpcHRcclxuICAgIGlmICghY29uZmlybWF0aW9uTWVzc2FnZS5nZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JykpIHtcclxuICAgICAgICBjb25maXJtYXRpb25NZXNzYWdlLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnLTEnKVxyXG5cclxuICAgICAgICBjb25maXJtYXRpb25NZXNzYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbmZpcm1hdGlvbk1lc3NhZ2UucmVtb3ZlQXR0cmlidXRlKCd0YWJpbmRleCcpXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBjb25maXJtYXRpb25NZXNzYWdlLmZvY3VzKClcclxufVxyXG5cclxuQ29va2llQmFubmVyLnByb3RvdHlwZS5vbkNvb2tpZXNQYWdlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSA9PT0gJy9jb29raWVzLydcclxufVxyXG4iXX0=\n","import { getConsentCookie, setConsentCookie } from './cookie-functions';\nimport { nodeListForEach } from './helpers';\nimport { sendPageViewEvent, sendAnalyticsCustomEvent, updateAnalyticsStorageConsent } from './analytics';\nfunction CookiesPage($module) {\n    this.$module = $module;\n}\nCookiesPage.prototype.init = function () {\n    this.$cookiePage = this.$module;\n    if (!this.$cookiePage) {\n        return;\n    }\n    this.$cookieForm = this.$cookiePage.querySelector('.js-cookies-page-form');\n    this.$cookieFormFieldsets = this.$cookieForm.querySelectorAll('.js-cookies-page-form-fieldset');\n    this.$successNotification = this.$cookiePage.querySelector('.js-cookies-page-success');\n    this.$successLink = this.$cookiePage.querySelector('.js-cookies-page-success-link');\n    nodeListForEach(this.$cookieFormFieldsets, function ($cookieFormFieldset) {\n        this.showUserPreference($cookieFormFieldset, getConsentCookie());\n        /*        $cookieFormFieldset.removeAttribute('hidden')*/\n    }.bind(this));\n    // Show submit button\n    //this.$cookieForm.querySelector('.js-cookies-form-button').removeAttribute('hidden')\n    this.$cookieForm.addEventListener('submit', this.savePreferences.bind(this));\n};\nCookiesPage.prototype.savePreferences = function (event) {\n    // Stop default form submission behaviour\n    event.preventDefault();\n    var preferences = {};\n    nodeListForEach(this.$cookieFormFieldsets, function ($cookieFormFieldset) {\n        var cookieType = this.getCookieType($cookieFormFieldset);\n        var selectedItem = $cookieFormFieldset.querySelector('input[name=' + cookieType + ']:checked').value;\n        preferences[cookieType] = selectedItem === 'true';\n    }.bind(this));\n    updateAnalyticsStorageConsent(true);\n    const analyticsAccepted = preferences['analytics'];\n    sendAnalyticsCustomEvent(analyticsAccepted, 'cookies');\n    if (analyticsAccepted) {\n        sendPageViewEvent();\n    }\n    else {\n        updateAnalyticsStorageConsent(false);\n    }\n    setConsentCookie(preferences);\n    // handle the corner case, where the user has selected their preference on the cookie page, whilst the banner is still open as they haven't previously selected their preference\n    //todo: call hideBanner\n    var banner = document.querySelector('[data-module=\"govuk-cookie-banner\"]');\n    banner.setAttribute('hidden', 'true');\n    this.showSuccessNotification();\n};\nCookiesPage.prototype.showUserPreference = function ($cookieFormFieldset, preferences) {\n    var cookieType = this.getCookieType($cookieFormFieldset);\n    var preference = false;\n    if (cookieType && preferences && preferences[cookieType] !== undefined) {\n        preference = preferences[cookieType];\n    }\n    var radioValue = preference ? 'true' : 'false';\n    var radio = $cookieFormFieldset.querySelector('input[name=' + cookieType + '][value=' + radioValue + ']');\n    radio.checked = true;\n};\nCookiesPage.prototype.showSuccessNotification = function () {\n    this.$successNotification.removeAttribute('hidden');\n    // if the user's come to the cookies page through the link in the cookie banner, show a link to take them back to the page they came from\n    var referrer = document.referrer ? new URL(document.referrer).pathname : false;\n    if (referrer && referrer !== document.location.pathname) {\n        this.$successLink.href = referrer;\n        this.$successLink.removeAttribute('hidden');\n    }\n    else {\n        this.$successLink.setAttribute('hidden', 'true');\n    }\n    // Set tabindex to -1 to make the element focusable with JavaScript.\n    // GOV.UK Frontend will remove the tabindex on blur as the component doesn't\n    // need to be focusable after the user has read the text.\n    if (!this.$successNotification.getAttribute('tabindex')) {\n        this.$successNotification.setAttribute('tabindex', '-1');\n    }\n    this.$successNotification.focus();\n    // scroll to the top of the page\n    window.scrollTo(0, 0);\n};\nCookiesPage.prototype.getCookieType = function ($cookieFormFieldset) {\n    return $cookieFormFieldset.id;\n};\nexport default CookiesPage;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvY29va2llcy1wYWdlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxnQkFBZ0IsRUFBaUIsTUFBTSxvQkFBb0IsQ0FBQTtBQUN0RixPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sV0FBVyxDQUFBO0FBQzNDLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSx3QkFBd0IsRUFBRSw2QkFBNkIsRUFBRSxNQUFNLGFBQWEsQ0FBQTtBQUV4RyxTQUFTLFdBQVcsQ0FBQyxPQUFPO0lBQ3hCLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFBO0FBQzFCLENBQUM7QUFFRCxXQUFXLENBQUMsU0FBUyxDQUFDLElBQUksR0FBRztJQUN6QixJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUE7SUFFL0IsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUU7UUFDbkIsT0FBTTtLQUNUO0lBRUQsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLGFBQWEsQ0FBQyx1QkFBdUIsQ0FBQyxDQUFBO0lBQzFFLElBQUksQ0FBQyxvQkFBb0IsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLGdCQUFnQixDQUFDLGdDQUFnQyxDQUFDLENBQUE7SUFDL0YsSUFBSSxDQUFDLG9CQUFvQixHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsYUFBYSxDQUFDLDBCQUEwQixDQUFDLENBQUE7SUFDdEYsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLGFBQWEsQ0FBQywrQkFBK0IsQ0FBQyxDQUFBO0lBRW5GLGVBQWUsQ0FBQyxJQUFJLENBQUMsb0JBQW9CLEVBQUUsVUFBVSxtQkFBbUI7UUFDcEUsSUFBSSxDQUFDLGtCQUFrQixDQUFDLG1CQUFtQixFQUFFLGdCQUFnQixFQUFFLENBQUMsQ0FBQTtRQUN4RSx5REFBeUQ7SUFDckQsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJ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QUFJLEdBQUcsUUFBUSxDQUFDO1FBQ2xDLElBQUksQ0FBQyxZQUFZLENBQUMsZUFBZSxDQUFDLFFBQVEsQ0FBQyxDQUFBO0tBQzlDO1NBQU07UUFDSCxJQUFJLENBQUMsWUFBWSxDQUFDLFlBQVksQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDLENBQUM7S0FDcEQ7SUFFRCxvRUFBb0U7SUFDcEUsNEVBQTRFO0lBQzVFLHlEQUF5RDtJQUN6RCxJQUFJLENBQUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLFlBQVksQ0FBQyxVQUFVLENBQUMsRUFBRTtRQUNyRCxJQUFJLENBQUMsb0JBQW9CLENBQUMsWUFBWSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsQ0FBQTtLQUMzRDtJQUVELElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxLQUFLLEVBQUUsQ0FBQTtJQUVqQyxnQ0FBZ0M7SUFDaEMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUE7QUFDekIsQ0FBQyxDQUFBO0FBRUQsV0FBVyxDQUFDLFNBQVMsQ0FBQyxhQUFhLEdBQUcsVUFBVSxtQkFBbUI7SUFDL0QsT0FBTyxtQkFBbUIsQ0FBQyxFQUFFLENBQUE7QUFDakMsQ0FBQyxDQUFBO0FBRUQsZUFBZSxXQUFXLENBQUEiLCJmaWxlIjoiY29tcG9uZW50cy9jb29raWVzLXBhZ2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRDb25zZW50Q29va2llLCBzZXRDb25zZW50Q29va2llLCBDb25zZW50Q29va2llIH0gZnJvbSAnLi9jb29raWUtZnVuY3Rpb25zJ1xyXG5pbXBvcnQgeyBub2RlTGlzdEZvckVhY2ggfSBmcm9tICcuL2hlbHBlcnMnXHJcbmltcG9ydCB7IHNlbmRQYWdlVmlld0V2ZW50LCBzZW5kQW5hbHl0aWNzQ3VzdG9tRXZlbnQsIHVwZGF0ZUFuYWx5dGljc1N0b3JhZ2VDb25zZW50IH0gZnJvbSAnLi9hbmFseXRpY3MnXHJcblxyXG5mdW5jdGlvbiBDb29raWVzUGFnZSgkbW9kdWxlKSB7XHJcbiAgICB0aGlzLiRtb2R1bGUgPSAkbW9kdWxlXHJcbn1cclxuXHJcbkNvb2tpZXNQYWdlLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy4kY29va2llUGFnZSA9IHRoaXMuJG1vZHVsZVxyXG5cclxuICAgIGlmICghdGhpcy4kY29va2llUGFnZSkge1xyXG4gICAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuJGNvb2tpZUZvcm0gPSB0aGlzLiRjb29raWVQYWdlLnF1ZXJ5U2VsZWN0b3IoJy5qcy1jb29raWVzLXBhZ2UtZm9ybScpXHJcbiAgICB0aGlzLiRjb29raWVGb3JtRmllbGRzZXRzID0gdGhpcy4kY29va2llRm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcuanMtY29va2llcy1wYWdlLWZvcm0tZmllbGRzZXQnKVxyXG4gICAgdGhpcy4kc3VjY2Vzc05vdGlmaWNhdGlvbiA9IHRoaXMuJGNvb2tpZVBhZ2UucXVlcnlTZWxlY3RvcignLmpzLWNvb2tpZXMtcGFnZS1zdWNjZXNzJylcclxuICAgIHRoaXMuJHN1Y2Nlc3NMaW5rID0gdGhpcy4kY29va2llUGFnZS5xdWVyeVNlbGVjdG9yKCcuanMtY29va2llcy1wYWdlLXN1Y2Nlc3MtbGluaycpXHJcblxyXG4gICAgbm9kZUxpc3RGb3JFYWNoKHRoaXMuJGNvb2tpZUZvcm1GaWVsZHNldHMsIGZ1bmN0aW9uICgkY29va2llRm9ybUZpZWxkc2V0KSB7XHJcbiAgICAgICAgdGhpcy5zaG93VXNlclByZWZlcmVuY2UoJGNvb2tpZUZvcm1GaWVsZHNldCwgZ2V0Q29uc2VudENvb2tpZSgpKVxyXG4vKiAgICAgICAgJGNvb2tpZUZvcm1GaWVsZHNldC5yZW1vdmVBdHRyaWJ1dGUoJ2hpZGRlbicpKi9cclxuICAgIH0uYmluZCh0aGlzKSlcclxuXHJcbiAgICAvLyBTaG93IHN1Ym1pdCBidXR0b25cclxuICAgIC8vdGhpcy4kY29va2llRm9ybS5xdWVyeVNlbGVjdG9yKCcuanMtY29va2llcy1mb3JtLWJ1dHRvbicpLnJlbW92ZUF0dHJpYnV0ZSgnaGlkZGVuJylcclxuXHJcbiAgICB0aGlzLiRjb29raWVGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMuc2F2ZVByZWZlcmVuY2VzLmJpbmQodGhpcykpXHJcbn1cclxuXHJcbkNvb2tpZXNQYWdlLnByb3RvdHlwZS5zYXZlUHJlZmVyZW5jZXMgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgIC8vIFN0b3AgZGVmYXVsdCBmb3JtIHN1Ym1pc3Npb24gYmVoYXZpb3VyXHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgIHZhciBwcmVmZXJlbmNlczogQ29uc2VudENvb2tpZSA9IHt9XHJcblxyXG4gICAgbm9kZUxpc3RGb3JFYWNoKHRoaXMuJGNvb2tpZUZvcm1GaWVsZHNldHMsXHJcbiAgICAgICAgZnVuY3Rpb24oJGNvb2tpZUZvcm1GaWVsZHNldCkge1xyXG4gICAgICAgICAgICB2YXIgY29va2llVHlwZSA9IHRoaXMuZ2V0Q29va2llVHlwZSgkY29va2llRm9ybUZpZWxkc2V0KVxyXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRJdGVtID0gJGNvb2tpZUZvcm1GaWVsZHNldC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPScgKyBjb29raWVUeXBlICsgJ106Y2hlY2tlZCcpLnZhbHVlXHJcblxyXG4gICAgICAgICAgICBwcmVmZXJlbmNlc1tjb29raWVUeXBlXSA9IHNlbGVjdGVkSXRlbSA9PT0gJ3RydWUnXHJcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICB1cGRhdGVBbmFseXRpY3NTdG9yYWdlQ29uc2VudCh0cnVlKTtcclxuICAgIGNvbnN0IGFuYWx5dGljc0FjY2VwdGVkID0gcHJlZmVyZW5jZXNbJ2FuYWx5dGljcyddO1xyXG4gICAgc2VuZEFuYWx5dGljc0N1c3RvbUV2ZW50KGFuYWx5dGljc0FjY2VwdGVkLCAnY29va2llcycpO1xyXG5cclxuICAgIGlmIChhbmFseXRpY3NBY2NlcHRlZCkge1xyXG4gICAgICAgIHNlbmRQYWdlVmlld0V2ZW50KCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHVwZGF0ZUFuYWx5dGljc1N0b3JhZ2VDb25zZW50KGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRDb25zZW50Q29va2llKHByZWZlcmVuY2VzKTtcclxuXHJcbiAgICAvLyBoYW5kbGUgdGhlIGNvcm5lciBjYXNlLCB3aGVyZSB0aGUgdXNlciBoYXMgc2VsZWN0ZWQgdGhlaXIgcHJlZmVyZW5jZSBvbiB0aGUgY29va2llIHBhZ2UsIHdoaWxzdCB0aGUgYmFubmVyIGlzIHN0aWxsIG9wZW4gYXMgdGhleSBoYXZlbid0IHByZXZpb3VzbHkgc2VsZWN0ZWQgdGhlaXIgcHJlZmVyZW5jZVxyXG4gICAgLy90b2RvOiBjYWxsIGhpZGVCYW5uZXJcclxuICAgIHZhciBiYW5uZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1tb2R1bGU9XCJnb3Z1ay1jb29raWUtYmFubmVyXCJdJyk7XHJcbiAgICBiYW5uZXIuc2V0QXR0cmlidXRlKCdoaWRkZW4nLCAndHJ1ZScpO1xyXG4gICAgXHJcbiAgICB0aGlzLnNob3dTdWNjZXNzTm90aWZpY2F0aW9uKClcclxufVxyXG5cclxuQ29va2llc1BhZ2UucHJvdG90eXBlLnNob3dVc2VyUHJlZmVyZW5jZSA9IGZ1bmN0aW9uICgkY29va2llRm9ybUZpZWxkc2V0LCBwcmVmZXJlbmNlcykge1xyXG4gICAgdmFyIGNvb2tpZVR5cGUgPSB0aGlzLmdldENvb2tpZVR5cGUoJGNvb2tpZUZvcm1GaWVsZHNldClcclxuICAgIHZhciBwcmVmZXJlbmNlID0gZmFsc2VcclxuXHJcbiAgICBpZiAoY29va2llVHlwZSAmJiBwcmVmZXJlbmNlcyAmJiBwcmVmZXJlbmNlc1tjb29raWVUeXBlXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgcHJlZmVyZW5jZSA9IHByZWZlcmVuY2VzW2Nvb2tpZVR5cGVdXHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHJhZGlvVmFsdWUgPSBwcmVmZXJlbmNlID8gJ3RydWUnIDogJ2ZhbHNlJ1xyXG4gICAgdmFyIHJhZGlvID0gJGNvb2tpZUZvcm1GaWVsZHNldC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPScgKyBjb29raWVUeXBlICsgJ11bdmFsdWU9JyArIHJhZGlvVmFsdWUgKyAnXScpXHJcbiAgICByYWRpby5jaGVja2VkID0gdHJ1ZVxyXG59XHJcblxyXG5Db29raWVzUGFnZS5wcm90b3R5cGUuc2hvd1N1Y2Nlc3NOb3RpZmljYXRpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLiRzdWNjZXNzTm90aWZpY2F0aW9uLnJlbW92ZUF0dHJpYnV0ZSgnaGlkZGVuJylcclxuXHJcbiAgICAvLyBpZiB0aGUgdXNlcidzIGNvbWUgdG8gdGhlIGNvb2tpZXMgcGFnZSB0aHJvdWdoIHRoZSBsaW5rIGluIHRoZSBjb29raWUgYmFubmVyLCBzaG93IGEgbGluayB0byB0YWtlIHRoZW0gYmFjayB0byB0aGUgcGFnZSB0aGV5IGNhbWUgZnJvbVxyXG4gICAgdmFyIHJlZmVycmVyID0gZG9jdW1lbnQucmVmZXJyZXIgPyBuZXcgVVJMKGRvY3VtZW50LnJlZmVycmVyKS5wYXRobmFtZSA6IGZhbHNlO1xyXG4gICAgaWYgKHJlZmVycmVyICYmIHJlZmVycmVyICE9PSBkb2N1bWVudC5sb2NhdGlvbi5wYXRobmFtZSkge1xyXG4gICAgICAgIHRoaXMuJHN1Y2Nlc3NMaW5rLmhyZWYgPSByZWZlcnJlcjtcclxuICAgICAgICB0aGlzLiRzdWNjZXNzTGluay5yZW1vdmVBdHRyaWJ1dGUoJ2hpZGRlbicpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuJHN1Y2Nlc3NMaW5rLnNldEF0dHJpYnV0ZSgnaGlkZGVuJywgJ3RydWUnKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTZXQgdGFiaW5kZXggdG8gLTEgdG8gbWFrZSB0aGUgZWxlbWVudCBmb2N1c2FibGUgd2l0aCBKYXZhU2NyaXB0LlxyXG4gICAgLy8gR09WLlVLIEZyb250ZW5kIHdpbGwgcmVtb3ZlIHRoZSB0YWJpbmRleCBvbiBibHVyIGFzIHRoZSBjb21wb25lbnQgZG9lc24ndFxyXG4gICAgLy8gbmVlZCB0byBiZSBmb2N1c2FibGUgYWZ0ZXIgdGhlIHVzZXIgaGFzIHJlYWQgdGhlIHRleHQuXHJcbiAgICBpZiAoIXRoaXMuJHN1Y2Nlc3NOb3RpZmljYXRpb24uZ2V0QXR0cmlidXRlKCd0YWJpbmRleCcpKSB7XHJcbiAgICAgICAgdGhpcy4kc3VjY2Vzc05vdGlmaWNhdGlvbi5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJy0xJylcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLiRzdWNjZXNzTm90aWZpY2F0aW9uLmZvY3VzKClcclxuXHJcbiAgICAvLyBzY3JvbGwgdG8gdGhlIHRvcCBvZiB0aGUgcGFnZVxyXG4gICAgd2luZG93LnNjcm9sbFRvKDAsIDApXHJcbn1cclxuXHJcbkNvb2tpZXNQYWdlLnByb3RvdHlwZS5nZXRDb29raWVUeXBlID0gZnVuY3Rpb24gKCRjb29raWVGb3JtRmllbGRzZXQpIHtcclxuICAgIHJldHVybiAkY29va2llRm9ybUZpZWxkc2V0LmlkXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IENvb2tpZXNQYWdlIl19\n","// js components were originally snaffled from https://github.com/alphagov/govuk-design-system/blob/main/src/javascripts/components/\nimport CookieBanner from './components/cookie-banner';\nimport CookiesPage from './components/cookies-page';\nimport initAnalytics from './components/analytics';\nimport { nodeListForEach } from './components/helpers';\n//todo: consistency in module/proto/class style\n// Initialise cookie banner\nconst $cookieBanner = document.querySelector('[data-module=\"govuk-cookie-banner\"]');\nnew CookieBanner($cookieBanner).init();\ninitAnalytics(window.GA_MEASUREMENT_ID);\n//todo: move this into scripts section on cookie page\n// Initialise cookie page\nvar $cookiesPage = document.querySelector('[data-module=\"app-cookies-page\"]');\nnew CookiesPage($cookiesPage).init();\n//todo: move into module\nconst backLinks = document.querySelectorAll(\".app-back-link\");\nnodeListForEach(backLinks, (link) => {\n    link.addEventListener(\"click\", () => {\n        window.history.back();\n    });\n});\nconst button = document.getElementById('open-close-filters');\nbutton === null || button === void 0 ? void 0 : button.addEventListener('click', function handleClick(event) {\n    const filterButton = document.getElementById(\"filters\");\n    if (filterButton.style.display === \"none\") {\n        filterButton.style.display = \"block\";\n    }\n    else {\n        filterButton.style.display = \"none\";\n    }\n});\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvSUFBb0k7QUFXcEksT0FBTyxZQUFZLE1BQU0sNEJBQTRCLENBQUE7QUFDckQsT0FBTyxXQUFXLE1BQU0sMkJBQTJCLENBQUE7QUFDbkQsT0FBTyxhQUFhLE1BQU0sd0JBQXdCLENBQUM7QUFDbkQsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBRXZELCtDQUErQztBQUUvQywyQkFBMkI7QUFDM0IsTUFBTSxhQUFhLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxxQ0FBcUMsQ0FBdUIsQ0FBQztBQUMxRyxJQUFJLFlBQVksQ0FBQyxhQUFhLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUV2QyxhQUFhLENBQUMsTUFBTSxDQUFDLGlCQUFpQixDQUFDLENBQUM7QUFFeEMscURBQXFEO0FBQ3JELHlCQUF5QjtBQUN6QixJQUFJLFlBQVksR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLGtDQUFrQyxDQUFDLENBQUE7QUFDN0UsSUFBSSxXQUFXLENBQUMsWUFBWSxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUE7QUFFcEMsd0JBQXdCO0FBQ3hCLE1BQU0sU0FBUyxHQUFHLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0FBQzlELGVBQWUsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxJQUF1QixFQUFFLEVBQUU7SUFDbkQsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxHQUFHLEVBQUU7UUFDaEMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUMxQixDQUFDLENBQUMsQ0FBQztBQUNQLENBQUMsQ0FBQyxDQUFDO0FBRUgsTUFBTSxNQUFNLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO0FBQzdELE1BQU0sYUFBTixNQUFNLHVCQUFOLE1BQU0sQ0FBRSxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsU0FBUyxXQUFXLENBQUMsS0FBSztJQUN4RCxNQUFNLFlBQVksR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLFNBQVMsQ0FBMEIsQ0FBQztJQUNqRixJQUFJLFlBQVksQ0FBQyxLQUFLLENBQUMsT0FBTyxLQUFLLE1BQU0sRUFBRTtRQUN2QyxZQUFZLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7S0FDeEM7U0FBTTtRQUNILFlBQVksQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQztLQUN2QztBQUNMLENBQUMsQ0FBQyxDQUFDIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGpzIGNvbXBvbmVudHMgd2VyZSBvcmlnaW5hbGx5IHNuYWZmbGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2FscGhhZ292L2dvdnVrLWRlc2lnbi1zeXN0ZW0vYmxvYi9tYWluL3NyYy9qYXZhc2NyaXB0cy9jb21wb25lbnRzL1xyXG5cclxuZGVjbGFyZSBnbG9iYWwge1xyXG4gICAgaW50ZXJmYWNlIFdpbmRvdyB7XHJcbiAgICAgICAgR0RTX0NPTlNFTlRfQ09PS0lFX1ZFUlNJT046IG51bWJlcjtcclxuICAgICAgICBHQV9NRUFTVVJFTUVOVF9JRDogc3RyaW5nO1xyXG4gICAgICAgIEdBX0NPTlRBSU5FUl9JRDogc3RyaW5nO1xyXG4gICAgICAgIGRhdGFMYXllcjogYW55W107XHJcbiAgICB9XHJcbn1cclxuXHJcbmltcG9ydCBDb29raWVCYW5uZXIgZnJvbSAnLi9jb21wb25lbnRzL2Nvb2tpZS1iYW5uZXInXHJcbmltcG9ydCBDb29raWVzUGFnZSBmcm9tICcuL2NvbXBvbmVudHMvY29va2llcy1wYWdlJ1xyXG5pbXBvcnQgaW5pdEFuYWx5dGljcyBmcm9tICcuL2NvbXBvbmVudHMvYW5hbHl0aWNzJztcclxuaW1wb3J0IHsgbm9kZUxpc3RGb3JFYWNoIH0gZnJvbSAnLi9jb21wb25lbnRzL2hlbHBlcnMnO1xyXG5cclxuLy90b2RvOiBjb25zaXN0ZW5jeSBpbiBtb2R1bGUvcHJvdG8vY2xhc3Mgc3R5bGVcclxuXHJcbi8vIEluaXRpYWxpc2UgY29va2llIGJhbm5lclxyXG5jb25zdCAkY29va2llQmFubmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtbW9kdWxlPVwiZ292dWstY29va2llLWJhbm5lclwiXScpIGFzIEhUTUxFbGVtZW50IHwgbnVsbDtcclxubmV3IENvb2tpZUJhbm5lcigkY29va2llQmFubmVyKS5pbml0KCk7XHJcblxyXG5pbml0QW5hbHl0aWNzKHdpbmRvdy5HQV9NRUFTVVJFTUVOVF9JRCk7XHJcblxyXG4vL3RvZG86IG1vdmUgdGhpcyBpbnRvIHNjcmlwdHMgc2VjdGlvbiBvbiBjb29raWUgcGFnZVxyXG4vLyBJbml0aWFsaXNlIGNvb2tpZSBwYWdlXHJcbnZhciAkY29va2llc1BhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1tb2R1bGU9XCJhcHAtY29va2llcy1wYWdlXCJdJylcclxubmV3IENvb2tpZXNQYWdlKCRjb29raWVzUGFnZSkuaW5pdCgpXHJcblxyXG4vL3RvZG86IG1vdmUgaW50byBtb2R1bGVcclxuY29uc3QgYmFja0xpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5hcHAtYmFjay1saW5rXCIpO1xyXG5ub2RlTGlzdEZvckVhY2goYmFja0xpbmtzLCAobGluazogSFRNTEFuY2hvckVsZW1lbnQpID0+IHtcclxuICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB3aW5kb3cuaGlzdG9yeS5iYWNrKCk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5jb25zdCBidXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3Blbi1jbG9zZS1maWx0ZXJzJyk7XHJcbmJ1dHRvbj8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiBoYW5kbGVDbGljayhldmVudCkge1xyXG4gICAgY29uc3QgZmlsdGVyQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmaWx0ZXJzXCIpIGFzIEhUTUxEaXZFbGVtZW50IHwgbnVsbDtcclxuICAgIGlmIChmaWx0ZXJCdXR0b24uc3R5bGUuZGlzcGxheSA9PT0gXCJub25lXCIpIHtcclxuICAgICAgICBmaWx0ZXJCdXR0b24uc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZmlsdGVyQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIH1cclxufSk7XHJcbiJdfQ==\n"]}