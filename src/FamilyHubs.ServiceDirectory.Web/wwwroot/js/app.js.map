{"version":3,"sources":["tmp/js/components/cookie-functions.js","tmp/js/components/helpers.js","tmp/js/components/analytics.js","tmp/js/components/cookie-banner.js","tmp/js/components/cookies-page.js","tmp/js/app.js"],"names":["CONSENT_COOKIE_NAME","COOKIE_CATEGORIES","analytics","window","GA_CONTAINER_ID","essential","DEFAULT_COOKIE_CONSENT","version","GDS_CONSENT_COOKIE_VERSION","getConsentCookie","consentCookie","getCookie","consentCookieObj","JSON","parse","err","isValidConsentCookie","options","setConsentCookie","cookieConsent","option","stringify","setCookie","days","resetCookies","cookieType","forEach","cookie","deleteCookie","userAllowsCookieCategory","cookieCategory","cookiePreferences","e","console","error","userAllowsCookie","cookieName","category","indexOf","name","nameEQ","cookies","document","split","i","len","length","charAt","substring","decodeURIComponent","value","cookieString","date","Date","setTime","getTime","toUTCString","location","protocol","hostname","nodeListForEach","nodes","callback","NodeList","prototype","call","gtag","command","args","dataLayer","push","arguments","GaMeasurementId","initAnalytics","gaMeasurementId","Boolean","setDefaultConsent","loadGaScript","pageViewParams","getPiiSafePageView","send_page_view","page_path","page_location","page_referrer","referrer","cookie_flags","userConsent","updateAnalyticsStorageConsent","sendPageViewEvent","sendFilterPageCustomEvent","analytics_storage","granted","delayMs","element","getElementById","totalResults","getAttribute","undefined","total_results","sendAnalyticsCustomEvent","accepted","source","f","getElementsByTagName","j","createElement","async","src","parentNode","insertBefore","pageView","page_title","title","send_to","piiSafeReferrerQueryString","getPiiSafeQueryString","URL","search","urlArray","piiSafeQueryString","href","pathname","queryString","queryParams","URLSearchParams","postcode","get","replace","set","delete","toString","cookieBannerAcceptSelector","cookieBannerRejectSelector","cookieBannerHideButtonSelector","cookieMessageSelector","cookieConfirmationAcceptSelector","cookieConfirmationRejectSelector","CookieBanner","$module","this","CookiesPage","init","$cookieBanner","$acceptButton","querySelector","$rejectButton","$cookieMessage","$cookieConfirmationAccept","$cookieConfirmationReject","$cookieBannerHideButtons","querySelectorAll","onCookiesPage","currentConsentCookie","CookieFunctions.getConsentCookie","CookieFunctions.isValidConsentCookie","CookieFunctions.resetCookies","removeAttribute","addEventListener","acceptCookies","bind","rejectCookies","$cookieBannerHideButton","hideBanner","setAttribute","CookieFunctions.setConsentCookie","revealConfirmationMessage","confirmationMessage","focus","$cookiePage","$cookieForm","$cookieFormFieldsets","$successNotification","$successLink","$cookieFormFieldset","showUserPreference","savePreferences","event","preventDefault","preferences","getCookieType","selectedItem","analyticsAccepted","showSuccessNotification","preference","radioValue","checked","scrollTo","id","GA_MEASUREMENT_ID","$cookiesPage","backLinks","link","history","back","button","filterButton","style","display"],"mappings":"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","file":"app.js","sourcesContent":["/* Name of the cookie to save users cookie preferences to. */\nconst CONSENT_COOKIE_NAME = 'service_directory_cookies_policy';\n/* Users can (dis)allow different groups of cookies. */\nconst COOKIE_CATEGORIES = {\n    analytics: ['_ga', '_ga_' + window.GA_CONTAINER_ID],\n    /* Essential cookies\n     *\n     * Essential cookies cannot be deselected, but we want our cookie code to\n     * only allow adding cookies that are documented in this object, so they need\n     * to be added here.\n     */\n    essential: ['service_directory_cookies_policy']\n};\n/*\n * Default cookie preferences if user has no cookie preferences.\n *\n * Note that this doesn't include a key for essential cookies, essential\n * cookies cannot be disallowed. If the object contains { essential: false }\n * this will be ignored.\n */\nconst DEFAULT_COOKIE_CONSENT = {\n    analytics: false,\n    version: window.GDS_CONSENT_COOKIE_VERSION\n};\n/** Return the user's cookie preferences.\n *\n * If the consent cookie is malformed, or not present,\n * returns null.\n */\nexport function getConsentCookie() {\n    const consentCookie = getCookie(CONSENT_COOKIE_NAME);\n    let consentCookieObj;\n    if (consentCookie) {\n        try {\n            consentCookieObj = JSON.parse(consentCookie);\n        }\n        catch (err) {\n            return null;\n        }\n    }\n    else {\n        return null;\n    }\n    return consentCookieObj;\n}\n/** Check the cookie preferences object.\n *\n * If the consent object is not present, malformed, or incorrect version,\n * returns false, otherwise returns true.\n */\nexport function isValidConsentCookie(options) {\n    return (options && options.version >= window.GDS_CONSENT_COOKIE_VERSION);\n}\n/** Update the user's cookie preferences. */\nexport function setConsentCookie(options) {\n    let cookieConsent = getConsentCookie();\n    if (!cookieConsent) {\n        cookieConsent = JSON.parse(JSON.stringify(DEFAULT_COOKIE_CONSENT));\n    }\n    // Merge current cookie preferences and new preferences\n    for (var option in options) {\n        cookieConsent[option] = options[option];\n    }\n    // Essential cookies cannot be deselected, ignore this cookie type\n    delete cookieConsent.essential;\n    cookieConsent.version = window.GDS_CONSENT_COOKIE_VERSION;\n    // Set the consent cookie\n    setCookie(CONSENT_COOKIE_NAME, JSON.stringify(cookieConsent), { days: 365 });\n    // Update the other cookies\n    resetCookies();\n}\n/** Apply the user's cookie preferences\n *\n * Deletes any cookies the user has not consented to.\n */\nexport function resetCookies() {\n    var options = getConsentCookie();\n    // If no preferences or old version use the default\n    if (!isValidConsentCookie(options)) {\n        options = JSON.parse(JSON.stringify(DEFAULT_COOKIE_CONSENT));\n    }\n    for (var cookieType in options) {\n        if (cookieType === 'version') {\n            continue;\n        }\n        // Essential cookies cannot be deselected, ignore this cookie type\n        if (cookieType === 'essential') {\n            continue;\n        }\n        if (!options[cookieType]) {\n            // Fetch the cookies in that category\n            var cookiesInCategory = COOKIE_CATEGORIES[cookieType];\n            cookiesInCategory.forEach(function (cookie) {\n                deleteCookie(cookie);\n            });\n        }\n    }\n}\nfunction userAllowsCookieCategory(cookieCategory, cookiePreferences) {\n    // Essential cookies are always allowed\n    if (cookieCategory === 'essential') {\n        return true;\n    }\n    // Sometimes cookiePreferences is malformed in some of the tests, so we need to handle these\n    try {\n        return cookiePreferences[cookieCategory];\n    }\n    catch (e) {\n        console.error(e);\n        return false;\n    }\n}\nfunction userAllowsCookie(cookieName) {\n    // Always allow setting the consent cookie\n    if (cookieName === CONSENT_COOKIE_NAME) {\n        return true;\n    }\n    // Get the current cookie preferences\n    var cookiePreferences = getConsentCookie();\n    // If no preferences or old version use the default\n    if (!isValidConsentCookie(cookiePreferences)) {\n        cookiePreferences = DEFAULT_COOKIE_CONSENT;\n    }\n    for (var category in COOKIE_CATEGORIES) {\n        var cookiesInCategory = COOKIE_CATEGORIES[category];\n        if (cookiesInCategory.indexOf(cookieName) !== '-1') {\n            return userAllowsCookieCategory(category, cookiePreferences);\n        }\n    }\n    // Deny the cookie if it is not known to us\n    return false;\n}\nfunction getCookie(name) {\n    var nameEQ = name + '=';\n    var cookies = document.cookie.split(';');\n    for (var i = 0, len = cookies.length; i < len; i++) {\n        var cookie = cookies[i];\n        while (cookie.charAt(0) === ' ') {\n            cookie = cookie.substring(1, cookie.length);\n        }\n        if (cookie.indexOf(nameEQ) === 0) {\n            return decodeURIComponent(cookie.substring(nameEQ.length));\n        }\n    }\n    return null;\n}\n// do we need to set the domain?\nfunction setCookie(name, value, options) {\n    if (userAllowsCookie(name)) {\n        if (typeof options === 'undefined') {\n            options = {};\n        }\n        var cookieString = name + '=' + value + '; path=/; SameSite=Strict';\n        if (options.days) {\n            var date = new Date();\n            date.setTime(date.getTime() + (options.days * 24 * 60 * 60 * 1000));\n            cookieString = cookieString + '; expires=' + date.toUTCString();\n        }\n        if (document.location.protocol === 'https:') {\n            cookieString = cookieString + '; Secure';\n        }\n        document.cookie = cookieString;\n    }\n}\nfunction deleteCookie(name) {\n    if (getCookie(name)) {\n        // Cookies need to be deleted in the same level of specificity in which they were set\n        // If a cookie was set with a specified domain, it needs to be specified when deleted\n        // If a cookie wasn't set with the domain attribute, it shouldn't be there when deleted\n        // You can't tell if a cookie was set with a domain attribute or not, so try both options\n        document.cookie = name + '=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/';\n        document.cookie = name + '=;expires=Thu, 01 Jan 1970 00:00:00 GMT;domain=' + window.location.hostname + ';path=/';\n        document.cookie = name + '=;expires=Thu, 01 Jan 1970 00:00:00 GMT;domain=.' + window.location.hostname + ';path=/';\n    }\n}\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvY29va2llLWZ1bmN0aW9ucy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFpQkEsNkRBQTZEO0FBQzdELE1BQU0sbUJBQW1CLEdBQUcsa0NBQWtDLENBQUM7QUFFL0QsdURBQXVEO0FBQ3ZELE1BQU0saUJBQWlCLEdBQXFCO0lBQ3hDLFNBQVMsRUFBRSxDQUFDLEtBQUssRUFBRSxNQUFNLEdBQUcsTUFBTSxDQUFDLGVBQWUsQ0FBQztJQUNuRDs7Ozs7T0FLRztJQUNILFNBQVMsRUFBRSxDQUFDLGtDQUFrQyxDQUFDO0NBQ2xELENBQUE7QUFFRDs7Ozs7O0dBTUc7QUFDSCxNQUFNLHNCQUFzQixHQUFrQjtJQUMxQyxTQUFTLEVBQUUsS0FBSztJQUNoQixPQUFPLEVBQUUsTUFBTSxDQUFDLDBCQUEwQjtDQUM3QyxDQUFBO0FBRUQ7Ozs7R0FJRztBQUNILE1BQU0sVUFBVSxnQkFBZ0I7SUFDNUIsTUFBTSxhQUFhLEdBQUcsU0FBUyxDQUFDLG1CQUFtQixDQUFDLENBQUM7SUFDckQsSUFBSSxnQkFBc0MsQ0FBQztJQUUzQyxJQUFJLGFBQWEsRUFBRTtRQUNmLElBQUk7WUFDQSxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1NBQ2hEO1FBQUMsT0FBTyxHQUFHLEVBQUU7WUFDVixPQUFPLElBQUksQ0FBQztTQUNmO0tBQ0o7U0FBTTtRQUNILE9BQU8sSUFBSSxDQUFDO0tBQ2Y7SUFFRCxPQUFPLGdCQUFnQixDQUFDO0FBQzVCLENBQUM7QUFFRDs7OztHQUlHO0FBQ0gsTUFBTSxVQUFVLG9CQUFvQixDQUFDLE9BQXNCO0lBQ3ZELE9BQU8sQ0FBQyxPQUFPLElBQUksT0FBTyxDQUFDLE9BQU8sSUFBSSxNQUFNLENBQUMsMEJBQTBCLENBQUMsQ0FBQztBQUM3RSxDQUFDO0FBRUQsNENBQTRDO0FBQzVDLE1BQU0sVUFBVSxnQkFBZ0IsQ0FBQyxPQUFzQjtJQUNuRCxJQUFJLGFBQWEsR0FBRyxnQkFBZ0IsRUFBRSxDQUFDO0lBRXZDLElBQUksQ0FBQyxhQUFhLEVBQUU7UUFDaEIsYUFBYSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLENBQUM7S0FDdEU7SUFFRCx1REFBdUQ7SUFDdkQsS0FBSyxJQUFJLE1BQU0sSUFBSSxPQUFPLEVBQUU7UUFDeEIsYUFBYSxDQUFDLE1BQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztLQUMzQztJQUVELGtFQUFrRTtJQUNsRSxPQUFPLGFBQWEsQ0FBQyxTQUFTLENBQUM7SUFFL0IsYUFBYSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUMsMEJBQTBCLENBQUM7SUFFMUQseUJBQXlCO0lBQ3pCLFNBQVMsQ0FBQyxtQkFBbUIsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFFN0UsMkJBQTJCO0lBQzNCLFlBQVksRUFBRSxDQUFDO0FBQ25CLENBQUM7QUFFRDs7O0dBR0c7QUFDSCxNQUFNLFVBQVUsWUFBWTtJQUN4QixJQUFJLE9BQU8sR0FBRyxnQkFBZ0IsRUFBRSxDQUFDO0lBRWpDLG1EQUFtRDtJQUNuRCxJQUFJLENBQUMsb0JBQW9CLENBQUMsT0FBTyxDQUFDLEVBQUU7UUFDaEMsT0FBTyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLENBQUM7S0FDaEU7SUFFRCxLQUFLLElBQUksVUFBVSxJQUFJLE9BQU8sRUFBRTtRQUM1QixJQUFJLFVBQVUsS0FBSyxTQUFTLEVBQUU7WUFDMUIsU0FBUztTQUNaO1FBRUQsa0VBQWtFO1FBQ2xFLElBQUksVUFBVSxLQUFLLFdBQVcsRUFBRTtZQUM1QixTQUFTO1NBQ1o7UUFFRCxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxFQUFFO1lBQ3RCLHFDQUFxQztZQUNyQyxJQUFJLGlCQUFpQixHQUFHLGlCQUFpQixDQUFDLFVBQVUsQ0FBQyxDQUFBO1lBRXJELGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxVQUFVLE1BQU07Z0JBQ3RDLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUN6QixDQUFDLENBQUMsQ0FBQztTQUNOO0tBQ0o7QUFDTCxDQUFDO0FBRUQsU0FBUyx3QkFBd0IsQ0FBQyxjQUFjLEVBQUUsaUJBQWlCO0lBQy9ELHVDQUF1QztJQUN2QyxJQUFJLGNBQWMsS0FBSyxXQUFXLEVBQUU7UUFDaEMsT0FBTyxJQUFJLENBQUM7S0FDZjtJQUVELDRGQUE0RjtJQUM1RixJQUFJO1FBQ0EsT0FBTyxpQkFBaUIsQ0FBQyxjQUFjLENBQUMsQ0FBQztLQUM1QztJQUFDLE9BQU8sQ0FBQyxFQUFFO1FBQ1IsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNqQixPQUFPLEtBQUssQ0FBQztLQUNoQjtBQUNMLENBQUM7QUFFRCxTQUFTLGdCQUFnQixDQUFDLFVBQWtCO0lBQ3hDLDBDQUEwQztJQUMxQyxJQUFJLFVBQVUsS0FBSyxtQkFBbUIsRUFBRTtRQUNwQyxPQUFPLElBQUksQ0FBQztLQUNmO0lBRUQscUNBQXFDO0lBQ3JDLElBQUksaUJBQWlCLEdBQUcsZ0JBQWdCLEVBQUUsQ0FBQztJQUUzQyxtREFBbUQ7SUFDbkQsSUFBSSxDQUFDLG9CQUFvQixDQUFDLGlCQUFpQixDQUFDLEVBQUU7UUFDMUMsaUJBQWlCLEdBQUcsc0JBQXNCLENBQUM7S0FDOUM7SUFFRCxLQUFLLElBQUksUUFBUSxJQUFJLGlCQUFpQixFQUFFO1FBQ3BDLElBQUksaUJBQWlCLEdBQUcsaUJBQWlCLENBQUMsUUFBUSxDQUFDLENBQUM7UUFFcEQsSUFBSSxpQkFBaUIsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLEtBQUssSUFBSSxFQUFFO1lBQ2hELE9BQU8sd0JBQXdCLENBQUMsUUFBUSxFQUFFLGlCQUFpQixDQUFDLENBQUM7U0FDaEU7S0FDSjtJQUVELDJDQUEyQztJQUMzQyxPQUFPLEtBQUssQ0FBQztBQUNqQixDQUFDO0FBRUQsU0FBUyxTQUFTLENBQUMsSUFBWTtJQUMzQixJQUFJLE1BQU0sR0FBRyxJQUFJLEdBQUcsR0FBRyxDQUFDO0lBQ3hCLElBQUksT0FBTyxHQUFHLFFBQVEsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3pDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsR0FBRyxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQyxFQUFFLEVBQUU7UUFDaEQsSUFBSSxNQUFNLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3hCLE9BQU8sTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLEVBQUU7WUFDN0IsTUFBTSxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztTQUMvQztRQUNELElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEVBQUU7WUFDOUIsT0FBTyxrQkFBa0IsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1NBQzlEO0tBQ0o7SUFDRCxPQUFPLElBQUksQ0FBQztBQUNoQixDQUFDO0FBRUQsZ0NBQWdDO0FBQ2hDLFNBQVMsU0FBUyxDQUFDLElBQVksRUFBRSxLQUFhLEVBQUUsT0FBdUI7SUFDbkUsSUFBSSxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUN4QixJQUFJLE9BQU8sT0FBTyxLQUFLLFdBQVcsRUFBRTtZQUNoQyxPQUFPLEdBQUcsRUFBRSxDQUFBO1NBQ2Y7UUFDRCxJQUFJLFlBQVksR0FBRyxJQUFJLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRywyQkFBMkIsQ0FBQztRQUNwRSxJQUFJLE9BQU8sQ0FBQyxJQUFJLEVBQUU7WUFDZCxJQUFJLElBQUksR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDO1lBQ3RCLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ3BFLFlBQVksR0FBRyxZQUFZLEdBQUcsWUFBWSxHQUFHLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztTQUNuRTtRQUNELElBQUksUUFBUSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEtBQUssUUFBUSxFQUFFO1lBQ3pDLFlBQVksR0FBRyxZQUFZLEdBQUcsVUFBVSxDQUFDO1NBQzVDO1FBQ0QsUUFBUSxDQUFDLE1BQU0sR0FBRyxZQUFZLENBQUM7S0FDbEM7QUFDTCxDQUFDO0FBRUQsU0FBUyxZQUFZLENBQUMsSUFBWTtJQUM5QixJQUFJLFNBQVMsQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUNqQixxRkFBcUY7UUFDckYscUZBQXFGO1FBQ3JGLHVGQUF1RjtRQUN2Rix5RkFBeUY7UUFDekYsUUFBUSxDQUFDLE1BQU0sR0FBRyxJQUFJLEdBQUcsZ0RBQWdELENBQUM7UUFDMUUsUUFBUSxDQUFDLE1BQU0sR0FBRyxJQUFJLEdBQUcsaURBQWlELEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEdBQUcsU0FBUyxDQUFDO1FBQ2xILFFBQVEsQ0FBQyxNQUFNLEdBQUcsSUFBSSxHQUFHLGtEQUFrRCxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsUUFBUSxHQUFHLFNBQVMsQ0FBQztLQUN0SDtBQUNMLENBQUMiLCJmaWxlIjoiY29tcG9uZW50cy9jb29raWUtZnVuY3Rpb25zLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ29uc2VudENvb2tpZSB7XHJcbiAgICAvL3RvZG86IGp1c3QgcmVtb3ZlIGVzc2VudGlhbD9cclxuICAgIGVzc2VudGlhbD86IGJvb2xlYW47XHJcbiAgICBhbmFseXRpY3M/OiBib29sZWFuO1xyXG4gICAgdmVyc2lvbj86IG51bWJlcjtcclxufVxyXG5cclxuaW50ZXJmYWNlIENvb2tpZUNhdGVnb3JpZXMge1xyXG4gICAgYW5hbHl0aWNzOiBzdHJpbmdbXTtcclxuICAgIGVzc2VudGlhbDogc3RyaW5nW107XHJcbn1cclxuXHJcbmludGVyZmFjZSBDb29raWVPcHRpb25zIHtcclxuICAgIGRheXM/OiBudW1iZXI7XHJcbn1cclxuXHJcbi8qIE5hbWUgb2YgdGhlIGNvb2tpZSB0byBzYXZlIHVzZXJzIGNvb2tpZSBwcmVmZXJlbmNlcyB0by4gKi9cclxuY29uc3QgQ09OU0VOVF9DT09LSUVfTkFNRSA9ICdzZXJ2aWNlX2RpcmVjdG9yeV9jb29raWVzX3BvbGljeSc7XHJcblxyXG4vKiBVc2VycyBjYW4gKGRpcylhbGxvdyBkaWZmZXJlbnQgZ3JvdXBzIG9mIGNvb2tpZXMuICovXHJcbmNvbnN0IENPT0tJRV9DQVRFR09SSUVTOiBDb29raWVDYXRlZ29yaWVzID0ge1xyXG4gICAgYW5hbHl0aWNzOiBbJ19nYScsICdfZ2FfJyArIHdpbmRvdy5HQV9DT05UQUlORVJfSURdLFxyXG4gICAgLyogRXNzZW50aWFsIGNvb2tpZXNcclxuICAgICAqXHJcbiAgICAgKiBFc3NlbnRpYWwgY29va2llcyBjYW5ub3QgYmUgZGVzZWxlY3RlZCwgYnV0IHdlIHdhbnQgb3VyIGNvb2tpZSBjb2RlIHRvXHJcbiAgICAgKiBvbmx5IGFsbG93IGFkZGluZyBjb29raWVzIHRoYXQgYXJlIGRvY3VtZW50ZWQgaW4gdGhpcyBvYmplY3QsIHNvIHRoZXkgbmVlZFxyXG4gICAgICogdG8gYmUgYWRkZWQgaGVyZS5cclxuICAgICAqL1xyXG4gICAgZXNzZW50aWFsOiBbJ3NlcnZpY2VfZGlyZWN0b3J5X2Nvb2tpZXNfcG9saWN5J11cclxufVxyXG5cclxuLypcclxuICogRGVmYXVsdCBjb29raWUgcHJlZmVyZW5jZXMgaWYgdXNlciBoYXMgbm8gY29va2llIHByZWZlcmVuY2VzLlxyXG4gKlxyXG4gKiBOb3RlIHRoYXQgdGhpcyBkb2Vzbid0IGluY2x1ZGUgYSBrZXkgZm9yIGVzc2VudGlhbCBjb29raWVzLCBlc3NlbnRpYWxcclxuICogY29va2llcyBjYW5ub3QgYmUgZGlzYWxsb3dlZC4gSWYgdGhlIG9iamVjdCBjb250YWlucyB7IGVzc2VudGlhbDogZmFsc2UgfVxyXG4gKiB0aGlzIHdpbGwgYmUgaWdub3JlZC5cclxuICovXHJcbmNvbnN0IERFRkFVTFRfQ09PS0lFX0NPTlNFTlQ6IENvbnNlbnRDb29raWUgPSB7XHJcbiAgICBhbmFseXRpY3M6IGZhbHNlLFxyXG4gICAgdmVyc2lvbjogd2luZG93LkdEU19DT05TRU5UX0NPT0tJRV9WRVJTSU9OXHJcbn1cclxuXHJcbi8qKiBSZXR1cm4gdGhlIHVzZXIncyBjb29raWUgcHJlZmVyZW5jZXMuXHJcbiAqXHJcbiAqIElmIHRoZSBjb25zZW50IGNvb2tpZSBpcyBtYWxmb3JtZWQsIG9yIG5vdCBwcmVzZW50LFxyXG4gKiByZXR1cm5zIG51bGwuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29uc2VudENvb2tpZSgpOiBDb25zZW50Q29va2llIHwgbnVsbCB7XHJcbiAgICBjb25zdCBjb25zZW50Q29va2llID0gZ2V0Q29va2llKENPTlNFTlRfQ09PS0lFX05BTUUpO1xyXG4gICAgbGV0IGNvbnNlbnRDb29raWVPYmo6IENvbnNlbnRDb29raWUgfCBudWxsO1xyXG5cclxuICAgIGlmIChjb25zZW50Q29va2llKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc2VudENvb2tpZU9iaiA9IEpTT04ucGFyc2UoY29uc2VudENvb2tpZSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGNvbnNlbnRDb29raWVPYmo7XHJcbn1cclxuXHJcbi8qKiBDaGVjayB0aGUgY29va2llIHByZWZlcmVuY2VzIG9iamVjdC5cclxuICpcclxuICogSWYgdGhlIGNvbnNlbnQgb2JqZWN0IGlzIG5vdCBwcmVzZW50LCBtYWxmb3JtZWQsIG9yIGluY29ycmVjdCB2ZXJzaW9uLFxyXG4gKiByZXR1cm5zIGZhbHNlLCBvdGhlcndpc2UgcmV0dXJucyB0cnVlLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsaWRDb25zZW50Q29va2llKG9wdGlvbnM6IENvbnNlbnRDb29raWUpIHtcclxuICAgIHJldHVybiAob3B0aW9ucyAmJiBvcHRpb25zLnZlcnNpb24gPj0gd2luZG93LkdEU19DT05TRU5UX0NPT0tJRV9WRVJTSU9OKTtcclxufVxyXG5cclxuLyoqIFVwZGF0ZSB0aGUgdXNlcidzIGNvb2tpZSBwcmVmZXJlbmNlcy4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldENvbnNlbnRDb29raWUob3B0aW9uczogQ29uc2VudENvb2tpZSkge1xyXG4gICAgbGV0IGNvb2tpZUNvbnNlbnQgPSBnZXRDb25zZW50Q29va2llKCk7XHJcblxyXG4gICAgaWYgKCFjb29raWVDb25zZW50KSB7XHJcbiAgICAgICAgY29va2llQ29uc2VudCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoREVGQVVMVF9DT09LSUVfQ09OU0VOVCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE1lcmdlIGN1cnJlbnQgY29va2llIHByZWZlcmVuY2VzIGFuZCBuZXcgcHJlZmVyZW5jZXNcclxuICAgIGZvciAodmFyIG9wdGlvbiBpbiBvcHRpb25zKSB7XHJcbiAgICAgICAgY29va2llQ29uc2VudFtvcHRpb25dID0gb3B0aW9uc1tvcHRpb25dO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEVzc2VudGlhbCBjb29raWVzIGNhbm5vdCBiZSBkZXNlbGVjdGVkLCBpZ25vcmUgdGhpcyBjb29raWUgdHlwZVxyXG4gICAgZGVsZXRlIGNvb2tpZUNvbnNlbnQuZXNzZW50aWFsO1xyXG5cclxuICAgIGNvb2tpZUNvbnNlbnQudmVyc2lvbiA9IHdpbmRvdy5HRFNfQ09OU0VOVF9DT09LSUVfVkVSU0lPTjtcclxuXHJcbiAgICAvLyBTZXQgdGhlIGNvbnNlbnQgY29va2llXHJcbiAgICBzZXRDb29raWUoQ09OU0VOVF9DT09LSUVfTkFNRSwgSlNPTi5zdHJpbmdpZnkoY29va2llQ29uc2VudCksIHsgZGF5czogMzY1IH0pO1xyXG5cclxuICAgIC8vIFVwZGF0ZSB0aGUgb3RoZXIgY29va2llc1xyXG4gICAgcmVzZXRDb29raWVzKCk7XHJcbn1cclxuXHJcbi8qKiBBcHBseSB0aGUgdXNlcidzIGNvb2tpZSBwcmVmZXJlbmNlc1xyXG4gKlxyXG4gKiBEZWxldGVzIGFueSBjb29raWVzIHRoZSB1c2VyIGhhcyBub3QgY29uc2VudGVkIHRvLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0Q29va2llcygpIHtcclxuICAgIHZhciBvcHRpb25zID0gZ2V0Q29uc2VudENvb2tpZSgpO1xyXG5cclxuICAgIC8vIElmIG5vIHByZWZlcmVuY2VzIG9yIG9sZCB2ZXJzaW9uIHVzZSB0aGUgZGVmYXVsdFxyXG4gICAgaWYgKCFpc1ZhbGlkQ29uc2VudENvb2tpZShvcHRpb25zKSkge1xyXG4gICAgICAgIG9wdGlvbnMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KERFRkFVTFRfQ09PS0lFX0NPTlNFTlQpKTtcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKHZhciBjb29raWVUeXBlIGluIG9wdGlvbnMpIHtcclxuICAgICAgICBpZiAoY29va2llVHlwZSA9PT0gJ3ZlcnNpb24nKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRXNzZW50aWFsIGNvb2tpZXMgY2Fubm90IGJlIGRlc2VsZWN0ZWQsIGlnbm9yZSB0aGlzIGNvb2tpZSB0eXBlXHJcbiAgICAgICAgaWYgKGNvb2tpZVR5cGUgPT09ICdlc3NlbnRpYWwnKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFvcHRpb25zW2Nvb2tpZVR5cGVdKSB7XHJcbiAgICAgICAgICAgIC8vIEZldGNoIHRoZSBjb29raWVzIGluIHRoYXQgY2F0ZWdvcnlcclxuICAgICAgICAgICAgdmFyIGNvb2tpZXNJbkNhdGVnb3J5ID0gQ09PS0lFX0NBVEVHT1JJRVNbY29va2llVHlwZV1cclxuXHJcbiAgICAgICAgICAgIGNvb2tpZXNJbkNhdGVnb3J5LmZvckVhY2goZnVuY3Rpb24gKGNvb2tpZSkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlQ29va2llKGNvb2tpZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gdXNlckFsbG93c0Nvb2tpZUNhdGVnb3J5KGNvb2tpZUNhdGVnb3J5LCBjb29raWVQcmVmZXJlbmNlcykge1xyXG4gICAgLy8gRXNzZW50aWFsIGNvb2tpZXMgYXJlIGFsd2F5cyBhbGxvd2VkXHJcbiAgICBpZiAoY29va2llQ2F0ZWdvcnkgPT09ICdlc3NlbnRpYWwnKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU29tZXRpbWVzIGNvb2tpZVByZWZlcmVuY2VzIGlzIG1hbGZvcm1lZCBpbiBzb21lIG9mIHRoZSB0ZXN0cywgc28gd2UgbmVlZCB0byBoYW5kbGUgdGhlc2VcclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIGNvb2tpZVByZWZlcmVuY2VzW2Nvb2tpZUNhdGVnb3J5XTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gdXNlckFsbG93c0Nvb2tpZShjb29raWVOYW1lOiBzdHJpbmcpIHtcclxuICAgIC8vIEFsd2F5cyBhbGxvdyBzZXR0aW5nIHRoZSBjb25zZW50IGNvb2tpZVxyXG4gICAgaWYgKGNvb2tpZU5hbWUgPT09IENPTlNFTlRfQ09PS0lFX05BTUUpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZXQgdGhlIGN1cnJlbnQgY29va2llIHByZWZlcmVuY2VzXHJcbiAgICB2YXIgY29va2llUHJlZmVyZW5jZXMgPSBnZXRDb25zZW50Q29va2llKCk7XHJcblxyXG4gICAgLy8gSWYgbm8gcHJlZmVyZW5jZXMgb3Igb2xkIHZlcnNpb24gdXNlIHRoZSBkZWZhdWx0XHJcbiAgICBpZiAoIWlzVmFsaWRDb25zZW50Q29va2llKGNvb2tpZVByZWZlcmVuY2VzKSkge1xyXG4gICAgICAgIGNvb2tpZVByZWZlcmVuY2VzID0gREVGQVVMVF9DT09LSUVfQ09OU0VOVDtcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKHZhciBjYXRlZ29yeSBpbiBDT09LSUVfQ0FURUdPUklFUykge1xyXG4gICAgICAgIHZhciBjb29raWVzSW5DYXRlZ29yeSA9IENPT0tJRV9DQVRFR09SSUVTW2NhdGVnb3J5XTtcclxuXHJcbiAgICAgICAgaWYgKGNvb2tpZXNJbkNhdGVnb3J5LmluZGV4T2YoY29va2llTmFtZSkgIT09ICctMScpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVzZXJBbGxvd3NDb29raWVDYXRlZ29yeShjYXRlZ29yeSwgY29va2llUHJlZmVyZW5jZXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBEZW55IHRoZSBjb29raWUgaWYgaXQgaXMgbm90IGtub3duIHRvIHVzXHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldENvb2tpZShuYW1lOiBzdHJpbmcpIHtcclxuICAgIHZhciBuYW1lRVEgPSBuYW1lICsgJz0nO1xyXG4gICAgdmFyIGNvb2tpZXMgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsnKTtcclxuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjb29raWVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgdmFyIGNvb2tpZSA9IGNvb2tpZXNbaV07XHJcbiAgICAgICAgd2hpbGUgKGNvb2tpZS5jaGFyQXQoMCkgPT09ICcgJykge1xyXG4gICAgICAgICAgICBjb29raWUgPSBjb29raWUuc3Vic3RyaW5nKDEsIGNvb2tpZS5sZW5ndGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY29va2llLmluZGV4T2YobmFtZUVRKSA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGNvb2tpZS5zdWJzdHJpbmcobmFtZUVRLmxlbmd0aCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59XHJcblxyXG4vLyBkbyB3ZSBuZWVkIHRvIHNldCB0aGUgZG9tYWluP1xyXG5mdW5jdGlvbiBzZXRDb29raWUobmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBvcHRpb25zPzogQ29va2llT3B0aW9ucykge1xyXG4gICAgaWYgKHVzZXJBbGxvd3NDb29raWUobmFtZSkpIHtcclxuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgY29va2llU3RyaW5nID0gbmFtZSArICc9JyArIHZhbHVlICsgJzsgcGF0aD0vOyBTYW1lU2l0ZT1TdHJpY3QnO1xyXG4gICAgICAgIGlmIChvcHRpb25zLmRheXMpIHtcclxuICAgICAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICBkYXRlLnNldFRpbWUoZGF0ZS5nZXRUaW1lKCkgKyAob3B0aW9ucy5kYXlzICogMjQgKiA2MCAqIDYwICogMTAwMCkpO1xyXG4gICAgICAgICAgICBjb29raWVTdHJpbmcgPSBjb29raWVTdHJpbmcgKyAnOyBleHBpcmVzPScgKyBkYXRlLnRvVVRDU3RyaW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkb2N1bWVudC5sb2NhdGlvbi5wcm90b2NvbCA9PT0gJ2h0dHBzOicpIHtcclxuICAgICAgICAgICAgY29va2llU3RyaW5nID0gY29va2llU3RyaW5nICsgJzsgU2VjdXJlJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZG9jdW1lbnQuY29va2llID0gY29va2llU3RyaW5nO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBkZWxldGVDb29raWUobmFtZTogc3RyaW5nKSB7XHJcbiAgICBpZiAoZ2V0Q29va2llKG5hbWUpKSB7XHJcbiAgICAgICAgLy8gQ29va2llcyBuZWVkIHRvIGJlIGRlbGV0ZWQgaW4gdGhlIHNhbWUgbGV2ZWwgb2Ygc3BlY2lmaWNpdHkgaW4gd2hpY2ggdGhleSB3ZXJlIHNldFxyXG4gICAgICAgIC8vIElmIGEgY29va2llIHdhcyBzZXQgd2l0aCBhIHNwZWNpZmllZCBkb21haW4sIGl0IG5lZWRzIHRvIGJlIHNwZWNpZmllZCB3aGVuIGRlbGV0ZWRcclxuICAgICAgICAvLyBJZiBhIGNvb2tpZSB3YXNuJ3Qgc2V0IHdpdGggdGhlIGRvbWFpbiBhdHRyaWJ1dGUsIGl0IHNob3VsZG4ndCBiZSB0aGVyZSB3aGVuIGRlbGV0ZWRcclxuICAgICAgICAvLyBZb3UgY2FuJ3QgdGVsbCBpZiBhIGNvb2tpZSB3YXMgc2V0IHdpdGggYSBkb21haW4gYXR0cmlidXRlIG9yIG5vdCwgc28gdHJ5IGJvdGggb3B0aW9uc1xyXG4gICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IG5hbWUgKyAnPTtleHBpcmVzPVRodSwgMDEgSmFuIDE5NzAgMDA6MDA6MDAgR01UO3BhdGg9Lyc7XHJcbiAgICAgICAgZG9jdW1lbnQuY29va2llID0gbmFtZSArICc9O2V4cGlyZXM9VGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMCBHTVQ7ZG9tYWluPScgKyB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgKyAnO3BhdGg9Lyc7XHJcbiAgICAgICAgZG9jdW1lbnQuY29va2llID0gbmFtZSArICc9O2V4cGlyZXM9VGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMCBHTVQ7ZG9tYWluPS4nICsgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lICsgJztwYXRoPS8nO1xyXG4gICAgfVxyXG59Il19\n","export function nodeListForEach(nodes, callback) {\n    if (window.NodeList.prototype.forEach) {\n        return nodes.forEach(callback);\n    }\n    for (var i = 0; i < nodes.length; i++) {\n        callback.call(window, nodes[i], i, nodes);\n    }\n}\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvaGVscGVycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxNQUFNLFVBQVUsZUFBZSxDQUMzQixLQUEwQixFQUMxQixRQUE0RTtJQUU1RSxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLE9BQU8sRUFBRTtRQUNuQyxPQUFPLEtBQUssQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7S0FDbEM7SUFDRCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUNuQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO0tBQzdDO0FBQ0wsQ0FBQyIsImZpbGUiOiJjb21wb25lbnRzL2hlbHBlcnMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuZXhwb3J0IGZ1bmN0aW9uIG5vZGVMaXN0Rm9yRWFjaChcclxuICAgIG5vZGVzOiBOb2RlTGlzdE9mPEVsZW1lbnQ+LFxyXG4gICAgY2FsbGJhY2s6IChub2RlOiBFbGVtZW50LCBpbmRleDogbnVtYmVyLCBub2RlczogTm9kZUxpc3RPZjxFbGVtZW50PikgPT4gdm9pZFxyXG4pOiB2b2lkIHtcclxuICAgIGlmICh3aW5kb3cuTm9kZUxpc3QucHJvdG90eXBlLmZvckVhY2gpIHtcclxuICAgICAgICByZXR1cm4gbm9kZXMuZm9yRWFjaChjYWxsYmFjayk7XHJcbiAgICB9XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY2FsbGJhY2suY2FsbCh3aW5kb3csIG5vZGVzW2ldLCBpLCBub2Rlcyk7XHJcbiAgICB9XHJcbn1cclxuIl19\n","//todo: consent mode debugging/check: https://developers.google.com/tag-platform/devguides/consent-debugging\nimport { getConsentCookie, isValidConsentCookie } from './cookie-functions.js';\nfunction gtag(command, ...args) {\n    window.dataLayer = window.dataLayer || [];\n    window.dataLayer.push(arguments);\n}\nlet GaMeasurementId = '';\n//todo: use prototype? (or class?)\n// (having an object (prototype/class) will ensure that GaMeasurementId will have already been set)\nexport default function initAnalytics(gaMeasurementId) {\n    // if the environment doesn't have a measurement id, don't load analytics\n    if (!Boolean(gaMeasurementId)) {\n        return;\n    }\n    GaMeasurementId = gaMeasurementId;\n    setDefaultConsent();\n    loadGaScript(gaMeasurementId);\n    gtag('js', new Date());\n    const pageViewParams = getPiiSafePageView(gaMeasurementId);\n    // set the config for auto generated events other than page_view\n    gtag('config', gaMeasurementId, {\n        send_page_view: false,\n        page_path: pageViewParams.page_path,\n        page_location: pageViewParams.page_location,\n        page_referrer: pageViewParams.referrer,\n        cookie_flags: 'secure'\n    });\n    const userConsent = getConsentCookie();\n    if (userConsent && isValidConsentCookie(userConsent) && userConsent.analytics) {\n        updateAnalyticsStorageConsent(true);\n    }\n    sendPageViewEvent();\n    sendFilterPageCustomEvent();\n}\nfunction setDefaultConsent() {\n    gtag('consent', 'default', {\n        'analytics_storage': 'denied'\n    });\n    gtag('set', 'url_passthrough', true);\n}\nexport function updateAnalyticsStorageConsent(granted, delayMs) {\n    let options = {\n        'analytics_storage': granted ? 'granted' : 'denied'\n    };\n    if (typeof delayMs !== 'undefined') {\n        options['wait_for_update'] = delayMs;\n    }\n    gtag('consent', 'update', options);\n}\nexport function sendPageViewEvent() {\n    // send the page_view event manually (https://developers.google.com/analytics/devguides/collection/gtagjs/pages#default_behavior)\n    gtag('event', 'page_view', getPiiSafePageView(GaMeasurementId));\n}\nexport function sendFilterPageCustomEvent() {\n    //todo: make filter page only\n    const element = document.getElementById('results');\n    const totalResults = element === null || element === void 0 ? void 0 : element.getAttribute('data-total-results');\n    if (totalResults === undefined)\n        return;\n    gtag('event', 'filter_page', {\n        'total_results': totalResults\n    });\n}\nexport function sendAnalyticsCustomEvent(accepted, source) {\n    gtag('event', 'analytics', {\n        'accepted': accepted,\n        'source': source\n    });\n}\nfunction loadGaScript(gaMeasurementId) {\n    const f = document.getElementsByTagName('script')[0];\n    const j = document.createElement('script');\n    j.async = true;\n    j.src = 'https://www.googletagmanager.com/gtag/js?id=' + gaMeasurementId;\n    f.parentNode.insertBefore(j, f);\n}\nfunction getPiiSafePageView(gaMeasurementId) {\n    const pageView = {\n        page_title: document.title,\n        send_to: gaMeasurementId,\n        referrer: '',\n        page_location: '',\n        page_path: ''\n    };\n    //todo: set as referrer or page_referrer in pageView - does it matter? is it only picking it up from the config?\n    //todo: get piisafe referrer function\n    if (document.referrer !== '') {\n        const referrerUrl = new URL(document.referrer);\n        const piiSafeReferrerQueryString = getPiiSafeQueryString(referrerUrl.search);\n        if (piiSafeReferrerQueryString == null) {\n            pageView.referrer = document.referrer;\n        }\n        else {\n            const urlArray = document.referrer.split('?');\n            pageView.referrer = urlArray[0] + piiSafeReferrerQueryString;\n        }\n    }\n    const piiSafeQueryString = getPiiSafeQueryString(window.location.search);\n    if (piiSafeQueryString == null) {\n        pageView.page_location = window.location.href;\n        pageView.page_path = window.location.pathname + window.location.search;\n        return pageView;\n    }\n    const urlArray = window.location.href.split('?');\n    pageView.page_location = urlArray[0] + piiSafeQueryString;\n    pageView.page_path = window.location.pathname + piiSafeQueryString;\n    return pageView;\n}\nfunction getPiiSafeQueryString(queryString) {\n    //todo: for safety, convert to lowercase, so that if the user changes the case of the url, we still don't collect pii\n    const queryParams = new URLSearchParams(queryString);\n    let postcode = queryParams.get('postcode');\n    if (postcode == null) {\n        // null indicates original query params were already pii safe\n        return null;\n    }\n    postcode = postcode.replace(/[a-zA-Z]+$/, '');\n    queryParams.set('postcode', postcode);\n    queryParams.delete('latitude');\n    queryParams.delete('longitude');\n    return '?' + queryParams.toString();\n}\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvYW5hbHl0aWNzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLDRHQUE0RztBQUU1RyxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQTtBQUU5RSxTQUFTLElBQUksQ0FBQyxPQUFlLEVBQUUsR0FBRyxJQUFXO0lBQ3pDLE1BQU0sQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDLFNBQVMsSUFBSSxFQUFFLENBQUM7SUFDMUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDckMsQ0FBQztBQUVELElBQUksZUFBZSxHQUFXLEVBQUUsQ0FBQztBQUVqQyxrQ0FBa0M7QUFDbEMsbUdBQW1HO0FBQ25HLE1BQU0sQ0FBQyxPQUFPLFVBQVUsYUFBYSxDQUFDLGVBQXVCO0lBRXpELHlFQUF5RTtJQUN6RSxJQUFJLENBQUMsT0FBTyxDQUFDLGVBQWUsQ0FBQyxFQUFFO1FBQzNCLE9BQU87S0FDVjtJQUVELGVBQWUsR0FBRyxlQUFlLENBQUM7SUFFbEMsaUJBQWlCLEVBQUUsQ0FBQztJQUVwQixZQUFZLENBQUMsZUFBZSxDQUFDLENBQUM7SUFFOUIsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLElBQUksRUFBRSxDQUFDLENBQUM7SUFFdkIsTUFBTSxjQUFjLEdBQUcsa0JBQWtCLENBQUMsZUFBZSxDQUFDLENBQUM7SUFFM0QsZ0VBQWdFO0lBQ2hFLElBQUksQ0FBQyxRQUFRLEVBQUUsZUFBZSxFQUFFO1FBQzVCLGNBQWMsRUFBRSxLQUFLO1FBQ3JCLFNBQVMsRUFBRSxjQUFjLENBQUMsU0FBUztRQUNuQyxhQUFhLEVBQUUsY0FBYyxDQUFDLGFBQWE7UUFDM0MsYUFBYSxFQUFFLGNBQWMsQ0FBQyxRQUFRO1FBQ3RDLFlBQVksRUFBRSxRQUFRO0tBQ3pCLENBQUMsQ0FBQztJQUVILE1BQU0sV0FBVyxHQUFHLGdCQUFnQixFQUFFLENBQUM7SUFDdkMsSUFBSSxXQUFX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QUksUUFBUSxJQUFJLElBQUksRUFBRTtRQUNsQiw2REFBNkQ7UUFDN0QsT0FBTyxJQUFJLENBQUM7S0FDZjtJQUVELFFBQVEsR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDLFlBQVksRUFBRSxFQUFFLENBQUMsQ0FBQztJQUM5QyxXQUFXLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUN0QyxXQUFXLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQy9CLFdBQVcsQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUM7SUFFaEMsT0FBTyxHQUFHLEdBQUcsV0FBVyxDQUFDLFFBQVEsRUFBRSxDQUFDO0FBQ3hDLENBQUMiLCJmaWxlIjoiY29tcG9uZW50cy9hbmFseXRpY3MuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuLy90b2RvOiBjb25zZW50IG1vZGUgZGVidWdnaW5nL2NoZWNrOiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS90YWctcGxhdGZvcm0vZGV2Z3VpZGVzL2NvbnNlbnQtZGVidWdnaW5nXHJcblxyXG5pbXBvcnQgeyBnZXRDb25zZW50Q29va2llLCBpc1ZhbGlkQ29uc2VudENvb2tpZSB9IGZyb20gJy4vY29va2llLWZ1bmN0aW9ucy5qcydcclxuXHJcbmZ1bmN0aW9uIGd0YWcoY29tbWFuZDogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xyXG4gICAgd2luZG93LmRhdGFMYXllciA9IHdpbmRvdy5kYXRhTGF5ZXIgfHwgW107XHJcbiAgICB3aW5kb3cuZGF0YUxheWVyLnB1c2goYXJndW1lbnRzKTtcclxufVxyXG5cclxubGV0IEdhTWVhc3VyZW1lbnRJZDogc3RyaW5nID0gJyc7XHJcblxyXG4vL3RvZG86IHVzZSBwcm90b3R5cGU/IChvciBjbGFzcz8pXHJcbi8vIChoYXZpbmcgYW4gb2JqZWN0IChwcm90b3R5cGUvY2xhc3MpIHdpbGwgZW5zdXJlIHRoYXQgR2FNZWFzdXJlbWVudElkIHdpbGwgaGF2ZSBhbHJlYWR5IGJlZW4gc2V0KVxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpbml0QW5hbHl0aWNzKGdhTWVhc3VyZW1lbnRJZDogc3RyaW5nKSB7XHJcblxyXG4gICAgLy8gaWYgdGhlIGVudmlyb25tZW50IGRvZXNuJ3QgaGF2ZSBhIG1lYXN1cmVtZW50IGlkLCBkb24ndCBsb2FkIGFuYWx5dGljc1xyXG4gICAgaWYgKCFCb29sZWFuKGdhTWVhc3VyZW1lbnRJZCkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgR2FNZWFzdXJlbWVudElkID0gZ2FNZWFzdXJlbWVudElkO1xyXG5cclxuICAgIHNldERlZmF1bHRDb25zZW50KCk7XHJcblxyXG4gICAgbG9hZEdhU2NyaXB0KGdhTWVhc3VyZW1lbnRJZCk7XHJcblxyXG4gICAgZ3RhZygnanMnLCBuZXcgRGF0ZSgpKTtcclxuXHJcbiAgICBjb25zdCBwYWdlVmlld1BhcmFtcyA9IGdldFBpaVNhZmVQYWdlVmlldyhnYU1lYXN1cmVtZW50SWQpO1xyXG5cclxuICAgIC8vIHNldCB0aGUgY29uZmlnIGZvciBhdXRvIGdlbmVyYXRlZCBldmVudHMgb3RoZXIgdGhhbiBwYWdlX3ZpZXdcclxuICAgIGd0YWcoJ2NvbmZpZycsIGdhTWVhc3VyZW1lbnRJZCwge1xyXG4gICAgICAgIHNlbmRfcGFnZV92aWV3OiBmYWxzZSwgLy9kaXNhYmxlIGF1dG8gcGFnZV92aWV3IG1lYXN1cmVtZW50XHJcbiAgICAgICAgcGFnZV9wYXRoOiBwYWdlVmlld1BhcmFtcy5wYWdlX3BhdGgsXHJcbiAgICAgICAgcGFnZV9sb2NhdGlvbjogcGFnZVZpZXdQYXJhbXMucGFnZV9sb2NhdGlvbixcclxuICAgICAgICBwYWdlX3JlZmVycmVyOiBwYWdlVmlld1BhcmFtcy5yZWZlcnJlcixcclxuICAgICAgICBjb29raWVfZmxhZ3M6ICdzZWN1cmUnXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCB1c2VyQ29uc2VudCA9IGdldENvbnNlbnRDb29raWUoKTtcclxuICAgIGlmICh1c2VyQ29uc2VudCAmJiBpc1ZhbGlkQ29uc2VudENvb2tpZSh1c2VyQ29uc2VudCkgJiYgdXNlckNvbnNlbnQuYW5hbHl0aWNzKSB7XHJcbiAgICAgICAgdXBkYXRlQW5hbHl0aWNzU3RvcmFnZUNvbnNlbnQodHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2VuZFBhZ2VWaWV3RXZlbnQoKTtcclxuICAgIHNlbmRGaWx0ZXJQYWdlQ3VzdG9tRXZlbnQoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0RGVmYXVsdENvbnNlbnQoKSB7XHJcbiAgICBndGFnKCdjb25zZW50JywgJ2RlZmF1bHQnLCB7XHJcbiAgICAgICAgJ2FuYWx5dGljc19zdG9yYWdlJzogJ2RlbmllZCdcclxuICAgIH0pO1xyXG5cclxuICAgIGd0YWcoJ3NldCcsICd1cmxfcGFzc3Rocm91Z2gnLCB0cnVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUFuYWx5dGljc1N0b3JhZ2VDb25zZW50KGdyYW50ZWQ6IGJvb2xlYW4sIGRlbGF5TXM/OiBudW1iZXIpIHtcclxuXHJcbiAgICBsZXQgb3B0aW9ucyA9IHtcclxuICAgICAgICAnYW5hbHl0aWNzX3N0b3JhZ2UnOiBncmFudGVkID8gJ2dyYW50ZWQnIDogJ2RlbmllZCdcclxuICAgIH07XHJcblxyXG4gICAgaWYgKHR5cGVvZiBkZWxheU1zICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIG9wdGlvbnNbJ3dhaXRfZm9yX3VwZGF0ZSddID0gZGVsYXlNcztcclxuICAgIH1cclxuXHJcbiAgICBndGFnKCdjb25zZW50JywgJ3VwZGF0ZScsIG9wdGlvbnMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2VuZFBhZ2VWaWV3RXZlbnQoKSB7XHJcbiAgICAvLyBzZW5kIHRoZSBwYWdlX3ZpZXcgZXZlbnQgbWFudWFsbHkgKGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2FuYWx5dGljcy9kZXZndWlkZXMvY29sbGVjdGlvbi9ndGFnanMvcGFnZXMjZGVmYXVsdF9iZWhhdmlvcilcclxuICAgIGd0YWcoJ2V2ZW50JywgJ3BhZ2VfdmlldycsIGdldFBpaVNhZmVQYWdlVmlldyhHYU1lYXN1cmVtZW50SWQpKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNlbmRGaWx0ZXJQYWdlQ3VzdG9tRXZlbnQoKSB7XHJcbiAgICAvL3RvZG86IG1ha2UgZmlsdGVyIHBhZ2Ugb25seVxyXG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN1bHRzJyk7XHJcbiAgICBjb25zdCB0b3RhbFJlc3VsdHMgPSBlbGVtZW50Py5nZXRBdHRyaWJ1dGUoJ2RhdGEtdG90YWwtcmVzdWx0cycpO1xyXG4gICAgaWYgKHRvdGFsUmVzdWx0cyA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgIHJldHVybjtcclxuXHJcbiAgICBndGFnKCdldmVudCcsICdmaWx0ZXJfcGFnZScsIHtcclxuICAgICAgICAndG90YWxfcmVzdWx0cyc6IHRvdGFsUmVzdWx0c1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZW5kQW5hbHl0aWNzQ3VzdG9tRXZlbnQoYWNjZXB0ZWQ6IGJvb2xlYW4sIHNvdXJjZTogc3RyaW5nKSB7XHJcblxyXG4gICAgZ3RhZygnZXZlbnQnLCAnYW5hbHl0aWNzJywge1xyXG4gICAgICAgICdhY2NlcHRlZCc6IGFjY2VwdGVkLFxyXG4gICAgICAgICdzb3VyY2UnOiBzb3VyY2VcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBsb2FkR2FTY3JpcHQoZ2FNZWFzdXJlbWVudElkOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGYgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0JylbMF07XHJcbiAgICBjb25zdCBqID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgICBqLmFzeW5jID0gdHJ1ZTtcclxuICAgIGouc3JjID0gJ2h0dHBzOi8vd3d3Lmdvb2dsZXRhZ21hbmFnZXIuY29tL2d0YWcvanM/aWQ9JyArIGdhTWVhc3VyZW1lbnRJZDtcclxuICAgIGYucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoaiwgZik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFBpaVNhZmVQYWdlVmlldyhnYU1lYXN1cmVtZW50SWQ6IHN0cmluZykge1xyXG5cclxuICAgIGNvbnN0IHBhZ2VWaWV3ID0ge1xyXG4gICAgICAgIHBhZ2VfdGl0bGU6IGRvY3VtZW50LnRpdGxlLFxyXG4gICAgICAgIHNlbmRfdG86IGdhTWVhc3VyZW1lbnRJZCxcclxuICAgICAgICByZWZlcnJlcjogJycsXHJcbiAgICAgICAgcGFnZV9sb2NhdGlvbjogJycsXHJcbiAgICAgICAgcGFnZV9wYXRoOiAnJ1xyXG4gICAgfTtcclxuXHJcbiAgICAvL3RvZG86IHNldCBhcyByZWZlcnJlciBvciBwYWdlX3JlZmVycmVyIGluIHBhZ2VWaWV3IC0gZG9lcyBpdCBtYXR0ZXI/IGlzIGl0IG9ubHkgcGlja2luZyBpdCB1cCBmcm9tIHRoZSBjb25maWc/XHJcbiAgICAvL3RvZG86IGdldCBwaWlzYWZlIHJlZmVycmVyIGZ1bmN0aW9uXHJcbiAgICBpZiAoZG9jdW1lbnQucmVmZXJyZXIgIT09ICcnKSB7XHJcbiAgICAgICAgY29uc3QgcmVmZXJyZXJVcmwgPSBuZXcgVVJMKGRvY3VtZW50LnJlZmVycmVyKTtcclxuICAgICAgICBjb25zdCBwaWlTYWZlUmVmZXJyZXJRdWVyeVN0cmluZyA9IGdldFBpaVNhZmVRdWVyeVN0cmluZyhyZWZlcnJlclVybC5zZWFyY2gpO1xyXG4gICAgICAgIGlmIChwaWlTYWZlUmVmZXJyZXJRdWVyeVN0cmluZyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHBhZ2VWaWV3LnJlZmVycmVyID0gZG9jdW1lbnQucmVmZXJyZXI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgdXJsQXJyYXkgPSBkb2N1bWVudC5yZWZlcnJlci5zcGxpdCgnPycpO1xyXG5cclxuICAgICAgICAgICAgcGFnZVZpZXcucmVmZXJyZXIgPSB1cmxBcnJheVswXSArIHBpaVNhZmVSZWZlcnJlclF1ZXJ5U3RyaW5nO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBwaWlTYWZlUXVlcnlTdHJpbmcgPSBnZXRQaWlTYWZlUXVlcnlTdHJpbmcod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7XHJcblxyXG4gICAgaWYgKHBpaVNhZmVRdWVyeVN0cmluZyA9PSBudWxsKSB7XHJcbiAgICAgICAgcGFnZVZpZXcucGFnZV9sb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xyXG4gICAgICAgIHBhZ2VWaWV3LnBhZ2VfcGF0aCA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSArIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2g7XHJcblxyXG4gICAgICAgIHJldHVybiBwYWdlVmlldztcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB1cmxBcnJheSA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KCc/Jyk7XHJcblxyXG4gICAgcGFnZVZpZXcucGFnZV9sb2NhdGlvbiA9IHVybEFycmF5WzBdICsgcGlpU2FmZVF1ZXJ5U3RyaW5nO1xyXG4gICAgcGFnZVZpZXcucGFnZV9wYXRoID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsgcGlpU2FmZVF1ZXJ5U3RyaW5nO1xyXG5cclxuICAgIHJldHVybiBwYWdlVmlldztcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0UGlpU2FmZVF1ZXJ5U3RyaW5nKHF1ZXJ5U3RyaW5nOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcclxuXHJcbiAgICAvL3RvZG86IGZvciBzYWZldHksIGNvbnZlcnQgdG8gbG93ZXJjYXNlLCBzbyB0aGF0IGlmIHRoZSB1c2VyIGNoYW5nZXMgdGhlIGNhc2Ugb2YgdGhlIHVybCwgd2Ugc3RpbGwgZG9uJ3QgY29sbGVjdCBwaWlcclxuICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhxdWVyeVN0cmluZyk7XHJcblxyXG4gICAgbGV0IHBvc3Rjb2RlID0gcXVlcnlQYXJhbXMuZ2V0KCdwb3N0Y29kZScpO1xyXG4gICAgaWYgKHBvc3Rjb2RlID09IG51bGwpIHtcclxuICAgICAgICAvLyBudWxsIGluZGljYXRlcyBvcmlnaW5hbCBxdWVyeSBwYXJhbXMgd2VyZSBhbHJlYWR5IHBpaSBzYWZlXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcG9zdGNvZGUgPSBwb3N0Y29kZS5yZXBsYWNlKC9bYS16QS1aXSskLywgJycpO1xyXG4gICAgcXVlcnlQYXJhbXMuc2V0KCdwb3N0Y29kZScsIHBvc3Rjb2RlKTtcclxuICAgIHF1ZXJ5UGFyYW1zLmRlbGV0ZSgnbGF0aXR1ZGUnKTtcclxuICAgIHF1ZXJ5UGFyYW1zLmRlbGV0ZSgnbG9uZ2l0dWRlJyk7XHJcblxyXG4gICAgcmV0dXJuICc/JyArIHF1ZXJ5UGFyYW1zLnRvU3RyaW5nKCk7XHJcbn1cclxuIl19\n","import * as CookieFunctions from './cookie-functions.js';\n/*todo: we don't meed a pollyfill for bind, as long as we server up the non js version of the site for ie8 (https://caniuse.com/?search=bind) */\n/*import 'govuk-frontend/govuk/vendor/polyfills/Function/prototype/bind'*/\n/*todo: i think we're ok for this too (see above about ie8), but we _might_ need it for >8 ie (use? https://www.npmjs.com/package/events-polyfill)*/\n/*import 'govuk-frontend/govuk/vendor/polyfills/Event'*/\nimport { nodeListForEach } from './helpers.js';\nimport { sendPageViewEvent, sendFilterPageCustomEvent, sendAnalyticsCustomEvent, updateAnalyticsStorageConsent } from './analytics.js';\nconst cookieBannerAcceptSelector = '.js-cookie-banner-accept';\nconst cookieBannerRejectSelector = '.js-cookie-banner-reject';\nconst cookieBannerHideButtonSelector = '.js-cookie-banner-hide';\nconst cookieMessageSelector = '.js-cookie-banner-message';\nconst cookieConfirmationAcceptSelector = '.js-cookie-banner-confirmation-accept';\nconst cookieConfirmationRejectSelector = '.js-cookie-banner-confirmation-reject';\nexport default function CookieBanner($module) {\n    this.$module = $module;\n}\nCookieBanner.prototype.init = function () {\n    this.$cookieBanner = this.$module;\n    this.$acceptButton = this.$module.querySelector(cookieBannerAcceptSelector);\n    this.$rejectButton = this.$module.querySelector(cookieBannerRejectSelector);\n    this.$cookieMessage = this.$module.querySelector(cookieMessageSelector);\n    this.$cookieConfirmationAccept = this.$module.querySelector(cookieConfirmationAcceptSelector);\n    this.$cookieConfirmationReject = this.$module.querySelector(cookieConfirmationRejectSelector);\n    this.$cookieBannerHideButtons = this.$module.querySelectorAll(cookieBannerHideButtonSelector);\n    // Exit if no cookie banner module\n    // or if we're on the cookies page to avoid circular journeys\n    if (!this.$cookieBanner || this.onCookiesPage()) {\n        return;\n    }\n    // Show the cookie banner to users who have not consented or have an\n    // outdated consent cookie\n    var currentConsentCookie = CookieFunctions.getConsentCookie();\n    if (!currentConsentCookie || !CookieFunctions.isValidConsentCookie(currentConsentCookie)) {\n        // If the consent cookie version is not valid, we need to remove any cookies which have been\n        // set previously\n        CookieFunctions.resetCookies();\n        this.$cookieBanner.removeAttribute('hidden');\n    }\n    this.$acceptButton.addEventListener('click', this.acceptCookies.bind(this));\n    this.$rejectButton.addEventListener('click', this.rejectCookies.bind(this));\n    nodeListForEach(this.$cookieBannerHideButtons, function ($cookieBannerHideButton) {\n        $cookieBannerHideButton.addEventListener('click', this.hideBanner.bind(this));\n    }.bind(this));\n};\nCookieBanner.prototype.hideBanner = function () {\n    this.$cookieBanner.setAttribute('hidden', true);\n};\nCookieBanner.prototype.acceptCookies = function () {\n    // Do actual cookie consent bit\n    CookieFunctions.setConsentCookie({ analytics: true });\n    updateAnalyticsStorageConsent(true);\n    sendAnalyticsCustomEvent(true, 'banner');\n    sendPageViewEvent();\n    sendFilterPageCustomEvent();\n    // Hide banner and show confirmation message\n    this.$cookieMessage.setAttribute('hidden', true);\n    this.revealConfirmationMessage(this.$cookieConfirmationAccept);\n};\nCookieBanner.prototype.rejectCookies = function () {\n    updateAnalyticsStorageConsent(true);\n    sendAnalyticsCustomEvent(false, 'banner');\n    updateAnalyticsStorageConsent(false);\n    //setTimeout(CookieFunctions.setConsentCookie.bind({ analytics: false }), 250);\n    CookieFunctions.setConsentCookie({ analytics: false });\n    // Hide banner and show confirmation message\n    this.$cookieMessage.setAttribute('hidden', true);\n    this.revealConfirmationMessage(this.$cookieConfirmationReject);\n};\nCookieBanner.prototype.revealConfirmationMessage = function (confirmationMessage) {\n    confirmationMessage.removeAttribute('hidden');\n    // Set tabindex to -1 to make the confirmation banner focusable with JavaScript\n    if (!confirmationMessage.getAttribute('tabindex')) {\n        confirmationMessage.setAttribute('tabindex', '-1');\n        confirmationMessage.addEventListener('blur', function () {\n            confirmationMessage.removeAttribute('tabindex');\n        });\n    }\n    confirmationMessage.focus();\n};\nCookieBanner.prototype.onCookiesPage = function () {\n    return window.location.pathname === '/cookies/';\n};\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvY29va2llLWJhbm5lci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEtBQUssZUFBZSxNQUFNLHVCQUF1QixDQUFBO0FBQ3hELGdKQUFnSjtBQUNoSiwwRUFBMEU7QUFDMUUsb0pBQW9KO0FBQ3BKLHdEQUF3RDtBQUN4RCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sY0FBYyxDQUFBO0FBQzlDLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSx5QkFBeUIsRUFBRSx3QkFBd0IsRUFBRSw2QkFBNkIsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRXZJLE1BQU0sMEJBQTBCLEdBQUcsMEJBQTBCLENBQUE7QUFDN0QsTUFBTSwwQkFBMEIsR0FBRywwQkFBMEIsQ0FBQTtBQUM3RCxNQUFNLDhCQUE4QixHQUFHLHdCQUF3QixDQUFBO0FBQy9ELE1BQU0scUJBQXFCLEdBQUcsMkJBQTJCLENBQUE7QUFDekQsTUFBTSxnQ0FBZ0MsR0FBRyx1Q0FBdUMsQ0FBQTtBQUNoRixNQUFNLGdDQUFnQyxHQUFHLHVDQUF1QyxDQUFBO0FBRWhGLE1BQU0sQ0FBQyxPQUFPLFVBQVUsWUFBWSxDQUFDLE9BQW9CO0lBQ3JELElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO0FBQzNCLENBQUM7QUFFRCxZQUFZLENBQUMsU0FBUyxDQUFDLElBQUksR0FBRztJQUMxQixJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUE7SUFDakMsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQywwQkFBMEIsQ0FBQyxDQUFBO0lBQzNFLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsMEJBQTBCLENBQUMsQ0FBQTtJQUMzRSxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLHFCQUFxQixDQUFDLENBQUE7SUFDdkUsSUFBSSxDQUFDLHlCQUF5QixHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLGdDQUFnQyxDQUFDLENBQUE7SUFDN0YsSUFBSSxDQUFDLHlCQUF5QixHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLGdDQUFnQyxDQUFDLENBQUE7SUFDN0YsSUFBSSxDQUFDLHdCQUF3QixHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsOEJBQThCLENBQUMsQ0FBQTtJQUU3RixrQ0FBa0M7SUFDbEMsNkRBQTZEO0lBQzdELElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxJQUFJLElBQUksQ0FBQyxhQUFhLEVBQUUsRUFBRTtRQUM3QyxPQUFNO0tBQ1Q7SUFFRCxvRUFBb0U7SUFDcEUsMEJBQTBCO0lBQzFCLElBQUksb0JBQW9CLEdBQUcsZUFBZSxDQUFDLGdCQUFnQixFQUFFLENBQUE7SUFFN0QsSUFBSSxDQUFDLG9CQUFvQixJQUFJLENBQUMsZUFBZSxDQUFDLG9CQUFvQixDQUFDLG9CQUFvQixDQUFDLEVBQUU7UUFDdEYsNEZBQTRGO1FBQzVGLGlCQUFpQjtRQUNqQixlQUFlLENBQUMsWUFBWSxFQUFFLENBQUE7UUFFOUIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDLENBQUE7S0FDL0M7SUFFRCxJQUFJLENBQUMsYUFBYSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFBO0lBQzNFLElBQUksQ0FBQyxhQUFhLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUE7SUFFM0UsZUFBZSxDQUFDLElBQUksQ0FBQyx3QkFBd0IsRUFBRSxVQUFVLHVCQUF1QjtRQUM1RSx1QkFBdUIsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQTtJQUNqRixDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUE7QUFDakIsQ0FBQyxDQUFBO0FBRUQsWUFBWSxDQUFDLFNBQVMsQ0FBQyxVQUFVLEdBQUc7SUFDaEMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxZQUFZLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFBO0FBQ25ELENBQUMsQ0FBQTtBQUVELFlBQVksQ0FBQyxTQUFTLENBQUMsYUFBYSxHQUFHO0lBQ25DLCtCQUErQjtJQUMvQixlQUFlLENBQUMsZ0JBQWdCLENBQUMsRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztJQUV0RCw2QkFBNkIsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUVwQyx3QkFBd0IsQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDekMsaUJBQWlCLEVBQUUsQ0FBQztJQUNwQix5QkFBeUIsRUFBRSxDQUFDO0lBRTVCLDRDQUE0QztJQUM1QyxJQUFJLENBQUMsY0FBYyxDQUFDLFlBQVksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLENBQUE7SUFDaEQsSUFBSSxDQUFDLHlCQUF5QixDQUFDLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxDQUFBO0FBQ2xFLENBQUMsQ0FBQTtBQUVELFlBQVksQ0FBQyxTQUFTLENBQUMsYUFBYSxHQUFHO0lBRW5DLDZCQUE2QixDQUFDLElBQUksQ0FBQyxDQUFDO0lBRXBDLHdCQUF3QixDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsQ0FBQztJQUUxQyw2QkFBNkIsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUVyQywrRUFBK0U7SUFDL0UsZUFBZSxDQUFDLGdCQUFnQixDQUFDLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7SUFFdkQsNENBQTRDO0lBQzVDLElBQUksQ0FBQyxjQUFjLENBQUMsWUFBWSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsQ0FBQTtJQUNoRCxJQUFJLENBQUMseUJBQXlCLENBQUMsSUFBSSxDQUFDLHlCQUF5QixDQUFDLENBQUE7QUFDbEUsQ0FBQyxDQUFBO0FBRUQsWUFBWSxDQUFDLFNBQVMsQ0FBQyx5QkFBeUIsR0FBRyxVQUFVLG1CQUFtQjtJQUM1RSxtQkFBbUIsQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDLENBQUE7SUFFN0MsK0VBQStFO0lBQy9FLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxZQUFZLENBQUMsVUFBVSxDQUFDLEVBQUU7UUFDL0MsbUJBQW1CLENBQUMsWUFBWSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsQ0FBQTtRQUVsRCxtQkFBbUIsQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUU7WUFDekMsbUJBQW1CLENBQUMsZUFBZSxDQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQ25ELENBQUMsQ0FBQyxDQUFBO0tBQ0w7SUFFRCxtQkFBbUIsQ0FBQyxLQUFLLEVBQUUsQ0FBQTtBQUMvQixDQUFDLENBQUE7QUFFRCxZQUFZLENBQUMsU0FBUyxDQUFDLGFBQWEsR0FBRztJQUNuQyxPQUFPLE1BQU0sQ0FBQyxRQUFRLENBQUMsUUFBUSxLQUFLLFdBQVcsQ0FBQTtBQUNuRCxDQUFDLENBQUEiLCJmaWxlIjoiY29tcG9uZW50cy9jb29raWUtYmFubmVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgQ29va2llRnVuY3Rpb25zIGZyb20gJy4vY29va2llLWZ1bmN0aW9ucy5qcydcclxuLyp0b2RvOiB3ZSBkb24ndCBtZWVkIGEgcG9sbHlmaWxsIGZvciBiaW5kLCBhcyBsb25nIGFzIHdlIHNlcnZlciB1cCB0aGUgbm9uIGpzIHZlcnNpb24gb2YgdGhlIHNpdGUgZm9yIGllOCAoaHR0cHM6Ly9jYW5pdXNlLmNvbS8/c2VhcmNoPWJpbmQpICovXHJcbi8qaW1wb3J0ICdnb3Z1ay1mcm9udGVuZC9nb3Z1ay92ZW5kb3IvcG9seWZpbGxzL0Z1bmN0aW9uL3Byb3RvdHlwZS9iaW5kJyovXHJcbi8qdG9kbzogaSB0aGluayB3ZSdyZSBvayBmb3IgdGhpcyB0b28gKHNlZSBhYm92ZSBhYm91dCBpZTgpLCBidXQgd2UgX21pZ2h0XyBuZWVkIGl0IGZvciA+OCBpZSAodXNlPyBodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9ldmVudHMtcG9seWZpbGwpKi9cclxuLyppbXBvcnQgJ2dvdnVrLWZyb250ZW5kL2dvdnVrL3ZlbmRvci9wb2x5ZmlsbHMvRXZlbnQnKi9cclxuaW1wb3J0IHsgbm9kZUxpc3RGb3JFYWNoIH0gZnJvbSAnLi9oZWxwZXJzLmpzJ1xyXG5pbXBvcnQgeyBzZW5kUGFnZVZpZXdFdmVudCwgc2VuZEZpbHRlclBhZ2VDdXN0b21FdmVudCwgc2VuZEFuYWx5dGljc0N1c3RvbUV2ZW50LCB1cGRhdGVBbmFseXRpY3NTdG9yYWdlQ29uc2VudCB9IGZyb20gJy4vYW5hbHl0aWNzLmpzJztcclxuXHJcbmNvbnN0IGNvb2tpZUJhbm5lckFjY2VwdFNlbGVjdG9yID0gJy5qcy1jb29raWUtYmFubmVyLWFjY2VwdCdcclxuY29uc3QgY29va2llQmFubmVyUmVqZWN0U2VsZWN0b3IgPSAnLmpzLWNvb2tpZS1iYW5uZXItcmVqZWN0J1xyXG5jb25zdCBjb29raWVCYW5uZXJIaWRlQnV0dG9uU2VsZWN0b3IgPSAnLmpzLWNvb2tpZS1iYW5uZXItaGlkZSdcclxuY29uc3QgY29va2llTWVzc2FnZVNlbGVjdG9yID0gJy5qcy1jb29raWUtYmFubmVyLW1lc3NhZ2UnXHJcbmNvbnN0IGNvb2tpZUNvbmZpcm1hdGlvbkFjY2VwdFNlbGVjdG9yID0gJy5qcy1jb29raWUtYmFubmVyLWNvbmZpcm1hdGlvbi1hY2NlcHQnXHJcbmNvbnN0IGNvb2tpZUNvbmZpcm1hdGlvblJlamVjdFNlbGVjdG9yID0gJy5qcy1jb29raWUtYmFubmVyLWNvbmZpcm1hdGlvbi1yZWplY3QnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDb29raWVCYW5uZXIoJG1vZHVsZTogSFRNTEVsZW1lbnQpIHtcclxuICAgIHRoaXMuJG1vZHVsZSA9ICRtb2R1bGU7XHJcbn1cclxuXHJcbkNvb2tpZUJhbm5lci5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuJGNvb2tpZUJhbm5lciA9IHRoaXMuJG1vZHVsZVxyXG4gICAgdGhpcy4kYWNjZXB0QnV0dG9uID0gdGhpcy4kbW9kdWxlLnF1ZXJ5U2VsZWN0b3IoY29va2llQmFubmVyQWNjZXB0U2VsZWN0b3IpXHJcbiAgICB0aGlzLiRyZWplY3RCdXR0b24gPSB0aGlzLiRtb2R1bGUucXVlcnlTZWxlY3Rvcihjb29raWVCYW5uZXJSZWplY3RTZWxlY3RvcilcclxuICAgIHRoaXMuJGNvb2tpZU1lc3NhZ2UgPSB0aGlzLiRtb2R1bGUucXVlcnlTZWxlY3Rvcihjb29raWVNZXNzYWdlU2VsZWN0b3IpXHJcbiAgICB0aGlzLiRjb29raWVDb25maXJtYXRpb25BY2NlcHQgPSB0aGlzLiRtb2R1bGUucXVlcnlTZWxlY3Rvcihjb29raWVDb25maXJtYXRpb25BY2NlcHRTZWxlY3RvcilcclxuICAgIHRoaXMuJGNvb2tpZUNvbmZpcm1hdGlvblJlamVjdCA9IHRoaXMuJG1vZHVsZS5xdWVyeVNlbGVjdG9yKGNvb2tpZUNvbmZpcm1hdGlvblJlamVjdFNlbGVjdG9yKVxyXG4gICAgdGhpcy4kY29va2llQmFubmVySGlkZUJ1dHRvbnMgPSB0aGlzLiRtb2R1bGUucXVlcnlTZWxlY3RvckFsbChjb29raWVCYW5uZXJIaWRlQnV0dG9uU2VsZWN0b3IpXHJcblxyXG4gICAgLy8gRXhpdCBpZiBubyBjb29raWUgYmFubmVyIG1vZHVsZVxyXG4gICAgLy8gb3IgaWYgd2UncmUgb24gdGhlIGNvb2tpZXMgcGFnZSB0byBhdm9pZCBjaXJjdWxhciBqb3VybmV5c1xyXG4gICAgaWYgKCF0aGlzLiRjb29raWVCYW5uZXIgfHwgdGhpcy5vbkNvb2tpZXNQYWdlKCkpIHtcclxuICAgICAgICByZXR1cm5cclxuICAgIH1cclxuXHJcbiAgICAvLyBTaG93IHRoZSBjb29raWUgYmFubmVyIHRvIHVzZXJzIHdobyBoYXZlIG5vdCBjb25zZW50ZWQgb3IgaGF2ZSBhblxyXG4gICAgLy8gb3V0ZGF0ZWQgY29uc2VudCBjb29raWVcclxuICAgIHZhciBjdXJyZW50Q29uc2VudENvb2tpZSA9IENvb2tpZUZ1bmN0aW9ucy5nZXRDb25zZW50Q29va2llKClcclxuXHJcbiAgICBpZiAoIWN1cnJlbnRDb25zZW50Q29va2llIHx8ICFDb29raWVGdW5jdGlvbnMuaXNWYWxpZENvbnNlbnRDb29raWUoY3VycmVudENvbnNlbnRDb29raWUpKSB7XHJcbiAgICAgICAgLy8gSWYgdGhlIGNvbnNlbnQgY29va2llIHZlcnNpb24gaXMgbm90IHZhbGlkLCB3ZSBuZWVkIHRvIHJlbW92ZSBhbnkgY29va2llcyB3aGljaCBoYXZlIGJlZW5cclxuICAgICAgICAvLyBzZXQgcHJldmlvdXNseVxyXG4gICAgICAgIENvb2tpZUZ1bmN0aW9ucy5yZXNldENvb2tpZXMoKVxyXG5cclxuICAgICAgICB0aGlzLiRjb29raWVCYW5uZXIucmVtb3ZlQXR0cmlidXRlKCdoaWRkZW4nKVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuJGFjY2VwdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuYWNjZXB0Q29va2llcy5iaW5kKHRoaXMpKVxyXG4gICAgdGhpcy4kcmVqZWN0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5yZWplY3RDb29raWVzLmJpbmQodGhpcykpXHJcblxyXG4gICAgbm9kZUxpc3RGb3JFYWNoKHRoaXMuJGNvb2tpZUJhbm5lckhpZGVCdXR0b25zLCBmdW5jdGlvbiAoJGNvb2tpZUJhbm5lckhpZGVCdXR0b24pIHtcclxuICAgICAgICAkY29va2llQmFubmVySGlkZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGlkZUJhbm5lci5iaW5kKHRoaXMpKVxyXG4gICAgfS5iaW5kKHRoaXMpKVxyXG59XHJcblxyXG5Db29raWVCYW5uZXIucHJvdG90eXBlLmhpZGVCYW5uZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLiRjb29raWVCYW5uZXIuc2V0QXR0cmlidXRlKCdoaWRkZW4nLCB0cnVlKVxyXG59XHJcblxyXG5Db29raWVCYW5uZXIucHJvdG90eXBlLmFjY2VwdENvb2tpZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyBEbyBhY3R1YWwgY29va2llIGNvbnNlbnQgYml0XHJcbiAgICBDb29raWVGdW5jdGlvbnMuc2V0Q29uc2VudENvb2tpZSh7IGFuYWx5dGljczogdHJ1ZSB9KTtcclxuXHJcbiAgICB1cGRhdGVBbmFseXRpY3NTdG9yYWdlQ29uc2VudCh0cnVlKTtcclxuXHJcbiAgICBzZW5kQW5hbHl0aWNzQ3VzdG9tRXZlbnQodHJ1ZSwgJ2Jhbm5lcicpO1xyXG4gICAgc2VuZFBhZ2VWaWV3RXZlbnQoKTtcclxuICAgIHNlbmRGaWx0ZXJQYWdlQ3VzdG9tRXZlbnQoKTtcclxuXHJcbiAgICAvLyBIaWRlIGJhbm5lciBhbmQgc2hvdyBjb25maXJtYXRpb24gbWVzc2FnZVxyXG4gICAgdGhpcy4kY29va2llTWVzc2FnZS5zZXRBdHRyaWJ1dGUoJ2hpZGRlbicsIHRydWUpXHJcbiAgICB0aGlzLnJldmVhbENvbmZpcm1hdGlvbk1lc3NhZ2UodGhpcy4kY29va2llQ29uZmlybWF0aW9uQWNjZXB0KVxyXG59XHJcblxyXG5Db29raWVCYW5uZXIucHJvdG90eXBlLnJlamVjdENvb2tpZXMgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgdXBkYXRlQW5hbHl0aWNzU3RvcmFnZUNvbnNlbnQodHJ1ZSk7XHJcblxyXG4gICAgc2VuZEFuYWx5dGljc0N1c3RvbUV2ZW50KGZhbHNlLCAnYmFubmVyJyk7XHJcblxyXG4gICAgdXBkYXRlQW5hbHl0aWNzU3RvcmFnZUNvbnNlbnQoZmFsc2UpO1xyXG5cclxuICAgIC8vc2V0VGltZW91dChDb29raWVGdW5jdGlvbnMuc2V0Q29uc2VudENvb2tpZS5iaW5kKHsgYW5hbHl0aWNzOiBmYWxzZSB9KSwgMjUwKTtcclxuICAgIENvb2tpZUZ1bmN0aW9ucy5zZXRDb25zZW50Q29va2llKHsgYW5hbHl0aWNzOiBmYWxzZSB9KTtcclxuXHJcbiAgICAvLyBIaWRlIGJhbm5lciBhbmQgc2hvdyBjb25maXJtYXRpb24gbWVzc2FnZVxyXG4gICAgdGhpcy4kY29va2llTWVzc2FnZS5zZXRBdHRyaWJ1dGUoJ2hpZGRlbicsIHRydWUpXHJcbiAgICB0aGlzLnJldmVhbENvbmZpcm1hdGlvbk1lc3NhZ2UodGhpcy4kY29va2llQ29uZmlybWF0aW9uUmVqZWN0KVxyXG59XHJcblxyXG5Db29raWVCYW5uZXIucHJvdG90eXBlLnJldmVhbENvbmZpcm1hdGlvbk1lc3NhZ2UgPSBmdW5jdGlvbiAoY29uZmlybWF0aW9uTWVzc2FnZSkge1xyXG4gICAgY29uZmlybWF0aW9uTWVzc2FnZS5yZW1vdmVBdHRyaWJ1dGUoJ2hpZGRlbicpXHJcblxyXG4gICAgLy8gU2V0IHRhYmluZGV4IHRvIC0xIHRvIG1ha2UgdGhlIGNvbmZpcm1hdGlvbiBiYW5uZXIgZm9jdXNhYmxlIHdpdGggSmF2YVNjcmlwdFxyXG4gICAgaWYgKCFjb25maXJtYXRpb25NZXNzYWdlLmdldEF0dHJpYnV0ZSgndGFiaW5kZXgnKSkge1xyXG4gICAgICAgIGNvbmZpcm1hdGlvbk1lc3NhZ2Uuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICctMScpXHJcblxyXG4gICAgICAgIGNvbmZpcm1hdGlvbk1lc3NhZ2UuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uZmlybWF0aW9uTWVzc2FnZS5yZW1vdmVBdHRyaWJ1dGUoJ3RhYmluZGV4JylcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGNvbmZpcm1hdGlvbk1lc3NhZ2UuZm9jdXMoKVxyXG59XHJcblxyXG5Db29raWVCYW5uZXIucHJvdG90eXBlLm9uQ29va2llc1BhZ2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lID09PSAnL2Nvb2tpZXMvJ1xyXG59XHJcbiJdfQ==\n","import { getConsentCookie, setConsentCookie } from './cookie-functions.js';\nimport { nodeListForEach } from './helpers.js';\nimport { sendPageViewEvent, sendAnalyticsCustomEvent, updateAnalyticsStorageConsent } from './analytics.js';\nfunction CookiesPage($module) {\n    this.$module = $module;\n}\nCookiesPage.prototype.init = function () {\n    this.$cookiePage = this.$module;\n    if (!this.$cookiePage) {\n        return;\n    }\n    this.$cookieForm = this.$cookiePage.querySelector('.js-cookies-page-form');\n    this.$cookieFormFieldsets = this.$cookieForm.querySelectorAll('.js-cookies-page-form-fieldset');\n    this.$successNotification = this.$cookiePage.querySelector('.js-cookies-page-success');\n    this.$successLink = this.$cookiePage.querySelector('.js-cookies-page-success-link');\n    nodeListForEach(this.$cookieFormFieldsets, function ($cookieFormFieldset) {\n        this.showUserPreference($cookieFormFieldset, getConsentCookie());\n        /*        $cookieFormFieldset.removeAttribute('hidden')*/\n    }.bind(this));\n    // Show submit button\n    //this.$cookieForm.querySelector('.js-cookies-form-button').removeAttribute('hidden')\n    this.$cookieForm.addEventListener('submit', this.savePreferences.bind(this));\n};\nCookiesPage.prototype.savePreferences = function (event) {\n    // Stop default form submission behaviour\n    event.preventDefault();\n    var preferences = {};\n    nodeListForEach(this.$cookieFormFieldsets, function ($cookieFormFieldset) {\n        var cookieType = this.getCookieType($cookieFormFieldset);\n        var selectedItem = $cookieFormFieldset.querySelector('input[name=' + cookieType + ']:checked').value;\n        preferences[cookieType] = selectedItem === 'true';\n    }.bind(this));\n    updateAnalyticsStorageConsent(true);\n    const analyticsAccepted = preferences['analytics'];\n    sendAnalyticsCustomEvent(analyticsAccepted, 'cookies');\n    if (analyticsAccepted) {\n        sendPageViewEvent();\n    }\n    else {\n        updateAnalyticsStorageConsent(false);\n    }\n    setConsentCookie(preferences);\n    // handle the corner case, where the user has selected their preference on the cookie page, whilst the banner is still open as they haven't previously selected their preference\n    //todo: call hideBanner\n    var banner = document.querySelector('[data-module=\"govuk-cookie-banner\"]');\n    banner.setAttribute('hidden', 'true');\n    this.showSuccessNotification();\n};\nCookiesPage.prototype.showUserPreference = function ($cookieFormFieldset, preferences) {\n    var cookieType = this.getCookieType($cookieFormFieldset);\n    var preference = false;\n    if (cookieType && preferences && preferences[cookieType] !== undefined) {\n        preference = preferences[cookieType];\n    }\n    var radioValue = preference ? 'true' : 'false';\n    var radio = $cookieFormFieldset.querySelector('input[name=' + cookieType + '][value=' + radioValue + ']');\n    radio.checked = true;\n};\nCookiesPage.prototype.showSuccessNotification = function () {\n    this.$successNotification.removeAttribute('hidden');\n    // if the user's come to the cookies page through the link in the cookie banner, show a link to take them back to the page they came from\n    var referrer = document.referrer ? new URL(document.referrer).pathname : false;\n    if (referrer && referrer !== document.location.pathname) {\n        this.$successLink.href = referrer;\n        this.$successLink.removeAttribute('hidden');\n    }\n    else {\n        this.$successLink.setAttribute('hidden', 'true');\n    }\n    // Set tabindex to -1 to make the element focusable with JavaScript.\n    // GOV.UK Frontend will remove the tabindex on blur as the component doesn't\n    // need to be focusable after the user has read the text.\n    if (!this.$successNotification.getAttribute('tabindex')) {\n        this.$successNotification.setAttribute('tabindex', '-1');\n    }\n    this.$successNotification.focus();\n    // scroll to the top of the page\n    window.scrollTo(0, 0);\n};\nCookiesPage.prototype.getCookieType = function ($cookieFormFieldset) {\n    return $cookieFormFieldset.id;\n};\nexport default CookiesPage;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvY29va2llcy1wYWdlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxnQkFBZ0IsRUFBaUIsTUFBTSx1QkFBdUIsQ0FBQTtBQUN6RixPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sY0FBYyxDQUFBO0FBQzlDLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSx3QkFBd0IsRUFBRSw2QkFBNkIsRUFBRSxNQUFNLGdCQUFnQixDQUFBO0FBRTNHLFNBQVMsV0FBVyxDQUFDLE9BQU87SUFDeEIsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUE7QUFDMUIsQ0FBQztBQUVELFdBQVcsQ0FBQyxTQUFTLENBQUMsSUFBSSxHQUFHO0lBQ3pCLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQTtJQUUvQixJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRTtRQUNuQixPQUFNO0tBQ1Q7SUFFRCxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsYUFBYSxDQUFDLHVCQUF1QixDQUFDLENBQUE7SUFDMUUsSUFBSSxDQUFDLG9CQUFvQixHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsZ0JBQWdCLENBQUMsZ0NBQWdDLENBQUMsQ0FBQTtJQUMvRixJQUFJLENBQUMsb0JBQW9CLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxhQUFhLENBQUMsMEJBQTBCLENBQUMsQ0FBQTtJQUN0RixJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsYUFBYSxDQUFDLCtCQUErQixDQUFDLENBQUE7SUFFbkYsZUFBZSxDQUFDLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxVQUFVLG1CQUFtQjtRQUNwRSxJQUFJLENBQUMsa0JBQWtCLENBQUMsbUJBQW1CLEVBQUUsZ0JBQWdCLEVBQUUsQ0FBQyxDQUFBO1FBQ3hFLHlEQUF5RDtJQUNyRCxDQUFDLENBQUMsSUFBSSxDQUFDLElB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LElBQUksR0FBRyxRQUFRLENBQUM7UUFDbEMsSUFBSSxDQUFDLFlBQVksQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDLENBQUE7S0FDOUM7U0FBTTtRQUNILElBQUksQ0FBQyxZQUFZLENBQUMsWUFBWSxDQUFDLFFBQVEsRUFBRSxNQUFNLENBQUMsQ0FBQztLQUNwRDtJQUVELG9FQUFvRTtJQUNwRSw0RUFBNEU7SUFDNUUseURBQXlEO0lBQ3pELElBQUksQ0FBQyxJQUFJLENBQUMsb0JBQW9CLENBQUMsWUFBWSxDQUFDLFVBQVUsQ0FBQyxFQUFFO1FBQ3JELElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxZQUFZLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxDQUFBO0tBQzNEO0lBRUQsSUFBSSxDQUFDLG9CQUFvQixDQUFDLEtBQUssRUFBRSxDQUFBO0lBRWpDLGdDQUFnQztJQUNoQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTtBQUN6QixDQUFDLENBQUE7QUFFRCxXQUFXLENBQUMsU0FBUyxDQUFDLGFBQWEsR0FBRyxVQUFVLG1CQUFtQjtJQUMvRCxPQUFPLG1CQUFtQixDQUFDLEVBQUUsQ0FBQTtBQUNqQyxDQUFDLENBQUE7QUFFRCxlQUFlLFdBQVcsQ0FBQSIsImZpbGUiOiJjb21wb25lbnRzL2Nvb2tpZXMtcGFnZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldENvbnNlbnRDb29raWUsIHNldENvbnNlbnRDb29raWUsIENvbnNlbnRDb29raWUgfSBmcm9tICcuL2Nvb2tpZS1mdW5jdGlvbnMuanMnXHJcbmltcG9ydCB7IG5vZGVMaXN0Rm9yRWFjaCB9IGZyb20gJy4vaGVscGVycy5qcydcclxuaW1wb3J0IHsgc2VuZFBhZ2VWaWV3RXZlbnQsIHNlbmRBbmFseXRpY3NDdXN0b21FdmVudCwgdXBkYXRlQW5hbHl0aWNzU3RvcmFnZUNvbnNlbnQgfSBmcm9tICcuL2FuYWx5dGljcy5qcydcclxuXHJcbmZ1bmN0aW9uIENvb2tpZXNQYWdlKCRtb2R1bGUpIHtcclxuICAgIHRoaXMuJG1vZHVsZSA9ICRtb2R1bGVcclxufVxyXG5cclxuQ29va2llc1BhZ2UucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLiRjb29raWVQYWdlID0gdGhpcy4kbW9kdWxlXHJcblxyXG4gICAgaWYgKCF0aGlzLiRjb29raWVQYWdlKSB7XHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy4kY29va2llRm9ybSA9IHRoaXMuJGNvb2tpZVBhZ2UucXVlcnlTZWxlY3RvcignLmpzLWNvb2tpZXMtcGFnZS1mb3JtJylcclxuICAgIHRoaXMuJGNvb2tpZUZvcm1GaWVsZHNldHMgPSB0aGlzLiRjb29raWVGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5qcy1jb29raWVzLXBhZ2UtZm9ybS1maWVsZHNldCcpXHJcbiAgICB0aGlzLiRzdWNjZXNzTm90aWZpY2F0aW9uID0gdGhpcy4kY29va2llUGFnZS5xdWVyeVNlbGVjdG9yKCcuanMtY29va2llcy1wYWdlLXN1Y2Nlc3MnKVxyXG4gICAgdGhpcy4kc3VjY2Vzc0xpbmsgPSB0aGlzLiRjb29raWVQYWdlLnF1ZXJ5U2VsZWN0b3IoJy5qcy1jb29raWVzLXBhZ2Utc3VjY2Vzcy1saW5rJylcclxuXHJcbiAgICBub2RlTGlzdEZvckVhY2godGhpcy4kY29va2llRm9ybUZpZWxkc2V0cywgZnVuY3Rpb24gKCRjb29raWVGb3JtRmllbGRzZXQpIHtcclxuICAgICAgICB0aGlzLnNob3dVc2VyUHJlZmVyZW5jZSgkY29va2llRm9ybUZpZWxkc2V0LCBnZXRDb25zZW50Q29va2llKCkpXHJcbi8qICAgICAgICAkY29va2llRm9ybUZpZWxkc2V0LnJlbW92ZUF0dHJpYnV0ZSgnaGlkZGVuJykqL1xyXG4gICAgfS5iaW5kKHRoaXMpKVxyXG5cclxuICAgIC8vIFNob3cgc3VibWl0IGJ1dHRvblxyXG4gICAgLy90aGlzLiRjb29raWVGb3JtLnF1ZXJ5U2VsZWN0b3IoJy5qcy1jb29raWVzLWZvcm0tYnV0dG9uJykucmVtb3ZlQXR0cmlidXRlKCdoaWRkZW4nKVxyXG5cclxuICAgIHRoaXMuJGNvb2tpZUZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5zYXZlUHJlZmVyZW5jZXMuYmluZCh0aGlzKSlcclxufVxyXG5cclxuQ29va2llc1BhZ2UucHJvdG90eXBlLnNhdmVQcmVmZXJlbmNlcyA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgLy8gU3RvcCBkZWZhdWx0IGZvcm0gc3VibWlzc2lvbiBiZWhhdmlvdXJcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgdmFyIHByZWZlcmVuY2VzOiBDb25zZW50Q29va2llID0ge31cclxuXHJcbiAgICBub2RlTGlzdEZvckVhY2godGhpcy4kY29va2llRm9ybUZpZWxkc2V0cyxcclxuICAgICAgICBmdW5jdGlvbigkY29va2llRm9ybUZpZWxkc2V0KSB7XHJcbiAgICAgICAgICAgIHZhciBjb29raWVUeXBlID0gdGhpcy5nZXRDb29raWVUeXBlKCRjb29raWVGb3JtRmllbGRzZXQpXHJcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZEl0ZW0gPSAkY29va2llRm9ybUZpZWxkc2V0LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9JyArIGNvb2tpZVR5cGUgKyAnXTpjaGVja2VkJykudmFsdWVcclxuXHJcbiAgICAgICAgICAgIHByZWZlcmVuY2VzW2Nvb2tpZVR5cGVdID0gc2VsZWN0ZWRJdGVtID09PSAndHJ1ZSdcclxuICAgICAgICB9LmJpbmQodGhpcykpO1xyXG5cclxuICAgIHVwZGF0ZUFuYWx5dGljc1N0b3JhZ2VDb25zZW50KHRydWUpO1xyXG4gICAgY29uc3QgYW5hbHl0aWNzQWNjZXB0ZWQgPSBwcmVmZXJlbmNlc1snYW5hbHl0aWNzJ107XHJcbiAgICBzZW5kQW5hbHl0aWNzQ3VzdG9tRXZlbnQoYW5hbHl0aWNzQWNjZXB0ZWQsICdjb29raWVzJyk7XHJcblxyXG4gICAgaWYgKGFuYWx5dGljc0FjY2VwdGVkKSB7XHJcbiAgICAgICAgc2VuZFBhZ2VWaWV3RXZlbnQoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdXBkYXRlQW5hbHl0aWNzU3RvcmFnZUNvbnNlbnQoZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldENvbnNlbnRDb29raWUocHJlZmVyZW5jZXMpO1xyXG5cclxuICAgIC8vIGhhbmRsZSB0aGUgY29ybmVyIGNhc2UsIHdoZXJlIHRoZSB1c2VyIGhhcyBzZWxlY3RlZCB0aGVpciBwcmVmZXJlbmNlIG9uIHRoZSBjb29raWUgcGFnZSwgd2hpbHN0IHRoZSBiYW5uZXIgaXMgc3RpbGwgb3BlbiBhcyB0aGV5IGhhdmVuJ3QgcHJldmlvdXNseSBzZWxlY3RlZCB0aGVpciBwcmVmZXJlbmNlXHJcbiAgICAvL3RvZG86IGNhbGwgaGlkZUJhbm5lclxyXG4gICAgdmFyIGJhbm5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLW1vZHVsZT1cImdvdnVrLWNvb2tpZS1iYW5uZXJcIl0nKTtcclxuICAgIGJhbm5lci5zZXRBdHRyaWJ1dGUoJ2hpZGRlbicsICd0cnVlJyk7XHJcbiAgICBcclxuICAgIHRoaXMuc2hvd1N1Y2Nlc3NOb3RpZmljYXRpb24oKVxyXG59XHJcblxyXG5Db29raWVzUGFnZS5wcm90b3R5cGUuc2hvd1VzZXJQcmVmZXJlbmNlID0gZnVuY3Rpb24gKCRjb29raWVGb3JtRmllbGRzZXQsIHByZWZlcmVuY2VzKSB7XHJcbiAgICB2YXIgY29va2llVHlwZSA9IHRoaXMuZ2V0Q29va2llVHlwZSgkY29va2llRm9ybUZpZWxkc2V0KVxyXG4gICAgdmFyIHByZWZlcmVuY2UgPSBmYWxzZVxyXG5cclxuICAgIGlmIChjb29raWVUeXBlICYmIHByZWZlcmVuY2VzICYmIHByZWZlcmVuY2VzW2Nvb2tpZVR5cGVdICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBwcmVmZXJlbmNlID0gcHJlZmVyZW5jZXNbY29va2llVHlwZV1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgcmFkaW9WYWx1ZSA9IHByZWZlcmVuY2UgPyAndHJ1ZScgOiAnZmFsc2UnXHJcbiAgICB2YXIgcmFkaW8gPSAkY29va2llRm9ybUZpZWxkc2V0LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9JyArIGNvb2tpZVR5cGUgKyAnXVt2YWx1ZT0nICsgcmFkaW9WYWx1ZSArICddJylcclxuICAgIHJhZGlvLmNoZWNrZWQgPSB0cnVlXHJcbn1cclxuXHJcbkNvb2tpZXNQYWdlLnByb3RvdHlwZS5zaG93U3VjY2Vzc05vdGlmaWNhdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuJHN1Y2Nlc3NOb3RpZmljYXRpb24ucmVtb3ZlQXR0cmlidXRlKCdoaWRkZW4nKVxyXG5cclxuICAgIC8vIGlmIHRoZSB1c2VyJ3MgY29tZSB0byB0aGUgY29va2llcyBwYWdlIHRocm91Z2ggdGhlIGxpbmsgaW4gdGhlIGNvb2tpZSBiYW5uZXIsIHNob3cgYSBsaW5rIHRvIHRha2UgdGhlbSBiYWNrIHRvIHRoZSBwYWdlIHRoZXkgY2FtZSBmcm9tXHJcbiAgICB2YXIgcmVmZXJyZXIgPSBkb2N1bWVudC5yZWZlcnJlciA/IG5ldyBVUkwoZG9jdW1lbnQucmVmZXJyZXIpLnBhdGhuYW1lIDogZmFsc2U7XHJcbiAgICBpZiAocmVmZXJyZXIgJiYgcmVmZXJyZXIgIT09IGRvY3VtZW50LmxvY2F0aW9uLnBhdGhuYW1lKSB7XHJcbiAgICAgICAgdGhpcy4kc3VjY2Vzc0xpbmsuaHJlZiA9IHJlZmVycmVyO1xyXG4gICAgICAgIHRoaXMuJHN1Y2Nlc3NMaW5rLnJlbW92ZUF0dHJpYnV0ZSgnaGlkZGVuJylcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy4kc3VjY2Vzc0xpbmsuc2V0QXR0cmlidXRlKCdoaWRkZW4nLCAndHJ1ZScpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFNldCB0YWJpbmRleCB0byAtMSB0byBtYWtlIHRoZSBlbGVtZW50IGZvY3VzYWJsZSB3aXRoIEphdmFTY3JpcHQuXHJcbiAgICAvLyBHT1YuVUsgRnJvbnRlbmQgd2lsbCByZW1vdmUgdGhlIHRhYmluZGV4IG9uIGJsdXIgYXMgdGhlIGNvbXBvbmVudCBkb2Vzbid0XHJcbiAgICAvLyBuZWVkIHRvIGJlIGZvY3VzYWJsZSBhZnRlciB0aGUgdXNlciBoYXMgcmVhZCB0aGUgdGV4dC5cclxuICAgIGlmICghdGhpcy4kc3VjY2Vzc05vdGlmaWNhdGlvbi5nZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JykpIHtcclxuICAgICAgICB0aGlzLiRzdWNjZXNzTm90aWZpY2F0aW9uLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnLTEnKVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuJHN1Y2Nlc3NOb3RpZmljYXRpb24uZm9jdXMoKVxyXG5cclxuICAgIC8vIHNjcm9sbCB0byB0aGUgdG9wIG9mIHRoZSBwYWdlXHJcbiAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMClcclxufVxyXG5cclxuQ29va2llc1BhZ2UucHJvdG90eXBlLmdldENvb2tpZVR5cGUgPSBmdW5jdGlvbiAoJGNvb2tpZUZvcm1GaWVsZHNldCkge1xyXG4gICAgcmV0dXJuICRjb29raWVGb3JtRmllbGRzZXQuaWRcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ29va2llc1BhZ2UiXX0=\n","// js components were originally snaffled from https://github.com/alphagov/govuk-design-system/blob/main/src/javascripts/components/\nimport CookieBanner from './components/cookie-banner.js';\nimport CookiesPage from './components/cookies-page.js';\nimport initAnalytics from './components/analytics';\nimport { nodeListForEach } from './components/helpers.js';\n//todo: consistency in module/proto/class style\n// Initialise cookie banner\nconst $cookieBanner = document.querySelector('[data-module=\"govuk-cookie-banner\"]');\nnew CookieBanner($cookieBanner).init();\ninitAnalytics(window.GA_MEASUREMENT_ID);\n//todo: move this into scripts section on cookie page\n// Initialise cookie page\nvar $cookiesPage = document.querySelector('[data-module=\"app-cookies-page\"]');\nnew CookiesPage($cookiesPage).init();\n//todo: move into module\nconst backLinks = document.querySelectorAll(\".app-back-link\");\nnodeListForEach(backLinks, (link) => {\n    link.addEventListener(\"click\", () => {\n        window.history.back();\n    });\n});\nconst button = document.getElementById('open-close-filters');\nbutton === null || button === void 0 ? void 0 : button.addEventListener('click', function handleClick(event) {\n    const filterButton = document.getElementById(\"filters\");\n    if (filterButton.style.display === \"none\") {\n        filterButton.style.display = \"block\";\n    }\n    else {\n        filterButton.style.display = \"none\";\n    }\n});\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvSUFBb0k7QUFXcEksT0FBTyxZQUFZLE1BQU0sK0JBQStCLENBQUE7QUFDeEQsT0FBTyxXQUFXLE1BQU0sOEJBQThCLENBQUE7QUFDdEQsT0FBTyxhQUE4RixNQUFNLHdCQUF3QixDQUFDO0FBQ3BJLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQUUxRCwrQ0FBK0M7QUFFL0MsMkJBQTJCO0FBQzNCLE1BQU0sYUFBYSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMscUNBQXFDLENBQXVCLENBQUM7QUFDMUcsSUFBSSxZQUFZLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7QUFFdkMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0FBRXhDLHFEQUFxRDtBQUNyRCx5QkFBeUI7QUFDekIsSUFBSSxZQUFZLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxrQ0FBa0MsQ0FBQyxDQUFBO0FBQzdFLElBQUksV0FBVyxDQUFDLFlBQVksQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFBO0FBRXBDLHdCQUF3QjtBQUN4QixNQUFNLFNBQVMsR0FBRyxRQUFRLENBQUMsZ0JBQWdCLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztBQUM5RCxlQUFlLENBQUMsU0FBUyxFQUFFLENBQUMsSUFBdUIsRUFBRSxFQUFFO0lBQ25ELElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsR0FBRyxFQUFFO1FBQ2hDLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDMUIsQ0FBQyxDQUFDLENBQUM7QUFDUCxDQUFDLENBQUMsQ0FBQztBQUVILE1BQU0sTUFBTSxHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsb0JBQW9CLENBQUMsQ0FBQztBQUM3RCxNQUFNLGFBQU4sTUFBTSx1QkFBTixNQUFNLENBQUUsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLFNBQVMsV0FBVyxDQUFDLEtBQUs7SUFDeEQsTUFBTSxZQUFZLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQTBCLENBQUM7SUFDakYsSUFBSSxZQUFZLENBQUMsS0FBSyxDQUFDLE9BQU8sS0FBSyxNQUFNLEVBQUU7UUFDdkMsWUFBWSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO0tBQ3hDO1NBQU07UUFDSCxZQUFZLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUM7S0FDdkM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBqcyBjb21wb25lbnRzIHdlcmUgb3JpZ2luYWxseSBzbmFmZmxlZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9hbHBoYWdvdi9nb3Z1ay1kZXNpZ24tc3lzdGVtL2Jsb2IvbWFpbi9zcmMvamF2YXNjcmlwdHMvY29tcG9uZW50cy9cclxuXHJcbmRlY2xhcmUgZ2xvYmFsIHtcclxuICAgIGludGVyZmFjZSBXaW5kb3cge1xyXG4gICAgICAgIEdEU19DT05TRU5UX0NPT0tJRV9WRVJTSU9OOiBudW1iZXI7XHJcbiAgICAgICAgR0FfTUVBU1VSRU1FTlRfSUQ6IHN0cmluZztcclxuICAgICAgICBHQV9DT05UQUlORVJfSUQ6IHN0cmluZztcclxuICAgICAgICBkYXRhTGF5ZXI6IGFueVtdO1xyXG4gICAgfVxyXG59XHJcblxyXG5pbXBvcnQgQ29va2llQmFubmVyIGZyb20gJy4vY29tcG9uZW50cy9jb29raWUtYmFubmVyLmpzJ1xyXG5pbXBvcnQgQ29va2llc1BhZ2UgZnJvbSAnLi9jb21wb25lbnRzL2Nvb2tpZXMtcGFnZS5qcydcclxuaW1wb3J0IGluaXRBbmFseXRpY3MsIHsgc2VuZFBhZ2VWaWV3RXZlbnQsIHNlbmRGaWx0ZXJQYWdlQ3VzdG9tRXZlbnQsIHVwZGF0ZUFuYWx5dGljc1N0b3JhZ2VDb25zZW50IH0gZnJvbSAnLi9jb21wb25lbnRzL2FuYWx5dGljcyc7XHJcbmltcG9ydCB7IG5vZGVMaXN0Rm9yRWFjaCB9IGZyb20gJy4vY29tcG9uZW50cy9oZWxwZXJzLmpzJztcclxuXHJcbi8vdG9kbzogY29uc2lzdGVuY3kgaW4gbW9kdWxlL3Byb3RvL2NsYXNzIHN0eWxlXHJcblxyXG4vLyBJbml0aWFsaXNlIGNvb2tpZSBiYW5uZXJcclxuY29uc3QgJGNvb2tpZUJhbm5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLW1vZHVsZT1cImdvdnVrLWNvb2tpZS1iYW5uZXJcIl0nKSBhcyBIVE1MRWxlbWVudCB8IG51bGw7XHJcbm5ldyBDb29raWVCYW5uZXIoJGNvb2tpZUJhbm5lcikuaW5pdCgpO1xyXG5cclxuaW5pdEFuYWx5dGljcyh3aW5kb3cuR0FfTUVBU1VSRU1FTlRfSUQpO1xyXG5cclxuLy90b2RvOiBtb3ZlIHRoaXMgaW50byBzY3JpcHRzIHNlY3Rpb24gb24gY29va2llIHBhZ2VcclxuLy8gSW5pdGlhbGlzZSBjb29raWUgcGFnZVxyXG52YXIgJGNvb2tpZXNQYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtbW9kdWxlPVwiYXBwLWNvb2tpZXMtcGFnZVwiXScpXHJcbm5ldyBDb29raWVzUGFnZSgkY29va2llc1BhZ2UpLmluaXQoKVxyXG5cclxuLy90b2RvOiBtb3ZlIGludG8gbW9kdWxlXHJcbmNvbnN0IGJhY2tMaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYXBwLWJhY2stbGlua1wiKTtcclxubm9kZUxpc3RGb3JFYWNoKGJhY2tMaW5rcywgKGxpbms6IEhUTUxBbmNob3JFbGVtZW50KSA9PiB7XHJcbiAgICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgd2luZG93Lmhpc3RvcnkuYmFjaygpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29wZW4tY2xvc2UtZmlsdGVycycpO1xyXG5idXR0b24/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gaGFuZGxlQ2xpY2soZXZlbnQpIHtcclxuICAgIGNvbnN0IGZpbHRlckJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZmlsdGVyc1wiKSBhcyBIVE1MRGl2RWxlbWVudCB8IG51bGw7XHJcbiAgICBpZiAoZmlsdGVyQnV0dG9uLnN0eWxlLmRpc3BsYXkgPT09IFwibm9uZVwiKSB7XHJcbiAgICAgICAgZmlsdGVyQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGZpbHRlckJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICB9XHJcbn0pO1xyXG4iXX0=\n"]}