{"version":3,"sources":["tmp/js/components/analytics.js","tmp/js/components/cookie-functions.js","tmp/js/components/helpers.js","tmp/js/components/cookie-banner.js","tmp/js/components/cookies-page.js","tmp/js/app.js"],"names":["gtag","command","args","window","dataLayer","push","arguments","GaMeasurementId","initAnalytics","gaMeasurementId","Boolean","setDefaultConsent","loadGaScript","Date","pageViewParams","getPiiSafePageView","send_page_view","page_path","page_location","page_referrer","referrer","cookie_flags","analytics_storage","updateAnalyticsStorageConsent","granted","sendPageViewEvent","sendFilterPageCustomEvent","element","document","getElementById","totalResults","getAttribute","undefined","total_results","sendAnalyticsCustomEvent","accepted","source","f","getElementsByTagName","j","createElement","async","src","parentNode","insertBefore","pageView","page_title","title","send_to","piiSafeReferrerQueryString","getPiiSafeQueryString","URL","search","urlArray","split","piiSafeQueryString","location","href","pathname","queryString","queryParams","URLSearchParams","postcode","get","replace","set","delete","toString","CONSENT_COOKIE_NAME","COOKIE_CATEGORIES","analytics","GA_CONTAINER_ID","essential","DEFAULT_COOKIE_CONSENT","Cookie","name","value","options","getCookie","deleteCookie","days","setCookie","getConsentCookie","consentCookieObj","consentCookie","JSON","parse","err","isValidConsentCookie","version","GDS_CONSENT_COOKIE_VERSION","setConsentCookie","cookieConsent","option","stringify","resetCookies","cookieType","forEach","cookie","userAllowsCookieCategory","cookieCategory","cookiePreferences","e","console","error","userAllowsCookie","cookieName","category","indexOf","nameEQ","cookies","i","len","length","charAt","substring","decodeURIComponent","cookieString","date","setTime","getTime","toUTCString","protocol","hostname","nodeListForEach","nodes","callback","NodeList","prototype","call","cookieBannerAcceptSelector","cookieBannerRejectSelector","cookieBannerHideButtonSelector","cookieMessageSelector","cookieConfirmationAcceptSelector","cookieConfirmationRejectSelector","CookieBanner","$module","this","CookiesPage","init","$cookieBanner","$acceptButton","querySelector","$rejectButton","$cookieMessage","$cookieConfirmationAccept","$cookieConfirmationReject","$cookieBannerHideButtons","querySelectorAll","onCookiesPage","currentConsentCookie","CookieFunctions.getConsentCookie","CookieFunctions.isValidConsentCookie","CookieFunctions.resetCookies","removeAttribute","addEventListener","acceptCookies","bind","rejectCookies","$cookieBannerHideButton","hideBanner","setAttribute","CookieFunctions.setConsentCookie","revealConfirmationMessage","confirmationMessage","focus","$cookiePage","$cookieForm","$cookieFormFieldsets","$successNotification","$successLink","$cookieFormFieldset","showUserPreference","savePreferences","event","preventDefault","preferences","getCookieType","selectedItem","showSuccessNotification","preference","radioValue","checked","scrollTo","id","GA_MEASUREMENT_ID","userConsent","$cookiesPage","backLinks","link","history","back","button","filterButton","style","display"],"mappings":"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","file":"app.js","sourcesContent":["function gtag(command, ...args) {\n    window.dataLayer = window.dataLayer || [];\n    window.dataLayer.push(arguments);\n}\nlet GaMeasurementId = '';\n//todo: use prototype? (or class?)\n//todo: initAnalytics will have to be called irrespective of the current accept/decline cookie status\nexport default function initAnalytics(gaMeasurementId) {\n    // if the environment doesn't have a measurement id, don't load analytics\n    if (!Boolean(gaMeasurementId)) {\n        return;\n    }\n    GaMeasurementId = gaMeasurementId;\n    setDefaultConsent();\n    loadGaScript(gaMeasurementId);\n    gtag('js', new Date());\n    const pageViewParams = getPiiSafePageView(gaMeasurementId);\n    // set the config for auto generated events other than page_view\n    gtag('config', gaMeasurementId, {\n        send_page_view: false,\n        page_path: pageViewParams.page_path,\n        page_location: pageViewParams.page_location,\n        page_referrer: pageViewParams.referrer,\n        cookie_flags: 'secure'\n    });\n}\nfunction setDefaultConsent() {\n    gtag('consent', 'default', {\n        'analytics_storage': 'denied'\n    });\n    gtag('set', 'url_passthrough', true);\n}\nexport function updateAnalyticsStorageConsent(granted) {\n    gtag('consent', 'update', {\n        'analytics_storage': granted ? 'granted' : 'denied'\n    });\n}\nexport function sendPageViewEvent() {\n    // send the page_view event manually (https://developers.google.com/analytics/devguides/collection/gtagjs/pages#default_behavior)\n    gtag('event', 'page_view', getPiiSafePageView(GaMeasurementId));\n}\nexport function sendFilterPageCustomEvent() {\n    //todo: make filter page only\n    const element = document.getElementById('results');\n    const totalResults = element === null || element === void 0 ? void 0 : element.getAttribute('data-total-results');\n    if (totalResults === undefined)\n        return;\n    gtag('event', 'filter_page', {\n        'total_results': totalResults\n    });\n}\n//todo: or accepted|rejected\nexport function sendAnalyticsCustomEvent(accepted, source) {\n    gtag('event', 'analytics', {\n        'accepted': accepted,\n        'source': source\n    });\n}\n//todo: having an object (prototype/class) will ensure that GaMeasurementId will have already been set\nexport function disableAnalytics() {\n    //gtag('config', GaMeasurementId, {\n    //    'allow_ad_personalization_signals': false,\n    //    'allow_google_signals': false,\n    //    'scroll_threshold': 0,\n    //    'link_attribution': false\n    //});\n    //gtag('set', {\n    //    'allow_google_signals': false,\n    //    'custom_map': {\n    //        'scroll': 'non_interaction'\n    //    }\n    //});\n    // this kills our custom event, but not ga4's own events which must be caching the measurement id\n    //window.dataLayer = [];\n    //gtag('config', '');\n    //todo: when get working, ensure our own custom events and manual page_view events are not sent\n    // in theory these should be enough to disable analytics. has it already checked these at load time rather than at send time?\n    //window['ga-disable-' + GaMeasurementId] = true;\n    //window[\"_gaUserPrefs\"] = { ioo() { return true; } }\n    //possible options\n    // send the custom event without loading the gtag script. possible?? not easily, and not maintainable\n    // blatt the measurement id in the config? doesn't work - caching?\n    // replace a central function in the gtag script? not maintainable?\n    // issues:\n    // gtag operates async, so how do we know when it's sent the custom event\n    // we don't want a race condition (if we can disable ga4)\n    // could use a promise\n    // or could use a callback: https://developers.google.com/tag-platform/gtagjs/reference/parameters\n    //window.dataLayer.push({\n    //    'event': 'ga-disable',\n    //    'ga-disable': true\n    //});\n    //todo: unload the loaded script??\n    //    const gtagScript = document.querySelector('script[src^=\"https://www.googletagmanager.com/gtag/js\"]');\n    //    if (gtagScript) {\n    //        gtagScript.remove();\n    //    }\n    //}; aa.sl = function (a) { var b = this, c = TA(a); c ? Mh(c, function (d) { b.Eg(a, 1 === d.split(\"~\").length ? void 0 : d) }) : this.Eg(a) }; var WB = function (a, b, c) { var d = a + \"?\" + b; Lk(\"Sending request: \" + d); if (c) { Lk(\"  Request body: \" + c); try { oc.sendBeacon && oc.sendBeacon(d, c) } catch (e) { xb(\"TAGGING\", 15) } } else Fc(d) }, bC = Qm('', 500), cC = Qm('',\n    //    5E3), aC = !0; var dC = window, eC = document, fC = function (a) { var b = dC._gaUserPrefs; if (b && b.ioo && b.ioo() || a && !0 === dC[\"ga-disable-\" + a]) return !0; try { var c = dC.external; if (c && c._gaUserPrefs && \"oo\" == c._gaUserPrefs) return !0 } catch (f) { } for (var d = Uk(\"AMP_TOKEN\", String(eC.cookie), !0), e = 0; e < d.length; e++)if (\"$OPT_OUT\" == d[e]) return !0; return eC.getElementById(\"__gaOptOutExtension\") ? !0 : !1 };\n    /*\n    \r\n    function (a) { var b = dC._gaUserPrefs; if (b && b.ioo && b.ioo() || a && !0 === dC[\"ga-disable-\" + a]) return !0;\n    \r\n        function (a)\n        var dC = window\n            !0 === dC[\"ga-disable-\" + a]) return !0\n    \r\n            chat-gpt's interpretation of the code...\n    \r\n    This is a function in Google Analytics 4 (GA4) that is used to check if tracking is enabled or disabled for a specific user.\n    \r\n    Here's what the code is doing:\n    \r\n    The function takes an argument a which represents the tracking ID (or \"measurement ID\" in GA4 terminology) for the Google Analytics property being tracked.\n    The function then checks if the user has enabled or disabled tracking for themselves. This is done by checking a variable called _gaUserPrefs which is set by the user's browser.\n    If _gaUserPrefs is defined and has a method called ioo that returns true, it means the user has disabled tracking for themselves. The function returns true to indicate that tracking is disabled.\n    If the a argument is provided and there is a cookie called \"ga-disable-[measurement ID]\" that is set to true, it means the user has explicitly disabled tracking for that particular property. The function returns true to indicate that tracking is disabled.\n    If neither of the above conditions are met, the function returns false to indicate that tracking is enabled for the user.\n    Overall, this function is used to determine if tracking is enabled or disabled for a specific user in GA4, based on the user's preferences and any explicit settings they may have set.\n    \r\n    setting a property on window doesn't create a cookie, chat-gpt was hallucinating\n    \r\n            */\n}\nfunction loadGaScript(gaMeasurementId) {\n    const f = document.getElementsByTagName('script')[0];\n    const j = document.createElement('script');\n    j.async = true;\n    j.src = 'https://www.googletagmanager.com/gtag/js?id=' + gaMeasurementId;\n    f.parentNode.insertBefore(j, f);\n}\nfunction getPiiSafePageView(gaMeasurementId) {\n    const pageView = {\n        page_title: document.title,\n        send_to: gaMeasurementId,\n        referrer: '',\n        page_location: '',\n        page_path: ''\n    };\n    //todo: set as referrer or page_referrer in pageView - does it matter? is it only picking it up from the config?\n    //todo: get piisafe referrer function\n    if (document.referrer !== '') {\n        const referrerUrl = new URL(document.referrer);\n        const piiSafeReferrerQueryString = getPiiSafeQueryString(referrerUrl.search);\n        if (piiSafeReferrerQueryString == null) {\n            pageView.referrer = document.referrer;\n        }\n        else {\n            const urlArray = document.referrer.split(\"?\");\n            pageView.referrer = urlArray[0] + piiSafeReferrerQueryString;\n        }\n    }\n    const piiSafeQueryString = getPiiSafeQueryString(window.location.search);\n    if (piiSafeQueryString == null) {\n        pageView.page_location = window.location.href;\n        pageView.page_path = window.location.pathname + window.location.search;\n        return pageView;\n    }\n    const urlArray = window.location.href.split(\"?\");\n    pageView.page_location = urlArray[0] + piiSafeQueryString;\n    pageView.page_path = window.location.pathname + piiSafeQueryString;\n    return pageView;\n}\nfunction getPiiSafeQueryString(queryString) {\n    //todo: for safety, convert to lowercase, so that if the user changes the case of the url, we still don't collect pii\n    const queryParams = new URLSearchParams(queryString);\n    let postcode = queryParams.get(\"postcode\");\n    if (postcode == null) {\n        // null indicates original query params were already pii safe\n        return null;\n    }\n    postcode = postcode.replace(/[a-zA-Z]+$/, \"\");\n    queryParams.set(\"postcode\", postcode);\n    queryParams.delete(\"latitude\");\n    queryParams.delete(\"longitude\");\n    return '?' + queryParams.toString();\n}\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvYW5hbHl0aWNzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLFNBQVMsSUFBSSxDQUFDLE9BQWUsRUFBRSxHQUFHLElBQVc7SUFDekMsTUFBTSxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUMsU0FBUyxJQUFJLEVBQUUsQ0FBQztJQUMxQyxNQUFNLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUNyQyxDQUFDO0FBRUQsSUFBSSxlQUFlLEdBQVcsRUFBRSxDQUFDO0FBRWpDLGtDQUFrQztBQUNsQyxxR0FBcUc7QUFDckcsTUFBTSxDQUFDLE9BQU8sVUFBVSxhQUFhLENBQUMsZUFBdUI7SUFFekQseUVBQXlFO0lBQ3pFLElBQUksQ0FBQyxPQUFPLENBQUMsZUFBZSxDQUFDLEVBQUU7UUFDM0IsT0FBTztLQUNWO0lBRUQsZUFBZSxHQUFHLGVBQWUsQ0FBQztJQUVsQyxpQkFBaUIsRUFBRSxDQUFDO0lBRXBCLFlBQVksQ0FBQyxlQUFlLENBQUMsQ0FBQztJQUU5QixJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksSUFBSSxFQUFFLENBQUMsQ0FBQztJQUV2QixNQUFNLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQyxlQUFlLENBQUMsQ0FBQztJQUUzRCxnRUFBZ0U7SUFDaEUsSUFBSSxDQUFDLFFBQVEsRUFBRSxlQUFlLEVBQUU7UUFDNUIsY0FBYyxFQUFFLEtBQUs7UUFDckIsU0FBUyxFQUFFLGNBQWMsQ0FBQyxTQUFTO1FBQ25DLGFBQWEsRUFBRSxjQUFjLENBQUMsYUFBYTtRQUMzQyxhQUFhLEVBQUUsY0FBYyxDQUFDLFFBQVE7UUFDdEMsWUFBWSxFQUFFLFFBQVE7S0FDekIsQ0FBQyxDQUFDO0FBQ1AsQ0FBQztBQUVELFNBQVMsaUJBQWlCO0lBQ3RCLElBQUksQ0FBQyxTQUFTLEVBQUUsU0FBUyxFQUFFO1FBQ3ZCLG1CQUFtQixFQUFFLFFBQVE7S0FDaEMsQ0FBQyxDQUFDO0lBRUgsSUFBSSxDQUFDLEtBQUss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Q0FBQztJQUVuRSxPQUFPLFFBQVEsQ0FBQztBQUNwQixDQUFDO0FBRUQsU0FBUyxxQkFBcUIsQ0FBQyxXQUFXO0lBRXRDLHFIQUFxSDtJQUNySCxNQUFNLFdBQVcsR0FBRyxJQUFJLGVBQWUsQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUVyRCxJQUFJLFFBQVEsR0FBRyxXQUFXLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQzNDLElBQUksUUFBUSxJQUFJLElBQUksRUFBRTtRQUNsQiw2REFBNkQ7UUFDN0QsT0FBTyxJQUFJLENBQUM7S0FDZjtJQUVELFFBQVEsR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDLFlBQVksRUFBRSxFQUFFLENBQUMsQ0FBQztJQUM5QyxXQUFXLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUN0QyxXQUFXLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQy9CLFdBQVcsQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUM7SUFFaEMsT0FBTyxHQUFHLEdBQUcsV0FBVyxDQUFDLFFBQVEsRUFBRSxDQUFDO0FBQ3hDLENBQUMiLCJmaWxlIjoiY29tcG9uZW50cy9hbmFseXRpY3MuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuZnVuY3Rpb24gZ3RhZyhjb21tYW5kOiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKTogdm9pZCB7XHJcbiAgICB3aW5kb3cuZGF0YUxheWVyID0gd2luZG93LmRhdGFMYXllciB8fCBbXTtcclxuICAgIHdpbmRvdy5kYXRhTGF5ZXIucHVzaChhcmd1bWVudHMpO1xyXG59XHJcblxyXG5sZXQgR2FNZWFzdXJlbWVudElkOiBzdHJpbmcgPSAnJztcclxuXHJcbi8vdG9kbzogdXNlIHByb3RvdHlwZT8gKG9yIGNsYXNzPylcclxuLy90b2RvOiBpbml0QW5hbHl0aWNzIHdpbGwgaGF2ZSB0byBiZSBjYWxsZWQgaXJyZXNwZWN0aXZlIG9mIHRoZSBjdXJyZW50IGFjY2VwdC9kZWNsaW5lIGNvb2tpZSBzdGF0dXNcclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaW5pdEFuYWx5dGljcyhnYU1lYXN1cmVtZW50SWQ6IHN0cmluZykge1xyXG5cclxuICAgIC8vIGlmIHRoZSBlbnZpcm9ubWVudCBkb2Vzbid0IGhhdmUgYSBtZWFzdXJlbWVudCBpZCwgZG9uJ3QgbG9hZCBhbmFseXRpY3NcclxuICAgIGlmICghQm9vbGVhbihnYU1lYXN1cmVtZW50SWQpKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIEdhTWVhc3VyZW1lbnRJZCA9IGdhTWVhc3VyZW1lbnRJZDtcclxuXHJcbiAgICBzZXREZWZhdWx0Q29uc2VudCgpO1xyXG5cclxuICAgIGxvYWRHYVNjcmlwdChnYU1lYXN1cmVtZW50SWQpO1xyXG5cclxuICAgIGd0YWcoJ2pzJywgbmV3IERhdGUoKSk7XHJcblxyXG4gICAgY29uc3QgcGFnZVZpZXdQYXJhbXMgPSBnZXRQaWlTYWZlUGFnZVZpZXcoZ2FNZWFzdXJlbWVudElkKTtcclxuXHJcbiAgICAvLyBzZXQgdGhlIGNvbmZpZyBmb3IgYXV0byBnZW5lcmF0ZWQgZXZlbnRzIG90aGVyIHRoYW4gcGFnZV92aWV3XHJcbiAgICBndGFnKCdjb25maWcnLCBnYU1lYXN1cmVtZW50SWQsIHtcclxuICAgICAgICBzZW5kX3BhZ2VfdmlldzogZmFsc2UsIC8vZGlzYWJsZSBhdXRvIHBhZ2VfdmlldyBtZWFzdXJlbWVudFxyXG4gICAgICAgIHBhZ2VfcGF0aDogcGFnZVZpZXdQYXJhbXMucGFnZV9wYXRoLFxyXG4gICAgICAgIHBhZ2VfbG9jYXRpb246IHBhZ2VWaWV3UGFyYW1zLnBhZ2VfbG9jYXRpb24sXHJcbiAgICAgICAgcGFnZV9yZWZlcnJlcjogcGFnZVZpZXdQYXJhbXMucmVmZXJyZXIsXHJcbiAgICAgICAgY29va2llX2ZsYWdzOiAnc2VjdXJlJ1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldERlZmF1bHRDb25zZW50KCkge1xyXG4gICAgZ3RhZygnY29uc2VudCcsICdkZWZhdWx0Jywge1xyXG4gICAgICAgICdhbmFseXRpY3Nfc3RvcmFnZSc6ICdkZW5pZWQnXHJcbiAgICB9KTtcclxuXHJcbiAgICBndGFnKCdzZXQnLCAndXJsX3Bhc3N0aHJvdWdoJywgdHJ1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVBbmFseXRpY3NTdG9yYWdlQ29uc2VudChncmFudGVkOiBib29sZWFuKSB7XHJcbiAgICBndGFnKCdjb25zZW50JywgJ3VwZGF0ZScsIHtcclxuICAgICAgICAnYW5hbHl0aWNzX3N0b3JhZ2UnOiBncmFudGVkID8gJ2dyYW50ZWQnIDogJ2RlbmllZCdcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2VuZFBhZ2VWaWV3RXZlbnQoKSB7XHJcbiAgICAvLyBzZW5kIHRoZSBwYWdlX3ZpZXcgZXZlbnQgbWFudWFsbHkgKGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2FuYWx5dGljcy9kZXZndWlkZXMvY29sbGVjdGlvbi9ndGFnanMvcGFnZXMjZGVmYXVsdF9iZWhhdmlvcilcclxuICAgIGd0YWcoJ2V2ZW50JywgJ3BhZ2VfdmlldycsIGdldFBpaVNhZmVQYWdlVmlldyhHYU1lYXN1cmVtZW50SWQpKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNlbmRGaWx0ZXJQYWdlQ3VzdG9tRXZlbnQoKSB7XHJcbiAgICAvL3RvZG86IG1ha2UgZmlsdGVyIHBhZ2Ugb25seVxyXG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN1bHRzJyk7XHJcbiAgICBjb25zdCB0b3RhbFJlc3VsdHMgPSBlbGVtZW50Py5nZXRBdHRyaWJ1dGUoJ2RhdGEtdG90YWwtcmVzdWx0cycpO1xyXG4gICAgaWYgKHRvdGFsUmVzdWx0cyA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgIHJldHVybjtcclxuXHJcbiAgICBndGFnKCdldmVudCcsICdmaWx0ZXJfcGFnZScsIHtcclxuICAgICAgICAndG90YWxfcmVzdWx0cyc6IHRvdGFsUmVzdWx0c1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8vdG9kbzogb3IgYWNjZXB0ZWR8cmVqZWN0ZWRcclxuZXhwb3J0IGZ1bmN0aW9uIHNlbmRBbmFseXRpY3NDdXN0b21FdmVudChhY2NlcHRlZDogYm9vbGVhbiwgc291cmNlOiBzdHJpbmcpIHtcclxuXHJcbiAgICBndGFnKCdldmVudCcsICdhbmFseXRpY3MnLCB7XHJcbiAgICAgICAgJ2FjY2VwdGVkJzogYWNjZXB0ZWQsXHJcbiAgICAgICAgJ3NvdXJjZSc6IHNvdXJjZVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8vdG9kbzogaGF2aW5nIGFuIG9iamVjdCAocHJvdG90eXBlL2NsYXNzKSB3aWxsIGVuc3VyZSB0aGF0IEdhTWVhc3VyZW1lbnRJZCB3aWxsIGhhdmUgYWxyZWFkeSBiZWVuIHNldFxyXG5leHBvcnQgZnVuY3Rpb24gZGlzYWJsZUFuYWx5dGljcygpXHJcbntcclxuICAgIC8vZ3RhZygnY29uZmlnJywgR2FNZWFzdXJlbWVudElkLCB7XHJcbiAgICAvLyAgICAnYWxsb3dfYWRfcGVyc29uYWxpemF0aW9uX3NpZ25hbHMnOiBmYWxzZSxcclxuICAgIC8vICAgICdhbGxvd19nb29nbGVfc2lnbmFscyc6IGZhbHNlLFxyXG4gICAgLy8gICAgJ3Njcm9sbF90aHJlc2hvbGQnOiAwLFxyXG4gICAgLy8gICAgJ2xpbmtfYXR0cmlidXRpb24nOiBmYWxzZVxyXG4gICAgLy99KTtcclxuXHJcbiAgICAvL2d0YWcoJ3NldCcsIHtcclxuICAgIC8vICAgICdhbGxvd19nb29nbGVfc2lnbmFscyc6IGZhbHNlLFxyXG4gICAgLy8gICAgJ2N1c3RvbV9tYXAnOiB7XHJcbiAgICAvLyAgICAgICAgJ3Njcm9sbCc6ICdub25faW50ZXJhY3Rpb24nXHJcbiAgICAvLyAgICB9XHJcbiAgICAvL30pO1xyXG5cclxuICAgIC8vIHRoaXMga2lsbHMgb3VyIGN1c3RvbSBldmVudCwgYnV0IG5vdCBnYTQncyBvd24gZXZlbnRzIHdoaWNoIG11c3QgYmUgY2FjaGluZyB0aGUgbWVhc3VyZW1lbnQgaWRcclxuICAgIC8vd2luZG93LmRhdGFMYXllciA9IFtdO1xyXG4gICAgLy9ndGFnKCdjb25maWcnLCAnJyk7XHJcblxyXG4vL3RvZG86IHdoZW4gZ2V0IHdvcmtpbmcsIGVuc3VyZSBvdXIgb3duIGN1c3RvbSBldmVudHMgYW5kIG1hbnVhbCBwYWdlX3ZpZXcgZXZlbnRzIGFyZSBub3Qgc2VudFxyXG5cclxuICAgIC8vIGluIHRoZW9yeSB0aGVzZSBzaG91bGQgYmUgZW5vdWdoIHRvIGRpc2FibGUgYW5hbHl0aWNzLiBoYXMgaXQgYWxyZWFkeSBjaGVja2VkIHRoZXNlIGF0IGxvYWQgdGltZSByYXRoZXIgdGhhbiBhdCBzZW5kIHRpbWU/XHJcbiAgICAvL3dpbmRvd1snZ2EtZGlzYWJsZS0nICsgR2FNZWFzdXJlbWVudElkXSA9IHRydWU7XHJcblxyXG4gICAgLy93aW5kb3dbXCJfZ2FVc2VyUHJlZnNcIl0gPSB7IGlvbygpIHsgcmV0dXJuIHRydWU7IH0gfVxyXG5cclxuICAgIC8vcG9zc2libGUgb3B0aW9uc1xyXG4gICAgLy8gc2VuZCB0aGUgY3VzdG9tIGV2ZW50IHdpdGhvdXQgbG9hZGluZyB0aGUgZ3RhZyBzY3JpcHQuIHBvc3NpYmxlPz8gbm90IGVhc2lseSwgYW5kIG5vdCBtYWludGFpbmFibGVcclxuICAgIC8vIGJsYXR0IHRoZSBtZWFzdXJlbWVudCBpZCBpbiB0aGUgY29uZmlnPyBkb2Vzbid0IHdvcmsgLSBjYWNoaW5nP1xyXG4gICAgLy8gcmVwbGFjZSBhIGNlbnRyYWwgZnVuY3Rpb24gaW4gdGhlIGd0YWcgc2NyaXB0PyBub3QgbWFpbnRhaW5hYmxlP1xyXG5cclxuICAgIC8vIGlzc3VlczpcclxuICAgIC8vIGd0YWcgb3BlcmF0ZXMgYXN5bmMsIHNvIGhvdyBkbyB3ZSBrbm93IHdoZW4gaXQncyBzZW50IHRoZSBjdXN0b20gZXZlbnRcclxuICAgIC8vIHdlIGRvbid0IHdhbnQgYSByYWNlIGNvbmRpdGlvbiAoaWYgd2UgY2FuIGRpc2FibGUgZ2E0KVxyXG4gICAgLy8gY291bGQgdXNlIGEgcHJvbWlzZVxyXG4gICAgLy8gb3IgY291bGQgdXNlIGEgY2FsbGJhY2s6IGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL3RhZy1wbGF0Zm9ybS9ndGFnanMvcmVmZXJlbmNlL3BhcmFtZXRlcnNcclxuXHJcbiAgICAvL3dpbmRvdy5kYXRhTGF5ZXIucHVzaCh7XHJcbiAgICAvLyAgICAnZXZlbnQnOiAnZ2EtZGlzYWJsZScsXHJcbiAgICAvLyAgICAnZ2EtZGlzYWJsZSc6IHRydWVcclxuICAgIC8vfSk7XHJcblxyXG4gICAgLy90b2RvOiB1bmxvYWQgdGhlIGxvYWRlZCBzY3JpcHQ/P1xyXG4vLyAgICBjb25zdCBndGFnU2NyaXB0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc2NyaXB0W3NyY149XCJodHRwczovL3d3dy5nb29nbGV0YWdtYW5hZ2VyLmNvbS9ndGFnL2pzXCJdJyk7XHJcbi8vICAgIGlmIChndGFnU2NyaXB0KSB7XHJcbi8vICAgICAgICBndGFnU2NyaXB0LnJlbW92ZSgpO1xyXG4vLyAgICB9XHJcblxyXG4vL307IGFhLnNsID0gZnVuY3Rpb24gKGEpIHsgdmFyIGIgPSB0aGlzLCBjID0gVEEoYSk7IGMgPyBNaChjLCBmdW5jdGlvbiAoZCkgeyBiLkVnKGEsIDEgPT09IGQuc3BsaXQoXCJ+XCIpLmxlbmd0aCA/IHZvaWQgMCA6IGQpIH0pIDogdGhpcy5FZyhhKSB9OyB2YXIgV0IgPSBmdW5jdGlvbiAoYSwgYiwgYykgeyB2YXIgZCA9IGEgKyBcIj9cIiArIGI7IExrKFwiU2VuZGluZyByZXF1ZXN0OiBcIiArIGQpOyBpZiAoYykgeyBMayhcIiAgUmVxdWVzdCBib2R5OiBcIiArIGMpOyB0cnkgeyBvYy5zZW5kQmVhY29uICYmIG9jLnNlbmRCZWFjb24oZCwgYykgfSBjYXRjaCAoZSkgeyB4YihcIlRBR0dJTkdcIiwgMTUpIH0gfSBlbHNlIEZjKGQpIH0sIGJDID0gUW0oJycsIDUwMCksIGNDID0gUW0oJycsXHJcbi8vICAgIDVFMyksIGFDID0gITA7IHZhciBkQyA9IHdpbmRvdywgZUMgPSBkb2N1bWVudCwgZkMgPSBmdW5jdGlvbiAoYSkgeyB2YXIgYiA9IGRDLl9nYVVzZXJQcmVmczsgaWYgKGIgJiYgYi5pb28gJiYgYi5pb28oKSB8fCBhICYmICEwID09PSBkQ1tcImdhLWRpc2FibGUtXCIgKyBhXSkgcmV0dXJuICEwOyB0cnkgeyB2YXIgYyA9IGRDLmV4dGVybmFsOyBpZiAoYyAmJiBjLl9nYVVzZXJQcmVmcyAmJiBcIm9vXCIgPT0gYy5fZ2FVc2VyUHJlZnMpIHJldHVybiAhMCB9IGNhdGNoIChmKSB7IH0gZm9yICh2YXIgZCA9IFVrKFwiQU1QX1RPS0VOXCIsIFN0cmluZyhlQy5jb29raWUpLCAhMCksIGUgPSAwOyBlIDwgZC5sZW5ndGg7IGUrKylpZiAoXCIkT1BUX09VVFwiID09IGRbZV0pIHJldHVybiAhMDsgcmV0dXJuIGVDLmdldEVsZW1lbnRCeUlkKFwiX19nYU9wdE91dEV4dGVuc2lvblwiKSA/ICEwIDogITEgfTtcclxuXHJcbi8qXHJcblxyXG5mdW5jdGlvbiAoYSkgeyB2YXIgYiA9IGRDLl9nYVVzZXJQcmVmczsgaWYgKGIgJiYgYi5pb28gJiYgYi5pb28oKSB8fCBhICYmICEwID09PSBkQ1tcImdhLWRpc2FibGUtXCIgKyBhXSkgcmV0dXJuICEwO1xyXG5cclxuICAgIGZ1bmN0aW9uIChhKVxyXG4gICAgdmFyIGRDID0gd2luZG93XHJcbiAgICAgICAgITAgPT09IGRDW1wiZ2EtZGlzYWJsZS1cIiArIGFdKSByZXR1cm4gITBcclxuXHJcbiAgICAgICAgY2hhdC1ncHQncyBpbnRlcnByZXRhdGlvbiBvZiB0aGUgY29kZS4uLlxyXG5cclxuVGhpcyBpcyBhIGZ1bmN0aW9uIGluIEdvb2dsZSBBbmFseXRpY3MgNCAoR0E0KSB0aGF0IGlzIHVzZWQgdG8gY2hlY2sgaWYgdHJhY2tpbmcgaXMgZW5hYmxlZCBvciBkaXNhYmxlZCBmb3IgYSBzcGVjaWZpYyB1c2VyLlxyXG5cclxuSGVyZSdzIHdoYXQgdGhlIGNvZGUgaXMgZG9pbmc6XHJcblxyXG5UaGUgZnVuY3Rpb24gdGFrZXMgYW4gYXJndW1lbnQgYSB3aGljaCByZXByZXNlbnRzIHRoZSB0cmFja2luZyBJRCAob3IgXCJtZWFzdXJlbWVudCBJRFwiIGluIEdBNCB0ZXJtaW5vbG9neSkgZm9yIHRoZSBHb29nbGUgQW5hbHl0aWNzIHByb3BlcnR5IGJlaW5nIHRyYWNrZWQuXHJcblRoZSBmdW5jdGlvbiB0aGVuIGNoZWNrcyBpZiB0aGUgdXNlciBoYXMgZW5hYmxlZCBvciBkaXNhYmxlZCB0cmFja2luZyBmb3IgdGhlbXNlbHZlcy4gVGhpcyBpcyBkb25lIGJ5IGNoZWNraW5nIGEgdmFyaWFibGUgY2FsbGVkIF9nYVVzZXJQcmVmcyB3aGljaCBpcyBzZXQgYnkgdGhlIHVzZXIncyBicm93c2VyLlxyXG5JZiBfZ2FVc2VyUHJlZnMgaXMgZGVmaW5lZCBhbmQgaGFzIGEgbWV0aG9kIGNhbGxlZCBpb28gdGhhdCByZXR1cm5zIHRydWUsIGl0IG1lYW5zIHRoZSB1c2VyIGhhcyBkaXNhYmxlZCB0cmFja2luZyBmb3IgdGhlbXNlbHZlcy4gVGhlIGZ1bmN0aW9uIHJldHVybnMgdHJ1ZSB0byBpbmRpY2F0ZSB0aGF0IHRyYWNraW5nIGlzIGRpc2FibGVkLlxyXG5JZiB0aGUgYSBhcmd1bWVudCBpcyBwcm92aWRlZCBhbmQgdGhlcmUgaXMgYSBjb29raWUgY2FsbGVkIFwiZ2EtZGlzYWJsZS1bbWVhc3VyZW1lbnQgSURdXCIgdGhhdCBpcyBzZXQgdG8gdHJ1ZSwgaXQgbWVhbnMgdGhlIHVzZXIgaGFzIGV4cGxpY2l0bHkgZGlzYWJsZWQgdHJhY2tpbmcgZm9yIHRoYXQgcGFydGljdWxhciBwcm9wZXJ0eS4gVGhlIGZ1bmN0aW9uIHJldHVybnMgdHJ1ZSB0byBpbmRpY2F0ZSB0aGF0IHRyYWNraW5nIGlzIGRpc2FibGVkLlxyXG5JZiBuZWl0aGVyIG9mIHRoZSBhYm92ZSBjb25kaXRpb25zIGFyZSBtZXQsIHRoZSBmdW5jdGlvbiByZXR1cm5zIGZhbHNlIHRvIGluZGljYXRlIHRoYXQgdHJhY2tpbmcgaXMgZW5hYmxlZCBmb3IgdGhlIHVzZXIuXHJcbk92ZXJhbGwsIHRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byBkZXRlcm1pbmUgaWYgdHJhY2tpbmcgaXMgZW5hYmxlZCBvciBkaXNhYmxlZCBmb3IgYSBzcGVjaWZpYyB1c2VyIGluIEdBNCwgYmFzZWQgb24gdGhlIHVzZXIncyBwcmVmZXJlbmNlcyBhbmQgYW55IGV4cGxpY2l0IHNldHRpbmdzIHRoZXkgbWF5IGhhdmUgc2V0LlxyXG5cclxuc2V0dGluZyBhIHByb3BlcnR5IG9uIHdpbmRvdyBkb2Vzbid0IGNyZWF0ZSBhIGNvb2tpZSwgY2hhdC1ncHQgd2FzIGhhbGx1Y2luYXRpbmdcclxuXHJcbiAgICAgICAgKi9cclxufVxyXG5cclxuZnVuY3Rpb24gbG9hZEdhU2NyaXB0KGdhTWVhc3VyZW1lbnRJZDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBmID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdO1xyXG4gICAgY29uc3QgaiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG4gICAgai5hc3luYyA9IHRydWU7XHJcbiAgICBqLnNyYyA9ICdodHRwczovL3d3dy5nb29nbGV0YWdtYW5hZ2VyLmNvbS9ndGFnL2pzP2lkPScgKyBnYU1lYXN1cmVtZW50SWQ7XHJcbiAgICBmLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGosIGYpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRQaWlTYWZlUGFnZVZpZXcoZ2FNZWFzdXJlbWVudElkOiBzdHJpbmcpIHtcclxuXHJcbiAgICBjb25zdCBwYWdlVmlldyA9IHtcclxuICAgICAgICBwYWdlX3RpdGxlOiBkb2N1bWVudC50aXRsZSxcclxuICAgICAgICBzZW5kX3RvOiBnYU1lYXN1cmVtZW50SWQsXHJcbiAgICAgICAgcmVmZXJyZXI6ICcnLFxyXG4gICAgICAgIHBhZ2VfbG9jYXRpb246ICcnLFxyXG4gICAgICAgIHBhZ2VfcGF0aDogJydcclxuICAgIH07XHJcblxyXG4gICAgLy90b2RvOiBzZXQgYXMgcmVmZXJyZXIgb3IgcGFnZV9yZWZlcnJlciBpbiBwYWdlVmlldyAtIGRvZXMgaXQgbWF0dGVyPyBpcyBpdCBvbmx5IHBpY2tpbmcgaXQgdXAgZnJvbSB0aGUgY29uZmlnP1xyXG4gICAgLy90b2RvOiBnZXQgcGlpc2FmZSByZWZlcnJlciBmdW5jdGlvblxyXG4gICAgaWYgKGRvY3VtZW50LnJlZmVycmVyICE9PSAnJykge1xyXG4gICAgICAgIGNvbnN0IHJlZmVycmVyVXJsID0gbmV3IFVSTChkb2N1bWVudC5yZWZlcnJlcik7XHJcbiAgICAgICAgY29uc3QgcGlpU2FmZVJlZmVycmVyUXVlcnlTdHJpbmcgPSBnZXRQaWlTYWZlUXVlcnlTdHJpbmcocmVmZXJyZXJVcmwuc2VhcmNoKTtcclxuICAgICAgICBpZiAocGlpU2FmZVJlZmVycmVyUXVlcnlTdHJpbmcgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBwYWdlVmlldy5yZWZlcnJlciA9IGRvY3VtZW50LnJlZmVycmVyO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVybEFycmF5ID0gZG9jdW1lbnQucmVmZXJyZXIuc3BsaXQoXCI/XCIpO1xyXG5cclxuICAgICAgICAgICAgcGFnZVZpZXcucmVmZXJyZXIgPSB1cmxBcnJheVswXSArIHBpaVNhZmVSZWZlcnJlclF1ZXJ5U3RyaW5nO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBwaWlTYWZlUXVlcnlTdHJpbmcgPSBnZXRQaWlTYWZlUXVlcnlTdHJpbmcod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7XHJcblxyXG4gICAgaWYgKHBpaVNhZmVRdWVyeVN0cmluZyA9PSBudWxsKSB7XHJcbiAgICAgICAgcGFnZVZpZXcucGFnZV9sb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xyXG4gICAgICAgIHBhZ2VWaWV3LnBhZ2VfcGF0aCA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSArIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2g7XHJcblxyXG4gICAgICAgIHJldHVybiBwYWdlVmlldztcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB1cmxBcnJheSA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KFwiP1wiKTtcclxuXHJcbiAgICBwYWdlVmlldy5wYWdlX2xvY2F0aW9uID0gdXJsQXJyYXlbMF0gKyBwaWlTYWZlUXVlcnlTdHJpbmc7XHJcbiAgICBwYWdlVmlldy5wYWdlX3BhdGggPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKyBwaWlTYWZlUXVlcnlTdHJpbmc7XHJcblxyXG4gICAgcmV0dXJuIHBhZ2VWaWV3O1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRQaWlTYWZlUXVlcnlTdHJpbmcocXVlcnlTdHJpbmcpIHtcclxuXHJcbiAgICAvL3RvZG86IGZvciBzYWZldHksIGNvbnZlcnQgdG8gbG93ZXJjYXNlLCBzbyB0aGF0IGlmIHRoZSB1c2VyIGNoYW5nZXMgdGhlIGNhc2Ugb2YgdGhlIHVybCwgd2Ugc3RpbGwgZG9uJ3QgY29sbGVjdCBwaWlcclxuICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhxdWVyeVN0cmluZyk7XHJcblxyXG4gICAgbGV0IHBvc3Rjb2RlID0gcXVlcnlQYXJhbXMuZ2V0KFwicG9zdGNvZGVcIik7XHJcbiAgICBpZiAocG9zdGNvZGUgPT0gbnVsbCkge1xyXG4gICAgICAgIC8vIG51bGwgaW5kaWNhdGVzIG9yaWdpbmFsIHF1ZXJ5IHBhcmFtcyB3ZXJlIGFscmVhZHkgcGlpIHNhZmVcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBwb3N0Y29kZSA9IHBvc3Rjb2RlLnJlcGxhY2UoL1thLXpBLVpdKyQvLCBcIlwiKTtcclxuICAgIHF1ZXJ5UGFyYW1zLnNldChcInBvc3Rjb2RlXCIsIHBvc3Rjb2RlKTtcclxuICAgIHF1ZXJ5UGFyYW1zLmRlbGV0ZShcImxhdGl0dWRlXCIpO1xyXG4gICAgcXVlcnlQYXJhbXMuZGVsZXRlKFwibG9uZ2l0dWRlXCIpO1xyXG5cclxuICAgIHJldHVybiAnPycgKyBxdWVyeVBhcmFtcy50b1N0cmluZygpO1xyXG59XHJcbiJdfQ==\n","/**\n * Cookie functions\n * ================\n *\n * Used by the cookie banner component and cookies page pattern.\n *\n * Includes function `Cookie()` for getting, setting, and deleting cookies, and\n * functions to manage the users' consent to cookies.\n *\n * Note: there is an inline script in cookie-banner.njk to show the banner\n * as soon as possible, to avoid a high Cumulative Layout Shift (CLS) score.\n * The consent cookie version is defined in cookie-banner.njk\n */\nimport initAnalytics from './analytics.js';\n/* Name of the cookie to save users cookie preferences to. */\nvar CONSENT_COOKIE_NAME = 'service_directory_cookies_policy';\n/* Users can (dis)allow different groups of cookies. */\nvar COOKIE_CATEGORIES = {\n    analytics: ['_ga', '_ga_' + window.GA_CONTAINER_ID],\n    /* Essential cookies\n     *\n     * Essential cookies cannot be deselected, but we want our cookie code to\n     * only allow adding cookies that are documented in this object, so they need\n     * to be added here.\n     */\n    essential: ['service_directory_cookies_policy']\n};\n/*\n * Default cookie preferences if user has no cookie preferences.\n *\n * Note that this doesn't include a key for essential cookies, essential\n * cookies cannot be disallowed. If the object contains { essential: false }\n * this will be ignored.\n */\nvar DEFAULT_COOKIE_CONSENT = {\n    analytics: false\n};\n/*\n * Set, get, and delete cookies.\n *\n * Usage:\n *\n *   Setting a cookie:\n *   Cookie('hobnob', 'tasty', { days: 30 })\n *\n *   Reading a cookie:\n *   Cookie('hobnob')\n *\n *   Deleting a cookie:\n *   Cookie('hobnob', null)\n */\nexport function Cookie(name, value, options) {\n    if (typeof value !== 'undefined') {\n        if (value === false || value === null) {\n            deleteCookie(name);\n        }\n        else {\n            // Default expiry date of 30 days\n            if (typeof options === 'undefined') {\n                options = { days: 30 };\n            }\n            setCookie(name, value, options);\n        }\n    }\n    else {\n        return getCookie(name);\n    }\n}\n/** Return the user's cookie preferences.\n *\n * If the consent cookie is malformed, or not present,\n * returns null.\n */\nexport function getConsentCookie() {\n    var consentCookie = getCookie(CONSENT_COOKIE_NAME);\n    var consentCookieObj;\n    if (consentCookie) {\n        try {\n            consentCookieObj = JSON.parse(consentCookie);\n        }\n        catch (err) {\n            return null;\n        }\n    }\n    else {\n        return null;\n    }\n    return consentCookieObj;\n}\n/** Check the cookie preferences object.\n *\n * If the consent object is not present, malformed, or incorrect version,\n * returns false, otherwise returns true.\n *\n * This is also duplicated in cookie-banner.njk - the two need to be kept in sync\n */\nexport function isValidConsentCookie(options) {\n    return (options && options.version >= window.GDS_CONSENT_COOKIE_VERSION);\n}\n/** Update the user's cookie preferences. */\nexport function setConsentCookie(options) {\n    var cookieConsent = getConsentCookie();\n    if (!cookieConsent) {\n        cookieConsent = JSON.parse(JSON.stringify(DEFAULT_COOKIE_CONSENT));\n    }\n    // Merge current cookie preferences and new preferences\n    for (var option in options) {\n        cookieConsent[option] = options[option];\n    }\n    // Essential cookies cannot be deselected, ignore this cookie type\n    delete cookieConsent.essential;\n    cookieConsent.version = window.GDS_CONSENT_COOKIE_VERSION;\n    // Set the consent cookie\n    setCookie(CONSENT_COOKIE_NAME, JSON.stringify(cookieConsent), { days: 365 });\n    // Update the other cookies\n    resetCookies();\n}\n/** Apply the user's cookie preferences\n *\n * Deletes any cookies the user has not consented to.\n */\nexport function resetCookies() {\n    var options = getConsentCookie();\n    // If no preferences or old version use the default\n    if (!isValidConsentCookie(options)) {\n        options = JSON.parse(JSON.stringify(DEFAULT_COOKIE_CONSENT));\n    }\n    for (var cookieType in options) {\n        if (cookieType === 'version') {\n            continue;\n        }\n        // Essential cookies cannot be deselected, ignore this cookie type\n        if (cookieType === 'essential') {\n            continue;\n        }\n        //todo: enabling analytics doesn't belong in resetCookies\n        //const analyticsAllowed = (cookieType === 'analytics' && options[cookieType]);\n        //if (analyticsAllowed) {\n        //    initAnalytics(window.GA_MEASUREMENT_ID);\n        //}\n        if (!options[cookieType]) {\n            // Fetch the cookies in that category\n            var cookiesInCategory = COOKIE_CATEGORIES[cookieType];\n            cookiesInCategory.forEach(function (cookie) {\n                // Delete cookie\n                Cookie(cookie, null);\n            });\n        }\n    }\n}\nfunction userAllowsCookieCategory(cookieCategory, cookiePreferences) {\n    // Essential cookies are always allowed\n    if (cookieCategory === 'essential') {\n        return true;\n    }\n    // Sometimes cookiePreferences is malformed in some of the tests, so we need to handle these\n    try {\n        return cookiePreferences[cookieCategory];\n    }\n    catch (e) {\n        console.error(e);\n        return false;\n    }\n}\nfunction userAllowsCookie(cookieName) {\n    // Always allow setting the consent cookie\n    if (cookieName === CONSENT_COOKIE_NAME) {\n        return true;\n    }\n    // Get the current cookie preferences\n    var cookiePreferences = getConsentCookie();\n    // If no preferences or old version use the default\n    if (!isValidConsentCookie(cookiePreferences)) {\n        cookiePreferences = DEFAULT_COOKIE_CONSENT;\n    }\n    for (var category in COOKIE_CATEGORIES) {\n        var cookiesInCategory = COOKIE_CATEGORIES[category];\n        if (cookiesInCategory.indexOf(cookieName) !== '-1') {\n            return userAllowsCookieCategory(category, cookiePreferences);\n        }\n    }\n    // Deny the cookie if it is not known to us\n    return false;\n}\nfunction getCookie(name) {\n    var nameEQ = name + '=';\n    var cookies = document.cookie.split(';');\n    for (var i = 0, len = cookies.length; i < len; i++) {\n        var cookie = cookies[i];\n        while (cookie.charAt(0) === ' ') {\n            cookie = cookie.substring(1, cookie.length);\n        }\n        if (cookie.indexOf(nameEQ) === 0) {\n            return decodeURIComponent(cookie.substring(nameEQ.length));\n        }\n    }\n    return null;\n}\n// do we need to set the domain?\nfunction setCookie(name, value, options) {\n    if (userAllowsCookie(name)) {\n        if (typeof options === 'undefined') {\n            options = {};\n        }\n        var cookieString = name + '=' + value + '; path=/; SameSite=Strict';\n        if (options.days) {\n            var date = new Date();\n            date.setTime(date.getTime() + (options.days * 24 * 60 * 60 * 1000));\n            cookieString = cookieString + '; expires=' + date.toUTCString();\n        }\n        if (document.location.protocol === 'https:') {\n            cookieString = cookieString + '; Secure';\n        }\n        document.cookie = cookieString;\n    }\n}\nfunction deleteCookie(name) {\n    if (Cookie(name)) {\n        // Cookies need to be deleted in the same level of specificity in which they were set\n        // If a cookie was set with a specified domain, it needs to be specified when deleted\n        // If a cookie wasn't set with the domain attribute, it shouldn't be there when deleted\n        // You can't tell if a cookie was set with a domain attribute or not, so try both options\n        document.cookie = name + '=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/';\n        document.cookie = name + '=;expires=Thu, 01 Jan 1970 00:00:00 GMT;domain=' + window.location.hostname + ';path=/';\n        document.cookie = name + '=;expires=Thu, 01 Jan 1970 00:00:00 GMT;domain=.' + window.location.hostname + ';path=/';\n    }\n}\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvY29va2llLWZ1bmN0aW9ucy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7O0dBWUc7QUFFSCxPQUFPLGFBQWEsTUFBTSxnQkFBZ0IsQ0FBQTtBQUUxQyw2REFBNkQ7QUFDN0QsSUFBSSxtQkFBbUIsR0FBRyxrQ0FBa0MsQ0FBQztBQUU3RCx1REFBdUQ7QUFDdkQsSUFBSSxpQkFBaUIsR0FBRztJQUNwQixTQUFTLEVBQUUsQ0FBQyxLQUFLLEVBQUUsTUFBTSxHQUFHLE1BQU0sQ0FBQyxlQUFlLENBQUM7SUFDbkQ7Ozs7O09BS0c7SUFDSCxTQUFTLEVBQUUsQ0FBQyxrQ0FBa0MsQ0FBQztDQUNsRCxDQUFBO0FBRUQ7Ozs7OztHQU1HO0FBQ0gsSUFBSSxzQkFBc0IsR0FBRztJQUN6QixTQUFTLEVBQUUsS0FBSztDQUNuQixDQUFBO0FBRUQ7Ozs7Ozs7Ozs7Ozs7R0FhRztBQUNILE1BQU0sVUFBVSxNQUFNLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxPQUFPO0lBQ3ZDLElBQUksT0FBTyxLQUFLLEtBQUssV0FBVyxFQUFFO1FBQzlCLElBQUksS0FBSyxLQUFLLEtBQUssSUFBSSxLQUFLLEtBQUssSUFBSSxFQUFFO1lBQ25DLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUN0QjthQUFNO1lBQ0gsaUNBQWlDO1lBQ2pDLElBQUksT0FBTyxPQUFPLEtBQUssV0FBVyxFQUFFO2dCQUNoQyxPQUFPLEdBQUcsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLENBQUE7YUFDekI7WUFDRCxTQUFTLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxPQUFPLENBQUMsQ0FBQztTQUNuQztLQUNKO1NBQU07UUFDSCxPQUFPLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUMxQjtBQUNMLENBQUM7QUFFRDs7OztHQUlHO0FBQ0gsTUFBTSxVQUFVLGdCQUFnQjtJQUM1QixJQUFJLGFBQWEsR0FBRyxTQUFTLENBQUMsbUJBQW1CLENB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QyxFQUFFO1FBQ2QscUZBQXFGO1FBQ3JGLHFGQUFxRjtRQUNyRix1RkFBdUY7UUFDdkYseUZBQXlGO1FBQ3pGLFFBQVEsQ0FBQyxNQUFNLEdBQUcsSUFBSSxHQUFHLGdEQUFnRCxDQUFDO1FBQzFFLFFBQVEsQ0FBQyxNQUFNLEdBQUcsSUFBSSxHQUFHLGlEQUFpRCxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsUUFBUSxHQUFHLFNBQVMsQ0FBQztRQUNsSCxRQUFRLENBQUMsTUFBTSxHQUFHLElBQUksR0FBRyxrREFBa0QsR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLFFBQVEsR0FBRyxTQUFTLENBQUM7S0FDdEg7QUFDTCxDQUFDIiwiZmlsZSI6ImNvbXBvbmVudHMvY29va2llLWZ1bmN0aW9ucy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDb29raWUgZnVuY3Rpb25zXHJcbiAqID09PT09PT09PT09PT09PT1cclxuICpcclxuICogVXNlZCBieSB0aGUgY29va2llIGJhbm5lciBjb21wb25lbnQgYW5kIGNvb2tpZXMgcGFnZSBwYXR0ZXJuLlxyXG4gKlxyXG4gKiBJbmNsdWRlcyBmdW5jdGlvbiBgQ29va2llKClgIGZvciBnZXR0aW5nLCBzZXR0aW5nLCBhbmQgZGVsZXRpbmcgY29va2llcywgYW5kXHJcbiAqIGZ1bmN0aW9ucyB0byBtYW5hZ2UgdGhlIHVzZXJzJyBjb25zZW50IHRvIGNvb2tpZXMuXHJcbiAqXHJcbiAqIE5vdGU6IHRoZXJlIGlzIGFuIGlubGluZSBzY3JpcHQgaW4gY29va2llLWJhbm5lci5uamsgdG8gc2hvdyB0aGUgYmFubmVyXHJcbiAqIGFzIHNvb24gYXMgcG9zc2libGUsIHRvIGF2b2lkIGEgaGlnaCBDdW11bGF0aXZlIExheW91dCBTaGlmdCAoQ0xTKSBzY29yZS5cclxuICogVGhlIGNvbnNlbnQgY29va2llIHZlcnNpb24gaXMgZGVmaW5lZCBpbiBjb29raWUtYmFubmVyLm5qa1xyXG4gKi9cclxuXHJcbmltcG9ydCBpbml0QW5hbHl0aWNzIGZyb20gJy4vYW5hbHl0aWNzLmpzJ1xyXG5cclxuLyogTmFtZSBvZiB0aGUgY29va2llIHRvIHNhdmUgdXNlcnMgY29va2llIHByZWZlcmVuY2VzIHRvLiAqL1xyXG52YXIgQ09OU0VOVF9DT09LSUVfTkFNRSA9ICdzZXJ2aWNlX2RpcmVjdG9yeV9jb29raWVzX3BvbGljeSc7XHJcblxyXG4vKiBVc2VycyBjYW4gKGRpcylhbGxvdyBkaWZmZXJlbnQgZ3JvdXBzIG9mIGNvb2tpZXMuICovXHJcbnZhciBDT09LSUVfQ0FURUdPUklFUyA9IHtcclxuICAgIGFuYWx5dGljczogWydfZ2EnLCAnX2dhXycgKyB3aW5kb3cuR0FfQ09OVEFJTkVSX0lEXSxcclxuICAgIC8qIEVzc2VudGlhbCBjb29raWVzXHJcbiAgICAgKlxyXG4gICAgICogRXNzZW50aWFsIGNvb2tpZXMgY2Fubm90IGJlIGRlc2VsZWN0ZWQsIGJ1dCB3ZSB3YW50IG91ciBjb29raWUgY29kZSB0b1xyXG4gICAgICogb25seSBhbGxvdyBhZGRpbmcgY29va2llcyB0aGF0IGFyZSBkb2N1bWVudGVkIGluIHRoaXMgb2JqZWN0LCBzbyB0aGV5IG5lZWRcclxuICAgICAqIHRvIGJlIGFkZGVkIGhlcmUuXHJcbiAgICAgKi9cclxuICAgIGVzc2VudGlhbDogWydzZXJ2aWNlX2RpcmVjdG9yeV9jb29raWVzX3BvbGljeSddXHJcbn1cclxuXHJcbi8qXHJcbiAqIERlZmF1bHQgY29va2llIHByZWZlcmVuY2VzIGlmIHVzZXIgaGFzIG5vIGNvb2tpZSBwcmVmZXJlbmNlcy5cclxuICpcclxuICogTm90ZSB0aGF0IHRoaXMgZG9lc24ndCBpbmNsdWRlIGEga2V5IGZvciBlc3NlbnRpYWwgY29va2llcywgZXNzZW50aWFsXHJcbiAqIGNvb2tpZXMgY2Fubm90IGJlIGRpc2FsbG93ZWQuIElmIHRoZSBvYmplY3QgY29udGFpbnMgeyBlc3NlbnRpYWw6IGZhbHNlIH1cclxuICogdGhpcyB3aWxsIGJlIGlnbm9yZWQuXHJcbiAqL1xyXG52YXIgREVGQVVMVF9DT09LSUVfQ09OU0VOVCA9IHtcclxuICAgIGFuYWx5dGljczogZmFsc2VcclxufVxyXG5cclxuLypcclxuICogU2V0LCBnZXQsIGFuZCBkZWxldGUgY29va2llcy5cclxuICpcclxuICogVXNhZ2U6XHJcbiAqXHJcbiAqICAgU2V0dGluZyBhIGNvb2tpZTpcclxuICogICBDb29raWUoJ2hvYm5vYicsICd0YXN0eScsIHsgZGF5czogMzAgfSlcclxuICpcclxuICogICBSZWFkaW5nIGEgY29va2llOlxyXG4gKiAgIENvb2tpZSgnaG9ibm9iJylcclxuICpcclxuICogICBEZWxldGluZyBhIGNvb2tpZTpcclxuICogICBDb29raWUoJ2hvYm5vYicsIG51bGwpXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gQ29va2llKG5hbWUsIHZhbHVlLCBvcHRpb25zKSB7XHJcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gZmFsc2UgfHwgdmFsdWUgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgZGVsZXRlQ29va2llKG5hbWUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIERlZmF1bHQgZXhwaXJ5IGRhdGUgb2YgMzAgZGF5c1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zID0geyBkYXlzOiAzMCB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2V0Q29va2llKG5hbWUsIHZhbHVlLCBvcHRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBnZXRDb29raWUobmFtZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKiBSZXR1cm4gdGhlIHVzZXIncyBjb29raWUgcHJlZmVyZW5jZXMuXHJcbiAqXHJcbiAqIElmIHRoZSBjb25zZW50IGNvb2tpZSBpcyBtYWxmb3JtZWQsIG9yIG5vdCBwcmVzZW50LFxyXG4gKiByZXR1cm5zIG51bGwuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29uc2VudENvb2tpZSgpIHtcclxuICAgIHZhciBjb25zZW50Q29va2llID0gZ2V0Q29va2llKENPTlNFTlRfQ09PS0lFX05BTUUpO1xyXG4gICAgdmFyIGNvbnNlbnRDb29raWVPYmo7XHJcblxyXG4gICAgaWYgKGNvbnNlbnRDb29raWUpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zZW50Q29va2llT2JqID0gSlNPTi5wYXJzZShjb25zZW50Q29va2llKTtcclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gY29uc2VudENvb2tpZU9iajtcclxufVxyXG5cclxuLyoqIENoZWNrIHRoZSBjb29raWUgcHJlZmVyZW5jZXMgb2JqZWN0LlxyXG4gKlxyXG4gKiBJZiB0aGUgY29uc2VudCBvYmplY3QgaXMgbm90IHByZXNlbnQsIG1hbGZvcm1lZCwgb3IgaW5jb3JyZWN0IHZlcnNpb24sXHJcbiAqIHJldHVybnMgZmFsc2UsIG90aGVyd2lzZSByZXR1cm5zIHRydWUuXHJcbiAqXHJcbiAqIFRoaXMgaXMgYWxzbyBkdXBsaWNhdGVkIGluIGNvb2tpZS1iYW5uZXIubmprIC0gdGhlIHR3byBuZWVkIHRvIGJlIGtlcHQgaW4gc3luY1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsaWRDb25zZW50Q29va2llKG9wdGlvbnMpIHtcclxuICAgIHJldHVybiAob3B0aW9ucyAmJiBvcHRpb25zLnZlcnNpb24gPj0gd2luZG93LkdEU19DT05TRU5UX0NPT0tJRV9WRVJTSU9OKTtcclxufVxyXG5cclxuLyoqIFVwZGF0ZSB0aGUgdXNlcidzIGNvb2tpZSBwcmVmZXJlbmNlcy4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldENvbnNlbnRDb29raWUob3B0aW9ucykge1xyXG4gICAgdmFyIGNvb2tpZUNvbnNlbnQgPSBnZXRDb25zZW50Q29va2llKCk7XHJcblxyXG4gICAgaWYgKCFjb29raWVDb25zZW50KSB7XHJcbiAgICAgICAgY29va2llQ29uc2VudCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoREVGQVVMVF9DT09LSUVfQ09OU0VOVCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE1lcmdlIGN1cnJlbnQgY29va2llIHByZWZlcmVuY2VzIGFuZCBuZXcgcHJlZmVyZW5jZXNcclxuICAgIGZvciAodmFyIG9wdGlvbiBpbiBvcHRpb25zKSB7XHJcbiAgICAgICAgY29va2llQ29uc2VudFtvcHRpb25dID0gb3B0aW9uc1tvcHRpb25dO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEVzc2VudGlhbCBjb29raWVzIGNhbm5vdCBiZSBkZXNlbGVjdGVkLCBpZ25vcmUgdGhpcyBjb29raWUgdHlwZVxyXG4gICAgZGVsZXRlIGNvb2tpZUNvbnNlbnQuZXNzZW50aWFsO1xyXG5cclxuICAgIGNvb2tpZUNvbnNlbnQudmVyc2lvbiA9IHdpbmRvdy5HRFNfQ09OU0VOVF9DT09LSUVfVkVSU0lPTjtcclxuXHJcbiAgICAvLyBTZXQgdGhlIGNvbnNlbnQgY29va2llXHJcbiAgICBzZXRDb29raWUoQ09OU0VOVF9DT09LSUVfTkFNRSwgSlNPTi5zdHJpbmdpZnkoY29va2llQ29uc2VudCksIHsgZGF5czogMzY1IH0pO1xyXG5cclxuICAgIC8vIFVwZGF0ZSB0aGUgb3RoZXIgY29va2llc1xyXG4gICAgcmVzZXRDb29raWVzKCk7XHJcbn1cclxuXHJcbi8qKiBBcHBseSB0aGUgdXNlcidzIGNvb2tpZSBwcmVmZXJlbmNlc1xyXG4gKlxyXG4gKiBEZWxldGVzIGFueSBjb29raWVzIHRoZSB1c2VyIGhhcyBub3QgY29uc2VudGVkIHRvLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0Q29va2llcygpIHtcclxuICAgIHZhciBvcHRpb25zID0gZ2V0Q29uc2VudENvb2tpZSgpO1xyXG5cclxuICAgIC8vIElmIG5vIHByZWZlcmVuY2VzIG9yIG9sZCB2ZXJzaW9uIHVzZSB0aGUgZGVmYXVsdFxyXG4gICAgaWYgKCFpc1ZhbGlkQ29uc2VudENvb2tpZShvcHRpb25zKSkge1xyXG4gICAgICAgIG9wdGlvbnMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KERFRkFVTFRfQ09PS0lFX0NPTlNFTlQpKTtcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKHZhciBjb29raWVUeXBlIGluIG9wdGlvbnMpIHtcclxuICAgICAgICBpZiAoY29va2llVHlwZSA9PT0gJ3ZlcnNpb24nKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRXNzZW50aWFsIGNvb2tpZXMgY2Fubm90IGJlIGRlc2VsZWN0ZWQsIGlnbm9yZSB0aGlzIGNvb2tpZSB0eXBlXHJcbiAgICAgICAgaWYgKGNvb2tpZVR5cGUgPT09ICdlc3NlbnRpYWwnKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy90b2RvOiBlbmFibGluZyBhbmFseXRpY3MgZG9lc24ndCBiZWxvbmcgaW4gcmVzZXRDb29raWVzXHJcbiAgICAgICAgLy9jb25zdCBhbmFseXRpY3NBbGxvd2VkID0gKGNvb2tpZVR5cGUgPT09ICdhbmFseXRpY3MnICYmIG9wdGlvbnNbY29va2llVHlwZV0pO1xyXG5cclxuICAgICAgICAvL2lmIChhbmFseXRpY3NBbGxvd2VkKSB7XHJcbiAgICAgICAgLy8gICAgaW5pdEFuYWx5dGljcyh3aW5kb3cuR0FfTUVBU1VSRU1FTlRfSUQpO1xyXG4gICAgICAgIC8vfVxyXG5cclxuICAgICAgICBpZiAoIW9wdGlvbnNbY29va2llVHlwZV0pIHtcclxuICAgICAgICAgICAgLy8gRmV0Y2ggdGhlIGNvb2tpZXMgaW4gdGhhdCBjYXRlZ29yeVxyXG4gICAgICAgICAgICB2YXIgY29va2llc0luQ2F0ZWdvcnkgPSBDT09LSUVfQ0FURUdPUklFU1tjb29raWVUeXBlXVxyXG5cclxuICAgICAgICAgICAgY29va2llc0luQ2F0ZWdvcnkuZm9yRWFjaChmdW5jdGlvbihjb29raWUpIHtcclxuICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBjb29raWVcclxuICAgICAgICAgICAgICAgIENvb2tpZShjb29raWUsIG51bGwpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVzZXJBbGxvd3NDb29raWVDYXRlZ29yeShjb29raWVDYXRlZ29yeSwgY29va2llUHJlZmVyZW5jZXMpIHtcclxuICAgIC8vIEVzc2VudGlhbCBjb29raWVzIGFyZSBhbHdheXMgYWxsb3dlZFxyXG4gICAgaWYgKGNvb2tpZUNhdGVnb3J5ID09PSAnZXNzZW50aWFsJykge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFNvbWV0aW1lcyBjb29raWVQcmVmZXJlbmNlcyBpcyBtYWxmb3JtZWQgaW4gc29tZSBvZiB0aGUgdGVzdHMsIHNvIHdlIG5lZWQgdG8gaGFuZGxlIHRoZXNlXHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiBjb29raWVQcmVmZXJlbmNlc1tjb29raWVDYXRlZ29yeV07XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVzZXJBbGxvd3NDb29raWUoY29va2llTmFtZSkge1xyXG4gICAgLy8gQWx3YXlzIGFsbG93IHNldHRpbmcgdGhlIGNvbnNlbnQgY29va2llXHJcbiAgICBpZiAoY29va2llTmFtZSA9PT0gQ09OU0VOVF9DT09LSUVfTkFNRSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEdldCB0aGUgY3VycmVudCBjb29raWUgcHJlZmVyZW5jZXNcclxuICAgIHZhciBjb29raWVQcmVmZXJlbmNlcyA9IGdldENvbnNlbnRDb29raWUoKTtcclxuXHJcbiAgICAvLyBJZiBubyBwcmVmZXJlbmNlcyBvciBvbGQgdmVyc2lvbiB1c2UgdGhlIGRlZmF1bHRcclxuICAgIGlmICghaXNWYWxpZENvbnNlbnRDb29raWUoY29va2llUHJlZmVyZW5jZXMpKSB7XHJcbiAgICAgICAgY29va2llUHJlZmVyZW5jZXMgPSBERUZBVUxUX0NPT0tJRV9DT05TRU5UO1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAodmFyIGNhdGVnb3J5IGluIENPT0tJRV9DQVRFR09SSUVTKSB7XHJcbiAgICAgICAgdmFyIGNvb2tpZXNJbkNhdGVnb3J5ID0gQ09PS0lFX0NBVEVHT1JJRVNbY2F0ZWdvcnldO1xyXG5cclxuICAgICAgICBpZiAoY29va2llc0luQ2F0ZWdvcnkuaW5kZXhPZihjb29raWVOYW1lKSAhPT0gJy0xJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdXNlckFsbG93c0Nvb2tpZUNhdGVnb3J5KGNhdGVnb3J5LCBjb29raWVQcmVmZXJlbmNlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIERlbnkgdGhlIGNvb2tpZSBpZiBpdCBpcyBub3Qga25vd24gdG8gdXNcclxuICAgIHJldHVybiBmYWxzZVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRDb29raWUobmFtZSkge1xyXG4gICAgdmFyIG5hbWVFUSA9IG5hbWUgKyAnPSc7XHJcbiAgICB2YXIgY29va2llcyA9IGRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOycpO1xyXG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvb2tpZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICB2YXIgY29va2llID0gY29va2llc1tpXTtcclxuICAgICAgICB3aGlsZSAoY29va2llLmNoYXJBdCgwKSA9PT0gJyAnKSB7XHJcbiAgICAgICAgICAgIGNvb2tpZSA9IGNvb2tpZS5zdWJzdHJpbmcoMSwgY29va2llLmxlbmd0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjb29raWUuaW5kZXhPZihuYW1lRVEpID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoY29va2llLnN1YnN0cmluZyhuYW1lRVEubGVuZ3RoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn1cclxuXHJcbi8vIGRvIHdlIG5lZWQgdG8gc2V0IHRoZSBkb21haW4/XHJcbmZ1bmN0aW9uIHNldENvb2tpZShuYW1lLCB2YWx1ZSwgb3B0aW9ucykge1xyXG4gICAgaWYgKHVzZXJBbGxvd3NDb29raWUobmFtZSkpIHtcclxuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgY29va2llU3RyaW5nID0gbmFtZSArICc9JyArIHZhbHVlICsgJzsgcGF0aD0vOyBTYW1lU2l0ZT1TdHJpY3QnO1xyXG4gICAgICAgIGlmIChvcHRpb25zLmRheXMpIHtcclxuICAgICAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICBkYXRlLnNldFRpbWUoZGF0ZS5nZXRUaW1lKCkgKyAob3B0aW9ucy5kYXlzICogMjQgKiA2MCAqIDYwICogMTAwMCkpO1xyXG4gICAgICAgICAgICBjb29raWVTdHJpbmcgPSBjb29raWVTdHJpbmcgKyAnOyBleHBpcmVzPScgKyBkYXRlLnRvVVRDU3RyaW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkb2N1bWVudC5sb2NhdGlvbi5wcm90b2NvbCA9PT0gJ2h0dHBzOicpIHtcclxuICAgICAgICAgICAgY29va2llU3RyaW5nID0gY29va2llU3RyaW5nICsgJzsgU2VjdXJlJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZG9jdW1lbnQuY29va2llID0gY29va2llU3RyaW5nO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBkZWxldGVDb29raWUobmFtZSkge1xyXG4gICAgaWYgKENvb2tpZShuYW1lKSkge1xyXG4gICAgICAgIC8vIENvb2tpZXMgbmVlZCB0byBiZSBkZWxldGVkIGluIHRoZSBzYW1lIGxldmVsIG9mIHNwZWNpZmljaXR5IGluIHdoaWNoIHRoZXkgd2VyZSBzZXRcclxuICAgICAgICAvLyBJZiBhIGNvb2tpZSB3YXMgc2V0IHdpdGggYSBzcGVjaWZpZWQgZG9tYWluLCBpdCBuZWVkcyB0byBiZSBzcGVjaWZpZWQgd2hlbiBkZWxldGVkXHJcbiAgICAgICAgLy8gSWYgYSBjb29raWUgd2Fzbid0IHNldCB3aXRoIHRoZSBkb21haW4gYXR0cmlidXRlLCBpdCBzaG91bGRuJ3QgYmUgdGhlcmUgd2hlbiBkZWxldGVkXHJcbiAgICAgICAgLy8gWW91IGNhbid0IHRlbGwgaWYgYSBjb29raWUgd2FzIHNldCB3aXRoIGEgZG9tYWluIGF0dHJpYnV0ZSBvciBub3QsIHNvIHRyeSBib3RoIG9wdGlvbnNcclxuICAgICAgICBkb2N1bWVudC5jb29raWUgPSBuYW1lICsgJz07ZXhwaXJlcz1UaHUsIDAxIEphbiAxOTcwIDAwOjAwOjAwIEdNVDtwYXRoPS8nO1xyXG4gICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IG5hbWUgKyAnPTtleHBpcmVzPVRodSwgMDEgSmFuIDE5NzAgMDA6MDA6MDAgR01UO2RvbWFpbj0nICsgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lICsgJztwYXRoPS8nO1xyXG4gICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IG5hbWUgKyAnPTtleHBpcmVzPVRodSwgMDEgSmFuIDE5NzAgMDA6MDA6MDAgR01UO2RvbWFpbj0uJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSArICc7cGF0aD0vJztcclxuICAgIH1cclxufSJdfQ==\n","/**\n * This seems to fail in IE8, requires more investigation.\n * See: https://github.com/imagitama/nodelist-foreach-polyfill\n */\nfunction nodeListForEach(nodes, callback) {\n    if (window.NodeList.prototype.forEach) {\n        return nodes.forEach(callback);\n    }\n    for (var i = 0; i < nodes.length; i++) {\n        callback.call(window, nodes[i], i, nodes);\n    }\n}\nexport { nodeListForEach };\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvaGVscGVycy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0dBR0c7QUFDSCxTQUFTLGVBQWUsQ0FBQyxLQUFLLEVBQUUsUUFBUTtJQUNwQyxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLE9BQU8sRUFBRTtRQUNuQyxPQUFPLEtBQUssQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUE7S0FDakM7SUFDRCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUNuQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFBO0tBQzVDO0FBQ0wsQ0FBQztBQUVELE9BQU8sRUFDSCxlQUFlLEVBQ2xCLENBQUEiLCJmaWxlIjoiY29tcG9uZW50cy9oZWxwZXJzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIFRoaXMgc2VlbXMgdG8gZmFpbCBpbiBJRTgsIHJlcXVpcmVzIG1vcmUgaW52ZXN0aWdhdGlvbi5cclxuICogU2VlOiBodHRwczovL2dpdGh1Yi5jb20vaW1hZ2l0YW1hL25vZGVsaXN0LWZvcmVhY2gtcG9seWZpbGxcclxuICovXHJcbmZ1bmN0aW9uIG5vZGVMaXN0Rm9yRWFjaChub2RlcywgY2FsbGJhY2spIHtcclxuICAgIGlmICh3aW5kb3cuTm9kZUxpc3QucHJvdG90eXBlLmZvckVhY2gpIHtcclxuICAgICAgICByZXR1cm4gbm9kZXMuZm9yRWFjaChjYWxsYmFjaylcclxuICAgIH1cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjYWxsYmFjay5jYWxsKHdpbmRvdywgbm9kZXNbaV0sIGksIG5vZGVzKVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQge1xyXG4gICAgbm9kZUxpc3RGb3JFYWNoXHJcbn0iXX0=\n","import * as CookieFunctions from './cookie-functions.js';\n/*todo: we don't meed a pollyfill for bind, as long as we server up the non js version of the site for ie8 (https://caniuse.com/?search=bind) */\n/*import 'govuk-frontend/govuk/vendor/polyfills/Function/prototype/bind'*/\n/*todo: i think we're ok for this too (see above about ie8), but we _might_ need it for >8 ie (use? https://www.npmjs.com/package/events-polyfill)*/\n/*import 'govuk-frontend/govuk/vendor/polyfills/Event'*/\nimport { nodeListForEach } from './helpers.js';\nimport { sendPageViewEvent, sendFilterPageCustomEvent, sendAnalyticsCustomEvent, updateAnalyticsStorageConsent } from './analytics.js';\nconst cookieBannerAcceptSelector = '.js-cookie-banner-accept';\nconst cookieBannerRejectSelector = '.js-cookie-banner-reject';\nconst cookieBannerHideButtonSelector = '.js-cookie-banner-hide';\nconst cookieMessageSelector = '.js-cookie-banner-message';\nconst cookieConfirmationAcceptSelector = '.js-cookie-banner-confirmation-accept';\nconst cookieConfirmationRejectSelector = '.js-cookie-banner-confirmation-reject';\nexport default function CookieBanner($module) {\n    this.$module = $module;\n}\nCookieBanner.prototype.init = function () {\n    this.$cookieBanner = this.$module;\n    this.$acceptButton = this.$module.querySelector(cookieBannerAcceptSelector);\n    this.$rejectButton = this.$module.querySelector(cookieBannerRejectSelector);\n    this.$cookieMessage = this.$module.querySelector(cookieMessageSelector);\n    this.$cookieConfirmationAccept = this.$module.querySelector(cookieConfirmationAcceptSelector);\n    this.$cookieConfirmationReject = this.$module.querySelector(cookieConfirmationRejectSelector);\n    this.$cookieBannerHideButtons = this.$module.querySelectorAll(cookieBannerHideButtonSelector);\n    // Exit if no cookie banner module\n    // or if we're on the cookies page to avoid circular journeys\n    if (!this.$cookieBanner || this.onCookiesPage()) {\n        return;\n    }\n    // Show the cookie banner to users who have not consented or have an\n    // outdated consent cookie\n    var currentConsentCookie = CookieFunctions.getConsentCookie();\n    if (!currentConsentCookie || !CookieFunctions.isValidConsentCookie(currentConsentCookie)) {\n        // If the consent cookie version is not valid, we need to remove any cookies which have been\n        // set previously\n        CookieFunctions.resetCookies();\n        this.$cookieBanner.removeAttribute('hidden');\n    }\n    this.$acceptButton.addEventListener('click', this.acceptCookies.bind(this));\n    this.$rejectButton.addEventListener('click', this.rejectCookies.bind(this));\n    nodeListForEach(this.$cookieBannerHideButtons, function ($cookieBannerHideButton) {\n        $cookieBannerHideButton.addEventListener('click', this.hideBanner.bind(this));\n    }.bind(this));\n};\nCookieBanner.prototype.hideBanner = function () {\n    this.$cookieBanner.setAttribute('hidden', true);\n};\nCookieBanner.prototype.acceptCookies = function () {\n    // Do actual cookie consent bit\n    //todo: need to remove initAnalytics from setConsentCookie\n    CookieFunctions.setConsentCookie({ analytics: true });\n    updateAnalyticsStorageConsent(true);\n    sendAnalyticsCustomEvent(true, 'banner');\n    sendPageViewEvent();\n    sendFilterPageCustomEvent();\n    // Hide banner and show confirmation message\n    this.$cookieMessage.setAttribute('hidden', true);\n    this.revealConfirmationMessage(this.$cookieConfirmationAccept);\n};\nCookieBanner.prototype.rejectCookies = function () {\n    // Do actual cookie consent bit\n    //CookieFunctions.setConsentCookie({ analytics: true });\n    CookieFunctions.setConsentCookie({ analytics: false });\n    //todo: delay?\n    updateAnalyticsStorageConsent(true);\n    sendAnalyticsCustomEvent(false, 'banner');\n    updateAnalyticsStorageConsent(false);\n    //disableAnalytics();\n    // Hide banner and show confirmation message\n    this.$cookieMessage.setAttribute('hidden', true);\n    this.revealConfirmationMessage(this.$cookieConfirmationReject);\n};\nCookieBanner.prototype.revealConfirmationMessage = function (confirmationMessage) {\n    confirmationMessage.removeAttribute('hidden');\n    // Set tabindex to -1 to make the confirmation banner focusable with JavaScript\n    if (!confirmationMessage.getAttribute('tabindex')) {\n        confirmationMessage.setAttribute('tabindex', '-1');\n        confirmationMessage.addEventListener('blur', function () {\n            confirmationMessage.removeAttribute('tabindex');\n        });\n    }\n    confirmationMessage.focus();\n};\nCookieBanner.prototype.onCookiesPage = function () {\n    return window.location.pathname === '/cookies/';\n};\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvY29va2llLWJhbm5lci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEtBQUssZUFBZSxNQUFNLHVCQUF1QixDQUFBO0FBQ3hELGdKQUFnSjtBQUNoSiwwRUFBMEU7QUFDMUUsb0pBQW9KO0FBQ3BKLHdEQUF3RDtBQUN4RCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sY0FBYyxDQUFBO0FBQzlDLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSx5QkFBeUIsRUFBRSx3QkFBd0IsRUFBb0IsNkJBQTZCLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUd6SixNQUFNLDBCQUEwQixHQUFHLDBCQUEwQixDQUFBO0FBQzdELE1BQU0sMEJBQTBCLEdBQUcsMEJBQTBCLENBQUE7QUFDN0QsTUFBTSw4QkFBOEIsR0FBRyx3QkFBd0IsQ0FBQTtBQUMvRCxNQUFNLHFCQUFxQixHQUFHLDJCQUEyQixDQUFBO0FBQ3pELE1BQU0sZ0NBQWdDLEdBQUcsdUNBQXVDLENBQUE7QUFDaEYsTUFBTSxnQ0FBZ0MsR0FBRyx1Q0FBdUMsQ0FBQTtBQUVoRixNQUFNLENBQUMsT0FBTyxVQUFVLFlBQVksQ0FBQyxPQUFvQjtJQUNyRCxJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztBQUMzQixDQUFDO0FBRUQsWUFBWSxDQUFDLFNBQVMsQ0FBQyxJQUFJLEdBQUc7SUFDMUIsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFBO0lBQ2pDLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsMEJBQTBCLENBQUMsQ0FBQTtJQUMzRSxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLDBCQUEwQixDQUFDLENBQUE7SUFDM0UsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFBO0lBQ3ZFLElBQUks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Q0FBQyxDQUFBO0lBQ2hELElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxJQUFJLENBQUMseUJBQXlCLENBQUMsQ0FBQTtBQUNsRSxDQUFDLENBQUE7QUFFRCxZQUFZLENBQUMsU0FBUyxDQUFDLHlCQUF5QixHQUFHLFVBQVUsbUJBQW1CO0lBQzVFLG1CQUFtQixDQUFDLGVBQWUsQ0FBQyxRQUFRLENBQUMsQ0FBQTtJQUU3QywrRUFBK0U7SUFDL0UsSUFBSSxDQUFDLG1CQUFtQixDQUFDLFlBQVksQ0FBQyxVQUFVLENBQUMsRUFBRTtRQUMvQyxtQkFBbUIsQ0FBQyxZQUFZLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxDQUFBO1FBRWxELG1CQUFtQixDQUFDLGdCQUFnQixDQUFDLE1BQU0sRUFBRTtZQUN6QyxtQkFBbUIsQ0FBQyxlQUFlLENBQUMsVUFBVSxDQUFDLENBQUE7UUFDbkQsQ0FBQyxDQUFDLENBQUE7S0FDTDtJQUVELG1CQUFtQixDQUFDLEtBQUssRUFBRSxDQUFBO0FBQy9CLENBQUMsQ0FBQTtBQUVELFlBQVksQ0FBQyxTQUFTLENBQUMsYUFBYSxHQUFHO0lBQ25DLE9BQU8sTUFBTSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEtBQUssV0FBVyxDQUFBO0FBQ25ELENBQUMsQ0FBQSIsImZpbGUiOiJjb21wb25lbnRzL2Nvb2tpZS1iYW5uZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBDb29raWVGdW5jdGlvbnMgZnJvbSAnLi9jb29raWUtZnVuY3Rpb25zLmpzJ1xyXG4vKnRvZG86IHdlIGRvbid0IG1lZWQgYSBwb2xseWZpbGwgZm9yIGJpbmQsIGFzIGxvbmcgYXMgd2Ugc2VydmVyIHVwIHRoZSBub24ganMgdmVyc2lvbiBvZiB0aGUgc2l0ZSBmb3IgaWU4IChodHRwczovL2Nhbml1c2UuY29tLz9zZWFyY2g9YmluZCkgKi9cclxuLyppbXBvcnQgJ2dvdnVrLWZyb250ZW5kL2dvdnVrL3ZlbmRvci9wb2x5ZmlsbHMvRnVuY3Rpb24vcHJvdG90eXBlL2JpbmQnKi9cclxuLyp0b2RvOiBpIHRoaW5rIHdlJ3JlIG9rIGZvciB0aGlzIHRvbyAoc2VlIGFib3ZlIGFib3V0IGllOCksIGJ1dCB3ZSBfbWlnaHRfIG5lZWQgaXQgZm9yID44IGllICh1c2U/IGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL2V2ZW50cy1wb2x5ZmlsbCkqL1xyXG4vKmltcG9ydCAnZ292dWstZnJvbnRlbmQvZ292dWsvdmVuZG9yL3BvbHlmaWxscy9FdmVudCcqL1xyXG5pbXBvcnQgeyBub2RlTGlzdEZvckVhY2ggfSBmcm9tICcuL2hlbHBlcnMuanMnXHJcbmltcG9ydCB7IHNlbmRQYWdlVmlld0V2ZW50LCBzZW5kRmlsdGVyUGFnZUN1c3RvbUV2ZW50LCBzZW5kQW5hbHl0aWNzQ3VzdG9tRXZlbnQsIGRpc2FibGVBbmFseXRpY3MsIHVwZGF0ZUFuYWx5dGljc1N0b3JhZ2VDb25zZW50IH0gZnJvbSAnLi9hbmFseXRpY3MuanMnO1xyXG5cclxuXHJcbmNvbnN0IGNvb2tpZUJhbm5lckFjY2VwdFNlbGVjdG9yID0gJy5qcy1jb29raWUtYmFubmVyLWFjY2VwdCdcclxuY29uc3QgY29va2llQmFubmVyUmVqZWN0U2VsZWN0b3IgPSAnLmpzLWNvb2tpZS1iYW5uZXItcmVqZWN0J1xyXG5jb25zdCBjb29raWVCYW5uZXJIaWRlQnV0dG9uU2VsZWN0b3IgPSAnLmpzLWNvb2tpZS1iYW5uZXItaGlkZSdcclxuY29uc3QgY29va2llTWVzc2FnZVNlbGVjdG9yID0gJy5qcy1jb29raWUtYmFubmVyLW1lc3NhZ2UnXHJcbmNvbnN0IGNvb2tpZUNvbmZpcm1hdGlvbkFjY2VwdFNlbGVjdG9yID0gJy5qcy1jb29raWUtYmFubmVyLWNvbmZpcm1hdGlvbi1hY2NlcHQnXHJcbmNvbnN0IGNvb2tpZUNvbmZpcm1hdGlvblJlamVjdFNlbGVjdG9yID0gJy5qcy1jb29raWUtYmFubmVyLWNvbmZpcm1hdGlvbi1yZWplY3QnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDb29raWVCYW5uZXIoJG1vZHVsZTogSFRNTEVsZW1lbnQpIHtcclxuICAgIHRoaXMuJG1vZHVsZSA9ICRtb2R1bGU7XHJcbn1cclxuXHJcbkNvb2tpZUJhbm5lci5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuJGNvb2tpZUJhbm5lciA9IHRoaXMuJG1vZHVsZVxyXG4gICAgdGhpcy4kYWNjZXB0QnV0dG9uID0gdGhpcy4kbW9kdWxlLnF1ZXJ5U2VsZWN0b3IoY29va2llQmFubmVyQWNjZXB0U2VsZWN0b3IpXHJcbiAgICB0aGlzLiRyZWplY3RCdXR0b24gPSB0aGlzLiRtb2R1bGUucXVlcnlTZWxlY3Rvcihjb29raWVCYW5uZXJSZWplY3RTZWxlY3RvcilcclxuICAgIHRoaXMuJGNvb2tpZU1lc3NhZ2UgPSB0aGlzLiRtb2R1bGUucXVlcnlTZWxlY3Rvcihjb29raWVNZXNzYWdlU2VsZWN0b3IpXHJcbiAgICB0aGlzLiRjb29raWVDb25maXJtYXRpb25BY2NlcHQgPSB0aGlzLiRtb2R1bGUucXVlcnlTZWxlY3Rvcihjb29raWVDb25maXJtYXRpb25BY2NlcHRTZWxlY3RvcilcclxuICAgIHRoaXMuJGNvb2tpZUNvbmZpcm1hdGlvblJlamVjdCA9IHRoaXMuJG1vZHVsZS5xdWVyeVNlbGVjdG9yKGNvb2tpZUNvbmZpcm1hdGlvblJlamVjdFNlbGVjdG9yKVxyXG4gICAgdGhpcy4kY29va2llQmFubmVySGlkZUJ1dHRvbnMgPSB0aGlzLiRtb2R1bGUucXVlcnlTZWxlY3RvckFsbChjb29raWVCYW5uZXJIaWRlQnV0dG9uU2VsZWN0b3IpXHJcblxyXG4gICAgLy8gRXhpdCBpZiBubyBjb29raWUgYmFubmVyIG1vZHVsZVxyXG4gICAgLy8gb3IgaWYgd2UncmUgb24gdGhlIGNvb2tpZXMgcGFnZSB0byBhdm9pZCBjaXJjdWxhciBqb3VybmV5c1xyXG4gICAgaWYgKCF0aGlzLiRjb29raWVCYW5uZXIgfHwgdGhpcy5vbkNvb2tpZXNQYWdlKCkpIHtcclxuICAgICAgICByZXR1cm5cclxuICAgIH1cclxuXHJcbiAgICAvLyBTaG93IHRoZSBjb29raWUgYmFubmVyIHRvIHVzZXJzIHdobyBoYXZlIG5vdCBjb25zZW50ZWQgb3IgaGF2ZSBhblxyXG4gICAgLy8gb3V0ZGF0ZWQgY29uc2VudCBjb29raWVcclxuICAgIHZhciBjdXJyZW50Q29uc2VudENvb2tpZSA9IENvb2tpZUZ1bmN0aW9ucy5nZXRDb25zZW50Q29va2llKClcclxuXHJcbiAgICBpZiAoIWN1cnJlbnRDb25zZW50Q29va2llIHx8ICFDb29raWVGdW5jdGlvbnMuaXNWYWxpZENvbnNlbnRDb29raWUoY3VycmVudENvbnNlbnRDb29raWUpKSB7XHJcbiAgICAgICAgLy8gSWYgdGhlIGNvbnNlbnQgY29va2llIHZlcnNpb24gaXMgbm90IHZhbGlkLCB3ZSBuZWVkIHRvIHJlbW92ZSBhbnkgY29va2llcyB3aGljaCBoYXZlIGJlZW5cclxuICAgICAgICAvLyBzZXQgcHJldmlvdXNseVxyXG4gICAgICAgIENvb2tpZUZ1bmN0aW9ucy5yZXNldENvb2tpZXMoKVxyXG5cclxuICAgICAgICB0aGlzLiRjb29raWVCYW5uZXIucmVtb3ZlQXR0cmlidXRlKCdoaWRkZW4nKVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuJGFjY2VwdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuYWNjZXB0Q29va2llcy5iaW5kKHRoaXMpKVxyXG4gICAgdGhpcy4kcmVqZWN0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5yZWplY3RDb29raWVzLmJpbmQodGhpcykpXHJcblxyXG4gICAgbm9kZUxpc3RGb3JFYWNoKHRoaXMuJGNvb2tpZUJhbm5lckhpZGVCdXR0b25zLCBmdW5jdGlvbiAoJGNvb2tpZUJhbm5lckhpZGVCdXR0b24pIHtcclxuICAgICAgICAkY29va2llQmFubmVySGlkZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGlkZUJhbm5lci5iaW5kKHRoaXMpKVxyXG4gICAgfS5iaW5kKHRoaXMpKVxyXG59XHJcblxyXG5Db29raWVCYW5uZXIucHJvdG90eXBlLmhpZGVCYW5uZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLiRjb29raWVCYW5uZXIuc2V0QXR0cmlidXRlKCdoaWRkZW4nLCB0cnVlKVxyXG59XHJcblxyXG5Db29raWVCYW5uZXIucHJvdG90eXBlLmFjY2VwdENvb2tpZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyBEbyBhY3R1YWwgY29va2llIGNvbnNlbnQgYml0XHJcbiAgICAvL3RvZG86IG5lZWQgdG8gcmVtb3ZlIGluaXRBbmFseXRpY3MgZnJvbSBzZXRDb25zZW50Q29va2llXHJcbiAgICBDb29raWVGdW5jdGlvbnMuc2V0Q29uc2VudENvb2tpZSh7IGFuYWx5dGljczogdHJ1ZSB9KTtcclxuXHJcbiAgICB1cGRhdGVBbmFseXRpY3NTdG9yYWdlQ29uc2VudCh0cnVlKTtcclxuXHJcbiAgICBzZW5kQW5hbHl0aWNzQ3VzdG9tRXZlbnQodHJ1ZSwgJ2Jhbm5lcicpO1xyXG4gICAgc2VuZFBhZ2VWaWV3RXZlbnQoKTtcclxuICAgIHNlbmRGaWx0ZXJQYWdlQ3VzdG9tRXZlbnQoKTtcclxuXHJcbiAgICAvLyBIaWRlIGJhbm5lciBhbmQgc2hvdyBjb25maXJtYXRpb24gbWVzc2FnZVxyXG4gICAgdGhpcy4kY29va2llTWVzc2FnZS5zZXRBdHRyaWJ1dGUoJ2hpZGRlbicsIHRydWUpXHJcbiAgICB0aGlzLnJldmVhbENvbmZpcm1hdGlvbk1lc3NhZ2UodGhpcy4kY29va2llQ29uZmlybWF0aW9uQWNjZXB0KVxyXG59XHJcblxyXG5Db29raWVCYW5uZXIucHJvdG90eXBlLnJlamVjdENvb2tpZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyBEbyBhY3R1YWwgY29va2llIGNvbnNlbnQgYml0XHJcbiAgICAvL0Nvb2tpZUZ1bmN0aW9ucy5zZXRDb25zZW50Q29va2llKHsgYW5hbHl0aWNzOiB0cnVlIH0pO1xyXG5cclxuICAgIENvb2tpZUZ1bmN0aW9ucy5zZXRDb25zZW50Q29va2llKHsgYW5hbHl0aWNzOiBmYWxzZSB9KTtcclxuXHJcbiAgICAvL3RvZG86IGRlbGF5P1xyXG4gICAgdXBkYXRlQW5hbHl0aWNzU3RvcmFnZUNvbnNlbnQodHJ1ZSk7XHJcblxyXG4gICAgc2VuZEFuYWx5dGljc0N1c3RvbUV2ZW50KGZhbHNlLCAnYmFubmVyJyk7XHJcblxyXG4gICAgdXBkYXRlQW5hbHl0aWNzU3RvcmFnZUNvbnNlbnQoZmFsc2UpO1xyXG5cclxuICAgIC8vZGlzYWJsZUFuYWx5dGljcygpO1xyXG5cclxuICAgIC8vIEhpZGUgYmFubmVyIGFuZCBzaG93IGNvbmZpcm1hdGlvbiBtZXNzYWdlXHJcbiAgICB0aGlzLiRjb29raWVNZXNzYWdlLnNldEF0dHJpYnV0ZSgnaGlkZGVuJywgdHJ1ZSlcclxuICAgIHRoaXMucmV2ZWFsQ29uZmlybWF0aW9uTWVzc2FnZSh0aGlzLiRjb29raWVDb25maXJtYXRpb25SZWplY3QpXHJcbn1cclxuXHJcbkNvb2tpZUJhbm5lci5wcm90b3R5cGUucmV2ZWFsQ29uZmlybWF0aW9uTWVzc2FnZSA9IGZ1bmN0aW9uIChjb25maXJtYXRpb25NZXNzYWdlKSB7XHJcbiAgICBjb25maXJtYXRpb25NZXNzYWdlLnJlbW92ZUF0dHJpYnV0ZSgnaGlkZGVuJylcclxuXHJcbiAgICAvLyBTZXQgdGFiaW5kZXggdG8gLTEgdG8gbWFrZSB0aGUgY29uZmlybWF0aW9uIGJhbm5lciBmb2N1c2FibGUgd2l0aCBKYXZhU2NyaXB0XHJcbiAgICBpZiAoIWNvbmZpcm1hdGlvbk1lc3NhZ2UuZ2V0QXR0cmlidXRlKCd0YWJpbmRleCcpKSB7XHJcbiAgICAgICAgY29uZmlybWF0aW9uTWVzc2FnZS5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJy0xJylcclxuXHJcbiAgICAgICAgY29uZmlybWF0aW9uTWVzc2FnZS5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb25maXJtYXRpb25NZXNzYWdlLnJlbW92ZUF0dHJpYnV0ZSgndGFiaW5kZXgnKVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgY29uZmlybWF0aW9uTWVzc2FnZS5mb2N1cygpXHJcbn1cclxuXHJcbkNvb2tpZUJhbm5lci5wcm90b3R5cGUub25Db29raWVzUGFnZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgPT09ICcvY29va2llcy8nXHJcbn1cclxuIl19\n","import { getConsentCookie, setConsentCookie } from './cookie-functions.js';\nimport { nodeListForEach } from './helpers.js';\nimport { sendPageViewEvent, sendAnalyticsCustomEvent } from './analytics.js';\nfunction CookiesPage($module) {\n    this.$module = $module;\n}\nCookiesPage.prototype.init = function () {\n    this.$cookiePage = this.$module;\n    if (!this.$cookiePage) {\n        return;\n    }\n    this.$cookieForm = this.$cookiePage.querySelector('.js-cookies-page-form');\n    this.$cookieFormFieldsets = this.$cookieForm.querySelectorAll('.js-cookies-page-form-fieldset');\n    this.$successNotification = this.$cookiePage.querySelector('.js-cookies-page-success');\n    this.$successLink = this.$cookiePage.querySelector('.js-cookies-page-success-link');\n    nodeListForEach(this.$cookieFormFieldsets, function ($cookieFormFieldset) {\n        this.showUserPreference($cookieFormFieldset, getConsentCookie());\n        /*        $cookieFormFieldset.removeAttribute('hidden')*/\n    }.bind(this));\n    // Show submit button\n    //this.$cookieForm.querySelector('.js-cookies-form-button').removeAttribute('hidden')\n    this.$cookieForm.addEventListener('submit', this.savePreferences.bind(this));\n};\nCookiesPage.prototype.savePreferences = function (event) {\n    // Stop default form submission behaviour\n    event.preventDefault();\n    var preferences = {};\n    nodeListForEach(this.$cookieFormFieldsets, function ($cookieFormFieldset) {\n        var cookieType = this.getCookieType($cookieFormFieldset);\n        var selectedItem = $cookieFormFieldset.querySelector('input[name=' + cookieType + ']:checked').value;\n        preferences[cookieType] = selectedItem === 'true';\n    }.bind(this));\n    // Save preferences to cookie and show success notification\n    setConsentCookie(preferences);\n    sendPageViewEvent();\n    sendAnalyticsCustomEvent(preferences['analytics'], 'cookies');\n    // handle the corner case, where the user has selected their preference on the cookie page, whilst the banner is still open as they haven't previously selected their preference\n    //todo: call hideBanner\n    var banner = document.querySelector('[data-module=\"govuk-cookie-banner\"]');\n    banner.setAttribute('hidden', 'true');\n    this.showSuccessNotification();\n};\nCookiesPage.prototype.showUserPreference = function ($cookieFormFieldset, preferences) {\n    var cookieType = this.getCookieType($cookieFormFieldset);\n    var preference = false;\n    if (cookieType && preferences && preferences[cookieType] !== undefined) {\n        preference = preferences[cookieType];\n    }\n    var radioValue = preference ? 'true' : 'false';\n    var radio = $cookieFormFieldset.querySelector('input[name=' + cookieType + '][value=' + radioValue + ']');\n    radio.checked = true;\n};\nCookiesPage.prototype.showSuccessNotification = function () {\n    this.$successNotification.removeAttribute('hidden');\n    // if the user's come to the cookies page through the link in the cookie banner, show a link to take them back to the page they came from\n    var referrer = document.referrer ? new URL(document.referrer).pathname : false;\n    if (referrer && referrer !== document.location.pathname) {\n        this.$successLink.href = referrer;\n        this.$successLink.removeAttribute('hidden');\n    }\n    else {\n        this.$successLink.setAttribute('hidden', 'true');\n    }\n    // Set tabindex to -1 to make the element focusable with JavaScript.\n    // GOV.UK Frontend will remove the tabindex on blur as the component doesn't\n    // need to be focusable after the user has read the text.\n    if (!this.$successNotification.getAttribute('tabindex')) {\n        this.$successNotification.setAttribute('tabindex', '-1');\n    }\n    this.$successNotification.focus();\n    // scroll to the top of the page\n    window.scrollTo(0, 0);\n};\nCookiesPage.prototype.getCookieType = function ($cookieFormFieldset) {\n    return $cookieFormFieldset.id;\n};\nexport default CookiesPage;\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvY29va2llcy1wYWdlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLHVCQUF1QixDQUFBO0FBQzFFLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxjQUFjLENBQUE7QUFDOUMsT0FBTyxFQUFFLGlCQUFpQixFQUFFLHdCQUF3QixFQUFFLE1BQU0sZ0JBQWdCLENBQUE7QUFFNUUsU0FBUyxXQUFXLENBQUMsT0FBTztJQUN4QixJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQTtBQUMxQixDQUFDO0FBRUQsV0FBVyxDQUFDLFNBQVMsQ0FBQyxJQUFJLEdBQUc7SUFDekIsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFBO0lBRS9CLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFO1FBQ25CLE9BQU07S0FDVDtJQUVELElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxhQUFhLENBQUMsdUJBQXVCLENBQUMsQ0FBQTtJQUMxRSxJQUFJLENBQUMsb0JBQW9CLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxnQkFBZ0IsQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFBO0lBQy9GLElBQUksQ0FBQyxvQkFBb0IsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLGFBQWEsQ0FBQywwQkFBMEIsQ0FBQyxDQUFBO0lBQ3RGLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxhQUFhLENBQUMsK0JBQStCLENBQUMsQ0FBQTtJQUVuRixlQUFlLENBQUMsSUFBSSxDQUFDLG9CQUFvQixFQUFFLFVBQVUsbUJBQW1CO1FBQ3BFLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxtQkFBbUIsRUFBRSxnQkFBZ0IsRUFBRSxDQUFDLENBQUE7UUFDeEUseURBQXlEO0lBQ3JELENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMs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O0tBQ3BEO0lBRUQsb0VBQW9FO0lBQ3BFLDRFQUE0RTtJQUM1RSx5REFBeUQ7SUFDekQsSUFBSSxDQUFDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxZQUFZLENBQUMsVUFBVSxDQUFDLEVBQUU7UUFDckQsSUFBSSxDQUFDLG9CQUFvQixDQUFDLFlBQVksQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLENBQUE7S0FDM0Q7SUFFRCxJQUFJLENBQUMsb0JBQW9CLENBQUMsS0FBSyxFQUFFLENBQUE7SUFFakMsZ0NBQWdDO0lBQ2hDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFBO0FBQ3pCLENBQUMsQ0FBQTtBQUVELFdBQVcsQ0FBQyxTQUFTLENBQUMsYUFBYSxHQUFHLFVBQVUsbUJBQW1CO0lBQy9ELE9BQU8sbUJBQW1CLENBQUMsRUFBRSxDQUFBO0FBQ2pDLENBQUMsQ0FBQTtBQUVELGVBQWUsV0FBVyxDQUFBIiwiZmlsZSI6ImNvbXBvbmVudHMvY29va2llcy1wYWdlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0Q29uc2VudENvb2tpZSwgc2V0Q29uc2VudENvb2tpZSB9IGZyb20gJy4vY29va2llLWZ1bmN0aW9ucy5qcydcclxuaW1wb3J0IHsgbm9kZUxpc3RGb3JFYWNoIH0gZnJvbSAnLi9oZWxwZXJzLmpzJ1xyXG5pbXBvcnQgeyBzZW5kUGFnZVZpZXdFdmVudCwgc2VuZEFuYWx5dGljc0N1c3RvbUV2ZW50IH0gZnJvbSAnLi9hbmFseXRpY3MuanMnXHJcblxyXG5mdW5jdGlvbiBDb29raWVzUGFnZSgkbW9kdWxlKSB7XHJcbiAgICB0aGlzLiRtb2R1bGUgPSAkbW9kdWxlXHJcbn1cclxuXHJcbkNvb2tpZXNQYWdlLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy4kY29va2llUGFnZSA9IHRoaXMuJG1vZHVsZVxyXG5cclxuICAgIGlmICghdGhpcy4kY29va2llUGFnZSkge1xyXG4gICAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuJGNvb2tpZUZvcm0gPSB0aGlzLiRjb29raWVQYWdlLnF1ZXJ5U2VsZWN0b3IoJy5qcy1jb29raWVzLXBhZ2UtZm9ybScpXHJcbiAgICB0aGlzLiRjb29raWVGb3JtRmllbGRzZXRzID0gdGhpcy4kY29va2llRm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcuanMtY29va2llcy1wYWdlLWZvcm0tZmllbGRzZXQnKVxyXG4gICAgdGhpcy4kc3VjY2Vzc05vdGlmaWNhdGlvbiA9IHRoaXMuJGNvb2tpZVBhZ2UucXVlcnlTZWxlY3RvcignLmpzLWNvb2tpZXMtcGFnZS1zdWNjZXNzJylcclxuICAgIHRoaXMuJHN1Y2Nlc3NMaW5rID0gdGhpcy4kY29va2llUGFnZS5xdWVyeVNlbGVjdG9yKCcuanMtY29va2llcy1wYWdlLXN1Y2Nlc3MtbGluaycpXHJcblxyXG4gICAgbm9kZUxpc3RGb3JFYWNoKHRoaXMuJGNvb2tpZUZvcm1GaWVsZHNldHMsIGZ1bmN0aW9uICgkY29va2llRm9ybUZpZWxkc2V0KSB7XHJcbiAgICAgICAgdGhpcy5zaG93VXNlclByZWZlcmVuY2UoJGNvb2tpZUZvcm1GaWVsZHNldCwgZ2V0Q29uc2VudENvb2tpZSgpKVxyXG4vKiAgICAgICAgJGNvb2tpZUZvcm1GaWVsZHNldC5yZW1vdmVBdHRyaWJ1dGUoJ2hpZGRlbicpKi9cclxuICAgIH0uYmluZCh0aGlzKSlcclxuXHJcbiAgICAvLyBTaG93IHN1Ym1pdCBidXR0b25cclxuICAgIC8vdGhpcy4kY29va2llRm9ybS5xdWVyeVNlbGVjdG9yKCcuanMtY29va2llcy1mb3JtLWJ1dHRvbicpLnJlbW92ZUF0dHJpYnV0ZSgnaGlkZGVuJylcclxuXHJcbiAgICB0aGlzLiRjb29raWVGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMuc2F2ZVByZWZlcmVuY2VzLmJpbmQodGhpcykpXHJcbn1cclxuXHJcbkNvb2tpZXNQYWdlLnByb3RvdHlwZS5zYXZlUHJlZmVyZW5jZXMgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgIC8vIFN0b3AgZGVmYXVsdCBmb3JtIHN1Ym1pc3Npb24gYmVoYXZpb3VyXHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcblxyXG4gICAgdmFyIHByZWZlcmVuY2VzID0ge31cclxuXHJcbiAgICBub2RlTGlzdEZvckVhY2godGhpcy4kY29va2llRm9ybUZpZWxkc2V0cywgZnVuY3Rpb24gKCRjb29raWVGb3JtRmllbGRzZXQpIHtcclxuICAgICAgICB2YXIgY29va2llVHlwZSA9IHRoaXMuZ2V0Q29va2llVHlwZSgkY29va2llRm9ybUZpZWxkc2V0KVxyXG4gICAgICAgIHZhciBzZWxlY3RlZEl0ZW0gPSAkY29va2llRm9ybUZpZWxkc2V0LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9JyArIGNvb2tpZVR5cGUgKyAnXTpjaGVja2VkJykudmFsdWVcclxuXHJcbiAgICAgICAgcHJlZmVyZW5jZXNbY29va2llVHlwZV0gPSBzZWxlY3RlZEl0ZW0gPT09ICd0cnVlJ1xyXG4gICAgfS5iaW5kKHRoaXMpKVxyXG5cclxuICAgIC8vIFNhdmUgcHJlZmVyZW5jZXMgdG8gY29va2llIGFuZCBzaG93IHN1Y2Nlc3Mgbm90aWZpY2F0aW9uXHJcbiAgICBzZXRDb25zZW50Q29va2llKHByZWZlcmVuY2VzKTtcclxuICAgIHNlbmRQYWdlVmlld0V2ZW50KCk7XHJcblxyXG4gICAgc2VuZEFuYWx5dGljc0N1c3RvbUV2ZW50KHByZWZlcmVuY2VzWydhbmFseXRpY3MnXSwgJ2Nvb2tpZXMnKTtcclxuXHJcbiAgICAvLyBoYW5kbGUgdGhlIGNvcm5lciBjYXNlLCB3aGVyZSB0aGUgdXNlciBoYXMgc2VsZWN0ZWQgdGhlaXIgcHJlZmVyZW5jZSBvbiB0aGUgY29va2llIHBhZ2UsIHdoaWxzdCB0aGUgYmFubmVyIGlzIHN0aWxsIG9wZW4gYXMgdGhleSBoYXZlbid0IHByZXZpb3VzbHkgc2VsZWN0ZWQgdGhlaXIgcHJlZmVyZW5jZVxyXG4gICAgLy90b2RvOiBjYWxsIGhpZGVCYW5uZXJcclxuICAgIHZhciBiYW5uZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1tb2R1bGU9XCJnb3Z1ay1jb29raWUtYmFubmVyXCJdJyk7XHJcbiAgICBiYW5uZXIuc2V0QXR0cmlidXRlKCdoaWRkZW4nLCAndHJ1ZScpO1xyXG4gICAgXHJcbiAgICB0aGlzLnNob3dTdWNjZXNzTm90aWZpY2F0aW9uKClcclxufVxyXG5cclxuQ29va2llc1BhZ2UucHJvdG90eXBlLnNob3dVc2VyUHJlZmVyZW5jZSA9IGZ1bmN0aW9uICgkY29va2llRm9ybUZpZWxkc2V0LCBwcmVmZXJlbmNlcykge1xyXG4gICAgdmFyIGNvb2tpZVR5cGUgPSB0aGlzLmdldENvb2tpZVR5cGUoJGNvb2tpZUZvcm1GaWVsZHNldClcclxuICAgIHZhciBwcmVmZXJlbmNlID0gZmFsc2VcclxuXHJcbiAgICBpZiAoY29va2llVHlwZSAmJiBwcmVmZXJlbmNlcyAmJiBwcmVmZXJlbmNlc1tjb29raWVUeXBlXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgcHJlZmVyZW5jZSA9IHByZWZlcmVuY2VzW2Nvb2tpZVR5cGVdXHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHJhZGlvVmFsdWUgPSBwcmVmZXJlbmNlID8gJ3RydWUnIDogJ2ZhbHNlJ1xyXG4gICAgdmFyIHJhZGlvID0gJGNvb2tpZUZvcm1GaWVsZHNldC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPScgKyBjb29raWVUeXBlICsgJ11bdmFsdWU9JyArIHJhZGlvVmFsdWUgKyAnXScpXHJcbiAgICByYWRpby5jaGVja2VkID0gdHJ1ZVxyXG59XHJcblxyXG5Db29raWVzUGFnZS5wcm90b3R5cGUuc2hvd1N1Y2Nlc3NOb3RpZmljYXRpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLiRzdWNjZXNzTm90aWZpY2F0aW9uLnJlbW92ZUF0dHJpYnV0ZSgnaGlkZGVuJylcclxuXHJcbiAgICAvLyBpZiB0aGUgdXNlcidzIGNvbWUgdG8gdGhlIGNvb2tpZXMgcGFnZSB0aHJvdWdoIHRoZSBsaW5rIGluIHRoZSBjb29raWUgYmFubmVyLCBzaG93IGEgbGluayB0byB0YWtlIHRoZW0gYmFjayB0byB0aGUgcGFnZSB0aGV5IGNhbWUgZnJvbVxyXG4gICAgdmFyIHJlZmVycmVyID0gZG9jdW1lbnQucmVmZXJyZXIgPyBuZXcgVVJMKGRvY3VtZW50LnJlZmVycmVyKS5wYXRobmFtZSA6IGZhbHNlO1xyXG4gICAgaWYgKHJlZmVycmVyICYmIHJlZmVycmVyICE9PSBkb2N1bWVudC5sb2NhdGlvbi5wYXRobmFtZSkge1xyXG4gICAgICAgIHRoaXMuJHN1Y2Nlc3NMaW5rLmhyZWYgPSByZWZlcnJlcjtcclxuICAgICAgICB0aGlzLiRzdWNjZXNzTGluay5yZW1vdmVBdHRyaWJ1dGUoJ2hpZGRlbicpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuJHN1Y2Nlc3NMaW5rLnNldEF0dHJpYnV0ZSgnaGlkZGVuJywgJ3RydWUnKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTZXQgdGFiaW5kZXggdG8gLTEgdG8gbWFrZSB0aGUgZWxlbWVudCBmb2N1c2FibGUgd2l0aCBKYXZhU2NyaXB0LlxyXG4gICAgLy8gR09WLlVLIEZyb250ZW5kIHdpbGwgcmVtb3ZlIHRoZSB0YWJpbmRleCBvbiBibHVyIGFzIHRoZSBjb21wb25lbnQgZG9lc24ndFxyXG4gICAgLy8gbmVlZCB0byBiZSBmb2N1c2FibGUgYWZ0ZXIgdGhlIHVzZXIgaGFzIHJlYWQgdGhlIHRleHQuXHJcbiAgICBpZiAoIXRoaXMuJHN1Y2Nlc3NOb3RpZmljYXRpb24uZ2V0QXR0cmlidXRlKCd0YWJpbmRleCcpKSB7XHJcbiAgICAgICAgdGhpcy4kc3VjY2Vzc05vdGlmaWNhdGlvbi5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJy0xJylcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLiRzdWNjZXNzTm90aWZpY2F0aW9uLmZvY3VzKClcclxuXHJcbiAgICAvLyBzY3JvbGwgdG8gdGhlIHRvcCBvZiB0aGUgcGFnZVxyXG4gICAgd2luZG93LnNjcm9sbFRvKDAsIDApXHJcbn1cclxuXHJcbkNvb2tpZXNQYWdlLnByb3RvdHlwZS5nZXRDb29raWVUeXBlID0gZnVuY3Rpb24gKCRjb29raWVGb3JtRmllbGRzZXQpIHtcclxuICAgIHJldHVybiAkY29va2llRm9ybUZpZWxkc2V0LmlkXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IENvb2tpZXNQYWdlIl19\n","// js components were originally snaffled from https://github.com/alphagov/govuk-design-system/blob/main/src/javascripts/components/\nimport CookieBanner from './components/cookie-banner.js';\nimport { getConsentCookie, isValidConsentCookie } from './components/cookie-functions.js';\nimport CookiesPage from './components/cookies-page.js';\nimport initAnalytics, { sendPageViewEvent, sendFilterPageCustomEvent, updateAnalyticsStorageConsent } from './components/analytics';\n// Initialise cookie banner\nconst $cookieBanner = document.querySelector('[data-module=\"govuk-cookie-banner\"]');\nnew CookieBanner($cookieBanner).init();\ninitAnalytics(window.GA_MEASUREMENT_ID);\n// Initialise analytics if consent is given\nvar userConsent = getConsentCookie();\nif (userConsent && isValidConsentCookie(userConsent) && userConsent.analytics) {\n    //initAnalytics(window.GA_MEASUREMENT_ID);\n    //todo: always do these?\n    //    sendPageViewEvent();\n    //    sendFilterPageCustomEvent();\n    updateAnalyticsStorageConsent(true);\n}\nsendPageViewEvent();\nsendFilterPageCustomEvent();\n//todo: move this into scripts section on cookie page\n// Initialise cookie page\nvar $cookiesPage = document.querySelector('[data-module=\"app-cookies-page\"]');\nnew CookiesPage($cookiesPage).init();\nconst backLinks = document.querySelectorAll(\".app-back-link\");\nbackLinks.forEach((link) => {\n    link.addEventListener(\"click\", () => {\n        window.history.back();\n    });\n});\nconst button = document.getElementById('open-close-filters');\nbutton === null || button === void 0 ? void 0 : button.addEventListener('click', function handleClick(event) {\n    //todo: update to ts 2?\n    const filterButton = document.getElementById(\"filters\");\n    if (filterButton.style.display === \"none\") {\n        filterButton.style.display = \"block\";\n    }\n    else {\n        filterButton.style.display = \"none\";\n    }\n});\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxvSUFBb0k7QUFXcEksT0FBTyxZQUFZLE1BQU0sK0JBQStCLENBQUE7QUFDeEQsT0FBTyxFQUFFLGdCQUFnQixFQUFFLG9CQUFvQixFQUFFLE1BQU0sa0NBQWtDLENBQUE7QUFDekYsT0FBTyxXQUFXLE1BQU0sOEJBQThCLENBQUE7QUFDdEQsT0FBTyxhQUFhLEVBQUUsRUFBRSxpQkFBaUIsRUFBRSx5QkFBeUIsRUFBRSw2QkFBNkIsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBRXBJLDJCQUEyQjtBQUMzQixNQUFNLGFBQWEsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLHFDQUFxQyxDQUF1QixDQUFDO0FBQzFHLElBQUksWUFBWSxDQUFDLGFBQWEsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO0FBRXZDLGFBQWEsQ0FBQyxNQUFNLENBQUMsaUJBQWlCLENBQUMsQ0FBQztBQUV4QywyQ0FBMkM7QUFDM0MsSUFBSSxXQUFXLEdBQUcsZ0JBQWdCLEVBQUUsQ0FBQztBQUNyQyxJQUFJLFdBQVcsSUFBSSxvQkFBb0IsQ0FBQyxXQUFXLENBQUMsSUFBSSxXQUFXLENBQUMsU0FBUyxFQUFFO0lBQzNFLDBDQUEwQztJQUMxQyx3QkFBd0I7SUFDNUIsMEJBQTBCO0lBQzFCLGtDQUFrQztJQUU5Qiw2QkFBNkIsQ0FBQyxJQUFJLENBQUMsQ0FBQztDQUN2QztBQUVELGlCQUFpQixFQUFFLENBQUM7QUFDcEIseUJBQXlCLEVBQUUsQ0FBQztBQUU1QixxREFBcUQ7QUFDckQseUJBQXlCO0FBQ3pCLElBQUksWUFBWSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsa0NBQWtDLENBQUMsQ0FBQTtBQUM3RSxJQUFJLFdBQVcsQ0FBQyxZQUFZLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQTtBQUVwQyxNQUFNLFNBQVMsR0FBRyxRQUFRLENBQUMsZ0JBQWdCLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztBQUM5RCxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBdUIsRUFBRSxFQUFFO0lBQzFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsR0FBRyxFQUFFO1FBQ2hDLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDMUIsQ0FBQyxDQUFDLENBQUM7QUFDUCxDQUFDLENBQUMsQ0FBQztBQUVILE1BQU0sTUFBTSxHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsb0JBQW9CLENBQUMsQ0FBQztBQUM3RCxNQUFNLGFBQU4sTUFBTSx1QkFBTixNQUFNLENBQUUsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLFNBQVMsV0FBVyxDQUFDLEtBQUs7SUFDeEQsdUJBQXVCO0lBQ3ZCLE1BQU0sWUFBWSxHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUEwQixDQUFDO0lBQ2pGLElBQUksWUFBWSxDQUFDLEtBQUssQ0FBQyxPQUFPLEtBQUssTUFBTSxFQUFFO1FBQ3ZDLFlBQVksQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztLQUN4QztTQUFNO1FBQ0gsWUFBWSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDO0tBQ3ZDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8ganMgY29tcG9uZW50cyB3ZXJlIG9yaWdpbmFsbHkgc25hZmZsZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vYWxwaGFnb3YvZ292dWstZGVzaWduLXN5c3RlbS9ibG9iL21haW4vc3JjL2phdmFzY3JpcHRzL2NvbXBvbmVudHMvXHJcblxyXG5kZWNsYXJlIGdsb2JhbCB7XHJcbiAgICBpbnRlcmZhY2UgV2luZG93IHtcclxuICAgICAgICBHRFNfQ09OU0VOVF9DT09LSUVfVkVSU0lPTjogbnVtYmVyO1xyXG4gICAgICAgIEdBX01FQVNVUkVNRU5UX0lEOiBzdHJpbmc7XHJcbiAgICAgICAgR0FfQ09OVEFJTkVSX0lEOiBzdHJpbmc7XHJcbiAgICAgICAgZGF0YUxheWVyOiBhbnlbXTtcclxuICAgIH1cclxufVxyXG5cclxuaW1wb3J0IENvb2tpZUJhbm5lciBmcm9tICcuL2NvbXBvbmVudHMvY29va2llLWJhbm5lci5qcydcclxuaW1wb3J0IHsgZ2V0Q29uc2VudENvb2tpZSwgaXNWYWxpZENvbnNlbnRDb29raWUgfSBmcm9tICcuL2NvbXBvbmVudHMvY29va2llLWZ1bmN0aW9ucy5qcydcclxuaW1wb3J0IENvb2tpZXNQYWdlIGZyb20gJy4vY29tcG9uZW50cy9jb29raWVzLXBhZ2UuanMnXHJcbmltcG9ydCBpbml0QW5hbHl0aWNzLCB7IHNlbmRQYWdlVmlld0V2ZW50LCBzZW5kRmlsdGVyUGFnZUN1c3RvbUV2ZW50LCB1cGRhdGVBbmFseXRpY3NTdG9yYWdlQ29uc2VudCB9IGZyb20gJy4vY29tcG9uZW50cy9hbmFseXRpY3MnO1xyXG5cclxuLy8gSW5pdGlhbGlzZSBjb29raWUgYmFubmVyXHJcbmNvbnN0ICRjb29raWVCYW5uZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1tb2R1bGU9XCJnb3Z1ay1jb29raWUtYmFubmVyXCJdJykgYXMgSFRNTEVsZW1lbnQgfCBudWxsO1xyXG5uZXcgQ29va2llQmFubmVyKCRjb29raWVCYW5uZXIpLmluaXQoKTtcclxuXHJcbmluaXRBbmFseXRpY3Mod2luZG93LkdBX01FQVNVUkVNRU5UX0lEKTtcclxuXHJcbi8vIEluaXRpYWxpc2UgYW5hbHl0aWNzIGlmIGNvbnNlbnQgaXMgZ2l2ZW5cclxudmFyIHVzZXJDb25zZW50ID0gZ2V0Q29uc2VudENvb2tpZSgpO1xyXG5pZiAodXNlckNvbnNlbnQgJiYgaXNWYWxpZENvbnNlbnRDb29raWUodXNlckNvbnNlbnQpICYmIHVzZXJDb25zZW50LmFuYWx5dGljcykge1xyXG4gICAgLy9pbml0QW5hbHl0aWNzKHdpbmRvdy5HQV9NRUFTVVJFTUVOVF9JRCk7XHJcbiAgICAvL3RvZG86IGFsd2F5cyBkbyB0aGVzZT9cclxuLy8gICAgc2VuZFBhZ2VWaWV3RXZlbnQoKTtcclxuLy8gICAgc2VuZEZpbHRlclBhZ2VDdXN0b21FdmVudCgpO1xyXG5cclxuICAgIHVwZGF0ZUFuYWx5dGljc1N0b3JhZ2VDb25zZW50KHRydWUpO1xyXG59XHJcblxyXG5zZW5kUGFnZVZpZXdFdmVudCgpO1xyXG5zZW5kRmlsdGVyUGFnZUN1c3RvbUV2ZW50KCk7XHJcblxyXG4vL3RvZG86IG1vdmUgdGhpcyBpbnRvIHNjcmlwdHMgc2VjdGlvbiBvbiBjb29raWUgcGFnZVxyXG4vLyBJbml0aWFsaXNlIGNvb2tpZSBwYWdlXHJcbnZhciAkY29va2llc1BhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1tb2R1bGU9XCJhcHAtY29va2llcy1wYWdlXCJdJylcclxubmV3IENvb2tpZXNQYWdlKCRjb29raWVzUGFnZSkuaW5pdCgpXHJcblxyXG5jb25zdCBiYWNrTGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmFwcC1iYWNrLWxpbmtcIik7XHJcbmJhY2tMaW5rcy5mb3JFYWNoKChsaW5rOiBIVE1MQW5jaG9yRWxlbWVudCkgPT4ge1xyXG4gICAgbGluay5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHdpbmRvdy5oaXN0b3J5LmJhY2soKTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbmNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvcGVuLWNsb3NlLWZpbHRlcnMnKTtcclxuYnV0dG9uPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIGhhbmRsZUNsaWNrKGV2ZW50KSB7XHJcbiAgICAvL3RvZG86IHVwZGF0ZSB0byB0cyAyP1xyXG4gICAgY29uc3QgZmlsdGVyQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmaWx0ZXJzXCIpIGFzIEhUTUxEaXZFbGVtZW50IHwgbnVsbDtcclxuICAgIGlmIChmaWx0ZXJCdXR0b24uc3R5bGUuZGlzcGxheSA9PT0gXCJub25lXCIpIHtcclxuICAgICAgICBmaWx0ZXJCdXR0b24uc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZmlsdGVyQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIH1cclxufSk7XHJcbiJdfQ==\n"]}