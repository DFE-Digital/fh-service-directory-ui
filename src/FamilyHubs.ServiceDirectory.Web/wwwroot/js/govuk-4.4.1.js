!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define("GOVUKFrontend",["exports"],e):e(t.GOVUKFrontend={})}(void 0,(function(t){function e(t,e){if(window.NodeList.prototype.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e.call(window,t[n],n,t)}function n(){for(var t=function(t){var e={},n=function(t,o){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var s=t[i],r=o?o+"."+i:i;"object"==typeof s?n(s,r):e[r]=s}};return n(t),e},e={},n=0;n<arguments.length;n++){var o=t(arguments[n]);for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e}function o(t,e){if(!t||"object"!=typeof t)throw new Error('Provide a `configObject` of type "object".');if(!e||"string"!=typeof e)throw new Error('Provide a `namespace` of type "string" to filter the `configObject` by.');var n={};for(var o in t){var i=o.split(".");if(Object.prototype.hasOwnProperty.call(t,o)&&i[0]===e)i.length>1&&i.shift(),n[i.join(".")]=t[o]}return n}function i(t,e){this.translations=t||{},this.locale=e&&e.locale||document.documentElement.lang||"en"}function s(t){if("string"!=typeof t)return t;var e=t.trim();return"true"===e||"false"!==e&&(e.length>0&&isFinite(e)?Number(e):t)}function r(t){var e={};for(var n in t)e[n]=s(t[n]);return e}i.prototype.t=function(t,e){if(!t)throw new Error("i18n: lookup key missing");if(e&&void 0!==e.count&&(t=t+"."+this.getPluralSuffix(t,e.count)),t in this.translations){var n=this.translations[t];if(n.match(/%{(.\S+)}/)){if(!e)throw new Error("i18n: cannot replace placeholders in string if no option data provided");return this.replacePlaceholders(n,e)}return n}return t},i.prototype.replacePlaceholders=function(t,e){var n;return this.hasIntlNumberFormatSupport()&&(n=new Intl.NumberFormat(this.locale)),t.replace(/%{(.\S+)}/g,(function(t,o){if(Object.prototype.hasOwnProperty.call(e,o)){var i=e[o];return!1===i?"":"number"==typeof i&&n?n.format(i):i}throw new Error("i18n: no data found to replace "+t+" placeholder in string")}))},i.prototype.hasIntlPluralRulesSupport=function(){return Boolean(window.Intl&&"PluralRules"in window.Intl&&Intl.PluralRules.supportedLocalesOf(this.locale).length)},i.prototype.hasIntlNumberFormatSupport=function(){return Boolean(window.Intl&&"NumberFormat"in window.Intl&&Intl.NumberFormat.supportedLocalesOf(this.locale).length)},i.prototype.getPluralSuffix=function(t,e){if(e=Number(e),!isFinite(e))return"other";var n;if(t+"."+(n=this.hasIntlPluralRulesSupport()?new Intl.PluralRules(this.locale).select(e):this.selectPluralFormUsingFallbackRules(e))in this.translations)return n;if(t+".other"in this.translations)return console&&"warn"in console&&console.warn('i18n: Missing plural form ".'+n+'" for "'+this.locale+'" locale. Falling back to ".other".'),"other";throw new Error('i18n: Plural form ".other" is required for "'+this.locale+'" locale')},i.prototype.selectPluralFormUsingFallbackRules=function(t){t=Math.abs(Math.floor(t));var e=this.getPluralRulesForLocale();return e?i.pluralRules[e](t):"other"},i.prototype.getPluralRulesForLocale=function(){var t=this.locale,e=t.split("-")[0];for(var n in i.pluralRulesMap)if(Object.prototype.hasOwnProperty.call(i.pluralRulesMap,n))for(var o=i.pluralRulesMap[n],s=0;s<o.length;s++)if(o[s]===t||o[s]===e)return n},i.pluralRulesMap={arabic:["ar"],chinese:["my","zh","id","ja","jv","ko","ms","th","vi"],french:["hy","bn","fr","gu","hi","fa","pa","zu"],german:["af","sq","az","eu","bg","ca","da","nl","en","et","fi","ka","de","el","hu","lb","no","so","sw","sv","ta","te","tr","ur"],irish:["ga"],russian:["ru","uk"],scottish:["gd"],spanish:["pt-PT","it","es"],welsh:["cy"]},i.pluralRules={arabic:function(t){return 0===t?"zero":1===t?"one":2===t?"two":t%100>=3&&t%100<=10?"few":t%100>=11&&t%100<=99?"many":"other"},chinese:function(){return"other"},french:function(t){return 0===t||1===t?"one":"other"},german:function(t){return 1===t?"one":"other"},irish:function(t){return 1===t?"one":2===t?"two":t>=3&&t<=6?"few":t>=7&&t<=10?"many":"other"},russian:function(t){var e=t%100,n=e%10;return 1===n&&11!==e?"one":n>=2&&n<=4&&!(e>=12&&e<=14)?"few":0===n||n>=5&&n<=9||e>=11&&e<=14?"many":"other"},scottish:function(t){return 1===t||11===t?"one":2===t||12===t?"two":t>=3&&t<=10||t>=13&&t<=19?"few":"other"},spanish:function(t){return 1===t?"one":t%1e6==0&&0!==t?"many":"other"},welsh:function(t){return 0===t?"zero":1===t?"one":2===t?"two":3===t?"few":6===t?"many":"other"}},function(t){var e,n,o,i;"defineProperty"in Object&&function(){try{return Object.defineProperty({},"test",{value:42}),!0}catch(t){return!1}}()||(e=Object.defineProperty,n=Object.prototype.hasOwnProperty("__defineGetter__"),o="Getters & setters cannot be defined on this javascript engine",i="A property cannot both have accessors and be writable or have a value",Object.defineProperty=function(t,s,r){if(e&&(t===window||t===document||t===Element.prototype||t instanceof Element))return e(t,s,r);if(null===t||!(t instanceof Object||"object"==typeof t))throw new TypeError("Object.defineProperty called on non-object");if(!(r instanceof Object))throw new TypeError("Property description must be an object");var a=String(s),l="value"in r||"writable"in r,c="get"in r&&typeof r.get,u="set"in r&&typeof r.set;if(c){if("function"!==c)throw new TypeError("Getter must be a function");if(!n)throw new TypeError(o);if(l)throw new TypeError(i);Object.__defineGetter__.call(t,a,r.get)}else t[a]=r.value;if(u){if("function"!==u)throw new TypeError("Setter must be a function");if(!n)throw new TypeError(o);if(l)throw new TypeError(i);Object.__defineSetter__.call(t,a,r.set)}return"value"in r&&(t[a]=r.value),t})}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),function(t){"bind"in Function.prototype||Object.defineProperty(Function.prototype,"bind",{value:function(t){var e,n=Array,o=Object,i=o.prototype,s=n.prototype,r=function(){},a=i.toString,l="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,c=Function.prototype.toString,u=function(t){try{return c.call(t),!0}catch(t){return!1}},d="[object Function]",h="[object GeneratorFunction]";e=function(t){if("function"!=typeof t)return!1;if(l)return u(t);var e=a.call(t);return e===d||e===h};var p=s.slice,f=s.concat,m=s.push,b=Math.max,v=this;if(!e(v))throw new TypeError("Function.prototype.bind called on incompatible "+v);for(var g,y=p.call(arguments,1),w=function(){if(this instanceof g){var e=v.apply(this,f.call(y,p.call(arguments)));return o(e)===e?e:this}return v.apply(t,f.call(y,p.call(arguments)))},E=b(0,v.length-y.length),k=[],S=0;S<E;S++)m.call(k,"$"+S);return g=Function("binder","return function ("+k.join(",")+"){ return binder.apply(this, arguments); }")(w),v.prototype&&(r.prototype=v.prototype,g.prototype=new r,r.prototype=null),g}})}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),function(t){var e;"DOMTokenList"in this&&(!("classList"in(e=document.createElement("x")))||!e.classList.toggle("x",!1)&&!e.className)||function(e){var n;"DOMTokenList"in e&&e.DOMTokenList&&(!document.createElementNS||!document.createElementNS("http://www.w3.org/2000/svg","svg")||document.createElementNS("http://www.w3.org/2000/svg","svg").classList instanceof DOMTokenList)||(e.DOMTokenList=function(){var e=!0,n=function(t,n,o,i){Object.defineProperty?Object.defineProperty(t,n,{configurable:!1===e||!!i,get:o}):t.__defineGetter__(n,o)};try{n({},"support")}catch(t){e=!1}return function(e,o){var i=this,s=[],r={},a=0,l=0,c=function(t){n(i,t,(function(){return d(),s[t]}),!1)},u=function(){if(a>=l)for(;l<a;++l)c(l)},d=function(){var t,n,i=arguments,l=/\s+/;if(i.length)for(n=0;n<i.length;++n)if(l.test(i[n]))throw(t=new SyntaxError('String "'+i[n]+'" contains an invalid character')).code=5,t.name="InvalidCharacterError",t;for(""===(s="object"==typeof e[o]?(""+e[o].baseVal).replace(/^\s+|\s+$/g,"").split(l):(""+e[o]).replace(/^\s+|\s+$/g,"").split(l))[0]&&(s=[]),r={},n=0;n<s.length;++n)r[s[n]]=!0;a=s.length,u()};return d(),n(i,"length",(function(){return d(),a})),i.toLocaleString=i.toString=function(){return d(),s.join(" ")},i.item=function(t){return d(),s[t]},i.contains=function(t){return d(),!!r[t]},i.add=function(){d.apply(i,t=arguments);for(var t,n,l=0,c=t.length;l<c;++l)n=t[l],r[n]||(s.push(n),r[n]=!0);a!==s.length&&(a=s.length>>>0,"object"==typeof e[o]?e[o].baseVal=s.join(" "):e[o]=s.join(" "),u())},i.remove=function(){d.apply(i,t=arguments);for(var t,n={},l=0,c=[];l<t.length;++l)n[t[l]]=!0,delete r[t[l]];for(l=0;l<s.length;++l)n[s[l]]||c.push(s[l]);s=c,a=c.length>>>0,"object"==typeof e[o]?e[o].baseVal=s.join(" "):e[o]=s.join(" "),u()},i.toggle=function(e,n){return d.apply(i,[e]),t!==n?n?(i.add(e),!0):(i.remove(e),!1):r[e]?(i.remove(e),!1):(i.add(e),!0)},i}}()),"classList"in(n=document.createElement("span"))&&(n.classList.toggle("x",!1),n.classList.contains("x")&&(n.classList.constructor.prototype.toggle=function(e){var n=arguments[1];if(n===t){var o=!this.contains(e);return this[o?"add":"remove"](e),o}return this[(n=!!n)?"add":"remove"](e),n})),function(){var t=document.createElement("span");if("classList"in t&&(t.classList.add("a","b"),!t.classList.contains("b"))){var e=t.classList.constructor.prototype.add;t.classList.constructor.prototype.add=function(){for(var t=arguments,n=arguments.length,o=0;o<n;o++)e.call(this,t[o])}}}(),function(){var t=document.createElement("span");if("classList"in t&&(t.classList.add("a"),t.classList.add("b"),t.classList.remove("a","b"),t.classList.contains("b"))){var e=t.classList.constructor.prototype.remove;t.classList.constructor.prototype.remove=function(){for(var t=arguments,n=arguments.length,o=0;o<n;o++)e.call(this,t[o])}}}()}(this)}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),function(t){"Document"in this||"undefined"==typeof WorkerGlobalScope&&"function"!=typeof importScripts&&(this.HTMLDocument?this.Document=this.HTMLDocument:(this.Document=this.HTMLDocument=document.constructor=new Function("return function Document() {}")(),this.Document.prototype=document))}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),function(t){"Element"in this&&"HTMLElement"in this||function(){if(!window.Element||window.HTMLElement){window.Element=window.HTMLElement=new Function("return function Element() {}")();var t,e=document.appendChild(document.createElement("body")),n=e.appendChild(document.createElement("iframe")).contentWindow.document,o=Element.prototype=n.appendChild(n.createElement("*")),i={},s=function(t,e){var n,o,r,a=t.childNodes||[],l=-1;if(1===t.nodeType&&t.constructor!==Element)for(n in t.constructor=Element,i)o=i[n],t[n]=o;for(;r=e&&a[++l];)s(r,e);return t},r=document.getElementsByTagName("*"),a=document.createElement,l=100;o.attachEvent("onpropertychange",(function(t){for(var e,n=t.propertyName,s=!i.hasOwnProperty(n),a=o[n],l=i[n],c=-1;e=r[++c];)1===e.nodeType&&(s||e[n]===l)&&(e[n]=a);i[n]=a})),o.constructor=Element,o.hasAttribute||(o.hasAttribute=function(t){return null!==this.getAttribute(t)}),c()||(document.onreadystatechange=c,t=setInterval(c,25)),document.createElement=function(t){var e=a(String(t).toLowerCase());return s(e)},document.removeChild(e)}else window.HTMLElement=window.Element;function c(){return l--||clearTimeout(t),!(!document.body||document.body.prototype||!/(complete|interactive)/.test(document.readyState))&&(s(document,!0),t&&document.body.prototype&&clearTimeout(t),!!document.body.prototype)}}()}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),function(t){var e;"document"in this&&"classList"in document.documentElement&&"Element"in this&&"classList"in Element.prototype&&((e=document.createElement("span")).classList.add("a","b"),e.classList.contains("b"))||function(t){var e=!0,n=function(t,n,o,i){Object.defineProperty?Object.defineProperty(t,n,{configurable:!1===e||!!i,get:o}):t.__defineGetter__(n,o)};try{n({},"support")}catch(t){e=!1}var o=function(t,i,s){n(t.prototype,i,(function(){var t,r=this,a="__defineGetter__DEFINE_PROPERTY"+i;if(r[a])return t;if(r[a]=!0,!1===e){for(var l,c=o.mirror||document.createElement("div"),u=c.childNodes,d=u.length,h=0;h<d;++h)if(u[h]._R===r){l=u[h];break}l||(l=c.appendChild(document.createElement("div"))),t=DOMTokenList.call(l,r,s)}else t=new DOMTokenList(r,s);return n(r,i,(function(){return t})),delete r[a],t}),!0)};o(t.Element,"classList","className"),o(t.HTMLElement,"classList","className"),o(t.HTMLLinkElement,"relList","rel"),o(t.HTMLAnchorElement,"relList","rel"),o(t.HTMLAreaElement,"relList","rel")}(this)}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),function(t){"trim"in String.prototype||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")})}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),function(t){(function(){if(!document.documentElement.dataset)return!1;var t=document.createElement("div");return t.setAttribute("data-a-b","c"),t.dataset&&"c"==t.dataset.aB})()||Object.defineProperty(Element.prototype,"dataset",{get:function(){for(var t=this.attributes,e={},n=0;n<t.length;n++){var o=t[n];if(o&&o.name&&/^data-\w[.\w-]*$/.test(o.name)){var i=o.name,s=o.value,r=i.substr(5).replace(/-./g,(function(t){return t.charAt(1).toUpperCase()}));"__defineGetter__"in Object.prototype&&"__defineSetter__"in Object.prototype?Object.defineProperty(e,r,{enumerable:!0,get:function(){return this.value}.bind({value:s||""}),set:function(t,e){void 0!==e?this.setAttribute(t,e):this.removeAttribute(t)}.bind(this,i)}):e[r]=s}}return e}})}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{});var a={hideAllSections:"Hide all sections",hideSection:"Hide",hideSectionAriaLabel:"Hide this section",showAllSections:"Show all sections",showSection:"Show",showSectionAriaLabel:"Show this section"};function l(t,e){this.$module=t,this.$sections=t.querySelectorAll(".govuk-accordion__section"),this.browserSupportsSessionStorage=c.checkForSessionStorage();var s={i18n:a};this.config=n(s,e||{},r(t.dataset)),this.i18n=new i(o(this.config,"i18n")),this.controlsClass="govuk-accordion__controls",this.showAllClass="govuk-accordion__show-all",this.showAllTextClass="govuk-accordion__show-all-text",this.sectionExpandedClass="govuk-accordion__section--expanded",this.sectionButtonClass="govuk-accordion__section-button",this.sectionHeaderClass="govuk-accordion__section-header",this.sectionHeadingClass="govuk-accordion__section-heading",this.sectionHeadingTextClass="govuk-accordion__section-heading-text",this.sectionHeadingTextFocusClass="govuk-accordion__section-heading-text-focus",this.sectionShowHideToggleClass="govuk-accordion__section-toggle",this.sectionShowHideToggleFocusClass="govuk-accordion__section-toggle-focus",this.sectionShowHideTextClass="govuk-accordion__section-toggle-text",this.upChevronIconClass="govuk-accordion-nav__chevron",this.downChevronIconClass="govuk-accordion-nav__chevron--down",this.sectionSummaryClass="govuk-accordion__section-summary",this.sectionSummaryFocusClass="govuk-accordion__section-summary-focus"}l.prototype.init=function(){if(this.$module){this.initControls(),this.initSectionHeaders();var t=this.checkIfAllSectionsOpen();this.updateShowAllButton(t)}},l.prototype.initControls=function(){this.$showAllButton=document.createElement("button"),this.$showAllButton.setAttribute("type","button"),this.$showAllButton.setAttribute("class",this.showAllClass),this.$showAllButton.setAttribute("aria-expanded","false");var t=document.createElement("span");t.classList.add(this.upChevronIconClass),this.$showAllButton.appendChild(t);var e=document.createElement("div");e.setAttribute("class",this.controlsClass),e.appendChild(this.$showAllButton),this.$module.insertBefore(e,this.$module.firstChild);var n=document.createElement("span");n.classList.add(this.showAllTextClass),this.$showAllButton.appendChild(n),this.$showAllButton.addEventListener("click",this.onShowOrHideAllToggle.bind(this))},l.prototype.initSectionHeaders=function(){e(this.$sections,function(t,e){var n=t.querySelector("."+this.sectionHeaderClass);this.constructHeaderMarkup(n,e),this.setExpanded(this.isExpanded(t),t),n.addEventListener("click",this.onSectionToggle.bind(this,t)),this.setInitialState(t)}.bind(this))},l.prototype.constructHeaderMarkup=function(t,e){var n=t.querySelector("."+this.sectionButtonClass),o=t.querySelector("."+this.sectionHeadingClass),i=t.querySelector("."+this.sectionSummaryClass),s=document.createElement("button");s.setAttribute("type","button"),s.setAttribute("aria-controls",this.$module.id+"-content-"+(e+1));for(var r=0;r<n.attributes.length;r++){var a=n.attributes.item(r);"id"!==a.nodeName&&s.setAttribute(a.nodeName,a.nodeValue)}var l=document.createElement("span");l.classList.add(this.sectionHeadingTextClass),l.id=n.id;var c=document.createElement("span");c.classList.add(this.sectionHeadingTextFocusClass),l.appendChild(c),c.innerHTML=n.innerHTML;var u=document.createElement("span");u.classList.add(this.sectionShowHideToggleClass),u.setAttribute("data-nosnippet","");var d=document.createElement("span");d.classList.add(this.sectionShowHideToggleFocusClass),u.appendChild(d);var h=document.createElement("span"),p=document.createElement("span");if(p.classList.add(this.upChevronIconClass),d.appendChild(p),h.classList.add(this.sectionShowHideTextClass),d.appendChild(h),s.appendChild(l),s.appendChild(this.getButtonPunctuationEl()),null!=i){var f=document.createElement("span"),m=document.createElement("span");m.classList.add(this.sectionSummaryFocusClass),f.appendChild(m);for(var b=0,v=i.attributes.length;b<v;++b){var g=i.attributes.item(b).nodeName,y=i.attributes.item(b).nodeValue;f.setAttribute(g,y)}m.innerHTML=i.innerHTML,i.parentNode.replaceChild(f,i),s.appendChild(f),s.appendChild(this.getButtonPunctuationEl())}s.appendChild(u),o.removeChild(n),o.appendChild(s)},l.prototype.onSectionToggle=function(t){var e=this.isExpanded(t);this.setExpanded(!e,t),this.storeState(t)},l.prototype.onShowOrHideAllToggle=function(){var t=this,n=this.$sections,o=!this.checkIfAllSectionsOpen();e(n,(function(e){t.setExpanded(o,e),t.storeState(e)})),t.updateShowAllButton(o)},l.prototype.setExpanded=function(t,e){var n=e.querySelector("."+this.upChevronIconClass),o=e.querySelector("."+this.sectionShowHideTextClass),i=e.querySelector("."+this.sectionButtonClass),s=t?this.i18n.t("hideSection"):this.i18n.t("showSection");o.innerText=s,i.setAttribute("aria-expanded",t);var r=[e.querySelector("."+this.sectionHeadingTextClass).innerText.trim()],a=e.querySelector("."+this.sectionSummaryClass);a&&r.push(a.innerText.trim());var l=t?this.i18n.t("hideSectionAriaLabel"):this.i18n.t("showSectionAriaLabel");r.push(l),i.setAttribute("aria-label",r.join(" , ")),t?(e.classList.add(this.sectionExpandedClass),n.classList.remove(this.downChevronIconClass)):(e.classList.remove(this.sectionExpandedClass),n.classList.add(this.downChevronIconClass));var c=this.checkIfAllSectionsOpen();this.updateShowAllButton(c)},l.prototype.isExpanded=function(t){return t.classList.contains(this.sectionExpandedClass)},l.prototype.checkIfAllSectionsOpen=function(){return this.$sections.length===this.$module.querySelectorAll("."+this.sectionExpandedClass).length},l.prototype.updateShowAllButton=function(t){var e=this.$showAllButton.querySelector("."+this.upChevronIconClass),n=this.$showAllButton.querySelector("."+this.showAllTextClass),o=t?this.i18n.t("hideAllSections"):this.i18n.t("showAllSections");this.$showAllButton.setAttribute("aria-expanded",t),n.innerText=o,t?e.classList.remove(this.downChevronIconClass):e.classList.add(this.downChevronIconClass)};var c={checkForSessionStorage:function(){var t,e="this is the test string";try{return window.sessionStorage.setItem(e,e),t=window.sessionStorage.getItem(e)===e.toString(),window.sessionStorage.removeItem(e),t}catch(t){return!1}}};l.prototype.storeState=function(t){if(this.browserSupportsSessionStorage){var e=t.querySelector("."+this.sectionButtonClass);if(e){var n=e.getAttribute("aria-controls"),o=e.getAttribute("aria-expanded");n&&o&&window.sessionStorage.setItem(n,o)}}},l.prototype.setInitialState=function(t){if(this.browserSupportsSessionStorage){var e=t.querySelector("."+this.sectionButtonClass);if(e){var n=e.getAttribute("aria-controls"),o=n?window.sessionStorage.getItem(n):null;null!==o&&this.setExpanded("true"===o,t)}}},l.prototype.getButtonPunctuationEl=function(){var t=document.createElement("span");return t.classList.add("govuk-visually-hidden","govuk-accordion__section-heading-divider"),t.innerHTML=", ",t},function(t){"Window"in this||"undefined"==typeof WorkerGlobalScope&&"function"!=typeof importScripts&&function(t){t.constructor?t.Window=t.constructor:(t.Window=t.constructor=new Function("return function Window() {}")()).prototype=this}(this)}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),function(t){(function(t){if(!("Event"in t))return!1;if("function"==typeof t.Event)return!0;try{return new Event("click"),!0}catch(t){return!1}})(this)||function(){var e={click:1,dblclick:1,keyup:1,keypress:1,keydown:1,mousedown:1,mouseup:1,mousemove:1,mouseover:1,mouseenter:1,mouseleave:1,mouseout:1,storage:1,storagecommit:1,textinput:1};if("undefined"!=typeof document&&"undefined"!=typeof window){var n=window.Event&&window.Event.prototype||null;window.Event=Window.prototype.Event=function(e,n){if(!e)throw new Error("Not enough arguments");var o;if("createEvent"in document){o=document.createEvent("Event");var i=!(!n||n.bubbles===t)&&n.bubbles,s=!(!n||n.cancelable===t)&&n.cancelable;return o.initEvent(e,i,s),o}return(o=document.createEventObject()).type=e,o.bubbles=!(!n||n.bubbles===t)&&n.bubbles,o.cancelable=!(!n||n.cancelable===t)&&n.cancelable,o},n&&Object.defineProperty(window.Event,"prototype",{configurable:!1,enumerable:!1,writable:!0,value:n}),"createEvent"in document||(window.addEventListener=Window.prototype.addEventListener=Document.prototype.addEventListener=Element.prototype.addEventListener=function(){var t=this,n=arguments[0],i=arguments[1];if(t===window&&n in e)throw new Error("In IE8 the event: "+n+" is not available on the window object. Please see https://github.com/Financial-Times/polyfill-service/issues/317 for more information.");t._events||(t._events={}),t._events[n]||(t._events[n]=function(e){var n,i=t._events[e.type].list,s=i.slice(),r=-1,a=s.length;for(e.preventDefault=function(){!1!==e.cancelable&&(e.returnValue=!1)},e.stopPropagation=function(){e.cancelBubble=!0},e.stopImmediatePropagation=function(){e.cancelBubble=!0,e.cancelImmediate=!0},e.currentTarget=t,e.relatedTarget=e.fromElement||null,e.target=e.target||e.srcElement||t,e.timeStamp=(new Date).getTime(),e.clientX&&(e.pageX=e.clientX+document.documentElement.scrollLeft,e.pageY=e.clientY+document.documentElement.scrollTop);++r<a&&!e.cancelImmediate;)r in s&&-1!==o(i,n=s[r])&&"function"==typeof n&&n.call(t,e)},t._events[n].list=[],t.attachEvent&&t.attachEvent("on"+n,t._events[n])),t._events[n].list.push(i)},window.removeEventListener=Window.prototype.removeEventListener=Document.prototype.removeEventListener=Element.prototype.removeEventListener=function(){var t,e=this,n=arguments[0],i=arguments[1];e._events&&e._events[n]&&e._events[n].list&&-1!==(t=o(e._events[n].list,i))&&(e._events[n].list.splice(t,1),e._events[n].list.length||(e.detachEvent&&e.detachEvent("on"+n,e._events[n]),delete e._events[n]))},window.dispatchEvent=Window.prototype.dispatchEvent=Document.prototype.dispatchEvent=Element.prototype.dispatchEvent=function(t){if(!arguments.length)throw new Error("Not enough arguments");if(!t||"string"!=typeof t.type)throw new Error("DOM Events Exception 0");var e=this,n=t.type;try{if(!t.bubbles){t.cancelBubble=!0;var o=function(t){t.cancelBubble=!0,(e||window).detachEvent("on"+n,o)};this.attachEvent("on"+n,o)}this.fireEvent("on"+n,t)}catch(o){t.target=e;do{t.currentTarget=e,"_events"in e&&"function"==typeof e._events[n]&&e._events[n].call(e,t),"function"==typeof e["on"+n]&&e["on"+n].call(e,t),e=9===e.nodeType?e.parentWindow:e.parentNode}while(e&&!t.cancelBubble)}return!0},document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&document.dispatchEvent(new Event("DOMContentLoaded",{bubbles:!0}))})))}function o(t,e){for(var n=-1,o=t.length;++n<o;)if(n in t&&t[n]===e)return n;return-1}}()}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{});function u(t,e){if(!t)return this;this.$module=t,this.debounceFormSubmitTimer=null;this.config=n({preventDoubleClick:!1},e||{},r(t.dataset))}u.prototype.init=function(){this.$module&&(this.$module.addEventListener("keydown",this.handleKeyDown),this.$module.addEventListener("click",this.debounce.bind(this)))},u.prototype.handleKeyDown=function(t){var e=t.target;"button"===e.getAttribute("role")&&32===t.keyCode&&(t.preventDefault(),e.click())},u.prototype.debounce=function(t){if(this.config.preventDoubleClick)return this.debounceFormSubmitTimer?(t.preventDefault(),!1):void(this.debounceFormSubmitTimer=setTimeout(function(){this.debounceFormSubmitTimer=null}.bind(this),1e3))};function d(t){this.$module=t}function h(t,e){var n=t.closest("["+e+"]");if(n)return n.getAttribute(e)}d.prototype.init=function(){this.$module&&("boolean"==typeof this.$module.open||this.polyfillDetails())},d.prototype.polyfillDetails=function(){var t,e=this.$module,n=this.$summary=e.getElementsByTagName("summary").item(0),o=this.$content=e.getElementsByTagName("div").item(0);n&&o&&(o.id||(o.id="details-content-"+(t=(new Date).getTime(),void 0!==window.performance&&"function"==typeof window.performance.now&&(t+=window.performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)})))),e.setAttribute("role","group"),n.setAttribute("role","button"),n.setAttribute("aria-controls",o.id),n.tabIndex=0,this.$module.hasAttribute("open")?n.setAttribute("aria-expanded","true"):(n.setAttribute("aria-expanded","false"),o.style.display="none"),this.polyfillHandleInputs(n,this.polyfillSetAttributes.bind(this)))},d.prototype.polyfillSetAttributes=function(){return this.$module.hasAttribute("open")?(this.$module.removeAttribute("open"),this.$summary.setAttribute("aria-expanded","false"),this.$content.style.display="none"):(this.$module.setAttribute("open","open"),this.$summary.setAttribute("aria-expanded","true"),this.$content.style.display=""),!0},d.prototype.polyfillHandleInputs=function(t,e){t.addEventListener("keypress",(function(t){var n=t.target;13!==t.keyCode&&32!==t.keyCode||"summary"===n.nodeName.toLowerCase()&&(t.preventDefault(),n.click?n.click():e(t))})),t.addEventListener("keyup",(function(t){var e=t.target;32===t.keyCode&&"summary"===e.nodeName.toLowerCase()&&t.preventDefault()})),t.addEventListener("click",e)},function(t){"Date"in self&&"now"in self.Date&&"getTime"in self.Date.prototype||(Date.now=function(){return(new Date).getTime()})}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),function(t){"document"in this&&"matches"in document.documentElement||(Element.prototype.matches=Element.prototype.webkitMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.mozMatchesSelector||function(t){for(var e=this,n=(e.document||e.ownerDocument).querySelectorAll(t),o=0;n[o]&&n[o]!==e;)++o;return!!n[o]})}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),function(t){"document"in this&&"closest"in document.documentElement||(Element.prototype.closest=function(t){for(var e=this;e;){if(e.matches(t))return e;e="SVGElement"in window&&e instanceof SVGElement?e.parentNode:e.parentElement}return null})}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{});var p={charactersUnderLimit:{one:"You have %{count} character remaining",other:"You have %{count} characters remaining"},charactersAtLimit:"You have 0 characters remaining",charactersOverLimit:{one:"You have %{count} character too many",other:"You have %{count} characters too many"},wordsUnderLimit:{one:"You have %{count} word remaining",other:"You have %{count} words remaining"},wordsAtLimit:"You have 0 words remaining",wordsOverLimit:{one:"You have %{count} word too many",other:"You have %{count} words too many"},textareaDescription:{other:""}};function f(t,e){if(!t)return this;var s={threshold:0,i18n:p},a=r(t.dataset),l={};if(("maxwords"in a||"maxlength"in a)&&(l={maxlength:!1,maxwords:!1}),this.config=n(s,e||{},l,a),this.i18n=new i(o(this.config,"i18n"),{locale:h(t,"lang")}),this.config.maxwords)this.maxLength=this.config.maxwords;else{if(!this.config.maxlength)return;this.maxLength=this.config.maxlength}this.$module=t,this.$textarea=t.querySelector(".govuk-js-character-count"),this.$visibleCountMessage=null,this.$screenReaderCountMessage=null,this.lastInputTimestamp=null}function m(t){this.$module=t,this.$inputs=t.querySelectorAll('input[type="checkbox"]')}function b(t,e){if(!t)return this;this.$module=t;this.config=n({disableAutoFocus:!1},e||{},r(t.dataset))}function v(t,e){this.$module=t;this.config=n({disableAutoFocus:!1},e||{},r(t.dataset))}function g(t){this.$module=t,this.$menuButton=t&&t.querySelector(".govuk-js-header-toggle"),this.$menu=this.$menuButton&&t.querySelector("#"+this.$menuButton.getAttribute("aria-controls")),this.menuIsOpen=!1,this.mql=null}function y(t){this.$module=t,this.$inputs=t.querySelectorAll('input[type="radio"]')}function w(t){this.$module=t,this.$linkedElement=null,this.linkedElementListener=!1}function E(t){this.$module=t,this.$tabs=t.querySelectorAll(".govuk-tabs__tab"),this.keys={left:37,right:39,up:38,down:40},this.jsHiddenClass="govuk-tabs__panel--hidden"}f.prototype.init=function(){if(this.$textarea){var t=this.$textarea,e=document.getElementById(t.id+"-info");e.innerText.match(/^\s*$/)&&(e.innerText=this.i18n.t("textareaDescription",{count:this.maxLength})),t.insertAdjacentElement("afterend",e);var n=document.createElement("div");n.className="govuk-character-count__sr-status govuk-visually-hidden",n.setAttribute("aria-live","polite"),this.$screenReaderCountMessage=n,e.insertAdjacentElement("afterend",n);var o=document.createElement("div");o.className=e.className,o.classList.add("govuk-character-count__status"),o.setAttribute("aria-hidden","true"),this.$visibleCountMessage=o,e.insertAdjacentElement("afterend",o),e.classList.add("govuk-visually-hidden"),t.removeAttribute("maxlength"),this.bindChangeEvents(),"onpageshow"in window?window.addEventListener("pageshow",this.updateCountMessage.bind(this)):window.addEventListener("DOMContentLoaded",this.updateCountMessage.bind(this)),this.updateCountMessage()}},f.prototype.bindChangeEvents=function(){var t=this.$textarea;t.addEventListener("keyup",this.handleKeyUp.bind(this)),t.addEventListener("focus",this.handleFocus.bind(this)),t.addEventListener("blur",this.handleBlur.bind(this))},f.prototype.handleKeyUp=function(){this.updateVisibleCountMessage(),this.lastInputTimestamp=Date.now()},f.prototype.handleFocus=function(){this.valueChecker=setInterval(function(){(!this.lastInputTimestamp||Date.now()-500>=this.lastInputTimestamp)&&this.updateIfValueChanged()}.bind(this),1e3)},f.prototype.handleBlur=function(){clearInterval(this.valueChecker)},f.prototype.updateIfValueChanged=function(){this.$textarea.oldValue||(this.$textarea.oldValue=""),this.$textarea.value!==this.$textarea.oldValue&&(this.$textarea.oldValue=this.$textarea.value,this.updateCountMessage())},f.prototype.updateCountMessage=function(){this.updateVisibleCountMessage(),this.updateScreenReaderCountMessage()},f.prototype.updateVisibleCountMessage=function(){var t=this.$textarea,e=this.$visibleCountMessage,n=this.maxLength-this.count(t.value);this.isOverThreshold()?e.classList.remove("govuk-character-count__message--disabled"):e.classList.add("govuk-character-count__message--disabled"),n<0?(t.classList.add("govuk-textarea--error"),e.classList.remove("govuk-hint"),e.classList.add("govuk-error-message")):(t.classList.remove("govuk-textarea--error"),e.classList.remove("govuk-error-message"),e.classList.add("govuk-hint")),e.innerText=this.getCountMessage()},f.prototype.updateScreenReaderCountMessage=function(){var t=this.$screenReaderCountMessage;this.isOverThreshold()?t.removeAttribute("aria-hidden"):t.setAttribute("aria-hidden",!0),t.innerText=this.getCountMessage()},f.prototype.count=function(t){return this.config.maxwords?(t.match(/\S+/g)||[]).length:t.length},f.prototype.getCountMessage=function(){var t=this.maxLength-this.count(this.$textarea.value),e=this.config.maxwords?"words":"characters";return this.formatCountMessage(t,e)},f.prototype.formatCountMessage=function(t,e){if(0===t)return this.i18n.t(e+"AtLimit");var n=t<0?"OverLimit":"UnderLimit";return this.i18n.t(e+n,{count:Math.abs(t)})},f.prototype.isOverThreshold=function(){if(!this.config.threshold)return!0;var t=this.$textarea,e=this.count(t.value);return this.maxLength*this.config.threshold/100<=e},m.prototype.init=function(){var t=this.$module;e(this.$inputs,(function(t){var e=t.getAttribute("data-aria-controls");e&&document.getElementById(e)&&(t.setAttribute("aria-controls",e),t.removeAttribute("data-aria-controls"))})),"onpageshow"in window?window.addEventListener("pageshow",this.syncAllConditionalReveals.bind(this)):window.addEventListener("DOMContentLoaded",this.syncAllConditionalReveals.bind(this)),this.syncAllConditionalReveals(),t.addEventListener("click",this.handleClick.bind(this))},m.prototype.syncAllConditionalReveals=function(){e(this.$inputs,this.syncConditionalRevealWithInputState.bind(this))},m.prototype.syncConditionalRevealWithInputState=function(t){var e=document.getElementById(t.getAttribute("aria-controls"));if(e&&e.classList.contains("govuk-checkboxes__conditional")){var n=t.checked;t.setAttribute("aria-expanded",n),e.classList.toggle("govuk-checkboxes__conditional--hidden",!n)}},m.prototype.unCheckAllInputsExcept=function(t){e(document.querySelectorAll('input[type="checkbox"][name="'+t.name+'"]'),function(e){t.form===e.form&&e!==t&&(e.checked=!1,this.syncConditionalRevealWithInputState(e))}.bind(this))},m.prototype.unCheckExclusiveInputs=function(t){e(document.querySelectorAll('input[data-behaviour="exclusive"][type="checkbox"][name="'+t.name+'"]'),function(e){t.form===e.form&&(e.checked=!1,this.syncConditionalRevealWithInputState(e))}.bind(this))},m.prototype.handleClick=function(t){var e=t.target;"checkbox"===e.type&&(e.getAttribute("aria-controls")&&this.syncConditionalRevealWithInputState(e),e.checked&&("exclusive"===e.getAttribute("data-behaviour")?this.unCheckAllInputsExcept(e):this.unCheckExclusiveInputs(e)))},b.prototype.init=function(){var t=this.$module;t&&(this.setFocus(),t.addEventListener("click",this.handleClick.bind(this)))},b.prototype.setFocus=function(){var t=this.$module;this.config.disableAutoFocus||(t.setAttribute("tabindex","-1"),t.addEventListener("blur",(function(){t.removeAttribute("tabindex")})),t.focus())},b.prototype.handleClick=function(t){var e=t.target;this.focusTarget(e)&&t.preventDefault()},b.prototype.focusTarget=function(t){if("A"!==t.tagName||!1===t.href)return!1;var e=this.getFragmentFromUrl(t.href),n=document.getElementById(e);if(!n)return!1;var o=this.getAssociatedLegendOrLabel(n);return!!o&&(o.scrollIntoView(),n.focus({preventScroll:!0}),!0)},b.prototype.getFragmentFromUrl=function(t){return-1!==t.indexOf("#")&&t.split("#").pop()},b.prototype.getAssociatedLegendOrLabel=function(t){var e=t.closest("fieldset");if(e){var n=e.getElementsByTagName("legend");if(n.length){var o=n[0];if("checkbox"===t.type||"radio"===t.type)return o;var i=o.getBoundingClientRect().top,s=t.getBoundingClientRect();if(s.height&&window.innerHeight)if(s.top+s.height-i<window.innerHeight/2)return o}}return document.querySelector("label[for='"+t.getAttribute("id")+"']")||t.closest("label")},v.prototype.init=function(){this.$module&&this.setFocus()},v.prototype.setFocus=function(){var t=this.$module;this.config.disableAutoFocus||"alert"===t.getAttribute("role")&&(t.getAttribute("tabindex")||(t.setAttribute("tabindex","-1"),t.addEventListener("blur",(function(){t.removeAttribute("tabindex")}))),t.focus())},g.prototype.init=function(){this.$module&&this.$menuButton&&this.$menu&&("matchMedia"in window?(this.mql=window.matchMedia("(min-width: 48.0625em)"),"addEventListener"in this.mql?this.mql.addEventListener("change",this.syncState.bind(this)):this.mql.addListener(this.syncState.bind(this)),this.syncState(),this.$menuButton.addEventListener("click",this.handleMenuButtonClick.bind(this))):this.$menuButton.setAttribute("hidden",""))},g.prototype.syncState=function(){this.mql.matches?(this.$menu.removeAttribute("hidden"),this.$menuButton.setAttribute("hidden","")):(this.$menuButton.removeAttribute("hidden"),this.$menuButton.setAttribute("aria-expanded",this.menuIsOpen),this.menuIsOpen?this.$menu.removeAttribute("hidden"):this.$menu.setAttribute("hidden",""))},g.prototype.handleMenuButtonClick=function(){this.menuIsOpen=!this.menuIsOpen,this.syncState()},y.prototype.init=function(){var t=this.$module;e(this.$inputs,(function(t){var e=t.getAttribute("data-aria-controls");e&&document.getElementById(e)&&(t.setAttribute("aria-controls",e),t.removeAttribute("data-aria-controls"))})),"onpageshow"in window?window.addEventListener("pageshow",this.syncAllConditionalReveals.bind(this)):window.addEventListener("DOMContentLoaded",this.syncAllConditionalReveals.bind(this)),this.syncAllConditionalReveals(),t.addEventListener("click",this.handleClick.bind(this))},y.prototype.syncAllConditionalReveals=function(){e(this.$inputs,this.syncConditionalRevealWithInputState.bind(this))},y.prototype.syncConditionalRevealWithInputState=function(t){var e=document.getElementById(t.getAttribute("aria-controls"));if(e&&e.classList.contains("govuk-radios__conditional")){var n=t.checked;t.setAttribute("aria-expanded",n),e.classList.toggle("govuk-radios__conditional--hidden",!n)}},y.prototype.handleClick=function(t){var n=t.target;"radio"===n.type&&e(document.querySelectorAll('input[type="radio"][aria-controls]'),function(t){var e=t.form===n.form;t.name===n.name&&e&&this.syncConditionalRevealWithInputState(t)}.bind(this))},w.prototype.init=function(){this.$module&&(this.$linkedElement=this.getLinkedElement(),this.$linkedElement&&this.$module.addEventListener("click",this.focusLinkedElement.bind(this)))},w.prototype.getLinkedElement=function(){var t=this.getFragmentFromUrl();return!!t&&document.getElementById(t)},w.prototype.focusLinkedElement=function(){var t=this.$linkedElement;t.getAttribute("tabindex")||(t.setAttribute("tabindex","-1"),t.classList.add("govuk-skip-link-focused-element"),this.linkedElementListener||(this.$linkedElement.addEventListener("blur",this.removeFocusProperties.bind(this)),this.linkedElementListener=!0)),t.focus()},w.prototype.removeFocusProperties=function(){this.$linkedElement.removeAttribute("tabindex"),this.$linkedElement.classList.remove("govuk-skip-link-focused-element")},w.prototype.getFragmentFromUrl=function(){return!!this.$module.hash&&this.$module.hash.split("#").pop()},function(t){"document"in this&&"nextElementSibling"in document.documentElement||Object.defineProperty(Element.prototype,"nextElementSibling",{get:function(){for(var t=this.nextSibling;t&&1!==t.nodeType;)t=t.nextSibling;return t}})}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),function(t){"document"in this&&"previousElementSibling"in document.documentElement||Object.defineProperty(Element.prototype,"previousElementSibling",{get:function(){for(var t=this.previousSibling;t&&1!==t.nodeType;)t=t.previousSibling;return t}})}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),E.prototype.init=function(){"function"==typeof window.matchMedia?this.setupResponsiveChecks():this.setup()},E.prototype.setupResponsiveChecks=function(){this.mql=window.matchMedia("(min-width: 40.0625em)"),this.mql.addListener(this.checkMode.bind(this)),this.checkMode()},E.prototype.checkMode=function(){this.mql.matches?this.setup():this.teardown()},E.prototype.setup=function(){var t=this.$module,n=this.$tabs,o=t.querySelector(".govuk-tabs__list"),i=t.querySelectorAll(".govuk-tabs__list-item");if(n&&o&&i){o.setAttribute("role","tablist"),e(i,(function(t){t.setAttribute("role","presentation")})),e(n,function(t){this.setAttributes(t),t.boundTabClick=this.onTabClick.bind(this),t.boundTabKeydown=this.onTabKeydown.bind(this),t.addEventListener("click",t.boundTabClick,!0),t.addEventListener("keydown",t.boundTabKeydown,!0),this.hideTab(t)}.bind(this));var s=this.getTab(window.location.hash)||this.$tabs[0];this.showTab(s),t.boundOnHashChange=this.onHashChange.bind(this),window.addEventListener("hashchange",t.boundOnHashChange,!0)}},E.prototype.teardown=function(){var t=this.$module,n=this.$tabs,o=t.querySelector(".govuk-tabs__list"),i=t.querySelectorAll(".govuk-tabs__list-item");n&&o&&i&&(o.removeAttribute("role"),e(i,(function(t){t.removeAttribute("role","presentation")})),e(n,function(t){t.removeEventListener("click",t.boundTabClick,!0),t.removeEventListener("keydown",t.boundTabKeydown,!0),this.unsetAttributes(t)}.bind(this)),window.removeEventListener("hashchange",t.boundOnHashChange,!0))},E.prototype.onHashChange=function(t){var e=window.location.hash,n=this.getTab(e);if(n)if(this.changingHash)this.changingHash=!1;else{var o=this.getCurrentTab();this.hideTab(o),this.showTab(n),n.focus()}},E.prototype.hideTab=function(t){this.unhighlightTab(t),this.hidePanel(t)},E.prototype.showTab=function(t){this.highlightTab(t),this.showPanel(t)},E.prototype.getTab=function(t){return this.$module.querySelector('.govuk-tabs__tab[href="'+t+'"]')},E.prototype.setAttributes=function(t){var e=this.getHref(t).slice(1);t.setAttribute("id","tab_"+e),t.setAttribute("role","tab"),t.setAttribute("aria-controls",e),t.setAttribute("aria-selected","false"),t.setAttribute("tabindex","-1");var n=this.getPanel(t);n.setAttribute("role","tabpanel"),n.setAttribute("aria-labelledby",t.id),n.classList.add(this.jsHiddenClass)},E.prototype.unsetAttributes=function(t){t.removeAttribute("id"),t.removeAttribute("role"),t.removeAttribute("aria-controls"),t.removeAttribute("aria-selected"),t.removeAttribute("tabindex");var e=this.getPanel(t);e.removeAttribute("role"),e.removeAttribute("aria-labelledby"),e.classList.remove(this.jsHiddenClass)},E.prototype.onTabClick=function(t){if(!t.target.classList.contains("govuk-tabs__tab"))return!1;t.preventDefault();var e=t.target,n=this.getCurrentTab();this.hideTab(n),this.showTab(e),this.createHistoryEntry(e)},E.prototype.createHistoryEntry=function(t){var e=this.getPanel(t),n=e.id;e.id="",this.changingHash=!0,window.location.hash=this.getHref(t).slice(1),e.id=n},E.prototype.onTabKeydown=function(t){switch(t.keyCode){case this.keys.left:case this.keys.up:this.activatePreviousTab(),t.preventDefault();break;case this.keys.right:case this.keys.down:this.activateNextTab(),t.preventDefault()}},E.prototype.activateNextTab=function(){var t=this.getCurrentTab(),e=t.parentNode.nextElementSibling;if(e)var n=e.querySelector(".govuk-tabs__tab");n&&(this.hideTab(t),this.showTab(n),n.focus(),this.createHistoryEntry(n))},E.prototype.activatePreviousTab=function(){var t=this.getCurrentTab(),e=t.parentNode.previousElementSibling;if(e)var n=e.querySelector(".govuk-tabs__tab");n&&(this.hideTab(t),this.showTab(n),n.focus(),this.createHistoryEntry(n))},E.prototype.getPanel=function(t){return this.$module.querySelector(this.getHref(t))},E.prototype.showPanel=function(t){this.getPanel(t).classList.remove(this.jsHiddenClass)},E.prototype.hidePanel=function(t){this.getPanel(t).classList.add(this.jsHiddenClass)},E.prototype.unhighlightTab=function(t){t.setAttribute("aria-selected","false"),t.parentNode.classList.remove("govuk-tabs__list-item--selected"),t.setAttribute("tabindex","-1")},E.prototype.highlightTab=function(t){t.setAttribute("aria-selected","true"),t.parentNode.classList.add("govuk-tabs__list-item--selected"),t.setAttribute("tabindex","0")},E.prototype.getCurrentTab=function(){return this.$module.querySelector(".govuk-tabs__list-item--selected .govuk-tabs__tab")},E.prototype.getHref=function(t){var e=t.getAttribute("href");return e.slice(e.indexOf("#"),e.length)},t.initAll=function(t){var n=void 0!==(t=void 0!==t?t:{}).scope?t.scope:document;e(n.querySelectorAll('[data-module="govuk-accordion"]'),(function(e){new l(e,t.accordion).init()})),e(n.querySelectorAll('[data-module="govuk-button"]'),(function(e){new u(e,t.button).init()})),e(n.querySelectorAll('[data-module="govuk-character-count"]'),(function(e){new f(e,t.characterCount).init()})),e(n.querySelectorAll('[data-module="govuk-checkboxes"]'),(function(t){new m(t).init()})),e(n.querySelectorAll('[data-module="govuk-details"]'),(function(t){new d(t).init()}));var o=n.querySelector('[data-module="govuk-error-summary"]');o&&new b(o,t.errorSummary).init();var i=n.querySelector('[data-module="govuk-header"]');i&&new g(i).init(),e(n.querySelectorAll('[data-module="govuk-notification-banner"]'),(function(e){new v(e,t.notificationBanner).init()})),e(n.querySelectorAll('[data-module="govuk-radios"]'),(function(t){new y(t).init()})),new w(n.querySelector('[data-module="govuk-skip-link"]')).init(),e(n.querySelectorAll('[data-module="govuk-tabs"]'),(function(t){new E(t).init()}))},t.Accordion=l,t.Button=u,t.Details=d,t.CharacterCount=f,t.Checkboxes=m,t.ErrorSummary=b,t.Header=g,t.NotificationBanner=v,t.Radios=y,t.SkipLink=w,t.Tabs=E}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMvZ292dWstNC40LjEuanMiXSwibmFtZXMiOlsiZ2xvYmFsIiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJHT1ZVS0Zyb250ZW5kIiwidGhpcyIsIm5vZGVMaXN0Rm9yRWFjaCIsIm5vZGVzIiwiY2FsbGJhY2siLCJ3aW5kb3ciLCJOb2RlTGlzdCIsInByb3RvdHlwZSIsImZvckVhY2giLCJpIiwibGVuZ3RoIiwiY2FsbCIsIm1lcmdlQ29uZmlncyIsImZsYXR0ZW5PYmplY3QiLCJjb25maWdPYmplY3QiLCJmbGF0dGVuZWRPYmplY3QiLCJmbGF0dGVuTG9vcCIsIm9iaiIsInByZWZpeCIsImtleSIsIk9iamVjdCIsImhhc093blByb3BlcnR5IiwidmFsdWUiLCJwcmVmaXhlZEtleSIsImZvcm1hdHRlZENvbmZpZ09iamVjdCIsImFyZ3VtZW50cyIsImV4dHJhY3RDb25maWdCeU5hbWVzcGFjZSIsIm5hbWVzcGFjZSIsIkVycm9yIiwibmV3T2JqZWN0Iiwia2V5UGFydHMiLCJzcGxpdCIsInNoaWZ0Iiwiam9pbiIsIkkxOG4iLCJ0cmFuc2xhdGlvbnMiLCJjb25maWciLCJsb2NhbGUiLCJkb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsImxhbmciLCJub3JtYWxpc2VTdHJpbmciLCJ0cmltbWVkVmFsdWUiLCJ0cmltIiwiaXNGaW5pdGUiLCJOdW1iZXIiLCJub3JtYWxpc2VEYXRhc2V0IiwiZGF0YXNldCIsIm91dCIsInQiLCJsb29rdXBLZXkiLCJvcHRpb25zIiwiY291bnQiLCJnZXRQbHVyYWxTdWZmaXgiLCJ0cmFuc2xhdGlvblN0cmluZyIsIm1hdGNoIiwicmVwbGFjZVBsYWNlaG9sZGVycyIsImZvcm1hdHRlciIsImhhc0ludGxOdW1iZXJGb3JtYXRTdXBwb3J0IiwiSW50bCIsIk51bWJlckZvcm1hdCIsInJlcGxhY2UiLCJwbGFjZWhvbGRlcldpdGhCcmFjZXMiLCJwbGFjZWhvbGRlcktleSIsInBsYWNlaG9sZGVyVmFsdWUiLCJmb3JtYXQiLCJoYXNJbnRsUGx1cmFsUnVsZXNTdXBwb3J0IiwiQm9vbGVhbiIsIlBsdXJhbFJ1bGVzIiwic3VwcG9ydGVkTG9jYWxlc09mIiwicHJlZmVycmVkRm9ybSIsInNlbGVjdCIsInNlbGVjdFBsdXJhbEZvcm1Vc2luZ0ZhbGxiYWNrUnVsZXMiLCJjb25zb2xlIiwid2FybiIsIk1hdGgiLCJhYnMiLCJmbG9vciIsInJ1bGVzZXQiLCJnZXRQbHVyYWxSdWxlc0ZvckxvY2FsZSIsInBsdXJhbFJ1bGVzIiwibG9jYWxlU2hvcnQiLCJwbHVyYWxSdWxlIiwicGx1cmFsUnVsZXNNYXAiLCJsYW5ndWFnZXMiLCJhcmFiaWMiLCJjaGluZXNlIiwiZnJlbmNoIiwiZ2VybWFuIiwiaXJpc2giLCJydXNzaWFuIiwic2NvdHRpc2giLCJzcGFuaXNoIiwid2Vsc2giLCJuIiwibGFzdFR3byIsImxhc3QiLCJ1bmRlZmluZWQiLCJuYXRpdmVEZWZpbmVQcm9wZXJ0eSIsInN1cHBvcnRzQWNjZXNzb3JzIiwiRVJSX0FDQ0VTU09SU19OT1RfU1VQUE9SVEVEIiwiRVJSX1ZBTFVFX0FDQ0VTU09SUyIsImRlZmluZVByb3BlcnR5IiwiZSIsIm9iamVjdCIsInByb3BlcnR5IiwiZGVzY3JpcHRvciIsIkVsZW1lbnQiLCJUeXBlRXJyb3IiLCJwcm9wZXJ0eVN0cmluZyIsIlN0cmluZyIsImhhc1ZhbHVlT3JXcml0YWJsZSIsImdldHRlclR5cGUiLCJnZXQiLCJzZXR0ZXJUeXBlIiwic2V0IiwiX19kZWZpbmVHZXR0ZXJfXyIsIl9fZGVmaW5lU2V0dGVyX18iLCJzZWxmIiwiRnVuY3Rpb24iLCJ0aGF0IiwiaXNDYWxsYWJsZSIsIiRBcnJheSIsIkFycmF5IiwiJE9iamVjdCIsIk9iamVjdFByb3RvdHlwZSIsIkFycmF5UHJvdG90eXBlIiwiRW1wdHkiLCJ0b19zdHJpbmciLCJ0b1N0cmluZyIsImhhc1RvU3RyaW5nVGFnIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJmblRvU3RyIiwidHJ5RnVuY3Rpb25PYmplY3QiLCJmbkNsYXNzIiwiZ2VuQ2xhc3MiLCJzdHJDbGFzcyIsImFycmF5X3NsaWNlIiwic2xpY2UiLCJhcnJheV9jb25jYXQiLCJjb25jYXQiLCJhcnJheV9wdXNoIiwicHVzaCIsIm1heCIsInRhcmdldCIsImJvdW5kIiwiYXJncyIsImJpbmRlciIsInJlc3VsdCIsImFwcGx5IiwiYm91bmRMZW5ndGgiLCJib3VuZEFyZ3MiLCJ4IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImNsYXNzTmFtZSIsIkRPTVRva2VuTGlzdCIsImNyZWF0ZUVsZW1lbnROUyIsImRwU3VwcG9ydCIsImRlZmluZUdldHRlciIsIm5hbWUiLCJmbiIsImNvbmZpZ3VyYWJsZSIsImVsIiwicHJvcCIsInRva2VucyIsInRva2VuTWFwIiwibWF4TGVuZ3RoIiwiYWRkSW5kZXhHZXR0ZXIiLCJwcmVvcCIsInJlaW5kZXgiLCJlcnJvciIsInJTcGFjZSIsInRlc3QiLCJTeW50YXhFcnJvciIsImNvZGUiLCJiYXNlVmFsIiwidG9Mb2NhbGVTdHJpbmciLCJpdGVtIiwiaWR4IiwiY29udGFpbnMiLCJ0b2tlbiIsImFkZCIsImwiLCJyZW1vdmUiLCJpZ25vcmUiLCJmb3JjZSIsImNvbnN0cnVjdG9yIiwibmF0aXZlIiwiV29ya2VyR2xvYmFsU2NvcGUiLCJpbXBvcnRTY3JpcHRzIiwiSFRNTERvY3VtZW50IiwiRG9jdW1lbnQiLCJIVE1MRWxlbWVudCIsImludGVydmFsIiwidmJvZHkiLCJhcHBlbmRDaGlsZCIsImZyYW1lRG9jdW1lbnQiLCJjb250ZW50V2luZG93IiwiY2FjaGUiLCJzaGl2IiwiZWxlbWVudCIsImRlZXAiLCJjaGlsZE5vZGUiLCJjaGlsZE5vZGVzIiwiaW5kZXgiLCJub2RlVHlwZSIsImVsZW1lbnRzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJuYXRpdmVDcmVhdGVFbGVtZW50IiwibG9vcExpbWl0IiwiYXR0YWNoRXZlbnQiLCJldmVudCIsInByb3BlcnR5TmFtZSIsIm5vblZhbHVlIiwibmV3VmFsdWUiLCJvbGRWYWx1ZSIsImhhc0F0dHJpYnV0ZSIsImdldEF0dHJpYnV0ZSIsImJvZHlDaGVjayIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInNldEludGVydmFsIiwibm9kZU5hbWUiLCJ0b0xvd2VyQ2FzZSIsInJlbW92ZUNoaWxkIiwiY2xlYXJUaW1lb3V0IiwiYm9keSIsInJlYWR5U3RhdGUiLCJhZGRQcm9wIiwibyIsImF0dHIiLCJ0b2tlbkxpc3QiLCJUSElTIiwiZ2liYmVyaXNoUHJvcGVydHkiLCJ2aXNhZ2UiLCJtaXJyb3IiLCJyZWZsZWN0aW9ucyIsIl9SIiwiSFRNTExpbmtFbGVtZW50IiwiSFRNTEFuY2hvckVsZW1lbnQiLCJIVE1MQXJlYUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJhQiIsImF0dHJpYnV0ZXMiLCJtYXAiLCJhdHRyaWJ1dGUiLCJwcm9wTmFtZSIsInN1YnN0ciIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwiZW51bWVyYWJsZSIsImJpbmQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJBQ0NPUkRJT05fVFJBTlNMQVRJT05TIiwiaGlkZUFsbFNlY3Rpb25zIiwiaGlkZVNlY3Rpb24iLCJoaWRlU2VjdGlvbkFyaWFMYWJlbCIsInNob3dBbGxTZWN0aW9ucyIsInNob3dTZWN0aW9uIiwic2hvd1NlY3Rpb25BcmlhTGFiZWwiLCJBY2NvcmRpb24iLCIkbW9kdWxlIiwiJHNlY3Rpb25zIiwicXVlcnlTZWxlY3RvckFsbCIsImJyb3dzZXJTdXBwb3J0c1Nlc3Npb25TdG9yYWdlIiwiaGVscGVyIiwiY2hlY2tGb3JTZXNzaW9uU3RvcmFnZSIsImRlZmF1bHRDb25maWciLCJpMThuIiwiY29udHJvbHNDbGFzcyIsInNob3dBbGxDbGFzcyIsInNob3dBbGxUZXh0Q2xhc3MiLCJzZWN0aW9uRXhwYW5kZWRDbGFzcyIsInNlY3Rpb25CdXR0b25DbGFzcyIsInNlY3Rpb25IZWFkZXJDbGFzcyIsInNlY3Rpb25IZWFkaW5nQ2xhc3MiLCJzZWN0aW9uSGVhZGluZ1RleHRDbGFzcyIsInNlY3Rpb25IZWFkaW5nVGV4dEZvY3VzQ2xhc3MiLCJzZWN0aW9uU2hvd0hpZGVUb2dnbGVDbGFzcyIsInNlY3Rpb25TaG93SGlkZVRvZ2dsZUZvY3VzQ2xhc3MiLCJzZWN0aW9uU2hvd0hpZGVUZXh0Q2xhc3MiLCJ1cENoZXZyb25JY29uQ2xhc3MiLCJkb3duQ2hldnJvbkljb25DbGFzcyIsInNlY3Rpb25TdW1tYXJ5Q2xhc3MiLCJzZWN0aW9uU3VtbWFyeUZvY3VzQ2xhc3MiLCJpbml0IiwiaW5pdENvbnRyb2xzIiwiaW5pdFNlY3Rpb25IZWFkZXJzIiwiYXJlQWxsU2VjdGlvbnNPcGVuIiwiY2hlY2tJZkFsbFNlY3Rpb25zT3BlbiIsInVwZGF0ZVNob3dBbGxCdXR0b24iLCIkc2hvd0FsbEJ1dHRvbiIsIiRpY29uIiwiJGFjY29yZGlvbkNvbnRyb2xzIiwiaW5zZXJ0QmVmb3JlIiwiZmlyc3RDaGlsZCIsIiR3cmFwcGVyc2hvd0FsbFRleHQiLCJhZGRFdmVudExpc3RlbmVyIiwib25TaG93T3JIaWRlQWxsVG9nZ2xlIiwiJHNlY3Rpb24iLCIkaGVhZGVyIiwicXVlcnlTZWxlY3RvciIsImNvbnN0cnVjdEhlYWRlck1hcmt1cCIsInNldEV4cGFuZGVkIiwiaXNFeHBhbmRlZCIsIm9uU2VjdGlvblRvZ2dsZSIsInNldEluaXRpYWxTdGF0ZSIsIiRoZWFkZXJXcmFwcGVyIiwiJHNwYW4iLCIkaGVhZGluZyIsIiRzdW1tYXJ5IiwiJGJ1dHRvbiIsImlkIiwibm9kZVZhbHVlIiwiJGhlYWRpbmdUZXh0IiwiJGhlYWRpbmdUZXh0Rm9jdXMiLCJpbm5lckhUTUwiLCIkc2hvd1RvZ2dsZSIsIiRzaG93VG9nZ2xlRm9jdXMiLCIkc2hvd1RvZ2dsZVRleHQiLCJnZXRCdXR0b25QdW5jdHVhdGlvbkVsIiwiJHN1bW1hcnlTcGFuIiwiJHN1bW1hcnlTcGFuRm9jdXMiLCJqIiwicGFyZW50Tm9kZSIsInJlcGxhY2VDaGlsZCIsImV4cGFuZGVkIiwic3RvcmVTdGF0ZSIsIm5vd0V4cGFuZGVkIiwiJHNob3dIaWRlVGV4dCIsIm5ld0J1dHRvblRleHQiLCJpbm5lclRleHQiLCJhcmlhTGFiZWxQYXJ0cyIsImFyaWFMYWJlbE1lc3NhZ2UiLCIkc2hvd0FsbEljb24iLCIkc2hvd0FsbFRleHQiLCJ0ZXN0U3RyaW5nIiwic2Vzc2lvblN0b3JhZ2UiLCJzZXRJdGVtIiwiZ2V0SXRlbSIsInJlbW92ZUl0ZW0iLCJleGNlcHRpb24iLCJjb250ZW50SWQiLCJjb250ZW50U3RhdGUiLCIkcHVuY3R1YXRpb25FbCIsIldpbmRvdyIsIkV2ZW50IiwidW5saXN0ZW5hYmxlV2luZG93RXZlbnRzIiwiY2xpY2siLCJkYmxjbGljayIsImtleXVwIiwia2V5cHJlc3MiLCJrZXlkb3duIiwibW91c2Vkb3duIiwibW91c2V1cCIsIm1vdXNlbW92ZSIsIm1vdXNlb3ZlciIsIm1vdXNlZW50ZXIiLCJtb3VzZWxlYXZlIiwibW91c2VvdXQiLCJzdG9yYWdlIiwic3RvcmFnZWNvbW1pdCIsInRleHRpbnB1dCIsImV4aXN0aW5nUHJvdG8iLCJ0eXBlIiwiZXZlbnRJbml0RGljdCIsImNyZWF0ZUV2ZW50IiwiYnViYmxlcyIsImNhbmNlbGFibGUiLCJpbml0RXZlbnQiLCJjcmVhdGVFdmVudE9iamVjdCIsIndyaXRhYmxlIiwibGlzdGVuZXIiLCJfZXZlbnRzIiwiZXZlbnRFbGVtZW50IiwibGlzdCIsImV2ZW50cyIsInByZXZlbnREZWZhdWx0IiwicmV0dXJuVmFsdWUiLCJzdG9wUHJvcGFnYXRpb24iLCJjYW5jZWxCdWJibGUiLCJzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJjYW5jZWxJbW1lZGlhdGUiLCJjdXJyZW50VGFyZ2V0IiwicmVsYXRlZFRhcmdldCIsImZyb21FbGVtZW50Iiwic3JjRWxlbWVudCIsInRpbWVTdGFtcCIsIkRhdGUiLCJnZXRUaW1lIiwiY2xpZW50WCIsInBhZ2VYIiwic2Nyb2xsTGVmdCIsInBhZ2VZIiwiY2xpZW50WSIsInNjcm9sbFRvcCIsImluZGV4T2YiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic3BsaWNlIiwiZGV0YWNoRXZlbnQiLCJkaXNwYXRjaEV2ZW50IiwiY2FuY2VsQnViYmxlRXZlbnQiLCJmaXJlRXZlbnQiLCJwYXJlbnRXaW5kb3ciLCJhcnJheSIsIkJ1dHRvbiIsImRlYm91bmNlRm9ybVN1Ym1pdFRpbWVyIiwicHJldmVudERvdWJsZUNsaWNrIiwiaGFuZGxlS2V5RG93biIsImRlYm91bmNlIiwia2V5Q29kZSIsInNldFRpbWVvdXQiLCJERUJPVU5DRV9USU1FT1VUX0lOX1NFQ09ORFMiLCJEZXRhaWxzIiwiY2xvc2VzdEF0dHJpYnV0ZVZhbHVlIiwiJGVsZW1lbnQiLCJhdHRyaWJ1dGVOYW1lIiwiY2xvc2VzdEVsZW1lbnRXaXRoQXR0cmlidXRlIiwiY2xvc2VzdCIsIm9wZW4iLCJwb2x5ZmlsbERldGFpbHMiLCJkIiwiJGNvbnRlbnQiLCJwZXJmb3JtYW5jZSIsIm5vdyIsImMiLCJyIiwicmFuZG9tIiwidGFiSW5kZXgiLCJzdHlsZSIsImRpc3BsYXkiLCJwb2x5ZmlsbEhhbmRsZUlucHV0cyIsInBvbHlmaWxsU2V0QXR0cmlidXRlcyIsIm5vZGUiLCJtYXRjaGVzIiwid2Via2l0TWF0Y2hlc1NlbGVjdG9yIiwib01hdGNoZXNTZWxlY3RvciIsIm1zTWF0Y2hlc1NlbGVjdG9yIiwibW96TWF0Y2hlc1NlbGVjdG9yIiwic2VsZWN0b3IiLCJvd25lckRvY3VtZW50IiwiU1ZHRWxlbWVudCIsInBhcmVudEVsZW1lbnQiLCJDSEFSQUNURVJfQ09VTlRfVFJBTlNMQVRJT05TIiwiY2hhcmFjdGVyc1VuZGVyTGltaXQiLCJvbmUiLCJvdGhlciIsImNoYXJhY3RlcnNBdExpbWl0IiwiY2hhcmFjdGVyc092ZXJMaW1pdCIsIndvcmRzVW5kZXJMaW1pdCIsIndvcmRzQXRMaW1pdCIsIndvcmRzT3ZlckxpbWl0IiwidGV4dGFyZWFEZXNjcmlwdGlvbiIsIkNoYXJhY3RlckNvdW50IiwidGhyZXNob2xkIiwiZGF0YXNldENvbmZpZyIsImNvbmZpZ092ZXJyaWRlcyIsIm1heGxlbmd0aCIsIm1heHdvcmRzIiwiJHRleHRhcmVhIiwiJHZpc2libGVDb3VudE1lc3NhZ2UiLCIkc2NyZWVuUmVhZGVyQ291bnRNZXNzYWdlIiwibGFzdElucHV0VGltZXN0YW1wIiwiQ2hlY2tib3hlcyIsIiRpbnB1dHMiLCJFcnJvclN1bW1hcnkiLCJkaXNhYmxlQXV0b0ZvY3VzIiwiTm90aWZpY2F0aW9uQmFubmVyIiwiSGVhZGVyIiwiJG1lbnVCdXR0b24iLCIkbWVudSIsIm1lbnVJc09wZW4iLCJtcWwiLCJSYWRpb3MiLCJTa2lwTGluayIsIiRsaW5rZWRFbGVtZW50IiwibGlua2VkRWxlbWVudExpc3RlbmVyIiwiVGFicyIsIiR0YWJzIiwia2V5cyIsImxlZnQiLCJyaWdodCIsInVwIiwiZG93biIsImpzSGlkZGVuQ2xhc3MiLCIkdGV4dGFyZWFEZXNjcmlwdGlvbiIsImdldEVsZW1lbnRCeUlkIiwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50IiwiYmluZENoYW5nZUV2ZW50cyIsInVwZGF0ZUNvdW50TWVzc2FnZSIsImhhbmRsZUtleVVwIiwiaGFuZGxlRm9jdXMiLCJoYW5kbGVCbHVyIiwidXBkYXRlVmlzaWJsZUNvdW50TWVzc2FnZSIsInZhbHVlQ2hlY2tlciIsInVwZGF0ZUlmVmFsdWVDaGFuZ2VkIiwiY2xlYXJJbnRlcnZhbCIsInVwZGF0ZVNjcmVlblJlYWRlckNvdW50TWVzc2FnZSIsInJlbWFpbmluZ051bWJlciIsImlzT3ZlclRocmVzaG9sZCIsImdldENvdW50TWVzc2FnZSIsInRleHQiLCJjb3VudFR5cGUiLCJmb3JtYXRDb3VudE1lc3NhZ2UiLCJ0cmFuc2xhdGlvbktleVN1ZmZpeCIsImN1cnJlbnRMZW5ndGgiLCIkaW5wdXQiLCJzeW5jQWxsQ29uZGl0aW9uYWxSZXZlYWxzIiwiaGFuZGxlQ2xpY2siLCJzeW5jQ29uZGl0aW9uYWxSZXZlYWxXaXRoSW5wdXRTdGF0ZSIsIiR0YXJnZXQiLCJpbnB1dElzQ2hlY2tlZCIsImNoZWNrZWQiLCJ1bkNoZWNrQWxsSW5wdXRzRXhjZXB0IiwiJGlucHV0V2l0aFNhbWVOYW1lIiwiZm9ybSIsInVuQ2hlY2tFeGNsdXNpdmVJbnB1dHMiLCIkZXhjbHVzaXZlSW5wdXQiLCJzZXRGb2N1cyIsImZvY3VzIiwiZm9jdXNUYXJnZXQiLCJ0YWdOYW1lIiwiaHJlZiIsImlucHV0SWQiLCJnZXRGcmFnbWVudEZyb21VcmwiLCIkbGVnZW5kT3JMYWJlbCIsImdldEFzc29jaWF0ZWRMZWdlbmRPckxhYmVsIiwic2Nyb2xsSW50b1ZpZXciLCJwcmV2ZW50U2Nyb2xsIiwidXJsIiwicG9wIiwiJGZpZWxkc2V0IiwibGVnZW5kcyIsIiRjYW5kaWRhdGVMZWdlbmQiLCJsZWdlbmRUb3AiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ0b3AiLCJpbnB1dFJlY3QiLCJoZWlnaHQiLCJpbm5lckhlaWdodCIsIm1hdGNoTWVkaWEiLCJzeW5jU3RhdGUiLCJhZGRMaXN0ZW5lciIsImhhbmRsZU1lbnVCdXR0b25DbGljayIsIiRjbGlja2VkSW5wdXQiLCJoYXNTYW1lRm9ybU93bmVyIiwiZ2V0TGlua2VkRWxlbWVudCIsImZvY3VzTGlua2VkRWxlbWVudCIsImxpbmtlZEVsZW1lbnRJZCIsInJlbW92ZUZvY3VzUHJvcGVydGllcyIsImhhc2giLCJuZXh0U2libGluZyIsInByZXZpb3VzU2libGluZyIsInNldHVwUmVzcG9uc2l2ZUNoZWNrcyIsInNldHVwIiwiY2hlY2tNb2RlIiwidGVhcmRvd24iLCIkdGFiTGlzdCIsIiR0YWJMaXN0SXRlbXMiLCIkaXRlbSIsIiR0YWIiLCJzZXRBdHRyaWJ1dGVzIiwiYm91bmRUYWJDbGljayIsIm9uVGFiQ2xpY2siLCJib3VuZFRhYktleWRvd24iLCJvblRhYktleWRvd24iLCJoaWRlVGFiIiwiJGFjdGl2ZVRhYiIsImdldFRhYiIsImxvY2F0aW9uIiwic2hvd1RhYiIsImJvdW5kT25IYXNoQ2hhbmdlIiwib25IYXNoQ2hhbmdlIiwidW5zZXRBdHRyaWJ1dGVzIiwiJHRhYldpdGhIYXNoIiwiY2hhbmdpbmdIYXNoIiwiJHByZXZpb3VzVGFiIiwiZ2V0Q3VycmVudFRhYiIsInVuaGlnaGxpZ2h0VGFiIiwiaGlkZVBhbmVsIiwiaGlnaGxpZ2h0VGFiIiwic2hvd1BhbmVsIiwicGFuZWxJZCIsImdldEhyZWYiLCIkcGFuZWwiLCJnZXRQYW5lbCIsIiRuZXdUYWIiLCIkY3VycmVudFRhYiIsImNyZWF0ZUhpc3RvcnlFbnRyeSIsImFjdGl2YXRlUHJldmlvdXNUYWIiLCJhY3RpdmF0ZU5leHRUYWIiLCJjdXJyZW50VGFiIiwibmV4dFRhYkxpc3RJdGVtIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwibmV4dFRhYiIsInByZXZpb3VzVGFiTGlzdEl0ZW0iLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwicHJldmlvdXNUYWIiLCJ0YWIiLCJpbml0QWxsIiwiJHNjb3BlIiwic2NvcGUiLCIkYWNjb3JkaW9uIiwiYWNjb3JkaW9uIiwiYnV0dG9uIiwiJGNoYXJhY3RlckNvdW50IiwiY2hhcmFjdGVyQ291bnQiLCIkY2hlY2tib3giLCIkZGV0YWlsIiwiJGVycm9yU3VtbWFyeSIsImVycm9yU3VtbWFyeSIsIiRub3RpZmljYXRpb25CYW5uZXIiLCJub3RpZmljYXRpb25CYW5uZXIiLCIkcmFkaW8iXSwibWFwcGluZ3MiOiJDQUFDLFNBQVVBLEVBQVFDLEdBQ0MsaUJBQVpDLFNBQTBDLG9CQUFYQyxPQUF5QkYsRUFBUUMsU0FDckQsbUJBQVhFLFFBQXlCQSxPQUFPQyxJQUFNRCxPQUFPLGdCQUFpQixDQUFDLFdBQVlILEdBQ2pGQSxFQUFTRCxFQUFPTSxjQUFnQixDQUFBLEVBQ2xDLENBSkEsTUFJRUMsR0FBSSxTQUFhTCxHQXFCbkIsU0FBU00sRUFBaUJDLEVBQU9DLEdBQy9CLEdBQUlDLE9BQU9DLFNBQVNDLFVBQVVDLFFBQzVCLE9BQU9MLEVBQU1LLFFBQVFKLEdBRXZCLElBQUssSUFBSUssRUFBSSxFQUFHQSxFQUFJTixFQUFNTyxPQUFRRCxJQUNoQ0wsRUFBU08sS0FBS04sT0FBUUYsRUFBTU0sR0FBSUEsRUFBR04sRUFFdkMsQ0E4QkEsU0FBU1MsSUFnRFAs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VTRTLEVBQU8zUyxjQUFjLGdDQUMvQkQsR0FDRixJQUFJd0ssRUFBT3hLLEdBQVNmLE9BSXRCN1IsRUFEMkJ3bEIsRUFBT2pWLGlCQUFpQiw4Q0FDYixTQUFVNFYsR0FDOUMsSUFBSWhKLEVBQW1CZ0osRUFBcUJqa0IsRUFBT2trQixvQkFBb0J2VSxNQUMzRSxJQUdFN1IsRUFEY3dsQixFQUFPalYsaUJBQWlCLGlDQUNiLFNBQVU4VixHQUNqQyxJQUFJNUksRUFBTzRJLEdBQVF4VSxNQUN2QixJQUlFLElBQUk2TCxFQURZOEgsRUFBTzNTLGNBQWMsb0NBQ2JoQixPQUd4QjdSLEVBRFl3bEIsRUFBT2pWLGlCQUFpQiwrQkFDYixTQUFVdU4sR0FDL0IsSUFBSUQsRUFBS0MsR0FBT2pNLE1BQ3BCLEdBQ0EsRUFlQW5TLEVBQVEwUSxVQUFZQSxFQUNwQjFRLEVBQVEyWixPQUFTQSxFQUNqQjNaLEVBQVFtYSxRQUFVQSxFQUNsQm5hLEVBQVEyYyxlQUFpQkEsRUFDekIzYyxFQUFRcWQsV0FBYUEsRUFDckJyZCxFQUFRdWQsYUFBZUEsRUFDdkJ2ZCxFQUFRMGQsT0FBU0EsRUFDakIxZCxFQUFReWQsbUJBQXFCQSxFQUM3QnpkLEVBQVErZCxPQUFTQSxFQUNqQi9kLEVBQVFnZSxTQUFXQSxFQUNuQmhlLEVBQVFtZSxLQUFPQSxDQUVkIiwiZmlsZSI6ImdvdnVrLTQuNC4xLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcblx0dHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gZmFjdG9yeShleHBvcnRzKSA6XG5cdHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZSgnR09WVUtGcm9udGVuZCcsIFsnZXhwb3J0cyddLCBmYWN0b3J5KSA6XG5cdChmYWN0b3J5KChnbG9iYWwuR09WVUtGcm9udGVuZCA9IHt9KSkpO1xufSh0aGlzLCAoZnVuY3Rpb24gKGV4cG9ydHMpIHsgJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIENvbW1vbiBoZWxwZXJzIHdoaWNoIGRvIG5vdCByZXF1aXJlIHBvbHlmaWxsLlxuICpcbiAqIElNUE9SVEFOVDogSWYgYSBoZWxwZXIgcmVxdWlyZSBhIHBvbHlmaWxsLCBwbGVhc2UgaXNvbGF0ZSBpdCBpbiBpdHMgb3duIG1vZHVsZVxuICogc28gdGhhdCB0aGUgcG9seWZpbGwgY2FuIGJlIHByb3Blcmx5IHRyZWUtc2hha2VuIGFuZCBkb2VzIG5vdCBidXJkZW5cbiAqIHRoZSBjb21wb25lbnRzIHRoYXQgZG8gbm90IG5lZWQgdGhhdCBoZWxwZXJcbiAqXG4gKiBAbW9kdWxlIGNvbW1vbi9pbmRleFxuICovXG5cbi8qKlxuICogVE9ETzogSWRlYWxseSB0aGlzIHdvdWxkIGJlIGEgTm9kZUxpc3QucHJvdG90eXBlLmZvckVhY2ggcG9seWZpbGxcbiAqIFRoaXMgc2VlbXMgdG8gZmFpbCBpbiBJRTgsIHJlcXVpcmVzIG1vcmUgaW52ZXN0aWdhdGlvbi5cbiAqIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2ltYWdpdGFtYS9ub2RlbGlzdC1mb3JlYWNoLXBvbHlmaWxsXG4gKlxuICogQHBhcmFtIHtOb2RlTGlzdE9mPEVsZW1lbnQ+fSBub2RlcyAtIE5vZGVMaXN0IGZyb20gcXVlcnlTZWxlY3RvckFsbCgpXG4gKiBAcGFyYW0ge25vZGVMaXN0SXRlcmF0b3J9IGNhbGxiYWNrIC0gQ2FsbGJhY2sgZnVuY3Rpb24gdG8gcnVuIGZvciBlYWNoIG5vZGVcbiAqIEByZXR1cm5zIHt1bmRlZmluZWR9XG4gKi9cbmZ1bmN0aW9uIG5vZGVMaXN0Rm9yRWFjaCAobm9kZXMsIGNhbGxiYWNrKSB7XG4gIGlmICh3aW5kb3cuTm9kZUxpc3QucHJvdG90eXBlLmZvckVhY2gpIHtcbiAgICByZXR1cm4gbm9kZXMuZm9yRWFjaChjYWxsYmFjaylcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgY2FsbGJhY2suY2FsbCh3aW5kb3csIG5vZGVzW2ldLCBpLCBub2Rlcyk7XG4gIH1cbn1cblxuLyoqXG4gKiBVc2VkIHRvIGdlbmVyYXRlIGEgdW5pcXVlIHN0cmluZywgYWxsb3dzIG11bHRpcGxlIGluc3RhbmNlcyBvZiB0aGUgY29tcG9uZW50XG4gKiB3aXRob3V0IHRoZW0gY29uZmxpY3Rpbmcgd2l0aCBlYWNoIG90aGVyLlxuICogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzg4MDk0NzJcbiAqXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBVbmlxdWUgSURcbiAqL1xuZnVuY3Rpb24gZ2VuZXJhdGVVbmlxdWVJRCAoKSB7XG4gIHZhciBkID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gIGlmICh0eXBlb2Ygd2luZG93LnBlcmZvcm1hbmNlICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygd2luZG93LnBlcmZvcm1hbmNlLm5vdyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGQgKz0gd2luZG93LnBlcmZvcm1hbmNlLm5vdygpOyAvLyB1c2UgaGlnaC1wcmVjaXNpb24gdGltZXIgaWYgYXZhaWxhYmxlXG4gIH1cbiAgcmV0dXJuICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgZnVuY3Rpb24gKGMpIHtcbiAgICB2YXIgciA9IChkICsgTWF0aC5yYW5kb20oKSAqIDE2KSAlIDE2IHwgMDtcbiAgICBkID0gTWF0aC5mbG9vcihkIC8gMTYpO1xuICAgIHJldHVybiAoYyA9PT0gJ3gnID8gciA6IChyICYgMHgzIHwgMHg4KSkudG9TdHJpbmcoMTYpXG4gIH0pXG59XG5cbi8qKlxuICogQ29uZmlnIGZsYXR0ZW5pbmcgZnVuY3Rpb25cbiAqXG4gKiBUYWtlcyBhbnkgbnVtYmVyIG9mIG9iamVjdHMsIGZsYXR0ZW5zIHRoZW0gaW50byBuYW1lc3BhY2VkIGtleS12YWx1ZSBwYWlycyxcbiAqIChlLmcuIHsnaTE4bi5zaG93U2VjdGlvbic6ICdTaG93IHNlY3Rpb24nfSkgYW5kIGNvbWJpbmVzIHRoZW0gdG9nZXRoZXIsIHdpdGhcbiAqIGdyZWF0ZXN0IHByaW9yaXR5IG9uIHRoZSBMQVNUIGl0ZW0gcGFzc2VkIGluLlxuICpcbiAqIEByZXR1cm5zIHtvYmplY3R9IEEgZmxhdHRlbmVkIG9iamVjdCBvZiBrZXktdmFsdWUgcGFpcnMuXG4gKi9cbmZ1bmN0aW9uIG1lcmdlQ29uZmlncyAoLyogY29uZmlnT2JqZWN0MSwgY29uZmlnT2JqZWN0MiwgLi4uY29uZmlnT2JqZWN0cyAqLykge1xuICAvKipcbiAgICogRnVuY3Rpb24gdG8gdGFrZSBuZXN0ZWQgb2JqZWN0cyBhbmQgZmxhdHRlbiB0aGVtIHRvIGEgZG90LXNlcGFyYXRlZCBrZXllZFxuICAgKiBvYmplY3QuIERvaW5nIHRoaXMgbWVhbnMgd2UgZG9uJ3QgbmVlZCB0byBkbyBhbnkgZGVlcC9yZWN1cnNpdmUgbWVyZ2luZyBvZlxuICAgKiBlYWNoIG9mIG91ciBvYmplY3RzLCBub3IgdHJhbnNmb3JtIG91ciBkYXRhc2V0IGZyb20gYSBmbGF0IGxpc3QgaW50byBhXG4gICAqIG5lc3RlZCBvYmplY3QuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb25maWdPYmplY3QgLSBEZWVwbHkgbmVzdGVkIG9iamVjdFxuICAgKiBAcmV0dXJucyB7b2JqZWN0fSBGbGF0dGVuZWQgb2JqZWN0IHdpdGggZG90LXNlcGFyYXRlZCBrZXlzXG4gICAqL1xuICB2YXIgZmxhdHRlbk9iamVjdCA9IGZ1bmN0aW9uIChjb25maWdPYmplY3QpIHtcbiAgICAvLyBQcmVwYXJlIGFuIGVtcHR5IHJldHVybiBvYmplY3RcbiAgICB2YXIgZmxhdHRlbmVkT2JqZWN0ID0ge307XG5cbiAgICAvLyBPdXIgZmxhdHRlbmluZyBmdW5jdGlvbiwgdGhpcyBpcyBjYWxsZWQgcmVjdXJzaXZlbHkgZm9yIGVhY2ggbGV2ZWwgb2ZcbiAgICAvLyBkZXB0aCBpbiB0aGUgb2JqZWN0LiBBdCBlYWNoIGxldmVsIHdlIHByZXBlbmQgdGhlIHByZXZpb3VzIGxldmVsIG5hbWVzIHRvXG4gICAgLy8gdGhlIGtleSB1c2luZyBgcHJlZml4YC5cbiAgICB2YXIgZmxhdHRlbkxvb3AgPSBmdW5jdGlvbiAob2JqLCBwcmVmaXgpIHtcbiAgICAgIC8vIExvb3AgdGhyb3VnaCBrZXlzLi4uXG4gICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiB0aGlzIGlzIGEgcHJvdG90eXBpY2FsIGtleS92YWx1ZSxcbiAgICAgICAgLy8gaWYgaXQgaXMsIHNraXAgaXQuXG4gICAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cbiAgICAgICAgdmFyIHZhbHVlID0gb2JqW2tleV07XG4gICAgICAgIHZhciBwcmVmaXhlZEtleSA9IHByZWZpeCA/IHByZWZpeCArICcuJyArIGtleSA6IGtleTtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAvLyBJZiB0aGUgdmFsdWUgaXMgYSBuZXN0ZWQgb2JqZWN0LCByZWN1cnNlIG92ZXIgdGhhdCB0b29cbiAgICAgICAgICBmbGF0dGVuTG9vcCh2YWx1ZSwgcHJlZml4ZWRLZXkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIE90aGVyd2lzZSwgYWRkIHRoaXMgdmFsdWUgdG8gb3VyIHJldHVybiBvYmplY3RcbiAgICAgICAgICBmbGF0dGVuZWRPYmplY3RbcHJlZml4ZWRLZXldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gS2ljayBvZmYgdGhlIHJlY3Vyc2l2ZSBsb29wXG4gICAgZmxhdHRlbkxvb3AoY29uZmlnT2JqZWN0KTtcbiAgICByZXR1cm4gZmxhdHRlbmVkT2JqZWN0XG4gIH07XG5cbiAgLy8gU3RhcnQgd2l0aCBhbiBlbXB0eSBvYmplY3QgYXMgb3VyIGJhc2VcbiAgdmFyIGZvcm1hdHRlZENvbmZpZ09iamVjdCA9IHt9O1xuXG4gIC8vIExvb3AgdGhyb3VnaCBlYWNoIG9mIHRoZSByZW1haW5pbmcgcGFzc2VkIG9iamVjdHMgYW5kIHB1c2ggdGhlaXIga2V5c1xuICAvLyBvbmUtYnktb25lIGludG8gY29uZmlnT2JqZWN0LiBBbnkgZHVwbGljYXRlIGtleXMgd2lsbCBvdmVycmlkZSB0aGUgZXhpc3RpbmdcbiAgLy8ga2V5IHdpdGggdGhlIG5ldyB2YWx1ZS5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgb2JqID0gZmxhdHRlbk9iamVjdChhcmd1bWVudHNbaV0pO1xuICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XG4gICAgICAgIGZvcm1hdHRlZENvbmZpZ09iamVjdFtrZXldID0gb2JqW2tleV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZvcm1hdHRlZENvbmZpZ09iamVjdFxufVxuXG4vKipcbiAqIEV4dHJhY3RzIGtleXMgc3RhcnRpbmcgd2l0aCBhIHBhcnRpY3VsYXIgbmFtZXNwYWNlIGZyb20gYSBmbGF0dGVuZWQgY29uZmlnXG4gKiBvYmplY3QsIHJlbW92aW5nIHRoZSBuYW1lc3BhY2UgaW4gdGhlIHByb2Nlc3MuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IGNvbmZpZ09iamVjdCAtIFRoZSBvYmplY3QgdG8gZXh0cmFjdCBrZXktdmFsdWUgcGFpcnMgZnJvbS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lc3BhY2UgLSBUaGUgbmFtZXNwYWNlIHRvIGZpbHRlciBrZXlzIHdpdGguXG4gKiBAcmV0dXJucyB7b2JqZWN0fSBGbGF0dGVuZWQgb2JqZWN0IHdpdGggZG90LXNlcGFyYXRlZCBrZXkgbmFtZXNwYWNlIHJlbW92ZWRcbiAqL1xuZnVuY3Rpb24gZXh0cmFjdENvbmZpZ0J5TmFtZXNwYWNlIChjb25maWdPYmplY3QsIG5hbWVzcGFjZSkge1xuICAvLyBDaGVjayB3ZSBoYXZlIHdoYXQgd2UgbmVlZFxuICBpZiAoIWNvbmZpZ09iamVjdCB8fCB0eXBlb2YgY29uZmlnT2JqZWN0ICE9PSAnb2JqZWN0Jykge1xuICAgIHRocm93IG5ldyBFcnJvcignUHJvdmlkZSBhIGBjb25maWdPYmplY3RgIG9mIHR5cGUgXCJvYmplY3RcIi4nKVxuICB9XG4gIGlmICghbmFtZXNwYWNlIHx8IHR5cGVvZiBuYW1lc3BhY2UgIT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdQcm92aWRlIGEgYG5hbWVzcGFjZWAgb2YgdHlwZSBcInN0cmluZ1wiIHRvIGZpbHRlciB0aGUgYGNvbmZpZ09iamVjdGAgYnkuJylcbiAgfVxuICB2YXIgbmV3T2JqZWN0ID0ge307XG4gIGZvciAodmFyIGtleSBpbiBjb25maWdPYmplY3QpIHtcbiAgICAvLyBTcGxpdCB0aGUga2V5IGludG8gcGFydHMsIHVzaW5nIC4gYXMgb3VyIG5hbWVzcGFjZSBzZXBhcmF0b3JcbiAgICB2YXIga2V5UGFydHMgPSBrZXkuc3BsaXQoJy4nKTtcbiAgICAvLyBDaGVjayBpZiB0aGUgZmlyc3QgbmFtZXNwYWNlIG1hdGNoZXMgdGhlIGNvbmZpZ3VyZWQgbmFtZXNwYWNlXG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChjb25maWdPYmplY3QsIGtleSkgJiYga2V5UGFydHNbMF0gPT09IG5hbWVzcGFjZSkge1xuICAgICAgLy8gUmVtb3ZlIHRoZSBmaXJzdCBpdGVtICh0aGUgbmFtZXNwYWNlKSBmcm9tIHRoZSBwYXJ0cyBhcnJheSxcbiAgICAgIC8vIGJ1dCBvbmx5IGlmIHRoZXJlIGlzIG1vcmUgdGhhbiBvbmUgcGFydCAod2UgZG9uJ3Qgd2FudCBibGFuayBrZXlzISlcbiAgICAgIGlmIChrZXlQYXJ0cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGtleVBhcnRzLnNoaWZ0KCk7XG4gICAgICB9XG4gICAgICAvLyBKb2luIHRoZSByZW1haW5pbmcgcGFydHMgYmFjayB0b2dldGhlclxuICAgICAgdmFyIG5ld0tleSA9IGtleVBhcnRzLmpvaW4oJy4nKTtcbiAgICAgIC8vIEFkZCB0aGVtIHRvIG91ciBuZXcgb2JqZWN0XG4gICAgICBuZXdPYmplY3RbbmV3S2V5XSA9IGNvbmZpZ09iamVjdFtrZXldO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbmV3T2JqZWN0XG59XG5cbi8qKlxuICogQGNhbGxiYWNrIG5vZGVMaXN0SXRlcmF0b3JcbiAqIEBwYXJhbSB7RWxlbWVudH0gdmFsdWUgLSBUaGUgY3VycmVudCBub2RlIGJlaW5nIGl0ZXJhdGVkIG9uXG4gKiBAcGFyYW0ge251bWJlcn0gaW5kZXggLSBUaGUgY3VycmVudCBpbmRleCBpbiB0aGUgaXRlcmF0aW9uXG4gKiBAcGFyYW0ge05vZGVMaXN0T2Y8RWxlbWVudD59IG5vZGVzIC0gTm9kZUxpc3QgZnJvbSBxdWVyeVNlbGVjdG9yQWxsKClcbiAqIEByZXR1cm5zIHt1bmRlZmluZWR9XG4gKi9cblxuLyoqXG4gKiBJbnRlcm5hbCBzdXBwb3J0IGZvciBzZWxlY3RpbmcgbWVzc2FnZXMgdG8gcmVuZGVyLCB3aXRoIHBsYWNlaG9sZGVyXG4gKiBpbnRlcnBvbGF0aW9uIGFuZCBsb2NhbGUtYXdhcmUgbnVtYmVyIGZvcm1hdHRpbmcgYW5kIHBsdXJhbGlzYXRpb25cbiAqXG4gKiBAY2xhc3NcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge1RyYW5zbGF0aW9uc0ZsYXR0ZW5lZH0gdHJhbnNsYXRpb25zIC0gS2V5LXZhbHVlIHBhaXJzIG9mIHRoZSB0cmFuc2xhdGlvbiBzdHJpbmdzIHRvIHVzZS5cbiAqIEBwYXJhbSB7b2JqZWN0fSBbY29uZmlnXSAtIENvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgdGhlIGZ1bmN0aW9uLlxuICogQHBhcmFtIHtzdHJpbmd9IGNvbmZpZy5sb2NhbGUgLSBBbiBvdmVycmlkaW5nIGxvY2FsZSBmb3IgdGhlIFBsdXJhbFJ1bGVzIGZ1bmN0aW9uYWxpdHkuXG4gKi9cbmZ1bmN0aW9uIEkxOG4gKHRyYW5zbGF0aW9ucywgY29uZmlnKSB7XG4gIC8vIE1ha2UgbGlzdCBvZiB0cmFuc2xhdGlvbnMgYXZhaWxhYmxlIHRocm91Z2hvdXQgZnVuY3Rpb25cbiAgdGhpcy50cmFuc2xhdGlvbnMgPSB0cmFuc2xhdGlvbnMgfHwge307XG5cbiAgLy8gVGhlIGxvY2FsZSB0byB1c2UgZm9yIFBsdXJhbFJ1bGVzIGFuZCBOdW1iZXJGb3JtYXRcbiAgdGhpcy5sb2NhbGUgPSAoY29uZmlnICYmIGNvbmZpZy5sb2NhbGUpIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5sYW5nIHx8ICdlbic7XG59XG5cbi8qKlxuICogVGhlIG1vc3QgdXNlZCBmdW5jdGlvbiAtIHRha2VzIHRoZSBrZXkgZm9yIGEgZ2l2ZW4gcGllY2Ugb2YgVUkgdGV4dCBhbmRcbiAqIHJldHVybnMgdGhlIGFwcHJvcHJpYXRlIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbG9va3VwS2V5IC0gVGhlIGxvb2t1cCBrZXkgb2YgdGhlIHN0cmluZyB0byB1c2UuXG4gKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyAtIEFueSBvcHRpb25zIHBhc3NlZCB3aXRoIHRoZSB0cmFuc2xhdGlvbiBzdHJpbmcsIGUuZzogZm9yIHN0cmluZyBpbnRlcnBvbGF0aW9uLlxuICogQHJldHVybnMge3N0cmluZ30gVGhlIGFwcHJvcHJpYXRlIHRyYW5zbGF0aW9uIHN0cmluZy5cbiAqL1xuSTE4bi5wcm90b3R5cGUudCA9IGZ1bmN0aW9uIChsb29rdXBLZXksIG9wdGlvbnMpIHtcbiAgaWYgKCFsb29rdXBLZXkpIHtcbiAgICAvLyBQcmludCBhIGNvbnNvbGUgZXJyb3IgaWYgbm8gbG9va3VwIGtleSBoYXMgYmVlbiBwcm92aWRlZFxuICAgIHRocm93IG5ldyBFcnJvcignaTE4bjogbG9va3VwIGtleSBtaXNzaW5nJylcbiAgfVxuXG4gIC8vIElmIHRoZSBgY291bnRgIG9wdGlvbiBpcyBzZXQsIGRldGVybWluZSB3aGljaCBwbHVyYWwgc3VmZml4IGlzIG5lZWRlZCBhbmRcbiAgLy8gY2hhbmdlIHRoZSBsb29rdXBLZXkgdG8gbWF0Y2guIFdlIGNoZWNrIHRvIHNlZSBpZiBpdCdzIHVuZGVmaW5lZCBpbnN0ZWFkIG9mXG4gIC8vIGZhbHN5LCBhcyB0aGlzIGNvdWxkIGxlZ2l0aW1hdGVseSBiZSAwLlxuICBpZiAob3B0aW9ucyAmJiB0eXBlb2Ygb3B0aW9ucy5jb3VudCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAvLyBHZXQgdGhlIHBsdXJhbCBzdWZmaXhcbiAgICBsb29rdXBLZXkgPSBsb29rdXBLZXkgKyAnLicgKyB0aGlzLmdldFBsdXJhbFN1ZmZpeChsb29rdXBLZXksIG9wdGlvbnMuY291bnQpO1xuICB9XG5cbiAgaWYgKGxvb2t1cEtleSBpbiB0aGlzLnRyYW5zbGF0aW9ucykge1xuICAgIC8vIEZldGNoIHRoZSB0cmFuc2xhdGlvbiBzdHJpbmcgZm9yIHRoYXQgbG9va3VwIGtleVxuICAgIHZhciB0cmFuc2xhdGlvblN0cmluZyA9IHRoaXMudHJhbnNsYXRpb25zW2xvb2t1cEtleV07XG5cbiAgICAvLyBDaGVjayBmb3IgJHt9IHBsYWNlaG9sZGVycyBpbiB0aGUgdHJhbnNsYXRpb24gc3RyaW5nXG4gICAgaWYgKHRyYW5zbGF0aW9uU3RyaW5nLm1hdGNoKC8leyguXFxTKyl9LykpIHtcbiAgICAgIGlmICghb3B0aW9ucykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2kxOG46IGNhbm5vdCByZXBsYWNlIHBsYWNlaG9sZGVycyBpbiBzdHJpbmcgaWYgbm8gb3B0aW9uIGRhdGEgcHJvdmlkZWQnKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5yZXBsYWNlUGxhY2Vob2xkZXJzKHRyYW5zbGF0aW9uU3RyaW5nLCBvcHRpb25zKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdHJhbnNsYXRpb25TdHJpbmdcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gSWYgdGhlIGtleSB3YXNuJ3QgZm91bmQgaW4gb3VyIHRyYW5zbGF0aW9ucyBvYmplY3QsXG4gICAgLy8gcmV0dXJuIHRoZSBsb29rdXAga2V5IGl0c2VsZiBhcyB0aGUgZmFsbGJhY2tcbiAgICByZXR1cm4gbG9va3VwS2V5XG4gIH1cbn07XG5cbi8qKlxuICogVGFrZXMgYSB0cmFuc2xhdGlvbiBzdHJpbmcgd2l0aCBwbGFjZWhvbGRlcnMsIGFuZCByZXBsYWNlcyB0aGUgcGxhY2Vob2xkZXJzXG4gKiB3aXRoIHRoZSBwcm92aWRlZCBkYXRhXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHRyYW5zbGF0aW9uU3RyaW5nIC0gVGhlIHRyYW5zbGF0aW9uIHN0cmluZ1xuICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgLSBBbnkgb3B0aW9ucyBwYXNzZWQgd2l0aCB0aGUgdHJhbnNsYXRpb24gc3RyaW5nLCBlLmc6IGZvciBzdHJpbmcgaW50ZXJwb2xhdGlvbi5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSB0cmFuc2xhdGlvbiBzdHJpbmcgdG8gb3V0cHV0LCB3aXRoICR7fSBwbGFjZWhvbGRlcnMgcmVwbGFjZWRcbiAqL1xuSTE4bi5wcm90b3R5cGUucmVwbGFjZVBsYWNlaG9sZGVycyA9IGZ1bmN0aW9uICh0cmFuc2xhdGlvblN0cmluZywgb3B0aW9ucykge1xuICB2YXIgZm9ybWF0dGVyO1xuXG4gIGlmICh0aGlzLmhhc0ludGxOdW1iZXJGb3JtYXRTdXBwb3J0KCkpIHtcbiAgICBmb3JtYXR0ZXIgPSBuZXcgSW50bC5OdW1iZXJGb3JtYXQodGhpcy5sb2NhbGUpO1xuICB9XG5cbiAgcmV0dXJuIHRyYW5zbGF0aW9uU3RyaW5nLnJlcGxhY2UoLyV7KC5cXFMrKX0vZywgZnVuY3Rpb24gKHBsYWNlaG9sZGVyV2l0aEJyYWNlcywgcGxhY2Vob2xkZXJLZXkpIHtcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9wdGlvbnMsIHBsYWNlaG9sZGVyS2V5KSkge1xuICAgICAgdmFyIHBsYWNlaG9sZGVyVmFsdWUgPSBvcHRpb25zW3BsYWNlaG9sZGVyS2V5XTtcblxuICAgICAgLy8gSWYgYSB1c2VyIGhhcyBwYXNzZWQgYGZhbHNlYCBhcyB0aGUgdmFsdWUgZm9yIHRoZSBwbGFjZWhvbGRlclxuICAgICAgLy8gdHJlYXQgaXQgYXMgdGhvdWdoIHRoZSB2YWx1ZSBzaG91bGQgbm90IGJlIGRpc3BsYXllZFxuICAgICAgaWYgKHBsYWNlaG9sZGVyVmFsdWUgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiAnJ1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB0aGUgcGxhY2Vob2xkZXIncyB2YWx1ZSBpcyBhIG51bWJlciwgbG9jYWxpc2UgdGhlIG51bWJlciBmb3JtYXR0aW5nXG4gICAgICBpZiAodHlwZW9mIHBsYWNlaG9sZGVyVmFsdWUgPT09ICdudW1iZXInICYmIGZvcm1hdHRlcikge1xuICAgICAgICByZXR1cm4gZm9ybWF0dGVyLmZvcm1hdChwbGFjZWhvbGRlclZhbHVlKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gcGxhY2Vob2xkZXJWYWx1ZVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2kxOG46IG5vIGRhdGEgZm91bmQgdG8gcmVwbGFjZSAnICsgcGxhY2Vob2xkZXJXaXRoQnJhY2VzICsgJyBwbGFjZWhvbGRlciBpbiBzdHJpbmcnKVxuICAgIH1cbiAgfSlcbn07XG5cbi8qKlxuICogQ2hlY2sgdG8gc2VlIGlmIHRoZSBicm93c2VyIHN1cHBvcnRzIEludGwgYW5kIEludGwuUGx1cmFsUnVsZXMuXG4gKlxuICogSXQgcmVxdWlyZXMgYWxsIGNvbmRpdGlvbnMgdG8gYmUgbWV0IGluIG9yZGVyIHRvIGJlIHN1cHBvcnRlZDpcbiAqIC0gVGhlIGJyb3dzZXIgc3VwcG9ydHMgdGhlIEludGwgY2xhc3MgKHRydWUgaW4gSUUxMSlcbiAqIC0gVGhlIGltcGxlbWVudGF0aW9uIG9mIEludGwgc3VwcG9ydHMgUGx1cmFsUnVsZXMgKE5PVCB0cnVlIGluIElFMTEpXG4gKiAtIFRoZSBicm93c2VyL09TIGhhcyBwbHVyYWwgcnVsZXMgZm9yIHRoZSBjdXJyZW50IGxvY2FsZSAoYnJvd3NlciBkZXBlbmRlbnQpXG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgdHJ1ZSBpZiBhbGwgY29uZGl0aW9ucyBhcmUgbWV0LiBSZXR1cm5zIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuSTE4bi5wcm90b3R5cGUuaGFzSW50bFBsdXJhbFJ1bGVzU3VwcG9ydCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIEJvb2xlYW4od2luZG93LkludGwgJiYgKCdQbHVyYWxSdWxlcycgaW4gd2luZG93LkludGwgJiYgSW50bC5QbHVyYWxSdWxlcy5zdXBwb3J0ZWRMb2NhbGVzT2YodGhpcy5sb2NhbGUpLmxlbmd0aCkpXG59O1xuXG4vKipcbiAqIENoZWNrIHRvIHNlZSBpZiB0aGUgYnJvd3NlciBzdXBwb3J0cyBJbnRsIGFuZCBJbnRsLk51bWJlckZvcm1hdC5cbiAqXG4gKiBJdCByZXF1aXJlcyBhbGwgY29uZGl0aW9ucyB0byBiZSBtZXQgaW4gb3JkZXIgdG8gYmUgc3VwcG9ydGVkOlxuICogLSBUaGUgYnJvd3NlciBzdXBwb3J0cyB0aGUgSW50bCBjbGFzcyAodHJ1ZSBpbiBJRTExKVxuICogLSBUaGUgaW1wbGVtZW50YXRpb24gb2YgSW50bCBzdXBwb3J0cyBOdW1iZXJGb3JtYXQgKGFsc28gdHJ1ZSBpbiBJRTExKVxuICogLSBUaGUgYnJvd3Nlci9PUyBoYXMgbnVtYmVyIGZvcm1hdHRpbmcgcnVsZXMgZm9yIHRoZSBjdXJyZW50IGxvY2FsZSAoYnJvd3NlciBkZXBlbmRlbnQpXG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgdHJ1ZSBpZiBhbGwgY29uZGl0aW9ucyBhcmUgbWV0LiBSZXR1cm5zIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuSTE4bi5wcm90b3R5cGUuaGFzSW50bE51bWJlckZvcm1hdFN1cHBvcnQgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBCb29sZWFuKHdpbmRvdy5JbnRsICYmICgnTnVtYmVyRm9ybWF0JyBpbiB3aW5kb3cuSW50bCAmJiBJbnRsLk51bWJlckZvcm1hdC5zdXBwb3J0ZWRMb2NhbGVzT2YodGhpcy5sb2NhbGUpLmxlbmd0aCkpXG59O1xuXG4vKipcbiAqIEdldCB0aGUgYXBwcm9wcmlhdGUgc3VmZml4IGZvciB0aGUgcGx1cmFsIGZvcm0uXG4gKlxuICogVXNlcyBJbnRsLlBsdXJhbFJ1bGVzIChvciBvdXIgb3duIGZhbGxiYWNrIGltcGxlbWVudGF0aW9uKSB0byBnZXQgdGhlXG4gKiAncHJlZmVycmVkJyBmb3JtIHRvIHVzZSBmb3IgdGhlIGdpdmVuIGNvdW50LlxuICpcbiAqIENoZWNrcyB0aGF0IGEgdHJhbnNsYXRpb24gaGFzIGJlZW4gcHJvdmlkZWQgZm9yIHRoYXQgcGx1cmFsIGZvcm0g4oCTIGlmIGl0XG4gKiBoYXNuJ3QsIGl0J2xsIGZhbGwgYmFjayB0byB0aGUgJ290aGVyJyBwbHVyYWwgZm9ybSAodW5sZXNzIHRoYXQgZG9lc24ndCBleGlzdFxuICogZWl0aGVyLCBpbiB3aGljaCBjYXNlIGFuIGVycm9yIHdpbGwgYmUgdGhyb3duKVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBsb29rdXBLZXkgLSBUaGUgbG9va3VwIGtleSBvZiB0aGUgc3RyaW5nIHRvIHVzZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBjb3VudCAtIE51bWJlciB1c2VkIHRvIGRldGVybWluZSB3aGljaCBwbHVyYWxpc2F0aW9uIHRvIHVzZS5cbiAqIEByZXR1cm5zIHtQbHVyYWxSdWxlfSBUaGUgc3VmZml4IGFzc29jaWF0ZWQgd2l0aCB0aGUgY29ycmVjdCBwbHVyYWxpc2F0aW9uIGZvciB0aGlzIGxvY2FsZS5cbiAqL1xuSTE4bi5wcm90b3R5cGUuZ2V0UGx1cmFsU3VmZml4ID0gZnVuY3Rpb24gKGxvb2t1cEtleSwgY291bnQpIHtcbiAgLy8gVmFsaWRhdGUgdGhhdCB0aGUgbnVtYmVyIGlzIGFjdHVhbGx5IGEgbnVtYmVyLlxuICAvL1xuICAvLyBOdW1iZXIoY291bnQpIHdpbGwgdHVybiBhbnl0aGluZyB0aGF0IGNhbid0IGJlIGNvbnZlcnRlZCB0byBhIE51bWJlciB0eXBlXG4gIC8vIGludG8gJ05hTicuIGlzRmluaXRlIGZpbHRlcnMgb3V0IE5hTiwgYXMgaXQgaXNuJ3QgYSBmaW5pdGUgbnVtYmVyLlxuICBjb3VudCA9IE51bWJlcihjb3VudCk7XG4gIGlmICghaXNGaW5pdGUoY291bnQpKSB7IHJldHVybiAnb3RoZXInIH1cblxuICB2YXIgcHJlZmVycmVkRm9ybTtcblxuICAvLyBDaGVjayB0byB2ZXJpZnkgdGhhdCBhbGwgdGhlIHJlcXVpcmVtZW50cyBmb3IgSW50bC5QbHVyYWxSdWxlcyBhcmUgbWV0LlxuICAvLyBJZiBzbywgd2UgY2FuIHVzZSB0aGF0IGluc3RlYWQgb2Ygb3VyIGN1c3RvbSBpbXBsZW1lbnRhdGlvbi4gT3RoZXJ3aXNlLFxuICAvLyB1c2UgdGhlIGhhcmRjb2RlZCBmYWxsYmFjay5cbiAgaWYgKHRoaXMuaGFzSW50bFBsdXJhbFJ1bGVzU3VwcG9ydCgpKSB7XG4gICAgcHJlZmVycmVkRm9ybSA9IG5ldyBJbnRsLlBsdXJhbFJ1bGVzKHRoaXMubG9jYWxlKS5zZWxlY3QoY291bnQpO1xuICB9IGVsc2Uge1xuICAgIHByZWZlcnJlZEZvcm0gPSB0aGlzLnNlbGVjdFBsdXJhbEZvcm1Vc2luZ0ZhbGxiYWNrUnVsZXMoY291bnQpO1xuICB9XG5cbiAgLy8gVXNlIHRoZSBjb3JyZWN0IHBsdXJhbCBmb3JtIGlmIHByb3ZpZGVkXG4gIGlmIChsb29rdXBLZXkgKyAnLicgKyBwcmVmZXJyZWRGb3JtIGluIHRoaXMudHJhbnNsYXRpb25zKSB7XG4gICAgcmV0dXJuIHByZWZlcnJlZEZvcm1cbiAgLy8gRmFsbCBiYWNrIHRvIGBvdGhlcmAgaWYgdGhlIHBsdXJhbCBmb3JtIGlzIG1pc3NpbmcsIGJ1dCBsb2cgYSB3YXJuaW5nXG4gIC8vIHRvIHRoZSBjb25zb2xlXG4gIH0gZWxzZSBpZiAobG9va3VwS2V5ICsgJy5vdGhlcicgaW4gdGhpcy50cmFuc2xhdGlvbnMpIHtcbiAgICBpZiAoY29uc29sZSAmJiAnd2FybicgaW4gY29uc29sZSkge1xuICAgICAgY29uc29sZS53YXJuKCdpMThuOiBNaXNzaW5nIHBsdXJhbCBmb3JtIFwiLicgKyBwcmVmZXJyZWRGb3JtICsgJ1wiIGZvciBcIicgK1xuICAgICAgICB0aGlzLmxvY2FsZSArICdcIiBsb2NhbGUuIEZhbGxpbmcgYmFjayB0byBcIi5vdGhlclwiLicpO1xuICAgIH1cblxuICAgIHJldHVybiAnb3RoZXInXG4gIC8vIElmIHRoZSByZXF1aXJlZCBgb3RoZXJgIHBsdXJhbCBmb3JtIGlzIG1pc3NpbmcsIGFsbCB3ZSBjYW4gZG8gaXMgZXJyb3JcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAnaTE4bjogUGx1cmFsIGZvcm0gXCIub3RoZXJcIiBpcyByZXF1aXJlZCBmb3IgXCInICsgdGhpcy5sb2NhbGUgKyAnXCIgbG9jYWxlJ1xuICAgIClcbiAgfVxufTtcblxuLyoqXG4gKiBHZXQgdGhlIHBsdXJhbCBmb3JtIHVzaW5nIG91ciBmYWxsYmFjayBpbXBsZW1lbnRhdGlvblxuICpcbiAqIFRoaXMgaXMgc3BsaXQgb3V0IGludG8gYSBzZXBhcmF0ZSBmdW5jdGlvbiB0byBtYWtlIGl0IGVhc2llciB0byB0ZXN0IHRoZVxuICogZmFsbGJhY2sgYmVoYXZpb3VyIGluIGFuIGVudmlyb25tZW50IHdoZXJlIEludGwuUGx1cmFsUnVsZXMgZXhpc3RzLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBjb3VudCAtIE51bWJlciB1c2VkIHRvIGRldGVybWluZSB3aGljaCBwbHVyYWxpc2F0aW9uIHRvIHVzZS5cbiAqIEByZXR1cm5zIHtQbHVyYWxSdWxlfSBUaGUgcGx1cmFsaXNhdGlvbiBmb3JtIGZvciBjb3VudCBpbiB0aGlzIGxvY2FsZS5cbiAqL1xuSTE4bi5wcm90b3R5cGUuc2VsZWN0UGx1cmFsRm9ybVVzaW5nRmFsbGJhY2tSdWxlcyA9IGZ1bmN0aW9uIChjb3VudCkge1xuICAvLyBDdXJyZW50bHkgb3VyIGN1c3RvbSBjb2RlIGNhbiBvbmx5IGhhbmRsZSBwb3NpdGl2ZSBpbnRlZ2Vycywgc28gbGV0J3NcbiAgLy8gbWFrZSBzdXJlIG91ciBudW1iZXIgaXMgb25lIG9mIHRob3NlLlxuICBjb3VudCA9IE1hdGguYWJzKE1hdGguZmxvb3IoY291bnQpKTtcblxuICB2YXIgcnVsZXNldCA9IHRoaXMuZ2V0UGx1cmFsUnVsZXNGb3JMb2NhbGUoKTtcblxuICBpZiAocnVsZXNldCkge1xuICAgIHJldHVybiBJMThuLnBsdXJhbFJ1bGVzW3J1bGVzZXRdKGNvdW50KVxuICB9XG5cbiAgcmV0dXJuICdvdGhlcidcbn07XG5cbi8qKlxuICogV29yayBvdXQgd2hpY2ggcGx1cmFsaXNhdGlvbiBydWxlcyB0byB1c2UgZm9yIHRoZSBjdXJyZW50IGxvY2FsZVxuICpcbiAqIFRoZSBsb2NhbGUgbWF5IGluY2x1ZGUgYSByZWdpb25hbCBpbmRpY2F0b3IgKHN1Y2ggYXMgZW4tR0IpLCBidXQgd2UgZG9uJ3RcbiAqIHVzdWFsbHkgY2FyZSBhYm91dCB0aGlzIHBhcnQsIGFzIHBsdXJhbGlzYXRpb24gcnVsZXMgYXJlIHVzdWFsbHkgdGhlIHNhbWVcbiAqIHJlZ2FyZGxlc3Mgb2YgcmVnaW9uLiBUaGVyZSBhcmUgZXhjZXB0aW9ucywgaG93ZXZlciwgKGUuZy4gUG9ydHVndWVzZSkgc29cbiAqIHRoaXMgc2VhcmNoZXMgYnkgYm90aCB0aGUgZnVsbCBhbmQgc2hvcnRlbmVkIGxvY2FsZSBjb2RlcywganVzdCB0byBiZSBzdXJlLlxuICpcbiAqIEByZXR1cm5zIHtQbHVyYWxSdWxlTmFtZSB8IHVuZGVmaW5lZH0gVGhlIG5hbWUgb2YgdGhlIHBsdXJhbGlzYXRpb24gcnVsZSB0byB1c2UgKGEga2V5IGZvciBvbmVcbiAqICAgb2YgdGhlIGZ1bmN0aW9ucyBpbiB0aGlzLnBsdXJhbFJ1bGVzKVxuICovXG5JMThuLnByb3RvdHlwZS5nZXRQbHVyYWxSdWxlc0ZvckxvY2FsZSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGxvY2FsZSA9IHRoaXMubG9jYWxlO1xuICB2YXIgbG9jYWxlU2hvcnQgPSBsb2NhbGUuc3BsaXQoJy0nKVswXTtcblxuICAvLyBMb29rIHRocm91Z2ggdGhlIHBsdXJhbCBydWxlcyBtYXAgdG8gZmluZCB3aGljaCBgcGx1cmFsUnVsZWAgaXNcbiAgLy8gYXBwcm9wcmlhdGUgZm9yIG91ciBjdXJyZW50IGBsb2NhbGVgLlxuICBmb3IgKHZhciBwbHVyYWxSdWxlIGluIEkxOG4ucGx1cmFsUnVsZXNNYXApIHtcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKEkxOG4ucGx1cmFsUnVsZXNNYXAsIHBsdXJhbFJ1bGUpKSB7XG4gICAgICB2YXIgbGFuZ3VhZ2VzID0gSTE4bi5wbHVyYWxSdWxlc01hcFtwbHVyYWxSdWxlXTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGFuZ3VhZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChsYW5ndWFnZXNbaV0gPT09IGxvY2FsZSB8fCBsYW5ndWFnZXNbaV0gPT09IGxvY2FsZVNob3J0KSB7XG4gICAgICAgICAgcmV0dXJuIHBsdXJhbFJ1bGVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBNYXAgb2YgcGx1cmFsIHJ1bGVzIHRvIGxhbmd1YWdlcyB3aGVyZSB0aG9zZSBydWxlcyBhcHBseS5cbiAqXG4gKiBOb3RlOiBUaGVzZSBncm91cHMgYXJlIG5hbWVkIGZvciB0aGUgbW9zdCBkb21pbmFudCBvciByZWNvZ25pc2FibGUgbGFuZ3VhZ2VcbiAqIHRoYXQgdXNlcyBlYWNoIHN5c3RlbS4gVGhlIGdyb3VwaW5ncyBkbyBub3QgaW1wbHkgdGhhdCB0aGUgbGFuZ3VhZ2VzIGFyZVxuICogcmVsYXRlZCB0byBvbmUgYW5vdGhlci4gTWFueSBsYW5ndWFnZXMgaGF2ZSBldm9sdmVkIHRoZSBzYW1lIHN5c3RlbXNcbiAqIGluZGVwZW5kZW50bHkgb2Ygb25lIGFub3RoZXIuXG4gKlxuICogQ29kZSB0byBzdXBwb3J0IG1vcmUgbGFuZ3VhZ2VzIGNhbiBiZSBmb3VuZCBpbiB0aGUgaTE4biBzcGlrZTpcbiAqIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vYWxwaGFnb3YvZ292dWstZnJvbnRlbmQvYmxvYi9zcGlrZS1pMThuLXN1cHBvcnQvc3JjL2dvdnVrL2kxOG4ubWpzfVxuICpcbiAqIExhbmd1YWdlcyBjdXJyZW50bHkgc3VwcG9ydGVkOlxuICpcbiAqIEFyYWJpYzogQXJhYmljIChhcilcbiAqIENoaW5lc2U6IEJ1cm1lc2UgKG15KSwgQ2hpbmVzZSAoemgpLCBJbmRvbmVzaWFuIChpZCksIEphcGFuZXNlIChqYSksXG4gKiAgIEphdmFuZXNlIChqdiksIEtvcmVhbiAoa28pLCBNYWxheSAobXMpLCBUaGFpICh0aCksIFZpZXRuYW1lc2UgKHZpKVxuICogRnJlbmNoOiBBcm1lbmlhbiAoaHkpLCBCYW5nbGEgKGJuKSwgRnJlbmNoIChmciksIEd1amFyYXRpIChndSksIEhpbmRpIChoaSksXG4gKiAgIFBlcnNpYW4gRmFyc2kgKGZhKSwgUHVuamFiaSAocGEpLCBadWx1ICh6dSlcbiAqIEdlcm1hbjogQWZyaWthYW5zIChhZiksIEFsYmFuaWFuIChzcSksIEF6ZXJiYWlqYW5pIChheiksIEJhc3F1ZSAoZXUpLFxuICogICBCdWxnYXJpYW4gKGJnKSwgQ2F0YWxhbiAoY2EpLCBEYW5pc2ggKGRhKSwgRHV0Y2ggKG5sKSwgRW5nbGlzaCAoZW4pLFxuICogICBFc3RvbmlhbiAoZXQpLCBGaW5uaXNoIChmaSksIEdlb3JnaWFuIChrYSksIEdlcm1hbiAoZGUpLCBHcmVlayAoZWwpLFxuICogICBIdW5nYXJpYW4gKGh1KSwgTHV4ZW1ib3VyZ2lzaCAobGIpLCBOb3J3ZWdpYW4gKG5vKSwgU29tYWxpIChzbyksXG4gKiAgIFN3YWhpbGkgKHN3KSwgU3dlZGlzaCAoc3YpLCBUYW1pbCAodGEpLCBUZWx1Z3UgKHRlKSwgVHVya2lzaCAodHIpLFxuICogICBVcmR1ICh1cilcbiAqIElyaXNoOiBJcmlzaCBHYWVsaWMgKGdhKVxuICogUnVzc2lhbjogUnVzc2lhbiAocnUpLCBVa3JhaW5pYW4gKHVrKVxuICogU2NvdHRpc2g6IFNjb3R0aXNoIEdhZWxpYyAoZ2QpXG4gKiBTcGFuaXNoOiBFdXJvcGVhbiBQb3J0dWd1ZXNlIChwdC1QVCksIEl0YWxpYW4gKGl0KSwgU3BhbmlzaCAoZXMpXG4gKiBXZWxzaDogV2Vsc2ggKGN5KVxuICpcbiAqIEB0eXBlIHtPYmplY3Q8UGx1cmFsUnVsZU5hbWUsIHN0cmluZ1tdPn1cbiAqL1xuSTE4bi5wbHVyYWxSdWxlc01hcCA9IHtcbiAgYXJhYmljOiBbJ2FyJ10sXG4gIGNoaW5lc2U6IFsnbXknLCAnemgnLCAnaWQnLCAnamEnLCAnanYnLCAna28nLCAnbXMnLCAndGgnLCAndmknXSxcbiAgZnJlbmNoOiBbJ2h5JywgJ2JuJywgJ2ZyJywgJ2d1JywgJ2hpJywgJ2ZhJywgJ3BhJywgJ3p1J10sXG4gIGdlcm1hbjogW1xuICAgICdhZicsICdzcScsICdheicsICdldScsICdiZycsICdjYScsICdkYScsICdubCcsICdlbicsICdldCcsICdmaScsICdrYScsXG4gICAgJ2RlJywgJ2VsJywgJ2h1JywgJ2xiJywgJ25vJywgJ3NvJywgJ3N3JywgJ3N2JywgJ3RhJywgJ3RlJywgJ3RyJywgJ3VyJ1xuICBdLFxuICBpcmlzaDogWydnYSddLFxuICBydXNzaWFuOiBbJ3J1JywgJ3VrJ10sXG4gIHNjb3R0aXNoOiBbJ2dkJ10sXG4gIHNwYW5pc2g6IFsncHQtUFQnLCAnaXQnLCAnZXMnXSxcbiAgd2Vsc2g6IFsnY3knXVxufTtcblxuLyoqXG4gKiBEaWZmZXJlbnQgcGx1cmFsaXNhdGlvbiBydWxlIHNldHNcbiAqXG4gKiBSZXR1cm5zIHRoZSBhcHByb3ByaWF0ZSBzdWZmaXggZm9yIHRoZSBwbHVyYWwgZm9ybSBhc3NvY2lhdGVkIHdpdGggYG5gLlxuICogUG9zc2libGUgc3VmZml4ZXM6ICd6ZXJvJywgJ29uZScsICd0d28nLCAnZmV3JywgJ21hbnknLCAnb3RoZXInICh0aGUgYWN0dWFsXG4gKiBtZWFuaW5nIG9mIGVhY2ggZGlmZmVycyBwZXIgbG9jYWxlKS4gJ290aGVyJyBzaG91bGQgYWx3YXlzIGV4aXN0LCBldmVuIGluXG4gKiBsYW5ndWFnZXMgd2l0aG91dCBwbHVyYWxzLCBzdWNoIGFzIENoaW5lc2UuXG4gKiB7QGxpbmsgaHR0cHM6Ly9jbGRyLnVuaWNvZGUub3JnL2luZGV4L2NsZHItc3BlYy9wbHVyYWwtcnVsZXN9XG4gKlxuICogVGhlIGNvdW50IG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyLiBOZWdhdGl2ZSBudW1iZXJzIGFuZCBkZWNpbWFscyBhcmVuJ3QgYWNjb3VudGVkIGZvclxuICpcbiAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBmdW5jdGlvbihudW1iZXIpOiBQbHVyYWxSdWxlPn1cbiAqL1xuSTE4bi5wbHVyYWxSdWxlcyA9IHtcbiAgYXJhYmljOiBmdW5jdGlvbiAobikge1xuICAgIGlmIChuID09PSAwKSB7IHJldHVybiAnemVybycgfVxuICAgIGlmIChuID09PSAxKSB7IHJldHVybiAnb25lJyB9XG4gICAgaWYgKG4gPT09IDIpIHsgcmV0dXJuICd0d28nIH1cbiAgICBpZiAobiAlIDEwMCA+PSAzICYmIG4gJSAxMDAgPD0gMTApIHsgcmV0dXJuICdmZXcnIH1cbiAgICBpZiAobiAlIDEwMCA+PSAxMSAmJiBuICUgMTAwIDw9IDk5KSB7IHJldHVybiAnbWFueScgfVxuICAgIHJldHVybiAnb3RoZXInXG4gIH0sXG4gIGNoaW5lc2U6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gJ290aGVyJ1xuICB9LFxuICBmcmVuY2g6IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIG4gPT09IDAgfHwgbiA9PT0gMSA/ICdvbmUnIDogJ290aGVyJ1xuICB9LFxuICBnZXJtYW46IGZ1bmN0aW9uIChuKSB7XG4gICAgcmV0dXJuIG4gPT09IDEgPyAnb25lJyA6ICdvdGhlcidcbiAgfSxcbiAgaXJpc2g6IGZ1bmN0aW9uIChuKSB7XG4gICAgaWYgKG4gPT09IDEpIHsgcmV0dXJuICdvbmUnIH1cbiAgICBpZiAobiA9PT0gMikgeyByZXR1cm4gJ3R3bycgfVxuICAgIGlmIChuID49IDMgJiYgbiA8PSA2KSB7IHJldHVybiAnZmV3JyB9XG4gICAgaWYgKG4gPj0gNyAmJiBuIDw9IDEwKSB7IHJldHVybiAnbWFueScgfVxuICAgIHJldHVybiAnb3RoZXInXG4gIH0sXG4gIHJ1c3NpYW46IGZ1bmN0aW9uIChuKSB7XG4gICAgdmFyIGxhc3RUd28gPSBuICUgMTAwO1xuICAgIHZhciBsYXN0ID0gbGFzdFR3byAlIDEwO1xuICAgIGlmIChsYXN0ID09PSAxICYmIGxhc3RUd28gIT09IDExKSB7IHJldHVybiAnb25lJyB9XG4gICAgaWYgKGxhc3QgPj0gMiAmJiBsYXN0IDw9IDQgJiYgIShsYXN0VHdvID49IDEyICYmIGxhc3RUd28gPD0gMTQpKSB7IHJldHVybiAnZmV3JyB9XG4gICAgaWYgKGxhc3QgPT09IDAgfHwgKGxhc3QgPj0gNSAmJiBsYXN0IDw9IDkpIHx8IChsYXN0VHdvID49IDExICYmIGxhc3RUd28gPD0gMTQpKSB7IHJldHVybiAnbWFueScgfVxuICAgIC8vIE5vdGU6IFRoZSAnb3RoZXInIHN1ZmZpeCBpcyBvbmx5IHVzZWQgYnkgZGVjaW1hbCBudW1iZXJzIGluIFJ1c3NpYW4uXG4gICAgLy8gV2UgZG9uJ3QgYW50aWNpcGF0ZSBpdCBiZWluZyB1c2VkLCBidXQgaXQncyBoZXJlIGZvciBjb25zaXN0ZW5jeS5cbiAgICByZXR1cm4gJ290aGVyJ1xuICB9LFxuICBzY290dGlzaDogZnVuY3Rpb24gKG4pIHtcbiAgICBpZiAobiA9PT0gMSB8fCBuID09PSAxMSkgeyByZXR1cm4gJ29uZScgfVxuICAgIGlmIChuID09PSAyIHx8IG4gPT09IDEyKSB7IHJldHVybiAndHdvJyB9XG4gICAgaWYgKChuID49IDMgJiYgbiA8PSAxMCkgfHwgKG4gPj0gMTMgJiYgbiA8PSAxOSkpIHsgcmV0dXJuICdmZXcnIH1cbiAgICByZXR1cm4gJ290aGVyJ1xuICB9LFxuICBzcGFuaXNoOiBmdW5jdGlvbiAobikge1xuICAgIGlmIChuID09PSAxKSB7IHJldHVybiAnb25lJyB9XG4gICAgaWYgKG4gJSAxMDAwMDAwID09PSAwICYmIG4gIT09IDApIHsgcmV0dXJuICdtYW55JyB9XG4gICAgcmV0dXJuICdvdGhlcidcbiAgfSxcbiAgd2Vsc2g6IGZ1bmN0aW9uIChuKSB7XG4gICAgaWYgKG4gPT09IDApIHsgcmV0dXJuICd6ZXJvJyB9XG4gICAgaWYgKG4gPT09IDEpIHsgcmV0dXJuICdvbmUnIH1cbiAgICBpZiAobiA9PT0gMikgeyByZXR1cm4gJ3R3bycgfVxuICAgIGlmIChuID09PSAzKSB7IHJldHVybiAnZmV3JyB9XG4gICAgaWYgKG4gPT09IDYpIHsgcmV0dXJuICdtYW55JyB9XG4gICAgcmV0dXJuICdvdGhlcidcbiAgfVxufTtcblxuLyoqXG4gKiBTdXBwb3J0ZWQgbGFuZ3VhZ2VzIGZvciBwbHVyYWwgcnVsZXNcbiAqXG4gKiBAdHlwZWRlZiB7J2FyYWJpYycgfCAnY2hpbmVzZScgfCAnZnJlbmNoJyB8ICdnZXJtYW4nIHwgJ2lyaXNoJyB8ICdydXNzaWFuJyB8ICdzY290dGlzaCcgfCAnc3BhbmlzaCcgfCAnd2Vsc2gnfSBQbHVyYWxSdWxlTmFtZVxuICovXG5cbi8qKlxuICogUGx1cmFsIHJ1bGUgY2F0ZWdvcnkgbW5lbW9uaWMgdGFnc1xuICpcbiAqIEB0eXBlZGVmIHsnemVybycgfCAnb25lJyB8ICd0d28nIHwgJ2ZldycgfCAnbWFueScgfCAnb3RoZXInfSBQbHVyYWxSdWxlXG4gKi9cblxuLyoqXG4gKiBUcmFuc2xhdGVkIG1lc3NhZ2UgYnkgcGx1cmFsIHJ1bGUgdGhleSBjb3JyZXNwb25kIHRvLlxuICpcbiAqIEFsbG93cyB0byBncm91cCBwbHVyYWxpc2VkIG1lc3NhZ2VzIHVuZGVyIGEgc2luZ2xlIGtleSB3aGVuIHBhc3NpbmdcbiAqIHRyYW5zbGF0aW9ucyB0byBhIGNvbXBvbmVudCdzIGNvbnN0cnVjdG9yXG4gKlxuICogQHR5cGVkZWYge29iamVjdH0gVHJhbnNsYXRpb25QbHVyYWxGb3Jtc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFtvdGhlcl0gLSBHZW5lcmFsIHBsdXJhbCBmb3JtXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3plcm9dIC0gUGx1cmFsIGZvcm0gdXNlZCB3aXRoIDBcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbb25lXSAtIFBsdXJhbCBmb3JtIHVzZWQgd2l0aCAxXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3R3b10gLSBQbHVyYWwgZm9ybSB1c2VkIHdpdGggMlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtmZXddIC0gUGx1cmFsIGZvcm0gdXNlZCBmb3IgYSBmZXdcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbbWFueV0gLSBQbHVyYWwgZm9ybSB1c2VkIGZvciBtYW55XG4gKi9cblxuLyoqXG4gKiBUcmFuc2xhdGVkIG1lc3NhZ2VzIChmbGF0dGVuZWQpXG4gKlxuICogQHByaXZhdGVcbiAqIEB0eXBlZGVmIHtPYmplY3Q8c3RyaW5nLCBzdHJpbmc+IHwge319IFRyYW5zbGF0aW9uc0ZsYXR0ZW5lZFxuICovXG5cbihmdW5jdGlvbih1bmRlZmluZWQpIHtcblxuLy8gRGV0ZWN0aW9uIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL0ZpbmFuY2lhbC1UaW1lcy9wb2x5ZmlsbC1zZXJ2aWNlL2Jsb2IvbWFzdGVyL3BhY2thZ2VzL3BvbHlmaWxsLWxpYnJhcnkvcG9seWZpbGxzL09iamVjdC9kZWZpbmVQcm9wZXJ0eS9kZXRlY3QuanNcbnZhciBkZXRlY3QgPSAoXG4gIC8vIEluIElFOCwgZGVmaW5lUHJvcGVydHkgY291bGQgb25seSBhY3Qgb24gRE9NIGVsZW1lbnRzLCBzbyBmdWxsIHN1cHBvcnRcbiAgLy8gZm9yIHRoZSBmZWF0dXJlIHJlcXVpcmVzIHRoZSBhYmlsaXR5IHRvIHNldCBhIHByb3BlcnR5IG9uIGFuIGFyYml0cmFyeSBvYmplY3RcbiAgJ2RlZmluZVByb3BlcnR5JyBpbiBPYmplY3QgJiYgKGZ1bmN0aW9uKCkge1xuICBcdHRyeSB7XG4gIFx0XHR2YXIgYSA9IHt9O1xuICBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsICd0ZXN0Jywge3ZhbHVlOjQyfSk7XG4gIFx0XHRyZXR1cm4gdHJ1ZTtcbiAgXHR9IGNhdGNoKGUpIHtcbiAgXHRcdHJldHVybiBmYWxzZVxuICBcdH1cbiAgfSgpKVxuKTtcblxuaWYgKGRldGVjdCkgcmV0dXJuXG5cbi8vIFBvbHlmaWxsIGZyb20gaHR0cHM6Ly9jZG4ucG9seWZpbGwuaW8vdjIvcG9seWZpbGwuanM/ZmVhdHVyZXM9T2JqZWN0LmRlZmluZVByb3BlcnR5JmZsYWdzPWFsd2F5c1xuKGZ1bmN0aW9uIChuYXRpdmVEZWZpbmVQcm9wZXJ0eSkge1xuXG5cdHZhciBzdXBwb3J0c0FjY2Vzc29ycyA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkoJ19fZGVmaW5lR2V0dGVyX18nKTtcblx0dmFyIEVSUl9BQ0NFU1NPUlNfTk9UX1NVUFBPUlRFRCA9ICdHZXR0ZXJzICYgc2V0dGVycyBjYW5ub3QgYmUgZGVmaW5lZCBvbiB0aGlzIGphdmFzY3JpcHQgZW5naW5lJztcblx0dmFyIEVSUl9WQUxVRV9BQ0NFU1NPUlMgPSAnQSBwcm9wZXJ0eSBjYW5ub3QgYm90aCBoYXZlIGFjY2Vzc29ycyBhbmQgYmUgd3JpdGFibGUgb3IgaGF2ZSBhIHZhbHVlJztcblxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkgPSBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0eShvYmplY3QsIHByb3BlcnR5LCBkZXNjcmlwdG9yKSB7XG5cblx0XHQvLyBXaGVyZSBuYXRpdmUgc3VwcG9ydCBleGlzdHMsIGFzc3VtZSBpdFxuXHRcdGlmIChuYXRpdmVEZWZpbmVQcm9wZXJ0eSAmJiAob2JqZWN0ID09PSB3aW5kb3cgfHwgb2JqZWN0ID09PSBkb2N1bWVudCB8fCBvYmplY3QgPT09IEVsZW1lbnQucHJvdG90eXBlIHx8IG9iamVjdCBpbnN0YW5jZW9mIEVsZW1lbnQpKSB7XG5cdFx0XHRyZXR1cm4gbmF0aXZlRGVmaW5lUHJvcGVydHkob2JqZWN0LCBwcm9wZXJ0eSwgZGVzY3JpcHRvcik7XG5cdFx0fVxuXG5cdFx0aWYgKG9iamVjdCA9PT0gbnVsbCB8fCAhKG9iamVjdCBpbnN0YW5jZW9mIE9iamVjdCB8fCB0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0JykpIHtcblx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ09iamVjdC5kZWZpbmVQcm9wZXJ0eSBjYWxsZWQgb24gbm9uLW9iamVjdCcpO1xuXHRcdH1cblxuXHRcdGlmICghKGRlc2NyaXB0b3IgaW5zdGFuY2VvZiBPYmplY3QpKSB7XG5cdFx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdQcm9wZXJ0eSBkZXNjcmlwdGlvbiBtdXN0IGJlIGFuIG9iamVjdCcpO1xuXHRcdH1cblxuXHRcdHZhciBwcm9wZXJ0eVN0cmluZyA9IFN0cmluZyhwcm9wZXJ0eSk7XG5cdFx0dmFyIGhhc1ZhbHVlT3JXcml0YWJsZSA9ICd2YWx1ZScgaW4gZGVzY3JpcHRvciB8fCAnd3JpdGFibGUnIGluIGRlc2NyaXB0b3I7XG5cdFx0dmFyIGdldHRlclR5cGUgPSAnZ2V0JyBpbiBkZXNjcmlwdG9yICYmIHR5cGVvZiBkZXNjcmlwdG9yLmdldDtcblx0XHR2YXIgc2V0dGVyVHlwZSA9ICdzZXQnIGluIGRlc2NyaXB0b3IgJiYgdHlwZW9mIGRlc2NyaXB0b3Iuc2V0O1xuXG5cdFx0Ly8gaGFuZGxlIGRlc2NyaXB0b3IuZ2V0XG5cdFx0aWYgKGdldHRlclR5cGUpIHtcblx0XHRcdGlmIChnZXR0ZXJUeXBlICE9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ0dldHRlciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblx0XHRcdH1cblx0XHRcdGlmICghc3VwcG9ydHNBY2Nlc3NvcnMpIHtcblx0XHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvcihFUlJfQUNDRVNTT1JTX05PVF9TVVBQT1JURUQpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGhhc1ZhbHVlT3JXcml0YWJsZSkge1xuXHRcdFx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKEVSUl9WQUxVRV9BQ0NFU1NPUlMpO1xuXHRcdFx0fVxuXHRcdFx0T2JqZWN0Ll9fZGVmaW5lR2V0dGVyX18uY2FsbChvYmplY3QsIHByb3BlcnR5U3RyaW5nLCBkZXNjcmlwdG9yLmdldCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdG9iamVjdFtwcm9wZXJ0eVN0cmluZ10gPSBkZXNjcmlwdG9yLnZhbHVlO1xuXHRcdH1cblxuXHRcdC8vIGhhbmRsZSBkZXNjcmlwdG9yLnNldFxuXHRcdGlmIChzZXR0ZXJUeXBlKSB7XG5cdFx0XHRpZiAoc2V0dGVyVHlwZSAhPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdTZXR0ZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIXN1cHBvcnRzQWNjZXNzb3JzKSB7XG5cdFx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoRVJSX0FDQ0VTU09SU19OT1RfU1VQUE9SVEVEKTtcblx0XHRcdH1cblx0XHRcdGlmIChoYXNWYWx1ZU9yV3JpdGFibGUpIHtcblx0XHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvcihFUlJfVkFMVUVfQUNDRVNTT1JTKTtcblx0XHRcdH1cblx0XHRcdE9iamVjdC5fX2RlZmluZVNldHRlcl9fLmNhbGwob2JqZWN0LCBwcm9wZXJ0eVN0cmluZywgZGVzY3JpcHRvci5zZXQpO1xuXHRcdH1cblxuXHRcdC8vIE9LIHRvIGRlZmluZSB2YWx1ZSB1bmNvbmRpdGlvbmFsbHkgLSBpZiBhIGdldHRlciBoYXMgYmVlbiBzcGVjaWZpZWQgYXMgd2VsbCwgYW4gZXJyb3Igd291bGQgYmUgdGhyb3duIGFib3ZlXG5cdFx0aWYgKCd2YWx1ZScgaW4gZGVzY3JpcHRvcikge1xuXHRcdFx0b2JqZWN0W3Byb3BlcnR5U3RyaW5nXSA9IGRlc2NyaXB0b3IudmFsdWU7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG9iamVjdDtcblx0fTtcbn0oT2JqZWN0LmRlZmluZVByb3BlcnR5KSk7XG59KVxuLmNhbGwoJ29iamVjdCcgPT09IHR5cGVvZiB3aW5kb3cgJiYgd2luZG93IHx8ICdvYmplY3QnID09PSB0eXBlb2Ygc2VsZiAmJiBzZWxmIHx8ICdvYmplY3QnID09PSB0eXBlb2YgZ2xvYmFsICYmIGdsb2JhbCB8fCB7fSk7XG5cbihmdW5jdGlvbih1bmRlZmluZWQpIHtcbiAgLy8gRGV0ZWN0aW9uIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL0ZpbmFuY2lhbC1UaW1lcy9wb2x5ZmlsbC1zZXJ2aWNlL2Jsb2IvbWFzdGVyL3BhY2thZ2VzL3BvbHlmaWxsLWxpYnJhcnkvcG9seWZpbGxzL0Z1bmN0aW9uL3Byb3RvdHlwZS9iaW5kL2RldGVjdC5qc1xuICB2YXIgZGV0ZWN0ID0gJ2JpbmQnIGluIEZ1bmN0aW9uLnByb3RvdHlwZTtcblxuICBpZiAoZGV0ZWN0KSByZXR1cm5cblxuICAvLyBQb2x5ZmlsbCBmcm9tIGh0dHBzOi8vY2RuLnBvbHlmaWxsLmlvL3YyL3BvbHlmaWxsLmpzP2ZlYXR1cmVzPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kJmZsYWdzPWFsd2F5c1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRnVuY3Rpb24ucHJvdG90eXBlLCAnYmluZCcsIHtcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBiaW5kKHRoYXQpIHsgLy8gLmxlbmd0aCBpcyAxXG4gICAgICAgICAgLy8gYWRkIG5lY2Vzc2FyeSBlczUtc2hpbSB1dGlsaXRpZXNcbiAgICAgICAgICB2YXIgJEFycmF5ID0gQXJyYXk7XG4gICAgICAgICAgdmFyICRPYmplY3QgPSBPYmplY3Q7XG4gICAgICAgICAgdmFyIE9iamVjdFByb3RvdHlwZSA9ICRPYmplY3QucHJvdG90eXBlO1xuICAgICAgICAgIHZhciBBcnJheVByb3RvdHlwZSA9ICRBcnJheS5wcm90b3R5cGU7XG4gICAgICAgICAgdmFyIEVtcHR5ID0gZnVuY3Rpb24gRW1wdHkoKSB7fTtcbiAgICAgICAgICB2YXIgdG9fc3RyaW5nID0gT2JqZWN0UHJvdG90eXBlLnRvU3RyaW5nO1xuICAgICAgICAgIHZhciBoYXNUb1N0cmluZ1RhZyA9IHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIFN5bWJvbC50b1N0cmluZ1RhZyA9PT0gJ3N5bWJvbCc7XG4gICAgICAgICAgdmFyIGlzQ2FsbGFibGU7IC8qIGlubGluZWQgZnJvbSBodHRwczovL25wbWpzLmNvbS9pcy1jYWxsYWJsZSAqLyB2YXIgZm5Ub1N0ciA9IEZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZywgdHJ5RnVuY3Rpb25PYmplY3QgPSBmdW5jdGlvbiB0cnlGdW5jdGlvbk9iamVjdCh2YWx1ZSkgeyB0cnkgeyBmblRvU3RyLmNhbGwodmFsdWUpOyByZXR1cm4gdHJ1ZTsgfSBjYXRjaCAoZSkgeyByZXR1cm4gZmFsc2U7IH0gfSwgZm5DbGFzcyA9ICdbb2JqZWN0IEZ1bmN0aW9uXScsIGdlbkNsYXNzID0gJ1tvYmplY3QgR2VuZXJhdG9yRnVuY3Rpb25dJzsgaXNDYWxsYWJsZSA9IGZ1bmN0aW9uIGlzQ2FsbGFibGUodmFsdWUpIHsgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ2Z1bmN0aW9uJykgeyByZXR1cm4gZmFsc2U7IH0gaWYgKGhhc1RvU3RyaW5nVGFnKSB7IHJldHVybiB0cnlGdW5jdGlvbk9iamVjdCh2YWx1ZSk7IH0gdmFyIHN0ckNsYXNzID0gdG9fc3RyaW5nLmNhbGwodmFsdWUpOyByZXR1cm4gc3RyQ2xhc3MgPT09IGZuQ2xhc3MgfHwgc3RyQ2xhc3MgPT09IGdlbkNsYXNzOyB9O1xuICAgICAgICAgIHZhciBhcnJheV9zbGljZSA9IEFycmF5UHJvdG90eXBlLnNsaWNlO1xuICAgICAgICAgIHZhciBhcnJheV9jb25jYXQgPSBBcnJheVByb3RvdHlwZS5jb25jYXQ7XG4gICAgICAgICAgdmFyIGFycmF5X3B1c2ggPSBBcnJheVByb3RvdHlwZS5wdXNoO1xuICAgICAgICAgIHZhciBtYXggPSBNYXRoLm1heDtcbiAgICAgICAgICAvLyAvYWRkIG5lY2Vzc2FyeSBlczUtc2hpbSB1dGlsaXRpZXNcblxuICAgICAgICAgIC8vIDEuIExldCBUYXJnZXQgYmUgdGhlIHRoaXMgdmFsdWUuXG4gICAgICAgICAgdmFyIHRhcmdldCA9IHRoaXM7XG4gICAgICAgICAgLy8gMi4gSWYgSXNDYWxsYWJsZShUYXJnZXQpIGlzIGZhbHNlLCB0aHJvdyBhIFR5cGVFcnJvciBleGNlcHRpb24uXG4gICAgICAgICAgaWYgKCFpc0NhbGxhYmxlKHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQgY2FsbGVkIG9uIGluY29tcGF0aWJsZSAnICsgdGFyZ2V0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gMy4gTGV0IEEgYmUgYSBuZXcgKHBvc3NpYmx5IGVtcHR5KSBpbnRlcm5hbCBsaXN0IG9mIGFsbCBvZiB0aGVcbiAgICAgICAgICAvLyAgIGFyZ3VtZW50IHZhbHVlcyBwcm92aWRlZCBhZnRlciB0aGlzQXJnIChhcmcxLCBhcmcyIGV0YyksIGluIG9yZGVyLlxuICAgICAgICAgIC8vIFhYWCBzbGljZWRBcmdzIHdpbGwgc3RhbmQgaW4gZm9yIFwiQVwiIGlmIHVzZWRcbiAgICAgICAgICB2YXIgYXJncyA9IGFycmF5X3NsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTsgLy8gZm9yIG5vcm1hbCBjYWxsXG4gICAgICAgICAgLy8gNC4gTGV0IEYgYmUgYSBuZXcgbmF0aXZlIEVDTUFTY3JpcHQgb2JqZWN0LlxuICAgICAgICAgIC8vIDExLiBTZXQgdGhlIFtbUHJvdG90eXBlXV0gaW50ZXJuYWwgcHJvcGVydHkgb2YgRiB0byB0aGUgc3RhbmRhcmRcbiAgICAgICAgICAvLyAgIGJ1aWx0LWluIEZ1bmN0aW9uIHByb3RvdHlwZSBvYmplY3QgYXMgc3BlY2lmaWVkIGluIDE1LjMuMy4xLlxuICAgICAgICAgIC8vIDEyLiBTZXQgdGhlIFtbQ2FsbF1dIGludGVybmFsIHByb3BlcnR5IG9mIEYgYXMgZGVzY3JpYmVkIGluXG4gICAgICAgICAgLy8gICAxNS4zLjQuNS4xLlxuICAgICAgICAgIC8vIDEzLiBTZXQgdGhlIFtbQ29uc3RydWN0XV0gaW50ZXJuYWwgcHJvcGVydHkgb2YgRiBhcyBkZXNjcmliZWQgaW5cbiAgICAgICAgICAvLyAgIDE1LjMuNC41LjIuXG4gICAgICAgICAgLy8gMTQuIFNldCB0aGUgW1tIYXNJbnN0YW5jZV1dIGludGVybmFsIHByb3BlcnR5IG9mIEYgYXMgZGVzY3JpYmVkIGluXG4gICAgICAgICAgLy8gICAxNS4zLjQuNS4zLlxuICAgICAgICAgIHZhciBib3VuZDtcbiAgICAgICAgICB2YXIgYmluZGVyID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgIGlmICh0aGlzIGluc3RhbmNlb2YgYm91bmQpIHtcbiAgICAgICAgICAgICAgICAgIC8vIDE1LjMuNC41LjIgW1tDb25zdHJ1Y3RdXVxuICAgICAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgW1tDb25zdHJ1Y3RdXSBpbnRlcm5hbCBtZXRob2Qgb2YgYSBmdW5jdGlvbiBvYmplY3QsXG4gICAgICAgICAgICAgICAgICAvLyBGIHRoYXQgd2FzIGNyZWF0ZWQgdXNpbmcgdGhlIGJpbmQgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggYVxuICAgICAgICAgICAgICAgICAgLy8gbGlzdCBvZiBhcmd1bWVudHMgRXh0cmFBcmdzLCB0aGUgZm9sbG93aW5nIHN0ZXBzIGFyZSB0YWtlbjpcbiAgICAgICAgICAgICAgICAgIC8vIDEuIExldCB0YXJnZXQgYmUgdGhlIHZhbHVlIG9mIEYncyBbW1RhcmdldEZ1bmN0aW9uXV1cbiAgICAgICAgICAgICAgICAgIC8vICAgaW50ZXJuYWwgcHJvcGVydHkuXG4gICAgICAgICAgICAgICAgICAvLyAyLiBJZiB0YXJnZXQgaGFzIG5vIFtbQ29uc3RydWN0XV0gaW50ZXJuYWwgbWV0aG9kLCBhXG4gICAgICAgICAgICAgICAgICAvLyAgIFR5cGVFcnJvciBleGNlcHRpb24gaXMgdGhyb3duLlxuICAgICAgICAgICAgICAgICAgLy8gMy4gTGV0IGJvdW5kQXJncyBiZSB0aGUgdmFsdWUgb2YgRidzIFtbQm91bmRBcmdzXV0gaW50ZXJuYWxcbiAgICAgICAgICAgICAgICAgIC8vICAgcHJvcGVydHkuXG4gICAgICAgICAgICAgICAgICAvLyA0LiBMZXQgYXJncyBiZSBhIG5ldyBsaXN0IGNvbnRhaW5pbmcgdGhlIHNhbWUgdmFsdWVzIGFzIHRoZVxuICAgICAgICAgICAgICAgICAgLy8gICBsaXN0IGJvdW5kQXJncyBpbiB0aGUgc2FtZSBvcmRlciBmb2xsb3dlZCBieSB0aGUgc2FtZVxuICAgICAgICAgICAgICAgICAgLy8gICB2YWx1ZXMgYXMgdGhlIGxpc3QgRXh0cmFBcmdzIGluIHRoZSBzYW1lIG9yZGVyLlxuICAgICAgICAgICAgICAgICAgLy8gNS4gUmV0dXJuIHRoZSByZXN1bHQgb2YgY2FsbGluZyB0aGUgW1tDb25zdHJ1Y3RdXSBpbnRlcm5hbFxuICAgICAgICAgICAgICAgICAgLy8gICBtZXRob2Qgb2YgdGFyZ2V0IHByb3ZpZGluZyBhcmdzIGFzIHRoZSBhcmd1bWVudHMuXG5cbiAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSB0YXJnZXQuYXBwbHkoXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICBhcnJheV9jb25jYXQuY2FsbChhcmdzLCBhcnJheV9zbGljZS5jYWxsKGFyZ3VtZW50cykpXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgaWYgKCRPYmplY3QocmVzdWx0KSA9PT0gcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAvLyAxNS4zLjQuNS4xIFtbQ2FsbF1dXG4gICAgICAgICAgICAgICAgICAvLyBXaGVuIHRoZSBbW0NhbGxdXSBpbnRlcm5hbCBtZXRob2Qgb2YgYSBmdW5jdGlvbiBvYmplY3QsIEYsXG4gICAgICAgICAgICAgICAgICAvLyB3aGljaCB3YXMgY3JlYXRlZCB1c2luZyB0aGUgYmluZCBmdW5jdGlvbiBpcyBjYWxsZWQgd2l0aCBhXG4gICAgICAgICAgICAgICAgICAvLyB0aGlzIHZhbHVlIGFuZCBhIGxpc3Qgb2YgYXJndW1lbnRzIEV4dHJhQXJncywgdGhlIGZvbGxvd2luZ1xuICAgICAgICAgICAgICAgICAgLy8gc3RlcHMgYXJlIHRha2VuOlxuICAgICAgICAgICAgICAgICAgLy8gMS4gTGV0IGJvdW5kQXJncyBiZSB0aGUgdmFsdWUgb2YgRidzIFtbQm91bmRBcmdzXV0gaW50ZXJuYWxcbiAgICAgICAgICAgICAgICAgIC8vICAgcHJvcGVydHkuXG4gICAgICAgICAgICAgICAgICAvLyAyLiBMZXQgYm91bmRUaGlzIGJlIHRoZSB2YWx1ZSBvZiBGJ3MgW1tCb3VuZFRoaXNdXSBpbnRlcm5hbFxuICAgICAgICAgICAgICAgICAgLy8gICBwcm9wZXJ0eS5cbiAgICAgICAgICAgICAgICAgIC8vIDMuIExldCB0YXJnZXQgYmUgdGhlIHZhbHVlIG9mIEYncyBbW1RhcmdldEZ1bmN0aW9uXV0gaW50ZXJuYWxcbiAgICAgICAgICAgICAgICAgIC8vICAgcHJvcGVydHkuXG4gICAgICAgICAgICAgICAgICAvLyA0LiBMZXQgYXJncyBiZSBhIG5ldyBsaXN0IGNvbnRhaW5pbmcgdGhlIHNhbWUgdmFsdWVzIGFzIHRoZVxuICAgICAgICAgICAgICAgICAgLy8gICBsaXN0IGJvdW5kQXJncyBpbiB0aGUgc2FtZSBvcmRlciBmb2xsb3dlZCBieSB0aGUgc2FtZVxuICAgICAgICAgICAgICAgICAgLy8gICB2YWx1ZXMgYXMgdGhlIGxpc3QgRXh0cmFBcmdzIGluIHRoZSBzYW1lIG9yZGVyLlxuICAgICAgICAgICAgICAgICAgLy8gNS4gUmV0dXJuIHRoZSByZXN1bHQgb2YgY2FsbGluZyB0aGUgW1tDYWxsXV0gaW50ZXJuYWwgbWV0aG9kXG4gICAgICAgICAgICAgICAgICAvLyAgIG9mIHRhcmdldCBwcm92aWRpbmcgYm91bmRUaGlzIGFzIHRoZSB0aGlzIHZhbHVlIGFuZFxuICAgICAgICAgICAgICAgICAgLy8gICBwcm92aWRpbmcgYXJncyBhcyB0aGUgYXJndW1lbnRzLlxuXG4gICAgICAgICAgICAgICAgICAvLyBlcXVpdjogdGFyZ2V0LmNhbGwodGhpcywgLi4uYm91bmRBcmdzLCAuLi5hcmdzKVxuICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldC5hcHBseShcbiAgICAgICAgICAgICAgICAgICAgICB0aGF0LFxuICAgICAgICAgICAgICAgICAgICAgIGFycmF5X2NvbmNhdC5jYWxsKGFyZ3MsIGFycmF5X3NsaWNlLmNhbGwoYXJndW1lbnRzKSlcbiAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfTtcblxuICAgICAgICAgIC8vIDE1LiBJZiB0aGUgW1tDbGFzc11dIGludGVybmFsIHByb3BlcnR5IG9mIFRhcmdldCBpcyBcIkZ1bmN0aW9uXCIsIHRoZW5cbiAgICAgICAgICAvLyAgICAgYS4gTGV0IEwgYmUgdGhlIGxlbmd0aCBwcm9wZXJ0eSBvZiBUYXJnZXQgbWludXMgdGhlIGxlbmd0aCBvZiBBLlxuICAgICAgICAgIC8vICAgICBiLiBTZXQgdGhlIGxlbmd0aCBvd24gcHJvcGVydHkgb2YgRiB0byBlaXRoZXIgMCBvciBMLCB3aGljaGV2ZXIgaXNcbiAgICAgICAgICAvLyAgICAgICBsYXJnZXIuXG4gICAgICAgICAgLy8gMTYuIEVsc2Ugc2V0IHRoZSBsZW5ndGggb3duIHByb3BlcnR5IG9mIEYgdG8gMC5cblxuICAgICAgICAgIHZhciBib3VuZExlbmd0aCA9IG1heCgwLCB0YXJnZXQubGVuZ3RoIC0gYXJncy5sZW5ndGgpO1xuXG4gICAgICAgICAgLy8gMTcuIFNldCB0aGUgYXR0cmlidXRlcyBvZiB0aGUgbGVuZ3RoIG93biBwcm9wZXJ0eSBvZiBGIHRvIHRoZSB2YWx1ZXNcbiAgICAgICAgICAvLyAgIHNwZWNpZmllZCBpbiAxNS4zLjUuMS5cbiAgICAgICAgICB2YXIgYm91bmRBcmdzID0gW107XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBib3VuZExlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIGFycmF5X3B1c2guY2FsbChib3VuZEFyZ3MsICckJyArIGkpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFhYWCBCdWlsZCBhIGR5bmFtaWMgZnVuY3Rpb24gd2l0aCBkZXNpcmVkIGFtb3VudCBvZiBhcmd1bWVudHMgaXMgdGhlIG9ubHlcbiAgICAgICAgICAvLyB3YXkgdG8gc2V0IHRoZSBsZW5ndGggcHJvcGVydHkgb2YgYSBmdW5jdGlvbi5cbiAgICAgICAgICAvLyBJbiBlbnZpcm9ubWVudHMgd2hlcmUgQ29udGVudCBTZWN1cml0eSBQb2xpY2llcyBlbmFibGVkIChDaHJvbWUgZXh0ZW5zaW9ucyxcbiAgICAgICAgICAvLyBmb3IgZXguKSBhbGwgdXNlIG9mIGV2YWwgb3IgRnVuY3Rpb24gY29zdHJ1Y3RvciB0aHJvd3MgYW4gZXhjZXB0aW9uLlxuICAgICAgICAgIC8vIEhvd2V2ZXIgaW4gYWxsIG9mIHRoZXNlIGVudmlyb25tZW50cyBGdW5jdGlvbi5wcm90b3R5cGUuYmluZCBleGlzdHNcbiAgICAgICAgICAvLyBhbmQgc28gdGhpcyBjb2RlIHdpbGwgbmV2ZXIgYmUgZXhlY3V0ZWQuXG4gICAgICAgICAgYm91bmQgPSBGdW5jdGlvbignYmluZGVyJywgJ3JldHVybiBmdW5jdGlvbiAoJyArIGJvdW5kQXJncy5qb2luKCcsJykgKyAnKXsgcmV0dXJuIGJpbmRlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9JykoYmluZGVyKTtcblxuICAgICAgICAgIGlmICh0YXJnZXQucHJvdG90eXBlKSB7XG4gICAgICAgICAgICAgIEVtcHR5LnByb3RvdHlwZSA9IHRhcmdldC5wcm90b3R5cGU7XG4gICAgICAgICAgICAgIGJvdW5kLnByb3RvdHlwZSA9IG5ldyBFbXB0eSgpO1xuICAgICAgICAgICAgICAvLyBDbGVhbiB1cCBkYW5nbGluZyByZWZlcmVuY2VzLlxuICAgICAgICAgICAgICBFbXB0eS5wcm90b3R5cGUgPSBudWxsO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFRPRE9cbiAgICAgICAgICAvLyAxOC4gU2V0IHRoZSBbW0V4dGVuc2libGVdXSBpbnRlcm5hbCBwcm9wZXJ0eSBvZiBGIHRvIHRydWUuXG5cbiAgICAgICAgICAvLyBUT0RPXG4gICAgICAgICAgLy8gMTkuIExldCB0aHJvd2VyIGJlIHRoZSBbW1Rocm93VHlwZUVycm9yXV0gZnVuY3Rpb24gT2JqZWN0ICgxMy4yLjMpLlxuICAgICAgICAgIC8vIDIwLiBDYWxsIHRoZSBbW0RlZmluZU93blByb3BlcnR5XV0gaW50ZXJuYWwgbWV0aG9kIG9mIEYgd2l0aFxuICAgICAgICAgIC8vICAgYXJndW1lbnRzIFwiY2FsbGVyXCIsIFByb3BlcnR5RGVzY3JpcHRvciB7W1tHZXRdXTogdGhyb3dlciwgW1tTZXRdXTpcbiAgICAgICAgICAvLyAgIHRocm93ZXIsIFtbRW51bWVyYWJsZV1dOiBmYWxzZSwgW1tDb25maWd1cmFibGVdXTogZmFsc2V9LCBhbmRcbiAgICAgICAgICAvLyAgIGZhbHNlLlxuICAgICAgICAgIC8vIDIxLiBDYWxsIHRoZSBbW0RlZmluZU93blByb3BlcnR5XV0gaW50ZXJuYWwgbWV0aG9kIG9mIEYgd2l0aFxuICAgICAgICAgIC8vICAgYXJndW1lbnRzIFwiYXJndW1lbnRzXCIsIFByb3BlcnR5RGVzY3JpcHRvciB7W1tHZXRdXTogdGhyb3dlcixcbiAgICAgICAgICAvLyAgIFtbU2V0XV06IHRocm93ZXIsIFtbRW51bWVyYWJsZV1dOiBmYWxzZSwgW1tDb25maWd1cmFibGVdXTogZmFsc2V9LFxuICAgICAgICAgIC8vICAgYW5kIGZhbHNlLlxuXG4gICAgICAgICAgLy8gVE9ET1xuICAgICAgICAgIC8vIE5PVEUgRnVuY3Rpb24gb2JqZWN0cyBjcmVhdGVkIHVzaW5nIEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kIGRvIG5vdFxuICAgICAgICAgIC8vIGhhdmUgYSBwcm90b3R5cGUgcHJvcGVydHkgb3IgdGhlIFtbQ29kZV1dLCBbW0Zvcm1hbFBhcmFtZXRlcnNdXSwgYW5kXG4gICAgICAgICAgLy8gW1tTY29wZV1dIGludGVybmFsIHByb3BlcnRpZXMuXG4gICAgICAgICAgLy8gWFhYIGNhbid0IGRlbGV0ZSBwcm90b3R5cGUgaW4gcHVyZS1qcy5cblxuICAgICAgICAgIC8vIDIyLiBSZXR1cm4gRi5cbiAgICAgICAgICByZXR1cm4gYm91bmQ7XG4gICAgICB9XG4gIH0pO1xufSlcbi5jYWxsKCdvYmplY3QnID09PSB0eXBlb2Ygd2luZG93ICYmIHdpbmRvdyB8fCAnb2JqZWN0JyA9PT0gdHlwZW9mIHNlbGYgJiYgc2VsZiB8fCAnb2JqZWN0JyA9PT0gdHlwZW9mIGdsb2JhbCAmJiBnbG9iYWwgfHwge30pO1xuXG4oZnVuY3Rpb24odW5kZWZpbmVkKSB7XG5cbiAgICAvLyBEZXRlY3Rpb24gZnJvbSBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vRmluYW5jaWFsLVRpbWVzL3BvbHlmaWxsLXNlcnZpY2UvbWFzdGVyL3BhY2thZ2VzL3BvbHlmaWxsLWxpYnJhcnkvcG9seWZpbGxzL0RPTVRva2VuTGlzdC9kZXRlY3QuanNcbiAgICB2YXIgZGV0ZWN0ID0gKFxuICAgICAgJ0RPTVRva2VuTGlzdCcgaW4gdGhpcyAmJiAoZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgcmV0dXJuICdjbGFzc0xpc3QnIGluIHggPyAheC5jbGFzc0xpc3QudG9nZ2xlKCd4JywgZmFsc2UpICYmICF4LmNsYXNzTmFtZSA6IHRydWU7XG4gICAgICB9KShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd4JykpXG4gICAgKTtcblxuICAgIGlmIChkZXRlY3QpIHJldHVyblxuXG4gICAgLy8gUG9seWZpbGwgZnJvbSBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vRmluYW5jaWFsLVRpbWVzL3BvbHlmaWxsLXNlcnZpY2UvbWFzdGVyL3BhY2thZ2VzL3BvbHlmaWxsLWxpYnJhcnkvcG9seWZpbGxzL0RPTVRva2VuTGlzdC9wb2x5ZmlsbC5qc1xuICAgIChmdW5jdGlvbiAoZ2xvYmFsKSB7XG4gICAgICB2YXIgbmF0aXZlSW1wbCA9IFwiRE9NVG9rZW5MaXN0XCIgaW4gZ2xvYmFsICYmIGdsb2JhbC5ET01Ub2tlbkxpc3Q7XG5cbiAgICAgIGlmIChcbiAgICAgICAgICAhbmF0aXZlSW1wbCB8fFxuICAgICAgICAgIChcbiAgICAgICAgICAgICEhZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TICYmXG4gICAgICAgICAgICAhIWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnc3ZnJykgJiZcbiAgICAgICAgICAgICEoZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJzdmdcIikuY2xhc3NMaXN0IGluc3RhbmNlb2YgRE9NVG9rZW5MaXN0KVxuICAgICAgICAgIClcbiAgICAgICAgKSB7XG4gICAgICAgIGdsb2JhbC5ET01Ub2tlbkxpc3QgPSAoZnVuY3Rpb24oKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgICAgICAgICB2YXIgZHBTdXBwb3J0ID0gdHJ1ZTtcbiAgICAgICAgICB2YXIgZGVmaW5lR2V0dGVyID0gZnVuY3Rpb24gKG9iamVjdCwgbmFtZSwgZm4sIGNvbmZpZ3VyYWJsZSkge1xuICAgICAgICAgICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSlcbiAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iamVjdCwgbmFtZSwge1xuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UgPT09IGRwU3VwcG9ydCA/IHRydWUgOiAhIWNvbmZpZ3VyYWJsZSxcbiAgICAgICAgICAgICAgICBnZXQ6IGZuXG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBlbHNlIG9iamVjdC5fX2RlZmluZUdldHRlcl9fKG5hbWUsIGZuKTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgLyoqIEVuc3VyZSB0aGUgYnJvd3NlciBhbGxvd3MgT2JqZWN0LmRlZmluZVByb3BlcnR5IHRvIGJlIHVzZWQgb24gbmF0aXZlIEphdmFTY3JpcHQgb2JqZWN0cy4gKi9cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgZGVmaW5lR2V0dGVyKHt9LCBcInN1cHBvcnRcIik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBkcFN1cHBvcnQgPSBmYWxzZTtcbiAgICAgICAgICB9XG5cblxuICAgICAgICAgIHZhciBfRE9NVG9rZW5MaXN0ID0gZnVuY3Rpb24gKGVsLCBwcm9wKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgdG9rZW5zID0gW107XG4gICAgICAgICAgICB2YXIgdG9rZW5NYXAgPSB7fTtcbiAgICAgICAgICAgIHZhciBsZW5ndGggPSAwO1xuICAgICAgICAgICAgdmFyIG1heExlbmd0aCA9IDA7XG4gICAgICAgICAgICB2YXIgYWRkSW5kZXhHZXR0ZXIgPSBmdW5jdGlvbiAoaSkge1xuICAgICAgICAgICAgICBkZWZpbmVHZXR0ZXIodGhhdCwgaSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHByZW9wKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRva2Vuc1tpXTtcbiAgICAgICAgICAgICAgfSwgZmFsc2UpO1xuXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIHJlaW5kZXggPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgLyoqIERlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBhcnJheS1saWtlIGFjY2VzcyB0byB0aGUgdG9rZW5MaXN0J3MgY29udGVudHMuICovXG4gICAgICAgICAgICAgIGlmIChsZW5ndGggPj0gbWF4TGVuZ3RoKVxuICAgICAgICAgICAgICAgIGZvciAoOyBtYXhMZW5ndGggPCBsZW5ndGg7ICsrbWF4TGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICBhZGRJbmRleEdldHRlcihtYXhMZW5ndGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qKiBIZWxwZXIgZnVuY3Rpb24gY2FsbGVkIGF0IHRoZSBzdGFydCBvZiBlYWNoIGNsYXNzIG1ldGhvZC4gSW50ZXJuYWwgdXNlIG9ubHkuICovXG4gICAgICAgICAgICB2YXIgcHJlb3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHZhciBlcnJvcjtcbiAgICAgICAgICAgICAgdmFyIGk7XG4gICAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICAgICAgICB2YXIgclNwYWNlID0gL1xccysvO1xuXG4gICAgICAgICAgICAgIC8qKiBWYWxpZGF0ZSB0aGUgdG9rZW4vcyBwYXNzZWQgdG8gYW4gaW5zdGFuY2UgbWV0aG9kLCBpZiBhbnkuICovXG4gICAgICAgICAgICAgIGlmIChhcmdzLmxlbmd0aClcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICAgIGlmIChyU3BhY2UudGVzdChhcmdzW2ldKSkge1xuICAgICAgICAgICAgICAgICAgICBlcnJvciA9IG5ldyBTeW50YXhFcnJvcignU3RyaW5nIFwiJyArIGFyZ3NbaV0gKyAnXCIgJyArIFwiY29udGFpbnNcIiArICcgYW4gaW52YWxpZCBjaGFyYWN0ZXInKTtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IuY29kZSA9IDU7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yLm5hbWUgPSBcIkludmFsaWRDaGFyYWN0ZXJFcnJvclwiO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgIC8qKiBTcGxpdCB0aGUgbmV3IHZhbHVlIGFwYXJ0IGJ5IHdoaXRlc3BhY2UqL1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIGVsW3Byb3BdID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgdG9rZW5zID0gKFwiXCIgKyBlbFtwcm9wXS5iYXNlVmFsKS5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCBcIlwiKS5zcGxpdChyU3BhY2UpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRva2VucyA9IChcIlwiICsgZWxbcHJvcF0pLnJlcGxhY2UoL15cXHMrfFxccyskL2csIFwiXCIpLnNwbGl0KHJTcGFjZSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvKiogQXZvaWQgdHJlYXRpbmcgYmxhbmsgc3RyaW5ncyBhcyBzaW5nbGUtaXRlbSB0b2tlbiBsaXN0cyAqL1xuICAgICAgICAgICAgICBpZiAoXCJcIiA9PT0gdG9rZW5zWzBdKSB0b2tlbnMgPSBbXTtcblxuICAgICAgICAgICAgICAvKiogUmVwb3B1bGF0ZSB0aGUgaW50ZXJuYWwgdG9rZW4gbGlzdHMgKi9cbiAgICAgICAgICAgICAgdG9rZW5NYXAgPSB7fTtcbiAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHRva2Vucy5sZW5ndGg7ICsraSlcbiAgICAgICAgICAgICAgICB0b2tlbk1hcFt0b2tlbnNbaV1dID0gdHJ1ZTtcbiAgICAgICAgICAgICAgbGVuZ3RoID0gdG9rZW5zLmxlbmd0aDtcbiAgICAgICAgICAgICAgcmVpbmRleCgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqIFBvcHVsYXRlIG91ciBpbnRlcm5hbCB0b2tlbiBsaXN0IGlmIHRoZSB0YXJnZXRlZCBhdHRyaWJ1dGUgb2YgdGhlIHN1YmplY3QgZWxlbWVudCBpc24ndCBlbXB0eS4gKi9cbiAgICAgICAgICAgIHByZW9wKCk7XG5cbiAgICAgICAgICAgIC8qKiBSZXR1cm4gdGhlIG51bWJlciBvZiB0b2tlbnMgaW4gdGhlIHVuZGVybHlpbmcgc3RyaW5nLiBSZWFkLW9ubHkuICovXG4gICAgICAgICAgICBkZWZpbmVHZXR0ZXIodGhhdCwgXCJsZW5ndGhcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBwcmVvcCgpO1xuICAgICAgICAgICAgICByZXR1cm4gbGVuZ3RoO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8qKiBPdmVycmlkZSB0aGUgZGVmYXVsdCB0b1N0cmluZy90b0xvY2FsZVN0cmluZyBtZXRob2RzIHRvIHJldHVybiBhIHNwYWNlLWRlbGltaXRlZCBsaXN0IG9mIHRva2VucyB3aGVuIHR5cGVjYXN0LiAqL1xuICAgICAgICAgICAgdGhhdC50b0xvY2FsZVN0cmluZyA9XG4gICAgICAgICAgICAgIHRoYXQudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcHJlb3AoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdG9rZW5zLmpvaW4oXCIgXCIpO1xuICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGF0Lml0ZW0gPSBmdW5jdGlvbiAoaWR4KSB7XG4gICAgICAgICAgICAgIHByZW9wKCk7XG4gICAgICAgICAgICAgIHJldHVybiB0b2tlbnNbaWR4XTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoYXQuY29udGFpbnMgPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgICAgICAgcHJlb3AoKTtcbiAgICAgICAgICAgICAgcmV0dXJuICEhdG9rZW5NYXBbdG9rZW5dO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhhdC5hZGQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHByZW9wLmFwcGx5KHRoYXQsIGFyZ3MgPSBhcmd1bWVudHMpO1xuXG4gICAgICAgICAgICAgIGZvciAodmFyIGFyZ3MsIHRva2VuLCBpID0gMCwgbCA9IGFyZ3MubGVuZ3RoOyBpIDwgbDsgKytpKSB7XG4gICAgICAgICAgICAgICAgdG9rZW4gPSBhcmdzW2ldO1xuICAgICAgICAgICAgICAgIGlmICghdG9rZW5NYXBbdG9rZW5dKSB7XG4gICAgICAgICAgICAgICAgICB0b2tlbnMucHVzaCh0b2tlbik7XG4gICAgICAgICAgICAgICAgICB0b2tlbk1hcFt0b2tlbl0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC8qKiBVcGRhdGUgdGhlIHRhcmdldGVkIGF0dHJpYnV0ZSBvZiB0aGUgYXR0YWNoZWQgZWxlbWVudCBpZiB0aGUgdG9rZW4gbGlzdCdzIGNoYW5nZWQuICovXG4gICAgICAgICAgICAgIGlmIChsZW5ndGggIT09IHRva2Vucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBsZW5ndGggPSB0b2tlbnMubGVuZ3RoID4+PiAwO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZWxbcHJvcF0gPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICAgIGVsW3Byb3BdLmJhc2VWYWwgPSB0b2tlbnMuam9pbihcIiBcIik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGVsW3Byb3BdID0gdG9rZW5zLmpvaW4oXCIgXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZWluZGV4KCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoYXQucmVtb3ZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBwcmVvcC5hcHBseSh0aGF0LCBhcmdzID0gYXJndW1lbnRzKTtcblxuICAgICAgICAgICAgICAvKiogQnVpbGQgYSBoYXNoIG9mIHRva2VuIG5hbWVzIHRvIGNvbXBhcmUgYWdhaW5zdCB3aGVuIHJlY29sbGVjdGluZyBvdXIgdG9rZW4gbGlzdC4gKi9cbiAgICAgICAgICAgICAgZm9yICh2YXIgYXJncywgaWdub3JlID0ge30sIGkgPSAwLCB0ID0gW107IGkgPCBhcmdzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgaWdub3JlW2FyZ3NbaV1dID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBkZWxldGUgdG9rZW5NYXBbYXJnc1tpXV07XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvKiogUnVuIHRocm91Z2ggb3VyIHRva2VucyBsaXN0IGFuZCByZWFzc2lnbiBvbmx5IHRob3NlIHRoYXQgYXJlbid0IGRlZmluZWQgaW4gdGhlIGhhc2ggZGVjbGFyZWQgYWJvdmUuICovXG4gICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyArK2kpXG4gICAgICAgICAgICAgICAgaWYgKCFpZ25vcmVbdG9rZW5zW2ldXSkgdC5wdXNoKHRva2Vuc1tpXSk7XG5cbiAgICAgICAgICAgICAgdG9rZW5zID0gdDtcbiAgICAgICAgICAgICAgbGVuZ3RoID0gdC5sZW5ndGggPj4+IDA7XG5cbiAgICAgICAgICAgICAgLyoqIFVwZGF0ZSB0aGUgdGFyZ2V0ZWQgYXR0cmlidXRlIG9mIHRoZSBhdHRhY2hlZCBlbGVtZW50LiAqL1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIGVsW3Byb3BdID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgZWxbcHJvcF0uYmFzZVZhbCA9IHRva2Vucy5qb2luKFwiIFwiKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbFtwcm9wXSA9IHRva2Vucy5qb2luKFwiIFwiKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZWluZGV4KCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGF0LnRvZ2dsZSA9IGZ1bmN0aW9uICh0b2tlbiwgZm9yY2UpIHtcbiAgICAgICAgICAgICAgcHJlb3AuYXBwbHkodGhhdCwgW3Rva2VuXSk7XG5cbiAgICAgICAgICAgICAgLyoqIFRva2VuIHN0YXRlJ3MgYmVpbmcgZm9yY2VkLiAqL1xuICAgICAgICAgICAgICBpZiAodW5kZWZpbmVkICE9PSBmb3JjZSkge1xuICAgICAgICAgICAgICAgIGlmIChmb3JjZSkge1xuICAgICAgICAgICAgICAgICAgdGhhdC5hZGQodG9rZW4pO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHRoYXQucmVtb3ZlKHRva2VuKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvKiogVG9rZW4gYWxyZWFkeSBleGlzdHMgaW4gdG9rZW5MaXN0LiBSZW1vdmUgaXQsIGFuZCByZXR1cm4gRkFMU0UuICovXG4gICAgICAgICAgICAgIGlmICh0b2tlbk1hcFt0b2tlbl0pIHtcbiAgICAgICAgICAgICAgICB0aGF0LnJlbW92ZSh0b2tlbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLyoqIE90aGVyd2lzZSwgYWRkIHRoZSB0b2tlbiBhbmQgcmV0dXJuIFRSVUUuICovXG4gICAgICAgICAgICAgIHRoYXQuYWRkKHRva2VuKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gdGhhdDtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgcmV0dXJuIF9ET01Ub2tlbkxpc3Q7XG4gICAgICAgIH0oKSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCBzZWNvbmQgYXJndW1lbnQgdG8gbmF0aXZlIERPTVRva2VuTGlzdC50b2dnbGUoKSBpZiBuZWNlc3NhcnlcbiAgICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICBpZiAoISgnY2xhc3NMaXN0JyBpbiBlKSkgcmV0dXJuO1xuICAgICAgICBlLmNsYXNzTGlzdC50b2dnbGUoJ3gnLCBmYWxzZSk7XG4gICAgICAgIGlmICghZS5jbGFzc0xpc3QuY29udGFpbnMoJ3gnKSkgcmV0dXJuO1xuICAgICAgICBlLmNsYXNzTGlzdC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUudG9nZ2xlID0gZnVuY3Rpb24gdG9nZ2xlKHRva2VuIC8qLCBmb3JjZSovKSB7XG4gICAgICAgICAgdmFyIGZvcmNlID0gYXJndW1lbnRzWzFdO1xuICAgICAgICAgIGlmIChmb3JjZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgYWRkID0gIXRoaXMuY29udGFpbnModG9rZW4pO1xuICAgICAgICAgICAgdGhpc1thZGQgPyAnYWRkJyA6ICdyZW1vdmUnXSh0b2tlbik7XG4gICAgICAgICAgICByZXR1cm4gYWRkO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmb3JjZSA9ICEhZm9yY2U7XG4gICAgICAgICAgdGhpc1tmb3JjZSA/ICdhZGQnIDogJ3JlbW92ZSddKHRva2VuKTtcbiAgICAgICAgICByZXR1cm4gZm9yY2U7XG4gICAgICAgIH07XG4gICAgICB9KCkpO1xuXG4gICAgICAvLyBBZGQgbXVsdGlwbGUgYXJndW1lbnRzIHRvIG5hdGl2ZSBET01Ub2tlbkxpc3QuYWRkKCkgaWYgbmVjZXNzYXJ5XG4gICAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgaWYgKCEoJ2NsYXNzTGlzdCcgaW4gZSkpIHJldHVybjtcbiAgICAgICAgZS5jbGFzc0xpc3QuYWRkKCdhJywgJ2InKTtcbiAgICAgICAgaWYgKGUuY2xhc3NMaXN0LmNvbnRhaW5zKCdiJykpIHJldHVybjtcbiAgICAgICAgdmFyIG5hdGl2ZSA9IGUuY2xhc3NMaXN0LmNvbnN0cnVjdG9yLnByb3RvdHlwZS5hZGQ7XG4gICAgICAgIGUuY2xhc3NMaXN0LmNvbnN0cnVjdG9yLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICAgICAgdmFyIGwgPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICBuYXRpdmUuY2FsbCh0aGlzLCBhcmdzW2ldKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KCkpO1xuXG4gICAgICAvLyBBZGQgbXVsdGlwbGUgYXJndW1lbnRzIHRvIG5hdGl2ZSBET01Ub2tlbkxpc3QucmVtb3ZlKCkgaWYgbmVjZXNzYXJ5XG4gICAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgaWYgKCEoJ2NsYXNzTGlzdCcgaW4gZSkpIHJldHVybjtcbiAgICAgICAgZS5jbGFzc0xpc3QuYWRkKCdhJyk7XG4gICAgICAgIGUuY2xhc3NMaXN0LmFkZCgnYicpO1xuICAgICAgICBlLmNsYXNzTGlzdC5yZW1vdmUoJ2EnLCAnYicpO1xuICAgICAgICBpZiAoIWUuY2xhc3NMaXN0LmNvbnRhaW5zKCdiJykpIHJldHVybjtcbiAgICAgICAgdmFyIG5hdGl2ZSA9IGUuY2xhc3NMaXN0LmNvbnN0cnVjdG9yLnByb3RvdHlwZS5yZW1vdmU7XG4gICAgICAgIGUuY2xhc3NMaXN0LmNvbnN0cnVjdG9yLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICAgICAgdmFyIGwgPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICBuYXRpdmUuY2FsbCh0aGlzLCBhcmdzW2ldKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KCkpO1xuXG4gICAgfSh0aGlzKSk7XG5cbn0pLmNhbGwoJ29iamVjdCcgPT09IHR5cGVvZiB3aW5kb3cgJiYgd2luZG93IHx8ICdvYmplY3QnID09PSB0eXBlb2Ygc2VsZiAmJiBzZWxmIHx8ICdvYmplY3QnID09PSB0eXBlb2YgZ2xvYmFsICYmIGdsb2JhbCB8fCB7fSk7XG5cbihmdW5jdGlvbih1bmRlZmluZWQpIHtcblxuLy8gRGV0ZWN0aW9uIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL0ZpbmFuY2lhbC1UaW1lcy9wb2x5ZmlsbC1zZXJ2aWNlL2Jsb2IvbWFzdGVyL3BhY2thZ2VzL3BvbHlmaWxsLWxpYnJhcnkvcG9seWZpbGxzL0RvY3VtZW50L2RldGVjdC5qc1xudmFyIGRldGVjdCA9IChcIkRvY3VtZW50XCIgaW4gdGhpcyk7XG5cbmlmIChkZXRlY3QpIHJldHVyblxuXG4vLyBQb2x5ZmlsbCBmcm9tIGh0dHBzOi8vY2RuLnBvbHlmaWxsLmlvL3YyL3BvbHlmaWxsLmpzP2ZlYXR1cmVzPURvY3VtZW50JmZsYWdzPWFsd2F5c1xuaWYgKCh0eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUgPT09IFwidW5kZWZpbmVkXCIpICYmICh0eXBlb2YgaW1wb3J0U2NyaXB0cyAhPT0gXCJmdW5jdGlvblwiKSkge1xuXG5cdGlmICh0aGlzLkhUTUxEb2N1bWVudCkgeyAvLyBJRThcblxuXHRcdC8vIEhUTUxEb2N1bWVudCBpcyBhbiBleHRlbnNpb24gb2YgRG9jdW1lbnQuICBJZiB0aGUgYnJvd3NlciBoYXMgSFRNTERvY3VtZW50IGJ1dCBub3QgRG9jdW1lbnQsIHRoZSBmb3JtZXIgd2lsbCBzdWZmaWNlIGFzIGFuIGFsaWFzIGZvciB0aGUgbGF0dGVyLlxuXHRcdHRoaXMuRG9jdW1lbnQgPSB0aGlzLkhUTUxEb2N1bWVudDtcblxuXHR9IGVsc2Uge1xuXG5cdFx0Ly8gQ3JlYXRlIGFuIGVtcHR5IGZ1bmN0aW9uIHRvIGFjdCBhcyB0aGUgbWlzc2luZyBjb25zdHJ1Y3RvciBmb3IgdGhlIGRvY3VtZW50IG9iamVjdCwgYXR0YWNoIHRoZSBkb2N1bWVudCBvYmplY3QgYXMgaXRzIHByb3RvdHlwZS4gIFRoZSBmdW5jdGlvbiBuZWVkcyB0byBiZSBhbm9ueW1vdXMgZWxzZSBpdCBpcyBob2lzdGVkIGFuZCBjYXVzZXMgdGhlIGZlYXR1cmUgZGV0ZWN0IHRvIHByZW1hdHVyZWx5IHBhc3MsIHByZXZlbnRpbmcgdGhlIGFzc2lnbm1lbnRzIGJlbG93IGJlaW5nIG1hZGUuXG5cdFx0dGhpcy5Eb2N1bWVudCA9IHRoaXMuSFRNTERvY3VtZW50ID0gZG9jdW1lbnQuY29uc3RydWN0b3IgPSAobmV3IEZ1bmN0aW9uKCdyZXR1cm4gZnVuY3Rpb24gRG9jdW1lbnQoKSB7fScpKCkpO1xuXHRcdHRoaXMuRG9jdW1lbnQucHJvdG90eXBlID0gZG9jdW1lbnQ7XG5cdH1cbn1cblxuXG59KVxuLmNhbGwoJ29iamVjdCcgPT09IHR5cGVvZiB3aW5kb3cgJiYgd2luZG93IHx8ICdvYmplY3QnID09PSB0eXBlb2Ygc2VsZiAmJiBzZWxmIHx8ICdvYmplY3QnID09PSB0eXBlb2YgZ2xvYmFsICYmIGdsb2JhbCB8fCB7fSk7XG5cbihmdW5jdGlvbih1bmRlZmluZWQpIHtcblxuLy8gRGV0ZWN0aW9uIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL0ZpbmFuY2lhbC1UaW1lcy9wb2x5ZmlsbC1zZXJ2aWNlL2Jsb2IvbWFzdGVyL3BhY2thZ2VzL3BvbHlmaWxsLWxpYnJhcnkvcG9seWZpbGxzL0VsZW1lbnQvZGV0ZWN0LmpzXG52YXIgZGV0ZWN0ID0gKCdFbGVtZW50JyBpbiB0aGlzICYmICdIVE1MRWxlbWVudCcgaW4gdGhpcyk7XG5cbmlmIChkZXRlY3QpIHJldHVyblxuXG4vLyBQb2x5ZmlsbCBmcm9tIGh0dHBzOi8vY2RuLnBvbHlmaWxsLmlvL3YyL3BvbHlmaWxsLmpzP2ZlYXR1cmVzPUVsZW1lbnQmZmxhZ3M9YWx3YXlzXG4oZnVuY3Rpb24gKCkge1xuXG5cdC8vIElFOFxuXHRpZiAod2luZG93LkVsZW1lbnQgJiYgIXdpbmRvdy5IVE1MRWxlbWVudCkge1xuXHRcdHdpbmRvdy5IVE1MRWxlbWVudCA9IHdpbmRvdy5FbGVtZW50O1xuXHRcdHJldHVybjtcblx0fVxuXG5cdC8vIGNyZWF0ZSBFbGVtZW50IGNvbnN0cnVjdG9yXG5cdHdpbmRvdy5FbGVtZW50ID0gd2luZG93LkhUTUxFbGVtZW50ID0gbmV3IEZ1bmN0aW9uKCdyZXR1cm4gZnVuY3Rpb24gRWxlbWVudCgpIHt9JykoKTtcblxuXHQvLyBnZW5lcmF0ZSBzYW5kYm94ZWQgaWZyYW1lXG5cdHZhciB2Ym9keSA9IGRvY3VtZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2JvZHknKSk7XG5cdHZhciBmcmFtZSA9IHZib2R5LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpKTtcblxuXHQvLyB1c2Ugc2FuZGJveGVkIGlmcmFtZSB0byByZXBsaWNhdGUgRWxlbWVudCBmdW5jdGlvbmFsaXR5XG5cdHZhciBmcmFtZURvY3VtZW50ID0gZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudDtcblx0dmFyIHByb3RvdHlwZSA9IEVsZW1lbnQucHJvdG90eXBlID0gZnJhbWVEb2N1bWVudC5hcHBlbmRDaGlsZChmcmFtZURvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJyonKSk7XG5cdHZhciBjYWNoZSA9IHt9O1xuXG5cdC8vIHBvbHlmaWxsIEVsZW1lbnQucHJvdG90eXBlIG9uIGFuIGVsZW1lbnRcblx0dmFyIHNoaXYgPSBmdW5jdGlvbiAoZWxlbWVudCwgZGVlcCkge1xuXHRcdHZhclxuXHRcdGNoaWxkTm9kZXMgPSBlbGVtZW50LmNoaWxkTm9kZXMgfHwgW10sXG5cdFx0aW5kZXggPSAtMSxcblx0XHRrZXksIHZhbHVlLCBjaGlsZE5vZGU7XG5cblx0XHRpZiAoZWxlbWVudC5ub2RlVHlwZSA9PT0gMSAmJiBlbGVtZW50LmNvbnN0cnVjdG9yICE9PSBFbGVtZW50KSB7XG5cdFx0XHRlbGVtZW50LmNvbnN0cnVjdG9yID0gRWxlbWVudDtcblxuXHRcdFx0Zm9yIChrZXkgaW4gY2FjaGUpIHtcblx0XHRcdFx0dmFsdWUgPSBjYWNoZVtrZXldO1xuXHRcdFx0XHRlbGVtZW50W2tleV0gPSB2YWx1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR3aGlsZSAoY2hpbGROb2RlID0gZGVlcCAmJiBjaGlsZE5vZGVzWysraW5kZXhdKSB7XG5cdFx0XHRzaGl2KGNoaWxkTm9kZSwgZGVlcCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGVsZW1lbnQ7XG5cdH07XG5cblx0dmFyIGVsZW1lbnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJyonKTtcblx0dmFyIG5hdGl2ZUNyZWF0ZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50O1xuXHR2YXIgaW50ZXJ2YWw7XG5cdHZhciBsb29wTGltaXQgPSAxMDA7XG5cblx0cHJvdG90eXBlLmF0dGFjaEV2ZW50KCdvbnByb3BlcnR5Y2hhbmdlJywgZnVuY3Rpb24gKGV2ZW50KSB7XG5cdFx0dmFyXG5cdFx0cHJvcGVydHlOYW1lID0gZXZlbnQucHJvcGVydHlOYW1lLFxuXHRcdG5vblZhbHVlID0gIWNhY2hlLmhhc093blByb3BlcnR5KHByb3BlcnR5TmFtZSksXG5cdFx0bmV3VmFsdWUgPSBwcm90b3R5cGVbcHJvcGVydHlOYW1lXSxcblx0XHRvbGRWYWx1ZSA9IGNhY2hlW3Byb3BlcnR5TmFtZV0sXG5cdFx0aW5kZXggPSAtMSxcblx0XHRlbGVtZW50O1xuXG5cdFx0d2hpbGUgKGVsZW1lbnQgPSBlbGVtZW50c1srK2luZGV4XSkge1xuXHRcdFx0aWYgKGVsZW1lbnQubm9kZVR5cGUgPT09IDEpIHtcblx0XHRcdFx0aWYgKG5vblZhbHVlIHx8IGVsZW1lbnRbcHJvcGVydHlOYW1lXSA9PT0gb2xkVmFsdWUpIHtcblx0XHRcdFx0XHRlbGVtZW50W3Byb3BlcnR5TmFtZV0gPSBuZXdWYWx1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGNhY2hlW3Byb3BlcnR5TmFtZV0gPSBuZXdWYWx1ZTtcblx0fSk7XG5cblx0cHJvdG90eXBlLmNvbnN0cnVjdG9yID0gRWxlbWVudDtcblxuXHRpZiAoIXByb3RvdHlwZS5oYXNBdHRyaWJ1dGUpIHtcblx0XHQvLyA8RWxlbWVudD4uaGFzQXR0cmlidXRlXG5cdFx0cHJvdG90eXBlLmhhc0F0dHJpYnV0ZSA9IGZ1bmN0aW9uIGhhc0F0dHJpYnV0ZShuYW1lKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUobmFtZSkgIT09IG51bGw7XG5cdFx0fTtcblx0fVxuXG5cdC8vIEFwcGx5IEVsZW1lbnQgcHJvdG90eXBlIHRvIHRoZSBwcmUtZXhpc3RpbmcgRE9NIGFzIHNvb24gYXMgdGhlIGJvZHkgZWxlbWVudCBhcHBlYXJzLlxuXHRmdW5jdGlvbiBib2R5Q2hlY2soKSB7XG5cdFx0aWYgKCEobG9vcExpbWl0LS0pKSBjbGVhclRpbWVvdXQoaW50ZXJ2YWwpO1xuXHRcdGlmIChkb2N1bWVudC5ib2R5ICYmICFkb2N1bWVudC5ib2R5LnByb3RvdHlwZSAmJiAvKGNvbXBsZXRlfGludGVyYWN0aXZlKS8udGVzdChkb2N1bWVudC5yZWFkeVN0YXRlKSkge1xuXHRcdFx0c2hpdihkb2N1bWVudCwgdHJ1ZSk7XG5cdFx0XHRpZiAoaW50ZXJ2YWwgJiYgZG9jdW1lbnQuYm9keS5wcm90b3R5cGUpIGNsZWFyVGltZW91dChpbnRlcnZhbCk7XG5cdFx0XHRyZXR1cm4gKCEhZG9jdW1lbnQuYm9keS5wcm90b3R5cGUpO1xuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblx0aWYgKCFib2R5Q2hlY2soKSkge1xuXHRcdGRvY3VtZW50Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGJvZHlDaGVjaztcblx0XHRpbnRlcnZhbCA9IHNldEludGVydmFsKGJvZHlDaGVjaywgMjUpO1xuXHR9XG5cblx0Ly8gQXBwbHkgdG8gYW55IG5ldyBlbGVtZW50cyBjcmVhdGVkIGFmdGVyIGxvYWRcblx0ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCA9IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQobm9kZU5hbWUpIHtcblx0XHR2YXIgZWxlbWVudCA9IG5hdGl2ZUNyZWF0ZUVsZW1lbnQoU3RyaW5nKG5vZGVOYW1lKS50b0xvd2VyQ2FzZSgpKTtcblx0XHRyZXR1cm4gc2hpdihlbGVtZW50KTtcblx0fTtcblxuXHQvLyByZW1vdmUgc2FuZGJveGVkIGlmcmFtZVxuXHRkb2N1bWVudC5yZW1vdmVDaGlsZCh2Ym9keSk7XG59KCkpO1xuXG59KVxuLmNhbGwoJ29iamVjdCcgPT09IHR5cGVvZiB3aW5kb3cgJiYgd2luZG93IHx8ICdvYmplY3QnID09PSB0eXBlb2Ygc2VsZiAmJiBzZWxmIHx8ICdvYmplY3QnID09PSB0eXBlb2YgZ2xvYmFsICYmIGdsb2JhbCB8fCB7fSk7XG5cbihmdW5jdGlvbih1bmRlZmluZWQpIHtcblxuICAgIC8vIERldGVjdGlvbiBmcm9tIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9GaW5hbmNpYWwtVGltZXMvcG9seWZpbGwtc2VydmljZS84NzE3YTllMDRhYzdhZmY5OWI0OTgwZmJlZGVhZDk4MDM2YjA5MjlhL3BhY2thZ2VzL3BvbHlmaWxsLWxpYnJhcnkvcG9seWZpbGxzL0VsZW1lbnQvcHJvdG90eXBlL2NsYXNzTGlzdC9kZXRlY3QuanNcbiAgICB2YXIgZGV0ZWN0ID0gKFxuICAgICAgJ2RvY3VtZW50JyBpbiB0aGlzICYmIFwiY2xhc3NMaXN0XCIgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmICdFbGVtZW50JyBpbiB0aGlzICYmICdjbGFzc0xpc3QnIGluIEVsZW1lbnQucHJvdG90eXBlICYmIChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICBlLmNsYXNzTGlzdC5hZGQoJ2EnLCAnYicpO1xuICAgICAgICByZXR1cm4gZS5jbGFzc0xpc3QuY29udGFpbnMoJ2InKTtcbiAgICAgIH0oKSlcbiAgICApO1xuXG4gICAgaWYgKGRldGVjdCkgcmV0dXJuXG5cbiAgICAvLyBQb2x5ZmlsbCBmcm9tIGh0dHBzOi8vY2RuLnBvbHlmaWxsLmlvL3YyL3BvbHlmaWxsLmpzP2ZlYXR1cmVzPUVsZW1lbnQucHJvdG90eXBlLmNsYXNzTGlzdCZmbGFncz1hbHdheXNcbiAgICAoZnVuY3Rpb24gKGdsb2JhbCkge1xuICAgICAgdmFyIGRwU3VwcG9ydCA9IHRydWU7XG4gICAgICB2YXIgZGVmaW5lR2V0dGVyID0gZnVuY3Rpb24gKG9iamVjdCwgbmFtZSwgZm4sIGNvbmZpZ3VyYWJsZSkge1xuICAgICAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KVxuICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmplY3QsIG5hbWUsIHtcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UgPT09IGRwU3VwcG9ydCA/IHRydWUgOiAhIWNvbmZpZ3VyYWJsZSxcbiAgICAgICAgICAgIGdldDogZm5cbiAgICAgICAgICB9KTtcblxuICAgICAgICBlbHNlIG9iamVjdC5fX2RlZmluZUdldHRlcl9fKG5hbWUsIGZuKTtcbiAgICAgIH07XG4gICAgICAvKiogRW5zdXJlIHRoZSBicm93c2VyIGFsbG93cyBPYmplY3QuZGVmaW5lUHJvcGVydHkgdG8gYmUgdXNlZCBvbiBuYXRpdmUgSmF2YVNjcmlwdCBvYmplY3RzLiAqL1xuICAgICAgdHJ5IHtcbiAgICAgICAgZGVmaW5lR2V0dGVyKHt9LCBcInN1cHBvcnRcIik7XG4gICAgICB9XG4gICAgICBjYXRjaCAoZSkge1xuICAgICAgICBkcFN1cHBvcnQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIC8qKiBQb2x5ZmlsbHMgYSBwcm9wZXJ0eSB3aXRoIGEgRE9NVG9rZW5MaXN0ICovXG4gICAgICB2YXIgYWRkUHJvcCA9IGZ1bmN0aW9uIChvLCBuYW1lLCBhdHRyKSB7XG5cbiAgICAgICAgZGVmaW5lR2V0dGVyKG8ucHJvdG90eXBlLCBuYW1lLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIHRva2VuTGlzdDtcblxuICAgICAgICAgIHZhciBUSElTID0gdGhpcyxcblxuICAgICAgICAgIC8qKiBQcmV2ZW50IHRoaXMgZnJvbSBmaXJpbmcgdHdpY2UgZm9yIHNvbWUgcmVhc29uLiBXaGF0IHRoZSBoZWxsLCBJRS4gKi9cbiAgICAgICAgICBnaWJiZXJpc2hQcm9wZXJ0eSA9IFwiX19kZWZpbmVHZXR0ZXJfX1wiICsgXCJERUZJTkVfUFJPUEVSVFlcIiArIG5hbWU7XG4gICAgICAgICAgaWYoVEhJU1tnaWJiZXJpc2hQcm9wZXJ0eV0pIHJldHVybiB0b2tlbkxpc3Q7XG4gICAgICAgICAgVEhJU1tnaWJiZXJpc2hQcm9wZXJ0eV0gPSB0cnVlO1xuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogSUU4IGNhbid0IGRlZmluZSBwcm9wZXJ0aWVzIG9uIG5hdGl2ZSBKYXZhU2NyaXB0IG9iamVjdHMsIHNvIHdlJ2xsIHVzZSBhIGR1bWIgaGFjayBpbnN0ZWFkLlxuICAgICAgICAgICAqXG4gICAgICAgICAgICogV2hhdCB0aGlzIGlzIGRvaW5nIGlzIGNyZWF0aW5nIGEgZHVtbXkgZWxlbWVudCAoXCJyZWZsZWN0aW9uXCIpIGluc2lkZSBhIGRldGFjaGVkIHBoYW50b20gbm9kZSAoXCJtaXJyb3JcIilcbiAgICAgICAgICAgKiB0aGF0IHNlcnZlcyBhcyB0aGUgdGFyZ2V0IG9mIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSBpbnN0ZWFkLiBXaGlsZSB3ZSBjb3VsZCBzaW1wbHkgdXNlIHRoZSBzdWJqZWN0IEhUTUxcbiAgICAgICAgICAgKiBlbGVtZW50IGluc3RlYWQsIHRoaXMgd291bGQgY29uZmxpY3Qgd2l0aCBlbGVtZW50IHR5cGVzIHdoaWNoIHVzZSBpbmRleGVkIHByb3BlcnRpZXMgKHN1Y2ggYXMgZm9ybXMgYW5kXG4gICAgICAgICAgICogc2VsZWN0IGxpc3RzKS5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBpZiAoZmFsc2UgPT09IGRwU3VwcG9ydCkge1xuXG4gICAgICAgICAgICB2YXIgdmlzYWdlO1xuICAgICAgICAgICAgdmFyIG1pcnJvciA9IGFkZFByb3AubWlycm9yIHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICB2YXIgcmVmbGVjdGlvbnMgPSBtaXJyb3IuY2hpbGROb2RlcztcbiAgICAgICAgICAgIHZhciBsID0gcmVmbGVjdGlvbnMubGVuZ3RoO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGw7ICsraSlcbiAgICAgICAgICAgICAgaWYgKHJlZmxlY3Rpb25zW2ldLl9SID09PSBUSElTKSB7XG4gICAgICAgICAgICAgICAgdmlzYWdlID0gcmVmbGVjdGlvbnNbaV07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqIENvdWxkbid0IGZpbmQgYW4gZWxlbWVudCdzIHJlZmxlY3Rpb24gaW5zaWRlIHRoZSBtaXJyb3IuIE1hdGVyaWFsaXNlIG9uZS4gKi9cbiAgICAgICAgICAgIHZpc2FnZSB8fCAodmlzYWdlID0gbWlycm9yLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpKTtcblxuICAgICAgICAgICAgdG9rZW5MaXN0ID0gRE9NVG9rZW5MaXN0LmNhbGwodmlzYWdlLCBUSElTLCBhdHRyKTtcbiAgICAgICAgICB9IGVsc2UgdG9rZW5MaXN0ID0gbmV3IERPTVRva2VuTGlzdChUSElTLCBhdHRyKTtcblxuICAgICAgICAgIGRlZmluZUdldHRlcihUSElTLCBuYW1lLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdG9rZW5MaXN0O1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGRlbGV0ZSBUSElTW2dpYmJlcmlzaFByb3BlcnR5XTtcblxuICAgICAgICAgIHJldHVybiB0b2tlbkxpc3Q7XG4gICAgICAgIH0sIHRydWUpO1xuICAgICAgfTtcblxuICAgICAgYWRkUHJvcChnbG9iYWwuRWxlbWVudCwgXCJjbGFzc0xpc3RcIiwgXCJjbGFzc05hbWVcIik7XG4gICAgICBhZGRQcm9wKGdsb2JhbC5IVE1MRWxlbWVudCwgXCJjbGFzc0xpc3RcIiwgXCJjbGFzc05hbWVcIik7XG4gICAgICBhZGRQcm9wKGdsb2JhbC5IVE1MTGlua0VsZW1lbnQsIFwicmVsTGlzdFwiLCBcInJlbFwiKTtcbiAgICAgIGFkZFByb3AoZ2xvYmFsLkhUTUxBbmNob3JFbGVtZW50LCBcInJlbExpc3RcIiwgXCJyZWxcIik7XG4gICAgICBhZGRQcm9wKGdsb2JhbC5IVE1MQXJlYUVsZW1lbnQsIFwicmVsTGlzdFwiLCBcInJlbFwiKTtcbiAgICB9KHRoaXMpKTtcblxufSkuY2FsbCgnb2JqZWN0JyA9PT0gdHlwZW9mIHdpbmRvdyAmJiB3aW5kb3cgfHwgJ29iamVjdCcgPT09IHR5cGVvZiBzZWxmICYmIHNlbGYgfHwgJ29iamVjdCcgPT09IHR5cGVvZiBnbG9iYWwgJiYgZ2xvYmFsIHx8IHt9KTtcblxuKGZ1bmN0aW9uKHVuZGVmaW5lZCkge1xuXG4gICAgLy8gRGV0ZWN0aW9uIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL21kbi9jb250ZW50L2Jsb2IvY2Y2MDdkNjg1MjJjZDM1ZWU3NjcwNzgyZDNlZTNhMzYxZWFlZjJlNC9maWxlcy9lbi11cy93ZWIvamF2YXNjcmlwdC9yZWZlcmVuY2UvZ2xvYmFsX29iamVjdHMvc3RyaW5nL3RyaW0vaW5kZXgubWQjcG9seWZpbGxcbiAgICB2YXIgZGV0ZWN0ID0gKCd0cmltJyBpbiBTdHJpbmcucHJvdG90eXBlKTtcbiAgICBcbiAgICBpZiAoZGV0ZWN0KSByZXR1cm5cblxuICAgIC8vIFBvbHlmaWxsIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL21kbi9jb250ZW50L2Jsb2IvY2Y2MDdkNjg1MjJjZDM1ZWU3NjcwNzgyZDNlZTNhMzYxZWFlZjJlNC9maWxlcy9lbi11cy93ZWIvamF2YXNjcmlwdC9yZWZlcmVuY2UvZ2xvYmFsX29iamVjdHMvc3RyaW5nL3RyaW0vaW5kZXgubWQjcG9seWZpbGxcbiAgICBTdHJpbmcucHJvdG90eXBlLnRyaW0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcGxhY2UoL15bXFxzXFx1RkVGRlxceEEwXSt8W1xcc1xcdUZFRkZcXHhBMF0rJC9nLCAnJyk7XG4gICAgfTtcblxufSkuY2FsbCgnb2JqZWN0JyA9PT0gdHlwZW9mIHdpbmRvdyAmJiB3aW5kb3cgfHwgJ29iamVjdCcgPT09IHR5cGVvZiBzZWxmICYmIHNlbGYgfHwgJ29iamVjdCcgPT09IHR5cGVvZiBnbG9iYWwgJiYgZ2xvYmFsIHx8IHt9KTtcblxuKGZ1bmN0aW9uKHVuZGVmaW5lZCkge1xuXG4gIC8vIERldGVjdGlvbiBmcm9tIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9GaW5hbmNpYWwtVGltZXMvcG9seWZpbGwtbGlicmFyeS8xM2NmN2MzNDA5NzRkMTI4ZDU1NzU4MGI1ZTJkYWZjZDFiMTE5MmQxL3BvbHlmaWxscy9FbGVtZW50L3Byb3RvdHlwZS9kYXRhc2V0L2RldGVjdC5qc1xuICB2YXIgZGV0ZWN0ID0gKGZ1bmN0aW9uKCl7XG4gICAgaWYgKCFkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZGF0YXNldCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBlbC5zZXRBdHRyaWJ1dGUoXCJkYXRhLWEtYlwiLCBcImNcIik7XG4gICAgcmV0dXJuIGVsLmRhdGFzZXQgJiYgZWwuZGF0YXNldC5hQiA9PSBcImNcIjtcbiAgfSgpKTtcblxuICBpZiAoZGV0ZWN0KSByZXR1cm5cblxuICAvLyBQb2x5ZmlsbCBkZXJpdmVkIGZyb20gIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9GaW5hbmNpYWwtVGltZXMvcG9seWZpbGwtbGlicmFyeS8xM2NmN2MzNDA5NzRkMTI4ZDU1NzU4MGI1ZTJkYWZjZDFiMTE5MmQxL3BvbHlmaWxscy9FbGVtZW50L3Byb3RvdHlwZS9kYXRhc2V0L3BvbHlmaWxsLmpzXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShFbGVtZW50LnByb3RvdHlwZSwgJ2RhdGFzZXQnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBlbGVtZW50ID0gdGhpcztcbiAgICAgIHZhciBhdHRyaWJ1dGVzID0gdGhpcy5hdHRyaWJ1dGVzO1xuICAgICAgdmFyIG1hcCA9IHt9O1xuICBcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXR0cmlidXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgYXR0cmlidXRlID0gYXR0cmlidXRlc1tpXTtcbiAgXG4gICAgICAgIC8vIFRoaXMgcmVnZXggaGFzIGJlZW4gZWRpdGVkIGZyb20gdGhlIG9yaWdpbmFsIHBvbHlmaWxsLCB0byBhZGRcbiAgICAgICAgLy8gc3VwcG9ydCBmb3IgcGVyaW9kICguKSBzZXBhcmF0b3JzIGluIGRhdGEtKiBhdHRyaWJ1dGUgbmFtZXMuIFRoZXNlXG4gICAgICAgIC8vIGFyZSBhbGxvd2VkIGluIHRoZSBIVE1MIHNwZWMsIGJ1dCB3ZXJlIG5vdCBjb3ZlcmVkIGJ5IHRoZSBvcmlnaW5hbFxuICAgICAgICAvLyBwb2x5ZmlsbCdzIHJlZ2V4LiBXZSB1c2UgcGVyaW9kcyBpbiBvdXIgaTE4biBpbXBsZW1lbnRhdGlvbi5cbiAgICAgICAgaWYgKGF0dHJpYnV0ZSAmJiBhdHRyaWJ1dGUubmFtZSAmJiAoL15kYXRhLVxcd1suXFx3LV0qJC8pLnRlc3QoYXR0cmlidXRlLm5hbWUpKSB7XG4gICAgICAgICAgdmFyIG5hbWUgPSBhdHRyaWJ1dGUubmFtZTtcbiAgICAgICAgICB2YXIgdmFsdWUgPSBhdHRyaWJ1dGUudmFsdWU7XG4gIFxuICAgICAgICAgIHZhciBwcm9wTmFtZSA9IG5hbWUuc3Vic3RyKDUpLnJlcGxhY2UoLy0uL2csIGZ1bmN0aW9uIChwcm9wKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvcC5jaGFyQXQoMSkudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBJZiB0aGlzIGJyb3dzZXIgc3VwcG9ydHMgX19kZWZpbmVHZXR0ZXJfXyBhbmQgX19kZWZpbmVTZXR0ZXJfXyxcbiAgICAgICAgICAvLyBjb250aW51ZSB1c2luZyBkZWZpbmVQcm9wZXJ0eS4gSWYgbm90IChsaWtlIElFIDggYW5kIGJlbG93KSwgd2UgdXNlXG4gICAgICAgICAgLy8gYSBoYWNreSBmYWxsYmFjayB3aGljaCBhdCBsZWFzdCBnaXZlcyBhbiBvYmplY3QgaW4gdGhlIHJpZ2h0IGZvcm1hdFxuICAgICAgICAgIGlmICgnX19kZWZpbmVHZXR0ZXJfXycgaW4gT2JqZWN0LnByb3RvdHlwZSAmJiAnX19kZWZpbmVTZXR0ZXJfXycgaW4gT2JqZWN0LnByb3RvdHlwZSkge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG1hcCwgcHJvcE5hbWUsIHtcbiAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgICAgICAgICAgICAgfS5iaW5kKHt2YWx1ZTogdmFsdWUgfHwgJyd9KSxcbiAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXR0ZXIobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0uYmluZChlbGVtZW50LCBuYW1lKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1hcFtwcm9wTmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgICAgfVxuICBcbiAgICAgIHJldHVybiBtYXA7XG4gICAgfVxuICB9KTtcblxufSkuY2FsbCgnb2JqZWN0JyA9PT0gdHlwZW9mIHdpbmRvdyAmJiB3aW5kb3cgfHwgJ29iamVjdCcgPT09IHR5cGVvZiBzZWxmICYmIHNlbGYgfHwgJ29iamVjdCcgPT09IHR5cGVvZiBnbG9iYWwgJiYgZ2xvYmFsIHx8IHt9KTtcblxuLyoqXG4gKiBOb3JtYWxpc2Ugc3RyaW5nXG4gKlxuICogJ0lmIGl0IGxvb2tzIGxpa2UgYSBkdWNrLCBhbmQgaXQgcXVhY2tzIGxpa2UgYSBkdWNr4oCmJyDwn6aGXG4gKlxuICogSWYgdGhlIHBhc3NlZCB2YWx1ZSBsb29rcyBsaWtlIGEgYm9vbGVhbiBvciBhIG51bWJlciwgY29udmVydCBpdCB0byBhIGJvb2xlYW5cbiAqIG9yIG51bWJlci5cbiAqXG4gKiBEZXNpZ25lZCB0byBiZSB1c2VkIHRvIGNvbnZlcnQgY29uZmlnIHBhc3NlZCB2aWEgZGF0YSBhdHRyaWJ1dGVzICh3aGljaCBhcmVcbiAqIGFsd2F5cyBzdHJpbmdzKSBpbnRvIHNvbWV0aGluZyBzZW5zaWJsZS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBUaGUgdmFsdWUgdG8gbm9ybWFsaXNlXG4gKiBAcmV0dXJucyB7c3RyaW5nIHwgYm9vbGVhbiB8IG51bWJlciB8IHVuZGVmaW5lZH0gTm9ybWFsaXNlZCBkYXRhXG4gKi9cbmZ1bmN0aW9uIG5vcm1hbGlzZVN0cmluZyAodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdmFsdWVcbiAgfVxuXG4gIHZhciB0cmltbWVkVmFsdWUgPSB2YWx1ZS50cmltKCk7XG5cbiAgaWYgKHRyaW1tZWRWYWx1ZSA9PT0gJ3RydWUnKSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGlmICh0cmltbWVkVmFsdWUgPT09ICdmYWxzZScpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIC8vIEVtcHR5IC8gd2hpdGVzcGFjZS1vbmx5IHN0cmluZ3MgYXJlIGNvbnNpZGVyZWQgZmluaXRlIHNvIHdlIG5lZWQgdG8gY2hlY2tcbiAgLy8gdGhlIGxlbmd0aCBvZiB0aGUgdHJpbW1lZCBzdHJpbmcgYXMgd2VsbFxuICBpZiAodHJpbW1lZFZhbHVlLmxlbmd0aCA+IDAgJiYgaXNGaW5pdGUodHJpbW1lZFZhbHVlKSkge1xuICAgIHJldHVybiBOdW1iZXIodHJpbW1lZFZhbHVlKVxuICB9XG5cbiAgcmV0dXJuIHZhbHVlXG59XG5cbi8qKlxuICogTm9ybWFsaXNlIGRhdGFzZXRcbiAqXG4gKiBMb29wIG92ZXIgYW4gb2JqZWN0IGFuZCBub3JtYWxpc2UgZWFjaCB2YWx1ZSB1c2luZyBub3JtYWxpc2VEYXRhIGZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIHtET01TdHJpbmdNYXB9IGRhdGFzZXQgLSBIVE1MIGVsZW1lbnQgZGF0YXNldFxuICogQHJldHVybnMge09iamVjdDxzdHJpbmcsIHN0cmluZyB8IGJvb2xlYW4gfCBudW1iZXIgfCB1bmRlZmluZWQ+fSBOb3JtYWxpc2VkIGRhdGFzZXRcbiAqL1xuZnVuY3Rpb24gbm9ybWFsaXNlRGF0YXNldCAoZGF0YXNldCkge1xuICB2YXIgb3V0ID0ge307XG5cbiAgZm9yICh2YXIga2V5IGluIGRhdGFzZXQpIHtcbiAgICBvdXRba2V5XSA9IG5vcm1hbGlzZVN0cmluZyhkYXRhc2V0W2tleV0pO1xuICB9XG5cbiAgcmV0dXJuIG91dFxufVxuXG4vKipcbiAqIEBjb25zdGFudFxuICogQHR5cGUge0FjY29yZGlvblRyYW5zbGF0aW9uc31cbiAqIEBzZWUgRGVmYXVsdCB2YWx1ZSBmb3Ige0BsaW5rIEFjY29yZGlvbkNvbmZpZy5pMThufVxuICogQGRlZmF1bHRcbiAqL1xudmFyIEFDQ09SRElPTl9UUkFOU0xBVElPTlMgPSB7XG4gIGhpZGVBbGxTZWN0aW9uczogJ0hpZGUgYWxsIHNlY3Rpb25zJyxcbiAgaGlkZVNlY3Rpb246ICdIaWRlJyxcbiAgaGlkZVNlY3Rpb25BcmlhTGFiZWw6ICdIaWRlIHRoaXMgc2VjdGlvbicsXG4gIHNob3dBbGxTZWN0aW9uczogJ1Nob3cgYWxsIHNlY3Rpb25zJyxcbiAgc2hvd1NlY3Rpb246ICdTaG93JyxcbiAgc2hvd1NlY3Rpb25BcmlhTGFiZWw6ICdTaG93IHRoaXMgc2VjdGlvbidcbn07XG5cbi8qKlxuICogQWNjb3JkaW9uIGNvbXBvbmVudFxuICpcbiAqIFRoaXMgYWxsb3dzIGEgY29sbGVjdGlvbiBvZiBzZWN0aW9ucyB0byBiZSBjb2xsYXBzZWQgYnkgZGVmYXVsdCwgc2hvd2luZyBvbmx5XG4gKiB0aGVpciBoZWFkZXJzLiBTZWN0aW9ucyBjYW4gYmUgZXhwYW5kZWQgb3IgY29sbGFwc2VkIGluZGl2aWR1YWxseSBieSBjbGlja2luZ1xuICogdGhlaXIgaGVhZGVycy4gQSBcIlNob3cgYWxsIHNlY3Rpb25zXCIgYnV0dG9uIGlzIGFsc28gYWRkZWQgdG8gdGhlIHRvcCBvZiB0aGVcbiAqIGFjY29yZGlvbiwgd2hpY2ggc3dpdGNoZXMgdG8gXCJIaWRlIGFsbCBzZWN0aW9uc1wiIHdoZW4gYWxsIHRoZSBzZWN0aW9ucyBhcmVcbiAqIGV4cGFuZGVkLlxuICpcbiAqIFRoZSBzdGF0ZSBvZiBlYWNoIHNlY3Rpb24gaXMgc2F2ZWQgdG8gdGhlIERPTSB2aWEgdGhlIGBhcmlhLWV4cGFuZGVkYFxuICogYXR0cmlidXRlLCB3aGljaCBhbHNvIHByb3ZpZGVzIGFjY2Vzc2liaWxpdHkuXG4gKlxuICogQGNsYXNzXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAkbW9kdWxlIC0gSFRNTCBlbGVtZW50IHRvIHVzZSBmb3IgYWNjb3JkaW9uXG4gKiBAcGFyYW0ge0FjY29yZGlvbkNvbmZpZ30gW2NvbmZpZ10gLSBBY2NvcmRpb24gY29uZmlnXG4gKi9cbmZ1bmN0aW9uIEFjY29yZGlvbiAoJG1vZHVsZSwgY29uZmlnKSB7XG4gIHRoaXMuJG1vZHVsZSA9ICRtb2R1bGU7XG4gIHRoaXMuJHNlY3Rpb25zID0gJG1vZHVsZS5xdWVyeVNlbGVjdG9yQWxsKCcuZ292dWstYWNjb3JkaW9uX19zZWN0aW9uJyk7XG4gIHRoaXMuYnJvd3NlclN1cHBvcnRzU2Vzc2lvblN0b3JhZ2UgPSBoZWxwZXIuY2hlY2tGb3JTZXNzaW9uU3RvcmFnZSgpO1xuXG4gIHZhciBkZWZhdWx0Q29uZmlnID0ge1xuICAgIGkxOG46IEFDQ09SRElPTl9UUkFOU0xBVElPTlNcbiAgfTtcbiAgdGhpcy5jb25maWcgPSBtZXJnZUNvbmZpZ3MoXG4gICAgZGVmYXVsdENvbmZpZyxcbiAgICBjb25maWcgfHwge30sXG4gICAgbm9ybWFsaXNlRGF0YXNldCgkbW9kdWxlLmRhdGFzZXQpXG4gICk7XG4gIHRoaXMuaTE4biA9IG5ldyBJMThuKGV4dHJhY3RDb25maWdCeU5hbWVzcGFjZSh0aGlzLmNvbmZpZywgJ2kxOG4nKSk7XG5cbiAgdGhpcy5jb250cm9sc0NsYXNzID0gJ2dvdnVrLWFjY29yZGlvbl9fY29udHJvbHMnO1xuICB0aGlzLnNob3dBbGxDbGFzcyA9ICdnb3Z1ay1hY2NvcmRpb25fX3Nob3ctYWxsJztcbiAgdGhpcy5zaG93QWxsVGV4dENsYXNzID0gJ2dvdnVrLWFjY29yZGlvbl9fc2hvdy1hbGwtdGV4dCc7XG5cbiAgdGhpcy5zZWN0aW9uRXhwYW5kZWRDbGFzcyA9ICdnb3Z1ay1hY2NvcmRpb25fX3NlY3Rpb24tLWV4cGFuZGVkJztcbiAgdGhpcy5zZWN0aW9uQnV0dG9uQ2xhc3MgPSAnZ292dWstYWNjb3JkaW9uX19zZWN0aW9uLWJ1dHRvbic7XG4gIHRoaXMuc2VjdGlvbkhlYWRlckNsYXNzID0gJ2dvdnVrLWFjY29yZGlvbl9fc2VjdGlvbi1oZWFkZXInO1xuICB0aGlzLnNlY3Rpb25IZWFkaW5nQ2xhc3MgPSAnZ292dWstYWNjb3JkaW9uX19zZWN0aW9uLWhlYWRpbmcnO1xuICB0aGlzLnNlY3Rpb25IZWFkaW5nVGV4dENsYXNzID0gJ2dvdnVrLWFjY29yZGlvbl9fc2VjdGlvbi1oZWFkaW5nLXRleHQnO1xuICB0aGlzLnNlY3Rpb25IZWFkaW5nVGV4dEZvY3VzQ2xhc3MgPSAnZ292dWstYWNjb3JkaW9uX19zZWN0aW9uLWhlYWRpbmctdGV4dC1mb2N1cyc7XG5cbiAgdGhpcy5zZWN0aW9uU2hvd0hpZGVUb2dnbGVDbGFzcyA9ICdnb3Z1ay1hY2NvcmRpb25fX3NlY3Rpb24tdG9nZ2xlJztcbiAgdGhpcy5zZWN0aW9uU2hvd0hpZGVUb2dnbGVGb2N1c0NsYXNzID0gJ2dvdnVrLWFjY29yZGlvbl9fc2VjdGlvbi10b2dnbGUtZm9jdXMnO1xuICB0aGlzLnNlY3Rpb25TaG93SGlkZVRleHRDbGFzcyA9ICdnb3Z1ay1hY2NvcmRpb25fX3NlY3Rpb24tdG9nZ2xlLXRleHQnO1xuICB0aGlzLnVwQ2hldnJvbkljb25DbGFzcyA9ICdnb3Z1ay1hY2NvcmRpb24tbmF2X19jaGV2cm9uJztcbiAgdGhpcy5kb3duQ2hldnJvbkljb25DbGFzcyA9ICdnb3Z1ay1hY2NvcmRpb24tbmF2X19jaGV2cm9uLS1kb3duJztcblxuICB0aGlzLnNlY3Rpb25TdW1tYXJ5Q2xhc3MgPSAnZ292dWstYWNjb3JkaW9uX19zZWN0aW9uLXN1bW1hcnknO1xuICB0aGlzLnNlY3Rpb25TdW1tYXJ5Rm9jdXNDbGFzcyA9ICdnb3Z1ay1hY2NvcmRpb25fX3NlY3Rpb24tc3VtbWFyeS1mb2N1cyc7XG59XG5cbi8vIEluaXRpYWxpemUgY29tcG9uZW50XG5BY2NvcmRpb24ucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIENoZWNrIGZvciBtb2R1bGVcbiAgaWYgKCF0aGlzLiRtb2R1bGUpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIHRoaXMuaW5pdENvbnRyb2xzKCk7XG4gIHRoaXMuaW5pdFNlY3Rpb25IZWFkZXJzKCk7XG5cbiAgLy8gU2VlIGlmIFwiU2hvdyBhbGwgc2VjdGlvbnNcIiBidXR0b24gdGV4dCBzaG91bGQgYmUgdXBkYXRlZFxuICB2YXIgYXJlQWxsU2VjdGlvbnNPcGVuID0gdGhpcy5jaGVja0lmQWxsU2VjdGlvbnNPcGVuKCk7XG4gIHRoaXMudXBkYXRlU2hvd0FsbEJ1dHRvbihhcmVBbGxTZWN0aW9uc09wZW4pO1xufTtcblxuLy8gSW5pdGlhbGlzZSBjb250cm9scyBhbmQgc2V0IGF0dHJpYnV0ZXNcbkFjY29yZGlvbi5wcm90b3R5cGUuaW5pdENvbnRyb2xzID0gZnVuY3Rpb24gKCkge1xuICAvLyBDcmVhdGUgXCJTaG93IGFsbFwiIGJ1dHRvbiBhbmQgc2V0IGF0dHJpYnV0ZXNcbiAgdGhpcy4kc2hvd0FsbEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICB0aGlzLiRzaG93QWxsQnV0dG9uLnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKTtcbiAgdGhpcy4kc2hvd0FsbEJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgdGhpcy5zaG93QWxsQ2xhc3MpO1xuICB0aGlzLiRzaG93QWxsQnV0dG9uLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICdmYWxzZScpO1xuXG4gIC8vIENyZWF0ZSBpY29uLCBhZGQgdG8gZWxlbWVudFxuICB2YXIgJGljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICRpY29uLmNsYXNzTGlzdC5hZGQodGhpcy51cENoZXZyb25JY29uQ2xhc3MpO1xuICB0aGlzLiRzaG93QWxsQnV0dG9uLmFwcGVuZENoaWxkKCRpY29uKTtcblxuICAvLyBDcmVhdGUgY29udHJvbCB3cmFwcGVyIGFuZCBhZGQgY29udHJvbHMgdG8gaXRcbiAgdmFyICRhY2NvcmRpb25Db250cm9scyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAkYWNjb3JkaW9uQ29udHJvbHMuc2V0QXR0cmlidXRlKCdjbGFzcycsIHRoaXMuY29udHJvbHNDbGFzcyk7XG4gICRhY2NvcmRpb25Db250cm9scy5hcHBlbmRDaGlsZCh0aGlzLiRzaG93QWxsQnV0dG9uKTtcbiAgdGhpcy4kbW9kdWxlLmluc2VydEJlZm9yZSgkYWNjb3JkaW9uQ29udHJvbHMsIHRoaXMuJG1vZHVsZS5maXJzdENoaWxkKTtcblxuICAvLyBCdWlsZCBhZGRpdGlvbmFsIHdyYXBwZXIgZm9yIFNob3cgYWxsIHRvZ2dsZSB0ZXh0IGFuZCBwbGFjZSBhZnRlciBpY29uXG4gIHZhciAkd3JhcHBlcnNob3dBbGxUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAkd3JhcHBlcnNob3dBbGxUZXh0LmNsYXNzTGlzdC5hZGQodGhpcy5zaG93QWxsVGV4dENsYXNzKTtcbiAgdGhpcy4kc2hvd0FsbEJ1dHRvbi5hcHBlbmRDaGlsZCgkd3JhcHBlcnNob3dBbGxUZXh0KTtcblxuICAvLyBIYW5kbGUgY2xpY2sgZXZlbnRzIG9uIHRoZSBzaG93L2hpZGUgYWxsIGJ1dHRvblxuICB0aGlzLiRzaG93QWxsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vblNob3dPckhpZGVBbGxUb2dnbGUuYmluZCh0aGlzKSk7XG59O1xuXG4vLyBJbml0aWFsaXNlIHNlY3Rpb24gaGVhZGVyc1xuQWNjb3JkaW9uLnByb3RvdHlwZS5pbml0U2VjdGlvbkhlYWRlcnMgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIExvb3AgdGhyb3VnaCBzZWN0aW9uIGhlYWRlcnNcbiAgbm9kZUxpc3RGb3JFYWNoKHRoaXMuJHNlY3Rpb25zLCBmdW5jdGlvbiAoJHNlY3Rpb24sIGkpIHtcbiAgICAvLyBTZXQgaGVhZGVyIGF0dHJpYnV0ZXNcbiAgICB2YXIgJGhlYWRlciA9ICRzZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy4nICsgdGhpcy5zZWN0aW9uSGVhZGVyQ2xhc3MpO1xuICAgIHRoaXMuY29uc3RydWN0SGVhZGVyTWFya3VwKCRoZWFkZXIsIGkpO1xuICAgIHRoaXMuc2V0RXhwYW5kZWQodGhpcy5pc0V4cGFuZGVkKCRzZWN0aW9uKSwgJHNlY3Rpb24pO1xuXG4gICAgLy8gSGFuZGxlIGV2ZW50c1xuICAgICRoZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uU2VjdGlvblRvZ2dsZS5iaW5kKHRoaXMsICRzZWN0aW9uKSk7XG5cbiAgICAvLyBTZWUgaWYgdGhlcmUgaXMgYW55IHN0YXRlIHN0b3JlZCBpbiBzZXNzaW9uU3RvcmFnZSBhbmQgc2V0IHRoZSBzZWN0aW9ucyB0b1xuICAgIC8vIG9wZW4gb3IgY2xvc2VkLlxuICAgIHRoaXMuc2V0SW5pdGlhbFN0YXRlKCRzZWN0aW9uKTtcbiAgfS5iaW5kKHRoaXMpKTtcbn07XG5cbkFjY29yZGlvbi5wcm90b3R5cGUuY29uc3RydWN0SGVhZGVyTWFya3VwID0gZnVuY3Rpb24gKCRoZWFkZXJXcmFwcGVyLCBpbmRleCkge1xuICB2YXIgJHNwYW4gPSAkaGVhZGVyV3JhcHBlci5xdWVyeVNlbGVjdG9yKCcuJyArIHRoaXMuc2VjdGlvbkJ1dHRvbkNsYXNzKTtcbiAgdmFyICRoZWFkaW5nID0gJGhlYWRlcldyYXBwZXIucXVlcnlTZWxlY3RvcignLicgKyB0aGlzLnNlY3Rpb25IZWFkaW5nQ2xhc3MpO1xuICB2YXIgJHN1bW1hcnkgPSAkaGVhZGVyV3JhcHBlci5xdWVyeVNlbGVjdG9yKCcuJyArIHRoaXMuc2VjdGlvblN1bW1hcnlDbGFzcyk7XG5cbiAgLy8gQ3JlYXRlIGEgYnV0dG9uIGVsZW1lbnQgdGhhdCB3aWxsIHJlcGxhY2UgdGhlICcuZ292dWstYWNjb3JkaW9uX19zZWN0aW9uLWJ1dHRvbicgc3BhblxuICB2YXIgJGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAkYnV0dG9uLnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKTtcbiAgJGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtY29udHJvbHMnLCB0aGlzLiRtb2R1bGUuaWQgKyAnLWNvbnRlbnQtJyArIChpbmRleCArIDEpKTtcblxuICAvLyBDb3B5IGFsbCBhdHRyaWJ1dGVzIChodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRWxlbWVudC9hdHRyaWJ1dGVzKSBmcm9tICRzcGFuIHRvICRidXR0b25cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc3Bhbi5hdHRyaWJ1dGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGF0dHIgPSAkc3Bhbi5hdHRyaWJ1dGVzLml0ZW0oaSk7XG4gICAgLy8gQWRkIGFsbCBhdHRyaWJ1dGVzIGJ1dCBub3QgSUQgYXMgdGhpcyBpcyBiZWluZyBhZGRlZCB0b1xuICAgIC8vIHRoZSBzZWN0aW9uIGhlYWRpbmcgKCRoZWFkaW5nVGV4dClcbiAgICBpZiAoYXR0ci5ub2RlTmFtZSAhPT0gJ2lkJykge1xuICAgICAgJGJ1dHRvbi5zZXRBdHRyaWJ1dGUoYXR0ci5ub2RlTmFtZSwgYXR0ci5ub2RlVmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIC8vIENyZWF0ZSBjb250YWluZXIgZm9yIGhlYWRpbmcgdGV4dCBzbyBpdCBjYW4gYmUgc3R5bGVkXG4gIHZhciAkaGVhZGluZ1RleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICRoZWFkaW5nVGV4dC5jbGFzc0xpc3QuYWRkKHRoaXMuc2VjdGlvbkhlYWRpbmdUZXh0Q2xhc3MpO1xuICAvLyBDb3B5IHRoZSBzcGFuIElEIHRvIHRoZSBoZWFkaW5nIHRleHQgdG8gYWxsb3cgaXQgdG8gYmUgcmVmZXJlbmNlZCBieSBgYXJpYS1sYWJlbGxlZGJ5YCBvbiB0aGVcbiAgLy8gaGlkZGVuIGNvbnRlbnQgYXJlYSB3aXRob3V0IFwiU2hvdyB0aGlzIHNlY3Rpb25cIlxuICAkaGVhZGluZ1RleHQuaWQgPSAkc3Bhbi5pZDtcblxuICAvLyBDcmVhdGUgYW4gaW5uZXIgaGVhZGluZyB0ZXh0IGNvbnRhaW5lciB0byBsaW1pdCB0aGUgd2lkdGggb2YgdGhlIGZvY3VzIHN0YXRlXG4gIHZhciAkaGVhZGluZ1RleHRGb2N1cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgJGhlYWRpbmdUZXh0Rm9jdXMuY2xhc3NMaXN0LmFkZCh0aGlzLnNlY3Rpb25IZWFkaW5nVGV4dEZvY3VzQ2xhc3MpO1xuICAkaGVhZGluZ1RleHQuYXBwZW5kQ2hpbGQoJGhlYWRpbmdUZXh0Rm9jdXMpO1xuICAvLyBzcGFuIGNvdWxkIGNvbnRhaW4gSFRNTCBlbGVtZW50cyAoc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDExL1dELWh0bWw1LTIwMTEwNTI1L2NvbnRlbnQtbW9kZWxzLmh0bWwjcGhyYXNpbmctY29udGVudClcbiAgJGhlYWRpbmdUZXh0Rm9jdXMuaW5uZXJIVE1MID0gJHNwYW4uaW5uZXJIVE1MO1xuXG4gIC8vIENyZWF0ZSBjb250YWluZXIgZm9yIHNob3cgLyBoaWRlIGljb25zIGFuZCB0ZXh0LlxuICB2YXIgJHNob3dUb2dnbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICRzaG93VG9nZ2xlLmNsYXNzTGlzdC5hZGQodGhpcy5zZWN0aW9uU2hvd0hpZGVUb2dnbGVDbGFzcyk7XG4gIC8vIFRlbGwgR29vZ2xlIG5vdCB0byBpbmRleCB0aGUgJ3Nob3cnIHRleHQgYXMgcGFydCBvZiB0aGUgaGVhZGluZ1xuICAvLyBGb3IgdGhlIHNuaXBwZXQgdG8gd29yayB3aXRoIEphdmFTY3JpcHQsIGl0IG11c3QgYmUgYWRkZWQgYmVmb3JlIGFkZGluZyB0aGUgcGFnZSBlbGVtZW50IHRvIHRoZVxuICAvLyBwYWdlJ3MgRE9NLiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vc2VhcmNoL2RvY3MvYWR2YW5jZWQvcm9ib3RzL3JvYm90c19tZXRhX3RhZyNkYXRhLW5vc25pcHBldC1hdHRyXG4gICRzaG93VG9nZ2xlLnNldEF0dHJpYnV0ZSgnZGF0YS1ub3NuaXBwZXQnLCAnJyk7XG4gIC8vIENyZWF0ZSBhbiBpbm5lciBjb250YWluZXIgdG8gbGltaXQgdGhlIHdpZHRoIG9mIHRoZSBmb2N1cyBzdGF0ZVxuICB2YXIgJHNob3dUb2dnbGVGb2N1cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgJHNob3dUb2dnbGVGb2N1cy5jbGFzc0xpc3QuYWRkKHRoaXMuc2VjdGlvblNob3dIaWRlVG9nZ2xlRm9jdXNDbGFzcyk7XG4gICRzaG93VG9nZ2xlLmFwcGVuZENoaWxkKCRzaG93VG9nZ2xlRm9jdXMpO1xuICAvLyBDcmVhdGUgd3JhcHBlciBmb3IgdGhlIHNob3cgLyBoaWRlIHRleHQuIEFwcGVuZCB0ZXh0IGFmdGVyIHRoZSBzaG93L2hpZGUgaWNvblxuICB2YXIgJHNob3dUb2dnbGVUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICB2YXIgJGljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICRpY29uLmNsYXNzTGlzdC5hZGQodGhpcy51cENoZXZyb25JY29uQ2xhc3MpO1xuICAkc2hvd1RvZ2dsZUZvY3VzLmFwcGVuZENoaWxkKCRpY29uKTtcbiAgJHNob3dUb2dnbGVUZXh0LmNsYXNzTGlzdC5hZGQodGhpcy5zZWN0aW9uU2hvd0hpZGVUZXh0Q2xhc3MpO1xuICAkc2hvd1RvZ2dsZUZvY3VzLmFwcGVuZENoaWxkKCRzaG93VG9nZ2xlVGV4dCk7XG5cbiAgLy8gQXBwZW5kIGVsZW1lbnRzIHRvIHRoZSBidXR0b246XG4gIC8vIDEuIEhlYWRpbmcgdGV4dFxuICAvLyAyLiBQdW5jdHVhdGlvblxuICAvLyAzLiAoT3B0aW9uYWw6IFN1bW1hcnkgbGluZSBmb2xsb3dlZCBieSBwdW5jdHVhdGlvbilcbiAgLy8gNC4gU2hvdyAvIGhpZGUgdG9nZ2xlXG4gICRidXR0b24uYXBwZW5kQ2hpbGQoJGhlYWRpbmdUZXh0KTtcbiAgJGJ1dHRvbi5hcHBlbmRDaGlsZCh0aGlzLmdldEJ1dHRvblB1bmN0dWF0aW9uRWwoKSk7XG5cbiAgLy8gSWYgc3VtbWFyeSBjb250ZW50IGV4aXN0cyBhZGQgdG8gRE9NIGluIGNvcnJlY3Qgb3JkZXJcbiAgaWYgKHR5cGVvZiAoJHN1bW1hcnkpICE9PSAndW5kZWZpbmVkJyAmJiAkc3VtbWFyeSAhPT0gbnVsbCkge1xuICAgIC8vIENyZWF0ZSBhIG5ldyBgc3BhbmAgZWxlbWVudCBhbmQgY29weSB0aGUgc3VtbWFyeSBsaW5lIGNvbnRlbnQgZnJvbSB0aGUgb3JpZ2luYWwgYGRpdmAgdG8gdGhlXG4gICAgLy8gbmV3IGBzcGFuYFxuICAgIC8vIFRoaXMgaXMgYmVjYXVzZSB0aGUgc3VtbWFyeSBsaW5lIHRleHQgaXMgbm93IGluc2lkZSBhIGJ1dHRvbiBlbGVtZW50LCB3aGljaCBjYW4gb25seSBjb250YWluXG4gICAgLy8gcGhyYXNpbmcgY29udGVudFxuICAgIHZhciAkc3VtbWFyeVNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgLy8gQ3JlYXRlIGFuIGlubmVyIHN1bW1hcnkgY29udGFpbmVyIHRvIGxpbWl0IHRoZSB3aWR0aCBvZiB0aGUgc3VtbWFyeSBmb2N1cyBzdGF0ZVxuICAgIHZhciAkc3VtbWFyeVNwYW5Gb2N1cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAkc3VtbWFyeVNwYW5Gb2N1cy5jbGFzc0xpc3QuYWRkKHRoaXMuc2VjdGlvblN1bW1hcnlGb2N1c0NsYXNzKTtcbiAgICAkc3VtbWFyeVNwYW4uYXBwZW5kQ2hpbGQoJHN1bW1hcnlTcGFuRm9jdXMpO1xuXG4gICAgLy8gR2V0IG9yaWdpbmFsIGF0dHJpYnV0ZXMsIGFuZCBwYXNzIHRoZW0gdG8gdGhlIHJlcGxhY2VtZW50XG4gICAgZm9yICh2YXIgaiA9IDAsIGwgPSAkc3VtbWFyeS5hdHRyaWJ1dGVzLmxlbmd0aDsgaiA8IGw7ICsraikge1xuICAgICAgdmFyIG5vZGVOYW1lID0gJHN1bW1hcnkuYXR0cmlidXRlcy5pdGVtKGopLm5vZGVOYW1lO1xuICAgICAgdmFyIG5vZGVWYWx1ZSA9ICRzdW1tYXJ5LmF0dHJpYnV0ZXMuaXRlbShqKS5ub2RlVmFsdWU7XG4gICAgICAkc3VtbWFyeVNwYW4uc2V0QXR0cmlidXRlKG5vZGVOYW1lLCBub2RlVmFsdWUpO1xuICAgIH1cblxuICAgIC8vIENvcHkgb3JpZ2luYWwgY29udGVudHMgb2Ygc3VtbWFyeSB0byB0aGUgbmV3IHN1bW1hcnkgc3BhblxuICAgICRzdW1tYXJ5U3BhbkZvY3VzLmlubmVySFRNTCA9ICRzdW1tYXJ5LmlubmVySFRNTDtcblxuICAgIC8vIFJlcGxhY2UgdGhlIG9yaWdpbmFsIHN1bW1hcnkgYGRpdmAgd2l0aCB0aGUgbmV3IHN1bW1hcnkgYHNwYW5gXG4gICAgJHN1bW1hcnkucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoJHN1bW1hcnlTcGFuLCAkc3VtbWFyeSk7XG5cbiAgICAkYnV0dG9uLmFwcGVuZENoaWxkKCRzdW1tYXJ5U3Bhbik7XG4gICAgJGJ1dHRvbi5hcHBlbmRDaGlsZCh0aGlzLmdldEJ1dHRvblB1bmN0dWF0aW9uRWwoKSk7XG4gIH1cblxuICAkYnV0dG9uLmFwcGVuZENoaWxkKCRzaG93VG9nZ2xlKTtcblxuICAkaGVhZGluZy5yZW1vdmVDaGlsZCgkc3Bhbik7XG4gICRoZWFkaW5nLmFwcGVuZENoaWxkKCRidXR0b24pO1xufTtcblxuLy8gV2hlbiBzZWN0aW9uIHRvZ2dsZWQsIHNldCBhbmQgc3RvcmUgc3RhdGVcbkFjY29yZGlvbi5wcm90b3R5cGUub25TZWN0aW9uVG9nZ2xlID0gZnVuY3Rpb24gKCRzZWN0aW9uKSB7XG4gIHZhciBleHBhbmRlZCA9IHRoaXMuaXNFeHBhbmRlZCgkc2VjdGlvbik7XG4gIHRoaXMuc2V0RXhwYW5kZWQoIWV4cGFuZGVkLCAkc2VjdGlvbik7XG5cbiAgLy8gU3RvcmUgdGhlIHN0YXRlIGluIHNlc3Npb25TdG9yYWdlIHdoZW4gYSBjaGFuZ2UgaXMgdHJpZ2dlcmVkXG4gIHRoaXMuc3RvcmVTdGF0ZSgkc2VjdGlvbik7XG59O1xuXG4vLyBXaGVuIE9wZW4vQ2xvc2UgQWxsIHRvZ2dsZWQsIHNldCBhbmQgc3RvcmUgc3RhdGVcbkFjY29yZGlvbi5wcm90b3R5cGUub25TaG93T3JIaWRlQWxsVG9nZ2xlID0gZnVuY3Rpb24gKCkge1xuICB2YXIgJG1vZHVsZSA9IHRoaXM7XG4gIHZhciAkc2VjdGlvbnMgPSB0aGlzLiRzZWN0aW9ucztcbiAgdmFyIG5vd0V4cGFuZGVkID0gIXRoaXMuY2hlY2tJZkFsbFNlY3Rpb25zT3BlbigpO1xuXG4gIG5vZGVMaXN0Rm9yRWFjaCgkc2VjdGlvbnMsIGZ1bmN0aW9uICgkc2VjdGlvbikge1xuICAgICRtb2R1bGUuc2V0RXhwYW5kZWQobm93RXhwYW5kZWQsICRzZWN0aW9uKTtcbiAgICAvLyBTdG9yZSB0aGUgc3RhdGUgaW4gc2Vzc2lvblN0b3JhZ2Ugd2hlbiBhIGNoYW5nZSBpcyB0cmlnZ2VyZWRcbiAgICAkbW9kdWxlLnN0b3JlU3RhdGUoJHNlY3Rpb24pO1xuICB9KTtcblxuICAkbW9kdWxlLnVwZGF0ZVNob3dBbGxCdXR0b24obm93RXhwYW5kZWQpO1xufTtcblxuLy8gU2V0IHNlY3Rpb24gYXR0cmlidXRlcyB3aGVuIG9wZW5lZC9jbG9zZWRcbkFjY29yZGlvbi5wcm90b3R5cGUuc2V0RXhwYW5kZWQgPSBmdW5jdGlvbiAoZXhwYW5kZWQsICRzZWN0aW9uKSB7XG4gIHZhciAkaWNvbiA9ICRzZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy4nICsgdGhpcy51cENoZXZyb25JY29uQ2xhc3MpO1xuICB2YXIgJHNob3dIaWRlVGV4dCA9ICRzZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy4nICsgdGhpcy5zZWN0aW9uU2hvd0hpZGVUZXh0Q2xhc3MpO1xuICB2YXIgJGJ1dHRvbiA9ICRzZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy4nICsgdGhpcy5zZWN0aW9uQnV0dG9uQ2xhc3MpO1xuICB2YXIgbmV3QnV0dG9uVGV4dCA9IGV4cGFuZGVkXG4gICAgPyB0aGlzLmkxOG4udCgnaGlkZVNlY3Rpb24nKVxuICAgIDogdGhpcy5pMThuLnQoJ3Nob3dTZWN0aW9uJyk7XG5cbiAgJHNob3dIaWRlVGV4dC5pbm5lclRleHQgPSBuZXdCdXR0b25UZXh0O1xuICAkYnV0dG9uLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsIGV4cGFuZGVkKTtcblxuICAvLyBVcGRhdGUgYXJpYS1sYWJlbCBjb21iaW5pbmdcbiAgdmFyICRoZWFkZXIgPSAkc2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcuJyArIHRoaXMuc2VjdGlvbkhlYWRpbmdUZXh0Q2xhc3MpO1xuICB2YXIgYXJpYUxhYmVsUGFydHMgPSBbJGhlYWRlci5pbm5lclRleHQudHJpbSgpXTtcblxuICB2YXIgJHN1bW1hcnkgPSAkc2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcuJyArIHRoaXMuc2VjdGlvblN1bW1hcnlDbGFzcyk7XG4gIGlmICgkc3VtbWFyeSkge1xuICAgIGFyaWFMYWJlbFBhcnRzLnB1c2goJHN1bW1hcnkuaW5uZXJUZXh0LnRyaW0oKSk7XG4gIH1cblxuICB2YXIgYXJpYUxhYmVsTWVzc2FnZSA9IGV4cGFuZGVkXG4gICAgPyB0aGlzLmkxOG4udCgnaGlkZVNlY3Rpb25BcmlhTGFiZWwnKVxuICAgIDogdGhpcy5pMThuLnQoJ3Nob3dTZWN0aW9uQXJpYUxhYmVsJyk7XG4gIGFyaWFMYWJlbFBhcnRzLnB1c2goYXJpYUxhYmVsTWVzc2FnZSk7XG5cbiAgLypcbiAgICogSm9pbiB3aXRoIGEgY29tbWEgdG8gYWRkIHBhdXNlIGZvciBhc3Npc3RpdmUgdGVjaG5vbG9neS5cbiAgICogRXhhbXBsZTogW2hlYWRpbmddU2VjdGlvbiBBICxbcGF1c2VdIFNob3cgdGhpcyBzZWN0aW9uLlxuICAgKiBodHRwczovL2FjY2Vzc2liaWxpdHkuYmxvZy5nb3YudWsvMjAxNy8xMi8xOC93aGF0LXdvcmtpbmctb24tZ292LXVrLW5hdmlnYXRpb24tdGF1Z2h0LXVzLWFib3V0LWFjY2Vzc2liaWxpdHkvXG4gICAqL1xuICAkYnV0dG9uLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGFyaWFMYWJlbFBhcnRzLmpvaW4oJyAsICcpKTtcblxuICAvLyBTd2FwIGljb24sIGNoYW5nZSBjbGFzc1xuICBpZiAoZXhwYW5kZWQpIHtcbiAgICAkc2VjdGlvbi5jbGFzc0xpc3QuYWRkKHRoaXMuc2VjdGlvbkV4cGFuZGVkQ2xhc3MpO1xuICAgICRpY29uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5kb3duQ2hldnJvbkljb25DbGFzcyk7XG4gIH0gZWxzZSB7XG4gICAgJHNlY3Rpb24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLnNlY3Rpb25FeHBhbmRlZENsYXNzKTtcbiAgICAkaWNvbi5jbGFzc0xpc3QuYWRkKHRoaXMuZG93bkNoZXZyb25JY29uQ2xhc3MpO1xuICB9XG5cbiAgLy8gU2VlIGlmIFwiU2hvdyBhbGwgc2VjdGlvbnNcIiBidXR0b24gdGV4dCBzaG91bGQgYmUgdXBkYXRlZFxuICB2YXIgYXJlQWxsU2VjdGlvbnNPcGVuID0gdGhpcy5jaGVja0lmQWxsU2VjdGlvbnNPcGVuKCk7XG4gIHRoaXMudXBkYXRlU2hvd0FsbEJ1dHRvbihhcmVBbGxTZWN0aW9uc09wZW4pO1xufTtcblxuLy8gR2V0IHN0YXRlIG9mIHNlY3Rpb25cbkFjY29yZGlvbi5wcm90b3R5cGUuaXNFeHBhbmRlZCA9IGZ1bmN0aW9uICgkc2VjdGlvbikge1xuICByZXR1cm4gJHNlY3Rpb24uY2xhc3NMaXN0LmNvbnRhaW5zKHRoaXMuc2VjdGlvbkV4cGFuZGVkQ2xhc3MpXG59O1xuXG4vLyBDaGVjayBpZiBhbGwgc2VjdGlvbnMgYXJlIG9wZW5cbkFjY29yZGlvbi5wcm90b3R5cGUuY2hlY2tJZkFsbFNlY3Rpb25zT3BlbiA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gR2V0IGEgY291bnQgb2YgYWxsIHRoZSBBY2NvcmRpb24gc2VjdGlvbnNcbiAgdmFyIHNlY3Rpb25zQ291bnQgPSB0aGlzLiRzZWN0aW9ucy5sZW5ndGg7XG4gIC8vIEdldCBhIGNvdW50IG9mIGFsbCBBY2NvcmRpb24gc2VjdGlvbnMgdGhhdCBhcmUgZXhwYW5kZWRcbiAgdmFyIGV4cGFuZGVkU2VjdGlvbkNvdW50ID0gdGhpcy4kbW9kdWxlLnF1ZXJ5U2VsZWN0b3JBbGwoJy4nICsgdGhpcy5zZWN0aW9uRXhwYW5kZWRDbGFzcykubGVuZ3RoO1xuICB2YXIgYXJlQWxsU2VjdGlvbnNPcGVuID0gc2VjdGlvbnNDb3VudCA9PT0gZXhwYW5kZWRTZWN0aW9uQ291bnQ7XG5cbiAgcmV0dXJuIGFyZUFsbFNlY3Rpb25zT3BlblxufTtcblxuLy8gVXBkYXRlIFwiU2hvdyBhbGwgc2VjdGlvbnNcIiBidXR0b25cbkFjY29yZGlvbi5wcm90b3R5cGUudXBkYXRlU2hvd0FsbEJ1dHRvbiA9IGZ1bmN0aW9uIChleHBhbmRlZCkge1xuICB2YXIgJHNob3dBbGxJY29uID0gdGhpcy4kc2hvd0FsbEJ1dHRvbi5xdWVyeVNlbGVjdG9yKCcuJyArIHRoaXMudXBDaGV2cm9uSWNvbkNsYXNzKTtcbiAgdmFyICRzaG93QWxsVGV4dCA9IHRoaXMuJHNob3dBbGxCdXR0b24ucXVlcnlTZWxlY3RvcignLicgKyB0aGlzLnNob3dBbGxUZXh0Q2xhc3MpO1xuICB2YXIgbmV3QnV0dG9uVGV4dCA9IGV4cGFuZGVkXG4gICAgPyB0aGlzLmkxOG4udCgnaGlkZUFsbFNlY3Rpb25zJylcbiAgICA6IHRoaXMuaTE4bi50KCdzaG93QWxsU2VjdGlvbnMnKTtcbiAgdGhpcy4kc2hvd0FsbEJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCBleHBhbmRlZCk7XG4gICRzaG93QWxsVGV4dC5pbm5lclRleHQgPSBuZXdCdXR0b25UZXh0O1xuXG4gIC8vIFN3YXAgaWNvbiwgdG9nZ2xlIGNsYXNzXG4gIGlmIChleHBhbmRlZCkge1xuICAgICRzaG93QWxsSWNvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuZG93bkNoZXZyb25JY29uQ2xhc3MpO1xuICB9IGVsc2Uge1xuICAgICRzaG93QWxsSWNvbi5jbGFzc0xpc3QuYWRkKHRoaXMuZG93bkNoZXZyb25JY29uQ2xhc3MpO1xuICB9XG59O1xuXG4vLyBDaGVjayBmb3IgYHdpbmRvdy5zZXNzaW9uU3RvcmFnZWAsIGFuZCB0aGF0IGl0IGFjdHVhbGx5IHdvcmtzLlxudmFyIGhlbHBlciA9IHtcbiAgY2hlY2tGb3JTZXNzaW9uU3RvcmFnZTogZnVuY3Rpb24gKCkge1xuICAgIHZhciB0ZXN0U3RyaW5nID0gJ3RoaXMgaXMgdGhlIHRlc3Qgc3RyaW5nJztcbiAgICB2YXIgcmVzdWx0O1xuICAgIHRyeSB7XG4gICAgICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSh0ZXN0U3RyaW5nLCB0ZXN0U3RyaW5nKTtcbiAgICAgIHJlc3VsdCA9IHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKHRlc3RTdHJpbmcpID09PSB0ZXN0U3RyaW5nLnRvU3RyaW5nKCk7XG4gICAgICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSh0ZXN0U3RyaW5nKTtcbiAgICAgIHJldHVybiByZXN1bHRcbiAgICB9IGNhdGNoIChleGNlcHRpb24pIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxufTtcblxuLy8gU2V0IHRoZSBzdGF0ZSBvZiB0aGUgYWNjb3JkaW9ucyBpbiBzZXNzaW9uU3RvcmFnZVxuQWNjb3JkaW9uLnByb3RvdHlwZS5zdG9yZVN0YXRlID0gZnVuY3Rpb24gKCRzZWN0aW9uKSB7XG4gIGlmICh0aGlzLmJyb3dzZXJTdXBwb3J0c1Nlc3Npb25TdG9yYWdlKSB7XG4gICAgLy8gV2UgbmVlZCBhIHVuaXF1ZSB3YXkgb2YgaWRlbnRpZnlpbmcgZWFjaCBjb250ZW50IGluIHRoZSBBY2NvcmRpb24uIFNpbmNlXG4gICAgLy8gYW4gYCNpZGAgc2hvdWxkIGJlIHVuaXF1ZSBhbmQgYW4gYGlkYCBpcyByZXF1aXJlZCBmb3IgYGFyaWEtYCBhdHRyaWJ1dGVzXG4gICAgLy8gYGlkYCBjYW4gYmUgc2FmZWx5IHVzZWQuXG4gICAgdmFyICRidXR0b24gPSAkc2VjdGlvbi5xdWVyeVNlbGVjdG9yKCcuJyArIHRoaXMuc2VjdGlvbkJ1dHRvbkNsYXNzKTtcblxuICAgIGlmICgkYnV0dG9uKSB7XG4gICAgICB2YXIgY29udGVudElkID0gJGJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2FyaWEtY29udHJvbHMnKTtcbiAgICAgIHZhciBjb250ZW50U3RhdGUgPSAkYnV0dG9uLmdldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcpO1xuXG4gICAgICAvLyBPbmx5IHNldCB0aGUgc3RhdGUgd2hlbiBib3RoIGBjb250ZW50SWRgIGFuZCBgY29udGVudFN0YXRlYCBhcmUgdGFrZW4gZnJvbSB0aGUgRE9NLlxuICAgICAgaWYgKGNvbnRlbnRJZCAmJiBjb250ZW50U3RhdGUpIHtcbiAgICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oY29udGVudElkLCBjb250ZW50U3RhdGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuLy8gUmVhZCB0aGUgc3RhdGUgb2YgdGhlIGFjY29yZGlvbnMgZnJvbSBzZXNzaW9uU3RvcmFnZVxuQWNjb3JkaW9uLnByb3RvdHlwZS5zZXRJbml0aWFsU3RhdGUgPSBmdW5jdGlvbiAoJHNlY3Rpb24pIHtcbiAgaWYgKHRoaXMuYnJvd3NlclN1cHBvcnRzU2Vzc2lvblN0b3JhZ2UpIHtcbiAgICB2YXIgJGJ1dHRvbiA9ICRzZWN0aW9uLnF1ZXJ5U2VsZWN0b3IoJy4nICsgdGhpcy5zZWN0aW9uQnV0dG9uQ2xhc3MpO1xuXG4gICAgaWYgKCRidXR0b24pIHtcbiAgICAgIHZhciBjb250ZW50SWQgPSAkYnV0dG9uLmdldEF0dHJpYnV0ZSgnYXJpYS1jb250cm9scycpO1xuICAgICAgdmFyIGNvbnRlbnRTdGF0ZSA9IGNvbnRlbnRJZCA/IHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKGNvbnRlbnRJZCkgOiBudWxsO1xuXG4gICAgICBpZiAoY29udGVudFN0YXRlICE9PSBudWxsKSB7XG4gICAgICAgIHRoaXMuc2V0RXhwYW5kZWQoY29udGVudFN0YXRlID09PSAndHJ1ZScsICRzZWN0aW9uKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogQ3JlYXRlIGFuIGVsZW1lbnQgdG8gaW1wcm92ZSBzZW1hbnRpY3Mgb2YgdGhlIHNlY3Rpb24gYnV0dG9uIHdpdGggcHVuY3R1YXRpb25cbiAqXG4gKiBAcmV0dXJucyB7SFRNTFNwYW5FbGVtZW50fSBET00gZWxlbWVudFxuICpcbiAqIEFkZGluZyBwdW5jdHVhdGlvbiB0byB0aGUgYnV0dG9uIGNhbiBhbHNvIGltcHJvdmUgaXRzIGdlbmVyYWwgc2VtYW50aWNzIGJ5IGRpdmlkaW5nIGl0cyBjb250ZW50c1xuICogaW50byB0aGVtYXRpYyBjaHVua3MuXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2FscGhhZ292L2dvdnVrLWZyb250ZW5kL2lzc3Vlcy8yMzI3I2lzc3VlY29tbWVudC05MjI5NTc0NDJcbiAqL1xuQWNjb3JkaW9uLnByb3RvdHlwZS5nZXRCdXR0b25QdW5jdHVhdGlvbkVsID0gZnVuY3Rpb24gKCkge1xuICB2YXIgJHB1bmN0dWF0aW9uRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICRwdW5jdHVhdGlvbkVsLmNsYXNzTGlzdC5hZGQoJ2dvdnVrLXZpc3VhbGx5LWhpZGRlbicsICdnb3Z1ay1hY2NvcmRpb25fX3NlY3Rpb24taGVhZGluZy1kaXZpZGVyJyk7XG4gICRwdW5jdHVhdGlvbkVsLmlubmVySFRNTCA9ICcsICc7XG4gIHJldHVybiAkcHVuY3R1YXRpb25FbFxufTtcblxuLyoqXG4gKiBBY2NvcmRpb24gY29uZmlnXG4gKlxuICogQHR5cGVkZWYge29iamVjdH0gQWNjb3JkaW9uQ29uZmlnXG4gKiBAcHJvcGVydHkge0FjY29yZGlvblRyYW5zbGF0aW9uc30gW2kxOG4gPSBBQ0NPUkRJT05fVFJBTlNMQVRJT05TXSAtIFNlZSBjb25zdGFudCB7QGxpbmsgQUNDT1JESU9OX1RSQU5TTEFUSU9OU31cbiAqL1xuXG4vKipcbiAqIEFjY29yZGlvbiB0cmFuc2xhdGlvbnNcbiAqXG4gKiBAdHlwZWRlZiB7b2JqZWN0fSBBY2NvcmRpb25UcmFuc2xhdGlvbnNcbiAqXG4gKiBNZXNzYWdlcyB1c2VkIGJ5IHRoZSBjb21wb25lbnQgZm9yIHRoZSBsYWJlbHMgb2YgaXRzIGJ1dHRvbnMuIFRoaXMgaW5jbHVkZXNcbiAqIHRoZSB2aXNpYmxlIHRleHQgc2hvd24gb24gc2NyZWVuLCBhbmQgdGV4dCB0byBoZWxwIGFzc2lzdGl2ZSB0ZWNobm9sb2d5IHVzZXJzXG4gKiBmb3IgdGhlIGJ1dHRvbnMgdG9nZ2xpbmcgZWFjaCBzZWN0aW9uLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtoaWRlQWxsU2VjdGlvbnNdIC0gVGhlIHRleHQgY29udGVudCBmb3IgdGhlICdIaWRlIGFsbFxuICogc2VjdGlvbnMnIGJ1dHRvbiwgdXNlZCB3aGVuIGF0IGxlYXN0IG9uZSBzZWN0aW9uIGlzIGV4cGFuZGVkLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtoaWRlU2VjdGlvbl0gLSBUaGUgdGV4dCBjb250ZW50IGZvciB0aGUgJ0hpZGUnXG4gKiBidXR0b24sIHVzZWQgd2hlbiBhIHNlY3Rpb24gaXMgZXhwYW5kZWQuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2hpZGVTZWN0aW9uQXJpYUxhYmVsXSAtIFRoZSB0ZXh0IGNvbnRlbnQgYXBwZW5kZWQgdG8gdGhlXG4gKiAnSGlkZScgYnV0dG9uJ3MgYWNjZXNzaWJsZSBuYW1lIHdoZW4gYSBzZWN0aW9uIGlzIGV4cGFuZGVkLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtzaG93QWxsU2VjdGlvbnNdIC0gVGhlIHRleHQgY29udGVudCBmb3IgdGhlICdTaG93IGFsbFxuICogc2VjdGlvbnMnIGJ1dHRvbiwgdXNlZCB3aGVuIGFsbCBzZWN0aW9ucyBhcmUgY29sbGFwc2VkLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtzaG93U2VjdGlvbl0gLSBUaGUgdGV4dCBjb250ZW50IGZvciB0aGUgJ1Nob3cnXG4gKiBidXR0b24sIHVzZWQgd2hlbiBhIHNlY3Rpb24gaXMgY29sbGFwc2VkLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtzaG93U2VjdGlvbkFyaWFMYWJlbF0gLSBUaGUgdGV4dCBjb250ZW50IGFwcGVuZGVkIHRvIHRoZVxuICogJ1Nob3cnIGJ1dHRvbidzIGFjY2Vzc2libGUgbmFtZSB3aGVuIGEgc2VjdGlvbiBpcyBleHBhbmRlZC5cbiAqL1xuXG4oZnVuY3Rpb24odW5kZWZpbmVkKSB7XG5cbi8vIERldGVjdGlvbiBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9GaW5hbmNpYWwtVGltZXMvcG9seWZpbGwtc2VydmljZS9ibG9iL21hc3Rlci9wYWNrYWdlcy9wb2x5ZmlsbC1saWJyYXJ5L3BvbHlmaWxscy9XaW5kb3cvZGV0ZWN0LmpzXG52YXIgZGV0ZWN0ID0gKCdXaW5kb3cnIGluIHRoaXMpO1xuXG5pZiAoZGV0ZWN0KSByZXR1cm5cblxuLy8gUG9seWZpbGwgZnJvbSBodHRwczovL2Nkbi5wb2x5ZmlsbC5pby92Mi9wb2x5ZmlsbC5qcz9mZWF0dXJlcz1XaW5kb3cmZmxhZ3M9YWx3YXlzXG5pZiAoKHR5cGVvZiBXb3JrZXJHbG9iYWxTY29wZSA9PT0gXCJ1bmRlZmluZWRcIikgJiYgKHR5cGVvZiBpbXBvcnRTY3JpcHRzICE9PSBcImZ1bmN0aW9uXCIpKSB7XG5cdChmdW5jdGlvbiAoZ2xvYmFsKSB7XG5cdFx0aWYgKGdsb2JhbC5jb25zdHJ1Y3Rvcikge1xuXHRcdFx0Z2xvYmFsLldpbmRvdyA9IGdsb2JhbC5jb25zdHJ1Y3Rvcjtcblx0XHR9IGVsc2Uge1xuXHRcdFx0KGdsb2JhbC5XaW5kb3cgPSBnbG9iYWwuY29uc3RydWN0b3IgPSBuZXcgRnVuY3Rpb24oJ3JldHVybiBmdW5jdGlvbiBXaW5kb3coKSB7fScpKCkpLnByb3RvdHlwZSA9IHRoaXM7XG5cdFx0fVxuXHR9KHRoaXMpKTtcbn1cblxufSlcbi5jYWxsKCdvYmplY3QnID09PSB0eXBlb2Ygd2luZG93ICYmIHdpbmRvdyB8fCAnb2JqZWN0JyA9PT0gdHlwZW9mIHNlbGYgJiYgc2VsZiB8fCAnb2JqZWN0JyA9PT0gdHlwZW9mIGdsb2JhbCAmJiBnbG9iYWwgfHwge30pO1xuXG4oZnVuY3Rpb24odW5kZWZpbmVkKSB7XG5cbi8vIERldGVjdGlvbiBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9GaW5hbmNpYWwtVGltZXMvcG9seWZpbGwtc2VydmljZS9ibG9iL21hc3Rlci9wYWNrYWdlcy9wb2x5ZmlsbC1saWJyYXJ5L3BvbHlmaWxscy9FdmVudC9kZXRlY3QuanNcbnZhciBkZXRlY3QgPSAoXG4gIChmdW5jdGlvbihnbG9iYWwpIHtcblxuICBcdGlmICghKCdFdmVudCcgaW4gZ2xvYmFsKSkgcmV0dXJuIGZhbHNlO1xuICBcdGlmICh0eXBlb2YgZ2xvYmFsLkV2ZW50ID09PSAnZnVuY3Rpb24nKSByZXR1cm4gdHJ1ZTtcblxuICBcdHRyeSB7XG5cbiAgXHRcdC8vIEluIElFIDktMTEsIHRoZSBFdmVudCBvYmplY3QgZXhpc3RzIGJ1dCBjYW5ub3QgYmUgaW5zdGFudGlhdGVkXG4gIFx0XHRuZXcgRXZlbnQoJ2NsaWNrJyk7XG4gIFx0XHRyZXR1cm4gdHJ1ZTtcbiAgXHR9IGNhdGNoKGUpIHtcbiAgXHRcdHJldHVybiBmYWxzZTtcbiAgXHR9XG4gIH0odGhpcykpXG4pO1xuXG5pZiAoZGV0ZWN0KSByZXR1cm5cblxuLy8gUG9seWZpbGwgZnJvbSBodHRwczovL2Nkbi5wb2x5ZmlsbC5pby92Mi9wb2x5ZmlsbC5qcz9mZWF0dXJlcz1FdmVudCZmbGFncz1hbHdheXNcbihmdW5jdGlvbiAoKSB7XG5cdHZhciB1bmxpc3RlbmFibGVXaW5kb3dFdmVudHMgPSB7XG5cdFx0Y2xpY2s6IDEsXG5cdFx0ZGJsY2xpY2s6IDEsXG5cdFx0a2V5dXA6IDEsXG5cdFx0a2V5cHJlc3M6IDEsXG5cdFx0a2V5ZG93bjogMSxcblx0XHRtb3VzZWRvd246IDEsXG5cdFx0bW91c2V1cDogMSxcblx0XHRtb3VzZW1vdmU6IDEsXG5cdFx0bW91c2VvdmVyOiAxLFxuXHRcdG1vdXNlZW50ZXI6IDEsXG5cdFx0bW91c2VsZWF2ZTogMSxcblx0XHRtb3VzZW91dDogMSxcblx0XHRzdG9yYWdlOiAxLFxuXHRcdHN0b3JhZ2Vjb21taXQ6IDEsXG5cdFx0dGV4dGlucHV0OiAxXG5cdH07XG5cblx0Ly8gVGhpcyBwb2x5ZmlsbCBkZXBlbmRzIG9uIGF2YWlsYWJpbGl0eSBvZiBgZG9jdW1lbnRgIHNvIHdpbGwgbm90IHJ1biBpbiBhIHdvcmtlclxuXHQvLyBIb3dldmVyLCB3ZSBhc3NzdW1lIHRoZXJlIGFyZSBubyBicm93c2VycyB3aXRoIHdvcmtlciBzdXBwb3J0IHRoYXQgbGFjayBwcm9wZXJcblx0Ly8gc3VwcG9ydCBmb3IgYEV2ZW50YCB3aXRoaW4gdGhlIHdvcmtlclxuXHRpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJyB8fCB0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykgcmV0dXJuO1xuXG5cdGZ1bmN0aW9uIGluZGV4T2YoYXJyYXksIGVsZW1lbnQpIHtcblx0XHR2YXJcblx0XHRpbmRleCA9IC0xLFxuXHRcdGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcblxuXHRcdHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG5cdFx0XHRpZiAoaW5kZXggaW4gYXJyYXkgJiYgYXJyYXlbaW5kZXhdID09PSBlbGVtZW50KSB7XG5cdFx0XHRcdHJldHVybiBpbmRleDtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gLTE7XG5cdH1cblxuXHR2YXIgZXhpc3RpbmdQcm90byA9ICh3aW5kb3cuRXZlbnQgJiYgd2luZG93LkV2ZW50LnByb3RvdHlwZSkgfHwgbnVsbDtcblx0d2luZG93LkV2ZW50ID0gV2luZG93LnByb3RvdHlwZS5FdmVudCA9IGZ1bmN0aW9uIEV2ZW50KHR5cGUsIGV2ZW50SW5pdERpY3QpIHtcblx0XHRpZiAoIXR5cGUpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignTm90IGVub3VnaCBhcmd1bWVudHMnKTtcblx0XHR9XG5cblx0XHR2YXIgZXZlbnQ7XG5cdFx0Ly8gU2hvcnRjdXQgaWYgYnJvd3NlciBzdXBwb3J0cyBjcmVhdGVFdmVudFxuXHRcdGlmICgnY3JlYXRlRXZlbnQnIGluIGRvY3VtZW50KSB7XG5cdFx0XHRldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdFdmVudCcpO1xuXHRcdFx0dmFyIGJ1YmJsZXMgPSBldmVudEluaXREaWN0ICYmIGV2ZW50SW5pdERpY3QuYnViYmxlcyAhPT0gdW5kZWZpbmVkID8gZXZlbnRJbml0RGljdC5idWJibGVzIDogZmFsc2U7XG5cdFx0XHR2YXIgY2FuY2VsYWJsZSA9IGV2ZW50SW5pdERpY3QgJiYgZXZlbnRJbml0RGljdC5jYW5jZWxhYmxlICE9PSB1bmRlZmluZWQgPyBldmVudEluaXREaWN0LmNhbmNlbGFibGUgOiBmYWxzZTtcblxuXHRcdFx0ZXZlbnQuaW5pdEV2ZW50KHR5cGUsIGJ1YmJsZXMsIGNhbmNlbGFibGUpO1xuXG5cdFx0XHRyZXR1cm4gZXZlbnQ7XG5cdFx0fVxuXG5cdFx0ZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudE9iamVjdCgpO1xuXG5cdFx0ZXZlbnQudHlwZSA9IHR5cGU7XG5cdFx0ZXZlbnQuYnViYmxlcyA9IGV2ZW50SW5pdERpY3QgJiYgZXZlbnRJbml0RGljdC5idWJibGVzICE9PSB1bmRlZmluZWQgPyBldmVudEluaXREaWN0LmJ1YmJsZXMgOiBmYWxzZTtcblx0XHRldmVudC5jYW5jZWxhYmxlID0gZXZlbnRJbml0RGljdCAmJiBldmVudEluaXREaWN0LmNhbmNlbGFibGUgIT09IHVuZGVmaW5lZCA/IGV2ZW50SW5pdERpY3QuY2FuY2VsYWJsZSA6IGZhbHNlO1xuXG5cdFx0cmV0dXJuIGV2ZW50O1xuXHR9O1xuXHRpZiAoZXhpc3RpbmdQcm90bykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuRXZlbnQsICdwcm90b3R5cGUnLCB7XG5cdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuXHRcdFx0ZW51bWVyYWJsZTogZmFsc2UsXG5cdFx0XHR3cml0YWJsZTogdHJ1ZSxcblx0XHRcdHZhbHVlOiBleGlzdGluZ1Byb3RvXG5cdFx0fSk7XG5cdH1cblxuXHRpZiAoISgnY3JlYXRlRXZlbnQnIGluIGRvY3VtZW50KSkge1xuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyID0gV2luZG93LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gRG9jdW1lbnQucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBFbGVtZW50LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcigpIHtcblx0XHRcdHZhclxuXHRcdFx0ZWxlbWVudCA9IHRoaXMsXG5cdFx0XHR0eXBlID0gYXJndW1lbnRzWzBdLFxuXHRcdFx0bGlzdGVuZXIgPSBhcmd1bWVudHNbMV07XG5cblx0XHRcdGlmIChlbGVtZW50ID09PSB3aW5kb3cgJiYgdHlwZSBpbiB1bmxpc3RlbmFibGVXaW5kb3dFdmVudHMpIHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdJbiBJRTggdGhlIGV2ZW50OiAnICsgdHlwZSArICcgaXMgbm90IGF2YWlsYWJsZSBvbiB0aGUgd2luZG93IG9iamVjdC4gUGxlYXNlIHNlZSBodHRwczovL2dpdGh1Yi5jb20vRmluYW5jaWFsLVRpbWVzL3BvbHlmaWxsLXNlcnZpY2UvaXNzdWVzLzMxNyBmb3IgbW9yZSBpbmZvcm1hdGlvbi4nKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCFlbGVtZW50Ll9ldmVudHMpIHtcblx0XHRcdFx0ZWxlbWVudC5fZXZlbnRzID0ge307XG5cdFx0XHR9XG5cblx0XHRcdGlmICghZWxlbWVudC5fZXZlbnRzW3R5cGVdKSB7XG5cdFx0XHRcdGVsZW1lbnQuX2V2ZW50c1t0eXBlXSA9IGZ1bmN0aW9uIChldmVudCkge1xuXHRcdFx0XHRcdHZhclxuXHRcdFx0XHRcdGxpc3QgPSBlbGVtZW50Ll9ldmVudHNbZXZlbnQudHlwZV0ubGlzdCxcblx0XHRcdFx0XHRldmVudHMgPSBsaXN0LnNsaWNlKCksXG5cdFx0XHRcdFx0aW5kZXggPSAtMSxcblx0XHRcdFx0XHRsZW5ndGggPSBldmVudHMubGVuZ3RoLFxuXHRcdFx0XHRcdGV2ZW50RWxlbWVudDtcblxuXHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24gcHJldmVudERlZmF1bHQoKSB7XG5cdFx0XHRcdFx0XHRpZiAoZXZlbnQuY2FuY2VsYWJsZSAhPT0gZmFsc2UpIHtcblx0XHRcdFx0XHRcdFx0ZXZlbnQucmV0dXJuVmFsdWUgPSBmYWxzZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uID0gZnVuY3Rpb24gc3RvcFByb3BhZ2F0aW9uKCkge1xuXHRcdFx0XHRcdFx0ZXZlbnQuY2FuY2VsQnViYmxlID0gdHJ1ZTtcblx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0ZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uID0gZnVuY3Rpb24gc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCkge1xuXHRcdFx0XHRcdFx0ZXZlbnQuY2FuY2VsQnViYmxlID0gdHJ1ZTtcblx0XHRcdFx0XHRcdGV2ZW50LmNhbmNlbEltbWVkaWF0ZSA9IHRydWU7XG5cdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdGV2ZW50LmN1cnJlbnRUYXJnZXQgPSBlbGVtZW50O1xuXHRcdFx0XHRcdGV2ZW50LnJlbGF0ZWRUYXJnZXQgPSBldmVudC5mcm9tRWxlbWVudCB8fCBudWxsO1xuXHRcdFx0XHRcdGV2ZW50LnRhcmdldCA9IGV2ZW50LnRhcmdldCB8fCBldmVudC5zcmNFbGVtZW50IHx8IGVsZW1lbnQ7XG5cdFx0XHRcdFx0ZXZlbnQudGltZVN0YW1wID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cblx0XHRcdFx0XHRpZiAoZXZlbnQuY2xpZW50WCkge1xuXHRcdFx0XHRcdFx0ZXZlbnQucGFnZVggPSBldmVudC5jbGllbnRYICsgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQ7XG5cdFx0XHRcdFx0XHRldmVudC5wYWdlWSA9IGV2ZW50LmNsaWVudFkgKyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoICYmICFldmVudC5jYW5jZWxJbW1lZGlhdGUpIHtcblx0XHRcdFx0XHRcdGlmIChpbmRleCBpbiBldmVudHMpIHtcblx0XHRcdFx0XHRcdFx0ZXZlbnRFbGVtZW50ID0gZXZlbnRzW2luZGV4XTtcblxuXHRcdFx0XHRcdFx0XHRpZiAoaW5kZXhPZihsaXN0LCBldmVudEVsZW1lbnQpICE9PSAtMSAmJiB0eXBlb2YgZXZlbnRFbGVtZW50ID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0XHRcdFx0ZXZlbnRFbGVtZW50LmNhbGwoZWxlbWVudCwgZXZlbnQpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdGVsZW1lbnQuX2V2ZW50c1t0eXBlXS5saXN0ID0gW107XG5cblx0XHRcdFx0aWYgKGVsZW1lbnQuYXR0YWNoRXZlbnQpIHtcblx0XHRcdFx0XHRlbGVtZW50LmF0dGFjaEV2ZW50KCdvbicgKyB0eXBlLCBlbGVtZW50Ll9ldmVudHNbdHlwZV0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGVsZW1lbnQuX2V2ZW50c1t0eXBlXS5saXN0LnB1c2gobGlzdGVuZXIpO1xuXHRcdH07XG5cblx0XHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IFdpbmRvdy5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IERvY3VtZW50LnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gRWxlbWVudC5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIHJlbW92ZUV2ZW50TGlzdGVuZXIoKSB7XG5cdFx0XHR2YXJcblx0XHRcdGVsZW1lbnQgPSB0aGlzLFxuXHRcdFx0dHlwZSA9IGFyZ3VtZW50c1swXSxcblx0XHRcdGxpc3RlbmVyID0gYXJndW1lbnRzWzFdLFxuXHRcdFx0aW5kZXg7XG5cblx0XHRcdGlmIChlbGVtZW50Ll9ldmVudHMgJiYgZWxlbWVudC5fZXZlbnRzW3R5cGVdICYmIGVsZW1lbnQuX2V2ZW50c1t0eXBlXS5saXN0KSB7XG5cdFx0XHRcdGluZGV4ID0gaW5kZXhPZihlbGVtZW50Ll9ldmVudHNbdHlwZV0ubGlzdCwgbGlzdGVuZXIpO1xuXG5cdFx0XHRcdGlmIChpbmRleCAhPT0gLTEpIHtcblx0XHRcdFx0XHRlbGVtZW50Ll9ldmVudHNbdHlwZV0ubGlzdC5zcGxpY2UoaW5kZXgsIDEpO1xuXG5cdFx0XHRcdFx0aWYgKCFlbGVtZW50Ll9ldmVudHNbdHlwZV0ubGlzdC5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdGlmIChlbGVtZW50LmRldGFjaEV2ZW50KSB7XG5cdFx0XHRcdFx0XHRcdGVsZW1lbnQuZGV0YWNoRXZlbnQoJ29uJyArIHR5cGUsIGVsZW1lbnQuX2V2ZW50c1t0eXBlXSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRkZWxldGUgZWxlbWVudC5fZXZlbnRzW3R5cGVdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cblx0XHR3aW5kb3cuZGlzcGF0Y2hFdmVudCA9IFdpbmRvdy5wcm90b3R5cGUuZGlzcGF0Y2hFdmVudCA9IERvY3VtZW50LnByb3RvdHlwZS5kaXNwYXRjaEV2ZW50ID0gRWxlbWVudC5wcm90b3R5cGUuZGlzcGF0Y2hFdmVudCA9IGZ1bmN0aW9uIGRpc3BhdGNoRXZlbnQoZXZlbnQpIHtcblx0XHRcdGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ05vdCBlbm91Z2ggYXJndW1lbnRzJyk7XG5cdFx0XHR9XG5cblx0XHRcdGlmICghZXZlbnQgfHwgdHlwZW9mIGV2ZW50LnR5cGUgIT09ICdzdHJpbmcnKSB7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcignRE9NIEV2ZW50cyBFeGNlcHRpb24gMCcpO1xuXHRcdFx0fVxuXG5cdFx0XHR2YXIgZWxlbWVudCA9IHRoaXMsIHR5cGUgPSBldmVudC50eXBlO1xuXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRpZiAoIWV2ZW50LmJ1YmJsZXMpIHtcblx0XHRcdFx0XHRldmVudC5jYW5jZWxCdWJibGUgPSB0cnVlO1xuXG5cdFx0XHRcdFx0dmFyIGNhbmNlbEJ1YmJsZUV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG5cdFx0XHRcdFx0XHRldmVudC5jYW5jZWxCdWJibGUgPSB0cnVlO1xuXG5cdFx0XHRcdFx0XHQoZWxlbWVudCB8fCB3aW5kb3cpLmRldGFjaEV2ZW50KCdvbicgKyB0eXBlLCBjYW5jZWxCdWJibGVFdmVudCk7XG5cdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdHRoaXMuYXR0YWNoRXZlbnQoJ29uJyArIHR5cGUsIGNhbmNlbEJ1YmJsZUV2ZW50KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHRoaXMuZmlyZUV2ZW50KCdvbicgKyB0eXBlLCBldmVudCk7XG5cdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRldmVudC50YXJnZXQgPSBlbGVtZW50O1xuXG5cdFx0XHRcdGRvIHtcblx0XHRcdFx0XHRldmVudC5jdXJyZW50VGFyZ2V0ID0gZWxlbWVudDtcblxuXHRcdFx0XHRcdGlmICgnX2V2ZW50cycgaW4gZWxlbWVudCAmJiB0eXBlb2YgZWxlbWVudC5fZXZlbnRzW3R5cGVdID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0XHRlbGVtZW50Ll9ldmVudHNbdHlwZV0uY2FsbChlbGVtZW50LCBldmVudCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKHR5cGVvZiBlbGVtZW50WydvbicgKyB0eXBlXSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdFx0ZWxlbWVudFsnb24nICsgdHlwZV0uY2FsbChlbGVtZW50LCBldmVudCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0ZWxlbWVudCA9IGVsZW1lbnQubm9kZVR5cGUgPT09IDkgPyBlbGVtZW50LnBhcmVudFdpbmRvdyA6IGVsZW1lbnQucGFyZW50Tm9kZTtcblx0XHRcdFx0fSB3aGlsZSAoZWxlbWVudCAmJiAhZXZlbnQuY2FuY2VsQnViYmxlKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fTtcblxuXHRcdC8vIEFkZCB0aGUgRE9NQ29udGVudExvYWRlZCBFdmVudFxuXHRcdGRvY3VtZW50LmF0dGFjaEV2ZW50KCdvbnJlYWR5c3RhdGVjaGFuZ2UnLCBmdW5jdGlvbigpIHtcblx0XHRcdGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnKSB7XG5cdFx0XHRcdGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdET01Db250ZW50TG9hZGVkJywge1xuXHRcdFx0XHRcdGJ1YmJsZXM6IHRydWVcblx0XHRcdFx0fSkpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG59KCkpO1xuXG59KVxuLmNhbGwoJ29iamVjdCcgPT09IHR5cGVvZiB3aW5kb3cgJiYgd2luZG93IHx8ICdvYmplY3QnID09PSB0eXBlb2Ygc2VsZiAmJiBzZWxmIHx8ICdvYmplY3QnID09PSB0eXBlb2YgZ2xvYmFsICYmIGdsb2JhbCB8fCB7fSk7XG5cbnZhciBLRVlfU1BBQ0UgPSAzMjtcbnZhciBERUJPVU5DRV9USU1FT1VUX0lOX1NFQ09ORFMgPSAxO1xuXG4vKipcbiAqIEphdmFTY3JpcHQgZW5oYW5jZW1lbnRzIGZvciB0aGUgQnV0dG9uIGNvbXBvbmVudFxuICpcbiAqIEBjbGFzc1xuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gJG1vZHVsZSAtIFRoZSBlbGVtZW50IHRoaXMgY29tcG9uZW50IGNvbnRyb2xzXG4gKiBAcGFyYW0ge0J1dHRvbkNvbmZpZ30gY29uZmlnIC0gQnV0dG9uIGNvbmZpZ1xuICovXG5mdW5jdGlvbiBCdXR0b24gKCRtb2R1bGUsIGNvbmZpZykge1xuICBpZiAoISRtb2R1bGUpIHtcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgdGhpcy4kbW9kdWxlID0gJG1vZHVsZTtcbiAgdGhpcy5kZWJvdW5jZUZvcm1TdWJtaXRUaW1lciA9IG51bGw7XG5cbiAgdmFyIGRlZmF1bHRDb25maWcgPSB7XG4gICAgcHJldmVudERvdWJsZUNsaWNrOiBmYWxzZVxuICB9O1xuICB0aGlzLmNvbmZpZyA9IG1lcmdlQ29uZmlncyhcbiAgICBkZWZhdWx0Q29uZmlnLFxuICAgIGNvbmZpZyB8fCB7fSxcbiAgICBub3JtYWxpc2VEYXRhc2V0KCRtb2R1bGUuZGF0YXNldClcbiAgKTtcbn1cblxuLyoqXG4gKiBJbml0aWFsaXNlIGNvbXBvbmVudFxuICovXG5CdXR0b24ucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICghdGhpcy4kbW9kdWxlKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICB0aGlzLiRtb2R1bGUuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuaGFuZGxlS2V5RG93bik7XG4gIHRoaXMuJG1vZHVsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZGVib3VuY2UuYmluZCh0aGlzKSk7XG59O1xuXG4vKipcbiAqIFRyaWdnZXIgYSBjbGljayBldmVudCB3aGVuIHRoZSBzcGFjZSBrZXkgaXMgcHJlc3NlZFxuICpcbiAqIFNvbWUgc2NyZWVuIHJlYWRlcnMgdGVsbCB1c2VycyB0aGV5IGNhbiBhY3RpdmF0ZSB0aGluZ3Mgd2l0aCB0aGUgJ2J1dHRvbidcbiAqIHJvbGUsIHNvIHdlIG5lZWQgdG8gbWF0Y2ggdGhlIGZ1bmN0aW9uYWxpdHkgb2YgbmF0aXZlIEhUTUwgYnV0dG9uc1xuICpcbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYWxwaGFnb3YvZ292dWtfZWxlbWVudHMvcHVsbC8yNzIjaXNzdWVjb21tZW50LTIzMzAyODI3MFxuICpcbiAqIEBwYXJhbSB7S2V5Ym9hcmRFdmVudH0gZXZlbnRcbiAqL1xuQnV0dG9uLnByb3RvdHlwZS5oYW5kbGVLZXlEb3duID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gIHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQ7XG5cbiAgaWYgKHRhcmdldC5nZXRBdHRyaWJ1dGUoJ3JvbGUnKSA9PT0gJ2J1dHRvbicgJiYgZXZlbnQua2V5Q29kZSA9PT0gS0VZX1NQQUNFKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgLy8gcHJldmVudCB0aGUgcGFnZSBmcm9tIHNjcm9sbGluZ1xuICAgIHRhcmdldC5jbGljaygpO1xuICB9XG59O1xuXG4vKipcbiAqIERlYm91bmNlIGRvdWJsZS1jbGlja3NcbiAqXG4gKiBJZiB0aGUgY2xpY2sgcXVpY2tseSBzdWNjZWVkcyBhIHByZXZpb3VzIGNsaWNrIHRoZW4gbm90aGluZyB3aWxsIGhhcHBlbi4gVGhpc1xuICogc3RvcHMgcGVvcGxlIGFjY2lkZW50YWxseSBjYXVzaW5nIG11bHRpcGxlIGZvcm0gc3VibWlzc2lvbnMgYnkgZG91YmxlXG4gKiBjbGlja2luZyBidXR0b25zLlxuICpcbiAqIEBwYXJhbSB7TW91c2VFdmVudH0gZXZlbnRcbiAqIEByZXR1cm5zIHt1bmRlZmluZWQgfCBmYWxzZX0gLSBSZXR1cm5zIHVuZGVmaW5lZCwgb3IgZmFsc2Ugd2hlbiBkZWJvdW5jZWRcbiAqL1xuQnV0dG9uLnByb3RvdHlwZS5kZWJvdW5jZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAvLyBDaGVjayB0aGUgYnV0dG9uIHRoYXQgd2FzIGNsaWNrZWQgaGFzIHByZXZlbnREb3VibGVDbGljayBlbmFibGVkXG4gIGlmICghdGhpcy5jb25maWcucHJldmVudERvdWJsZUNsaWNrKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICAvLyBJZiB0aGUgdGltZXIgaXMgc3RpbGwgcnVubmluZywgcHJldmVudCB0aGUgY2xpY2sgZnJvbSBzdWJtaXR0aW5nIHRoZSBmb3JtXG4gIGlmICh0aGlzLmRlYm91bmNlRm9ybVN1Ym1pdFRpbWVyKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHRoaXMuZGVib3VuY2VGb3JtU3VibWl0VGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmRlYm91bmNlRm9ybVN1Ym1pdFRpbWVyID0gbnVsbDtcbiAgfS5iaW5kKHRoaXMpLCBERUJPVU5DRV9USU1FT1VUX0lOX1NFQ09ORFMgKiAxMDAwKTtcbn07XG5cbi8qKlxuICogQnV0dG9uIGNvbmZpZ1xuICpcbiAqIEB0eXBlZGVmIHtvYmplY3R9IEJ1dHRvbkNvbmZpZ1xuICogQHByb3BlcnR5IHtib29sZWFufSBbcHJldmVudERvdWJsZUNsaWNrID0gZmFsc2VdIC1cbiAqICBQcmV2ZW50IGFjY2lkZW50YWwgZG91YmxlIGNsaWNrcyBvbiBzdWJtaXQgYnV0dG9ucyBmcm9tIHN1Ym1pdHRpbmcgZm9ybXNcbiAqICBtdWx0aXBsZSB0aW1lcy5cbiAqL1xuXG4vKipcbiAqIEphdmFTY3JpcHQgJ3BvbHlmaWxsJyBmb3IgSFRNTDUncyA8ZGV0YWlscz4gYW5kIDxzdW1tYXJ5PiBlbGVtZW50c1xuICogYW5kICdzaGltJyB0byBhZGQgYWNjZXNzaWJsaXR5IGVuaGFuY2VtZW50cyBmb3IgYWxsIGJyb3dzZXJzXG4gKlxuICogaHR0cDovL2Nhbml1c2UuY29tLyNmZWF0PWRldGFpbHNcbiAqL1xuXG52YXIgS0VZX0VOVEVSID0gMTM7XG52YXIgS0VZX1NQQUNFJDEgPSAzMjtcblxuLyoqXG4gKiBEZXRhaWxzIGNvbXBvbmVudFxuICpcbiAqIEBjbGFzc1xuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gJG1vZHVsZSAtIEhUTUwgZWxlbWVudCB0byB1c2UgZm9yIGRldGFpbHNcbiAqL1xuZnVuY3Rpb24gRGV0YWlscyAoJG1vZHVsZSkge1xuICB0aGlzLiRtb2R1bGUgPSAkbW9kdWxlO1xufVxuXG5EZXRhaWxzLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkge1xuICBpZiAoIXRoaXMuJG1vZHVsZSkge1xuICAgIHJldHVyblxuICB9XG5cbiAgLy8gSWYgdGhlcmUgaXMgbmF0aXZlIGRldGFpbHMgc3VwcG9ydCwgd2Ugd2FudCB0byBhdm9pZCBydW5uaW5nIGNvZGUgdG8gcG9seWZpbGwgbmF0aXZlIGJlaGF2aW91ci5cbiAgdmFyIGhhc05hdGl2ZURldGFpbHMgPSB0eXBlb2YgdGhpcy4kbW9kdWxlLm9wZW4gPT09ICdib29sZWFuJztcblxuICBpZiAoaGFzTmF0aXZlRGV0YWlscykge1xuICAgIHJldHVyblxuICB9XG5cbiAgdGhpcy5wb2x5ZmlsbERldGFpbHMoKTtcbn07XG5cbkRldGFpbHMucHJvdG90eXBlLnBvbHlmaWxsRGV0YWlscyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyICRtb2R1bGUgPSB0aGlzLiRtb2R1bGU7XG5cbiAgLy8gU2F2ZSBzaG9ydGN1dHMgdG8gdGhlIGlubmVyIHN1bW1hcnkgYW5kIGNvbnRlbnQgZWxlbWVudHNcbiAgdmFyICRzdW1tYXJ5ID0gdGhpcy4kc3VtbWFyeSA9ICRtb2R1bGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3N1bW1hcnknKS5pdGVtKDApO1xuICB2YXIgJGNvbnRlbnQgPSB0aGlzLiRjb250ZW50ID0gJG1vZHVsZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnZGl2JykuaXRlbSgwKTtcblxuICAvLyBJZiA8ZGV0YWlscz4gZG9lc24ndCBoYXZlIGEgPHN1bW1hcnk+IGFuZCBhIDxkaXY+IHJlcHJlc2VudGluZyB0aGUgY29udGVudFxuICAvLyBpdCBtZWFucyB0aGUgcmVxdWlyZWQgSFRNTCBzdHJ1Y3R1cmUgaXMgbm90IG1ldCBzbyB0aGUgc2NyaXB0IHdpbGwgc3RvcFxuICBpZiAoISRzdW1tYXJ5IHx8ICEkY29udGVudCkge1xuICAgIHJldHVyblxuICB9XG5cbiAgLy8gSWYgdGhlIGNvbnRlbnQgZG9lc24ndCBoYXZlIGFuIElELCBhc3NpZ24gaXQgb25lIG5vd1xuICAvLyB3aGljaCB3ZSdsbCBuZWVkIGZvciB0aGUgc3VtbWFyeSdzIGFyaWEtY29udHJvbHMgYXNzaWdubWVudFxuICBpZiAoISRjb250ZW50LmlkKSB7XG4gICAgJGNvbnRlbnQuaWQgPSAnZGV0YWlscy1jb250ZW50LScgKyBnZW5lcmF0ZVVuaXF1ZUlEKCk7XG4gIH1cblxuICAvLyBBZGQgQVJJQSByb2xlPVwiZ3JvdXBcIiB0byBkZXRhaWxzXG4gICRtb2R1bGUuc2V0QXR0cmlidXRlKCdyb2xlJywgJ2dyb3VwJyk7XG5cbiAgLy8gQWRkIHJvbGU9YnV0dG9uIHRvIHN1bW1hcnlcbiAgJHN1bW1hcnkuc2V0QXR0cmlidXRlKCdyb2xlJywgJ2J1dHRvbicpO1xuXG4gIC8vIEFkZCBhcmlhLWNvbnRyb2xzXG4gICRzdW1tYXJ5LnNldEF0dHJpYnV0ZSgnYXJpYS1jb250cm9scycsICRjb250ZW50LmlkKTtcblxuICAvLyBTZXQgdGFiSW5kZXggc28gdGhlIHN1bW1hcnkgaXMga2V5Ym9hcmQgYWNjZXNzaWJsZSBmb3Igbm9uLW5hdGl2ZSBlbGVtZW50c1xuICAvL1xuICAvLyBXZSBoYXZlIHRvIHVzZSB0aGUgY2FtZWxjYXNlIGB0YWJJbmRleGAgcHJvcGVydHkgYXMgdGhlcmUgaXMgYSBidWcgaW4gSUU2L0lFNyB3aGVuIHdlIHNldCB0aGUgY29ycmVjdCBhdHRyaWJ1dGUgbG93ZXJjYXNlOlxuICAvLyBTZWUgaHR0cDovL3dlYi5hcmNoaXZlLm9yZy93ZWIvMjAxNzAxMjAxOTQwMzYvaHR0cDovL3d3dy5zYWxpZW5jZXMuY29tL2Jyb3dzZXJCdWdzL3RhYkluZGV4Lmh0bWwgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gICRzdW1tYXJ5LnRhYkluZGV4ID0gMDtcblxuICAvLyBEZXRlY3QgaW5pdGlhbCBvcGVuIHN0YXRlXG4gIGlmICh0aGlzLiRtb2R1bGUuaGFzQXR0cmlidXRlKCdvcGVuJykpIHtcbiAgICAkc3VtbWFyeS5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAndHJ1ZScpO1xuICB9IGVsc2Uge1xuICAgICRzdW1tYXJ5LnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICdmYWxzZScpO1xuICAgICRjb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIH1cblxuICAvLyBCaW5kIGFuIGV2ZW50IHRvIGhhbmRsZSBzdW1tYXJ5IGVsZW1lbnRzXG4gIHRoaXMucG9seWZpbGxIYW5kbGVJbnB1dHMoJHN1bW1hcnksIHRoaXMucG9seWZpbGxTZXRBdHRyaWJ1dGVzLmJpbmQodGhpcykpO1xufTtcblxuLyoqXG4gKiBEZWZpbmUgYSBzdGF0ZWNoYW5nZSBmdW5jdGlvbiB0aGF0IHVwZGF0ZXMgYXJpYS1leHBhbmRlZCBhbmQgc3R5bGUuZGlzcGxheVxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIHRydWVcbiAqL1xuRGV0YWlscy5wcm90b3R5cGUucG9seWZpbGxTZXRBdHRyaWJ1dGVzID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy4kbW9kdWxlLmhhc0F0dHJpYnV0ZSgnb3BlbicpKSB7XG4gICAgdGhpcy4kbW9kdWxlLnJlbW92ZUF0dHJpYnV0ZSgnb3BlbicpO1xuICAgIHRoaXMuJHN1bW1hcnkuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyk7XG4gICAgdGhpcy4kY29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuJG1vZHVsZS5zZXRBdHRyaWJ1dGUoJ29wZW4nLCAnb3BlbicpO1xuICAgIHRoaXMuJHN1bW1hcnkuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ3RydWUnKTtcbiAgICB0aGlzLiRjb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgfVxuXG4gIHJldHVybiB0cnVlXG59O1xuXG4vKipcbiAqIEhhbmRsZSBjcm9zcy1tb2RhbCBjbGljayBldmVudHNcbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gbm9kZSAtIGVsZW1lbnRcbiAqIEBwYXJhbSB7cG9seWZpbGxIYW5kbGVJbnB1dHNDYWxsYmFja30gY2FsbGJhY2sgLSBmdW5jdGlvblxuICovXG5EZXRhaWxzLnByb3RvdHlwZS5wb2x5ZmlsbEhhbmRsZUlucHV0cyA9IGZ1bmN0aW9uIChub2RlLCBjYWxsYmFjaykge1xuICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldDtcbiAgICAvLyBXaGVuIHRoZSBrZXkgZ2V0cyBwcmVzc2VkIC0gY2hlY2sgaWYgaXQgaXMgZW50ZXIgb3Igc3BhY2VcbiAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gS0VZX0VOVEVSIHx8IGV2ZW50LmtleUNvZGUgPT09IEtFWV9TUEFDRSQxKSB7XG4gICAgICBpZiAodGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdzdW1tYXJ5Jykge1xuICAgICAgICAvLyBQcmV2ZW50IHNwYWNlIGZyb20gc2Nyb2xsaW5nIHRoZSBwYWdlXG4gICAgICAgIC8vIGFuZCBlbnRlciBmcm9tIHN1Ym1pdHRpbmcgYSBmb3JtXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIC8vIENsaWNrIHRvIGxldCB0aGUgY2xpY2sgZXZlbnQgZG8gYWxsIHRoZSBuZWNlc3NhcnkgYWN0aW9uXG4gICAgICAgIGlmICh0YXJnZXQuY2xpY2spIHtcbiAgICAgICAgICB0YXJnZXQuY2xpY2soKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBleGNlcHQgU2FmYXJpIDUuMSBhbmQgdW5kZXIgZG9uJ3Qgc3VwcG9ydCAuY2xpY2soKSBoZXJlXG4gICAgICAgICAgY2FsbGJhY2soZXZlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICAvLyBQcmV2ZW50IGtleXVwIHRvIHByZXZlbnQgY2xpY2tpbmcgdHdpY2UgaW4gRmlyZWZveCB3aGVuIHVzaW5nIHNwYWNlIGtleVxuICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldDtcbiAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gS0VZX1NQQUNFJDEpIHtcbiAgICAgIGlmICh0YXJnZXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3N1bW1hcnknKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2FsbGJhY2spO1xufTtcblxuLyoqXG4gKiBAY2FsbGJhY2sgcG9seWZpbGxIYW5kbGVJbnB1dHNDYWxsYmFja1xuICogQHBhcmFtIHtLZXlib2FyZEV2ZW50fSBldmVudCAtIEtleWJvYXJkIGV2ZW50XG4gKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxuICovXG5cbihmdW5jdGlvbih1bmRlZmluZWQpIHtcblxuICAgIC8vIERldGVjdGlvbiBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9GaW5hbmNpYWwtVGltZXMvcG9seWZpbGwtbGlicmFyeS9ibG9iL3YzLjExMS4wL3BvbHlmaWxscy9EYXRlL25vdy9kZXRlY3QuanNcbiAgICB2YXIgZGV0ZWN0ID0gKCdEYXRlJyBpbiBzZWxmICYmICdub3cnIGluIHNlbGYuRGF0ZSAmJiAnZ2V0VGltZScgaW4gc2VsZi5EYXRlLnByb3RvdHlwZSk7XG5cbiAgICBpZiAoZGV0ZWN0KSByZXR1cm5cblxuICAgIC8vIFBvbHlmaWxsIGZyb20gaHR0cHM6Ly9wb2x5ZmlsbC5pby92My9wb2x5ZmlsbC5qcz92ZXJzaW9uPTMuMTExLjAmZmVhdHVyZXM9RGF0ZS5ub3cmZmxhZ3M9YWx3YXlzXG4gICAgRGF0ZS5ub3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICB9O1xuXG59KS5jYWxsKCdvYmplY3QnID09PSB0eXBlb2Ygd2luZG93ICYmIHdpbmRvdyB8fCAnb2JqZWN0JyA9PT0gdHlwZW9mIHNlbGYgJiYgc2VsZiB8fCAnb2JqZWN0JyA9PT0gdHlwZW9mIGdsb2JhbCAmJiBnbG9iYWwgfHwge30pO1xuXG4oZnVuY3Rpb24odW5kZWZpbmVkKSB7XG5cbiAgLy8gRGV0ZWN0aW9uIGZyb20gaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0ZpbmFuY2lhbC1UaW1lcy9wb2x5ZmlsbC1zZXJ2aWNlLzFmM2MwOWI0MDJmNjViZjZlMzkzZjkzM2ExNWJhNjNmMWI4NmVmMWYvcGFja2FnZXMvcG9seWZpbGwtbGlicmFyeS9wb2x5ZmlsbHMvRWxlbWVudC9wcm90b3R5cGUvbWF0Y2hlcy9kZXRlY3QuanNcbiAgdmFyIGRldGVjdCA9IChcbiAgICAnZG9jdW1lbnQnIGluIHRoaXMgJiYgXCJtYXRjaGVzXCIgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50XG4gICk7XG5cbiAgaWYgKGRldGVjdCkgcmV0dXJuXG5cbiAgLy8gUG9seWZpbGwgZnJvbSBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vRmluYW5jaWFsLVRpbWVzL3BvbHlmaWxsLXNlcnZpY2UvMWYzYzA5YjQwMmY2NWJmNmUzOTNmOTMzYTE1YmE2M2YxYjg2ZWYxZi9wYWNrYWdlcy9wb2x5ZmlsbC1saWJyYXJ5L3BvbHlmaWxscy9FbGVtZW50L3Byb3RvdHlwZS9tYXRjaGVzL3BvbHlmaWxsLmpzXG4gIEVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXMgPSBFbGVtZW50LnByb3RvdHlwZS53ZWJraXRNYXRjaGVzU2VsZWN0b3IgfHwgRWxlbWVudC5wcm90b3R5cGUub01hdGNoZXNTZWxlY3RvciB8fCBFbGVtZW50LnByb3RvdHlwZS5tc01hdGNoZXNTZWxlY3RvciB8fCBFbGVtZW50LnByb3RvdHlwZS5tb3pNYXRjaGVzU2VsZWN0b3IgfHwgZnVuY3Rpb24gbWF0Y2hlcyhzZWxlY3Rvcikge1xuICAgIHZhciBlbGVtZW50ID0gdGhpcztcbiAgICB2YXIgZWxlbWVudHMgPSAoZWxlbWVudC5kb2N1bWVudCB8fCBlbGVtZW50Lm93bmVyRG9jdW1lbnQpLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuICAgIHZhciBpbmRleCA9IDA7XG5cbiAgICB3aGlsZSAoZWxlbWVudHNbaW5kZXhdICYmIGVsZW1lbnRzW2luZGV4XSAhPT0gZWxlbWVudCkge1xuICAgICAgKytpbmRleDtcbiAgICB9XG5cbiAgICByZXR1cm4gISFlbGVtZW50c1tpbmRleF07XG4gIH07XG5cbn0pLmNhbGwoJ29iamVjdCcgPT09IHR5cGVvZiB3aW5kb3cgJiYgd2luZG93IHx8ICdvYmplY3QnID09PSB0eXBlb2Ygc2VsZiAmJiBzZWxmIHx8ICdvYmplY3QnID09PSB0eXBlb2YgZ2xvYmFsICYmIGdsb2JhbCB8fCB7fSk7XG5cbihmdW5jdGlvbih1bmRlZmluZWQpIHtcblxuICAvLyBEZXRlY3Rpb24gZnJvbSBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vRmluYW5jaWFsLVRpbWVzL3BvbHlmaWxsLXNlcnZpY2UvMWYzYzA5YjQwMmY2NWJmNmUzOTNmOTMzYTE1YmE2M2YxYjg2ZWYxZi9wYWNrYWdlcy9wb2x5ZmlsbC1saWJyYXJ5L3BvbHlmaWxscy9FbGVtZW50L3Byb3RvdHlwZS9jbG9zZXN0L2RldGVjdC5qc1xuICB2YXIgZGV0ZWN0ID0gKFxuICAgICdkb2N1bWVudCcgaW4gdGhpcyAmJiBcImNsb3Nlc3RcIiBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnRcbiAgKTtcblxuICBpZiAoZGV0ZWN0KSByZXR1cm5cblxuICAvLyBQb2x5ZmlsbCBmcm9tIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9GaW5hbmNpYWwtVGltZXMvcG9seWZpbGwtc2VydmljZS8xZjNjMDliNDAyZjY1YmY2ZTM5M2Y5MzNhMTViYTYzZjFiODZlZjFmL3BhY2thZ2VzL3BvbHlmaWxsLWxpYnJhcnkvcG9seWZpbGxzL0VsZW1lbnQvcHJvdG90eXBlL2Nsb3Nlc3QvcG9seWZpbGwuanNcbiAgRWxlbWVudC5wcm90b3R5cGUuY2xvc2VzdCA9IGZ1bmN0aW9uIGNsb3Nlc3Qoc2VsZWN0b3IpIHtcbiAgICB2YXIgbm9kZSA9IHRoaXM7XG5cbiAgICB3aGlsZSAobm9kZSkge1xuICAgICAgaWYgKG5vZGUubWF0Y2hlcyhzZWxlY3RvcikpIHJldHVybiBub2RlO1xuICAgICAgZWxzZSBub2RlID0gJ1NWR0VsZW1lbnQnIGluIHdpbmRvdyAmJiBub2RlIGluc3RhbmNlb2YgU1ZHRWxlbWVudCA/IG5vZGUucGFyZW50Tm9kZSA6IG5vZGUucGFyZW50RWxlbWVudDtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxufSkuY2FsbCgnb2JqZWN0JyA9PT0gdHlwZW9mIHdpbmRvdyAmJiB3aW5kb3cgfHwgJ29iamVjdCcgPT09IHR5cGVvZiBzZWxmICYmIHNlbGYgfHwgJ29iamVjdCcgPT09IHR5cGVvZiBnbG9iYWwgJiYgZ2xvYmFsIHx8IHt9KTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gYXR0cmlidXRlIGNsb3Nlc3QgdG8gdGhlIGdpdmVuIGVsZW1lbnQgKGluY2x1ZGluZyBpdHNlbGYpXG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gJGVsZW1lbnQgLSBUaGUgZWxlbWVudCB0byBzdGFydCB3YWxraW5nIHRoZSBET00gdHJlZSB1cFxuICogQHBhcmFtIHtzdHJpbmd9IGF0dHJpYnV0ZU5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgYXR0cmlidXRlXG4gKiBAcmV0dXJucyB7c3RyaW5nIHwgdW5kZWZpbmVkfSBBdHRyaWJ1dGUgdmFsdWVcbiAqL1xuZnVuY3Rpb24gY2xvc2VzdEF0dHJpYnV0ZVZhbHVlICgkZWxlbWVudCwgYXR0cmlidXRlTmFtZSkge1xuICB2YXIgY2xvc2VzdEVsZW1lbnRXaXRoQXR0cmlidXRlID0gJGVsZW1lbnQuY2xvc2VzdCgnWycgKyBhdHRyaWJ1dGVOYW1lICsgJ10nKTtcbiAgaWYgKGNsb3Nlc3RFbGVtZW50V2l0aEF0dHJpYnV0ZSkge1xuICAgIHJldHVybiBjbG9zZXN0RWxlbWVudFdpdGhBdHRyaWJ1dGUuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUpXG4gIH1cbn1cblxuLyoqXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtDaGFyYWN0ZXJDb3VudFRyYW5zbGF0aW9uc31cbiAqIEBzZWUgRGVmYXVsdCB2YWx1ZSBmb3Ige0BsaW5rIENoYXJhY3RlckNvdW50Q29uZmlnLmkxOG59XG4gKiBAZGVmYXVsdFxuICovXG52YXIgQ0hBUkFDVEVSX0NPVU5UX1RSQU5TTEFUSU9OUyA9IHtcbiAgLy8gQ2hhcmFjdGVyc1xuICBjaGFyYWN0ZXJzVW5kZXJMaW1pdDoge1xuICAgIG9uZTogJ1lvdSBoYXZlICV7Y291bnR9IGNoYXJhY3RlciByZW1haW5pbmcnLFxuICAgIG90aGVyOiAnWW91IGhhdmUgJXtjb3VudH0gY2hhcmFjdGVycyByZW1haW5pbmcnXG4gIH0sXG4gIGNoYXJhY3RlcnNBdExpbWl0OiAnWW91IGhhdmUgMCBjaGFyYWN0ZXJzIHJlbWFpbmluZycsXG4gIGNoYXJhY3RlcnNPdmVyTGltaXQ6IHtcbiAgICBvbmU6ICdZb3UgaGF2ZSAle2NvdW50fSBjaGFyYWN0ZXIgdG9vIG1hbnknLFxuICAgIG90aGVyOiAnWW91IGhhdmUgJXtjb3VudH0gY2hhcmFjdGVycyB0b28gbWFueSdcbiAgfSxcbiAgLy8gV29yZHNcbiAgd29yZHNVbmRlckxpbWl0OiB7XG4gICAgb25lOiAnWW91IGhhdmUgJXtjb3VudH0gd29yZCByZW1haW5pbmcnLFxuICAgIG90aGVyOiAnWW91IGhhdmUgJXtjb3VudH0gd29yZHMgcmVtYWluaW5nJ1xuICB9LFxuICB3b3Jkc0F0TGltaXQ6ICdZb3UgaGF2ZSAwIHdvcmRzIHJlbWFpbmluZycsXG4gIHdvcmRzT3ZlckxpbWl0OiB7XG4gICAgb25lOiAnWW91IGhhdmUgJXtjb3VudH0gd29yZCB0b28gbWFueScsXG4gICAgb3RoZXI6ICdZb3UgaGF2ZSAle2NvdW50fSB3b3JkcyB0b28gbWFueSdcbiAgfSxcbiAgdGV4dGFyZWFEZXNjcmlwdGlvbjoge1xuICAgIG90aGVyOiAnJ1xuICB9XG59O1xuXG4vKipcbiAqIEphdmFTY3JpcHQgZW5oYW5jZW1lbnRzIGZvciB0aGUgQ2hhcmFjdGVyQ291bnQgY29tcG9uZW50XG4gKlxuICogVHJhY2tzIHRoZSBudW1iZXIgb2YgY2hhcmFjdGVycyBvciB3b3JkcyBpbiB0aGUgYC5nb3Z1ay1qcy1jaGFyYWN0ZXItY291bnRgXG4gKiBgPHRleHRhcmVhPmAgaW5zaWRlIHRoZSBlbGVtZW50LiBEaXNwbGF5cyBhIG1lc3NhZ2Ugd2l0aCB0aGUgcmVtYWluaW5nIG51bWJlclxuICogb2YgY2hhcmFjdGVycy93b3JkcyBhdmFpbGFibGUsIG9yIHRoZSBudW1iZXIgb2YgY2hhcmFjdGVycy93b3JkcyBpbiBleGNlc3MuXG4gKlxuICogWW91IGNhbiBjb25maWd1cmUgdGhlIG1lc3NhZ2UgdG8gb25seSBhcHBlYXIgYWZ0ZXIgYSBjZXJ0YWluIHBlcmNlbnRhZ2VcbiAqIG9mIHRoZSBhdmFpbGFibGUgY2hhcmFjdGVycy93b3JkcyBoYXMgYmVlbiBlbnRlcmVkLlxuICpcbiAqIEBjbGFzc1xuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gJG1vZHVsZSAtIFRoZSBlbGVtZW50IHRoaXMgY29tcG9uZW50IGNvbnRyb2xzXG4gKiBAcGFyYW0ge0NoYXJhY3RlckNvdW50Q29uZmlnfSBbY29uZmlnXSAtIENoYXJhY3RlciBjb3VudCBjb25maWdcbiAqL1xuZnVuY3Rpb24gQ2hhcmFjdGVyQ291bnQgKCRtb2R1bGUsIGNvbmZpZykge1xuICBpZiAoISRtb2R1bGUpIHtcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgdmFyIGRlZmF1bHRDb25maWcgPSB7XG4gICAgdGhyZXNob2xkOiAwLFxuICAgIGkxOG46IENIQVJBQ1RFUl9DT1VOVF9UUkFOU0xBVElPTlNcbiAgfTtcblxuICAvLyBSZWFkIGNvbmZpZyBzZXQgdXNpbmcgZGF0YXNldCAoJ2RhdGEtJyB2YWx1ZXMpXG4gIHZhciBkYXRhc2V0Q29uZmlnID0gbm9ybWFsaXNlRGF0YXNldCgkbW9kdWxlLmRhdGFzZXQpO1xuXG4gIC8vIFRvIGVuc3VyZSBkYXRhLWF0dHJpYnV0ZXMgdGFrZSBjb21wbGV0ZSBwcmVjZWRlbmNlLCBldmVuIGlmIHRoZXkgY2hhbmdlIHRoZVxuICAvLyB0eXBlIG9mIGNvdW50LCB3ZSBuZWVkIHRvIHJlc2V0IHRoZSBgbWF4bGVuZ3RoYCBhbmQgYG1heHdvcmRzYCBmcm9tIHRoZVxuICAvLyBKYXZhU2NyaXB0IGNvbmZpZy5cbiAgLy9cbiAgLy8gV2UgY2FuJ3QgbXV0YXRlIGBjb25maWdgLCB0aG91Z2gsIGFzIGl0IG1heSBiZSBzaGFyZWQgYWNyb3NzIG11bHRpcGxlXG4gIC8vIGNvbXBvbmVudHMgaW5zaWRlIGBpbml0QWxsYC5cbiAgdmFyIGNvbmZpZ092ZXJyaWRlcyA9IHt9O1xuICBpZiAoJ21heHdvcmRzJyBpbiBkYXRhc2V0Q29uZmlnIHx8ICdtYXhsZW5ndGgnIGluIGRhdGFzZXRDb25maWcpIHtcbiAgICBjb25maWdPdmVycmlkZXMgPSB7XG4gICAgICBtYXhsZW5ndGg6IGZhbHNlLFxuICAgICAgbWF4d29yZHM6IGZhbHNlXG4gICAgfTtcbiAgfVxuXG4gIHRoaXMuY29uZmlnID0gbWVyZ2VDb25maWdzKFxuICAgIGRlZmF1bHRDb25maWcsXG4gICAgY29uZmlnIHx8IHt9LFxuICAgIGNvbmZpZ092ZXJyaWRlcyxcbiAgICBkYXRhc2V0Q29uZmlnXG4gICk7XG5cbiAgdGhpcy5pMThuID0gbmV3IEkxOG4oZXh0cmFjdENvbmZpZ0J5TmFtZXNwYWNlKHRoaXMuY29uZmlnLCAnaTE4bicpLCB7XG4gICAgLy8gUmVhZCB0aGUgZmFsbGJhY2sgaWYgbmVjZXNzYXJ5IHJhdGhlciB0aGFuIGhhdmUgaXQgc2V0IGluIHRoZSBkZWZhdWx0c1xuICAgIGxvY2FsZTogY2xvc2VzdEF0dHJpYnV0ZVZhbHVlKCRtb2R1bGUsICdsYW5nJylcbiAgfSk7XG5cbiAgLy8gRGV0ZXJtaW5lIHRoZSBsaW1pdCBhdHRyaWJ1dGUgKGNoYXJhY3RlcnMgb3Igd29yZHMpXG4gIGlmICh0aGlzLmNvbmZpZy5tYXh3b3Jkcykge1xuICAgIHRoaXMubWF4TGVuZ3RoID0gdGhpcy5jb25maWcubWF4d29yZHM7XG4gIH0gZWxzZSBpZiAodGhpcy5jb25maWcubWF4bGVuZ3RoKSB7XG4gICAgdGhpcy5tYXhMZW5ndGggPSB0aGlzLmNvbmZpZy5tYXhsZW5ndGg7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICB0aGlzLiRtb2R1bGUgPSAkbW9kdWxlO1xuICB0aGlzLiR0ZXh0YXJlYSA9ICRtb2R1bGUucXVlcnlTZWxlY3RvcignLmdvdnVrLWpzLWNoYXJhY3Rlci1jb3VudCcpO1xuICB0aGlzLiR2aXNpYmxlQ291bnRNZXNzYWdlID0gbnVsbDtcbiAgdGhpcy4kc2NyZWVuUmVhZGVyQ291bnRNZXNzYWdlID0gbnVsbDtcbiAgdGhpcy5sYXN0SW5wdXRUaW1lc3RhbXAgPSBudWxsO1xufVxuXG4vKipcbiAqIEluaXRpYWxpc2UgY29tcG9uZW50XG4gKi9cbkNoYXJhY3RlckNvdW50LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAvLyBDaGVjayB0aGF0IHJlcXVpcmVkIGVsZW1lbnRzIGFyZSBwcmVzZW50XG4gIGlmICghdGhpcy4kdGV4dGFyZWEpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIHZhciAkdGV4dGFyZWEgPSB0aGlzLiR0ZXh0YXJlYTtcbiAgdmFyICR0ZXh0YXJlYURlc2NyaXB0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJHRleHRhcmVhLmlkICsgJy1pbmZvJyk7XG5cbiAgLy8gSW5qZWN0IGEgZGVjcmlwdGlvbiBmb3IgdGhlIHRleHRhcmVhIGlmIG5vbmUgaXMgcHJlc2VudCBhbHJlYWR5XG4gIC8vIGZvciB3aGVuIHRoZSBjb21wb25lbnQgd2FzIHJlbmRlcmVkIHdpdGggbm8gbWF4bGVuZ3RoLCBtYXh3b3Jkc1xuICAvLyBub3IgY3VzdG9tIHRleHRhcmVhRGVzY3JpcHRpb25UZXh0XG4gIGlmICgkdGV4dGFyZWFEZXNjcmlwdGlvbi5pbm5lclRleHQubWF0Y2goL15cXHMqJC8pKSB7XG4gICAgJHRleHRhcmVhRGVzY3JpcHRpb24uaW5uZXJUZXh0ID0gdGhpcy5pMThuLnQoJ3RleHRhcmVhRGVzY3JpcHRpb24nLCB7IGNvdW50OiB0aGlzLm1heExlbmd0aCB9KTtcbiAgfVxuXG4gIC8vIE1vdmUgdGhlIHRleHRhcmVhIGRlc2NyaXB0aW9uIHRvIGJlIGltbWVkaWF0ZWx5IGFmdGVyIHRoZSB0ZXh0YXJlYVxuICAvLyBLZXB0IGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eVxuICAkdGV4dGFyZWEuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdhZnRlcmVuZCcsICR0ZXh0YXJlYURlc2NyaXB0aW9uKTtcblxuICAvLyBDcmVhdGUgdGhlICpzY3JlZW4gcmVhZGVyKiBzcGVjaWZpYyBsaXZlLXVwZGF0aW5nIGNvdW50ZXJcbiAgLy8gVGhpcyBkb2Vzbid0IG5lZWQgYW55IHN0eWxpbmcgY2xhc3NlcywgYXMgaXQgaXMgbmV2ZXIgdmlzaWJsZVxuICB2YXIgJHNjcmVlblJlYWRlckNvdW50TWVzc2FnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAkc2NyZWVuUmVhZGVyQ291bnRNZXNzYWdlLmNsYXNzTmFtZSA9ICdnb3Z1ay1jaGFyYWN0ZXItY291bnRfX3NyLXN0YXR1cyBnb3Z1ay12aXN1YWxseS1oaWRkZW4nO1xuICAkc2NyZWVuUmVhZGVyQ291bnRNZXNzYWdlLnNldEF0dHJpYnV0ZSgnYXJpYS1saXZlJywgJ3BvbGl0ZScpO1xuICB0aGlzLiRzY3JlZW5SZWFkZXJDb3VudE1lc3NhZ2UgPSAkc2NyZWVuUmVhZGVyQ291bnRNZXNzYWdlO1xuICAkdGV4dGFyZWFEZXNjcmlwdGlvbi5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2FmdGVyZW5kJywgJHNjcmVlblJlYWRlckNvdW50TWVzc2FnZSk7XG5cbiAgLy8gQ3JlYXRlIG91ciBsaXZlLXVwZGF0aW5nIGNvdW50ZXIgZWxlbWVudCwgY29weWluZyB0aGUgY2xhc3NlcyBmcm9tIHRoZVxuICAvLyB0ZXh0YXJlYSBkZXNjcmlwdGlvbiBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgYXMgdGhlc2UgbWF5IGhhdmUgYmVlblxuICAvLyBjb25maWd1cmVkXG4gIHZhciAkdmlzaWJsZUNvdW50TWVzc2FnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAkdmlzaWJsZUNvdW50TWVzc2FnZS5jbGFzc05hbWUgPSAkdGV4dGFyZWFEZXNjcmlwdGlvbi5jbGFzc05hbWU7XG4gICR2aXNpYmxlQ291bnRNZXNzYWdlLmNsYXNzTGlzdC5hZGQoJ2dvdnVrLWNoYXJhY3Rlci1jb3VudF9fc3RhdHVzJyk7XG4gICR2aXNpYmxlQ291bnRNZXNzYWdlLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuICB0aGlzLiR2aXNpYmxlQ291bnRNZXNzYWdlID0gJHZpc2libGVDb3VudE1lc3NhZ2U7XG4gICR0ZXh0YXJlYURlc2NyaXB0aW9uLmluc2VydEFkamFjZW50RWxlbWVudCgnYWZ0ZXJlbmQnLCAkdmlzaWJsZUNvdW50TWVzc2FnZSk7XG5cbiAgLy8gSGlkZSB0aGUgdGV4dGFyZWEgZGVzY3JpcHRpb25cbiAgJHRleHRhcmVhRGVzY3JpcHRpb24uY2xhc3NMaXN0LmFkZCgnZ292dWstdmlzdWFsbHktaGlkZGVuJyk7XG5cbiAgLy8gUmVtb3ZlIGhhcmQgbGltaXQgaWYgc2V0XG4gICR0ZXh0YXJlYS5yZW1vdmVBdHRyaWJ1dGUoJ21heGxlbmd0aCcpO1xuXG4gIHRoaXMuYmluZENoYW5nZUV2ZW50cygpO1xuXG4gIC8vIFdoZW4gdGhlIHBhZ2UgaXMgcmVzdG9yZWQgYWZ0ZXIgbmF2aWdhdGluZyAnYmFjaycgaW4gc29tZSBicm93c2VycyB0aGVcbiAgLy8gc3RhdGUgb2YgdGhlIGNoYXJhY3RlciBjb3VudCBpcyBub3QgcmVzdG9yZWQgdW50aWwgKmFmdGVyKiB0aGVcbiAgLy8gRE9NQ29udGVudExvYWRlZCBldmVudCBpcyBmaXJlZCwgc28gd2UgbmVlZCB0byBtYW51YWxseSB1cGRhdGUgaXQgYWZ0ZXIgdGhlXG4gIC8vIHBhZ2VzaG93IGV2ZW50IGluIGJyb3dzZXJzIHRoYXQgc3VwcG9ydCBpdC5cbiAgaWYgKCdvbnBhZ2VzaG93JyBpbiB3aW5kb3cpIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncGFnZXNob3cnLCB0aGlzLnVwZGF0ZUNvdW50TWVzc2FnZS5iaW5kKHRoaXMpKTtcbiAgfSBlbHNlIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIHRoaXMudXBkYXRlQ291bnRNZXNzYWdlLmJpbmQodGhpcykpO1xuICB9XG4gIHRoaXMudXBkYXRlQ291bnRNZXNzYWdlKCk7XG59O1xuXG4vKipcbiAqIEJpbmQgY2hhbmdlIGV2ZW50c1xuICpcbiAqIFNldCB1cCBldmVudCBsaXN0ZW5lcnMgb24gdGhlICR0ZXh0YXJlYSBzbyB0aGF0IHRoZSBjb3VudCBtZXNzYWdlcyB1cGRhdGVcbiAqIHdoZW4gdGhlIHVzZXIgdHlwZXMuXG4gKi9cbkNoYXJhY3RlckNvdW50LnByb3RvdHlwZS5iaW5kQ2hhbmdlRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgJHRleHRhcmVhID0gdGhpcy4kdGV4dGFyZWE7XG4gICR0ZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMuaGFuZGxlS2V5VXAuYmluZCh0aGlzKSk7XG5cbiAgLy8gQmluZCBmb2N1cy9ibHVyIGV2ZW50cyB0byBzdGFydC9zdG9wIHBvbGxpbmdcbiAgJHRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5oYW5kbGVGb2N1cy5iaW5kKHRoaXMpKTtcbiAgJHRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCB0aGlzLmhhbmRsZUJsdXIuYmluZCh0aGlzKSk7XG59O1xuXG4vKipcbiAqIEhhbmRsZSBrZXkgdXAgZXZlbnRcbiAqXG4gKiBVcGRhdGUgdGhlIHZpc2libGUgY2hhcmFjdGVyIGNvdW50ZXIgYW5kIGtlZXAgdHJhY2sgb2Ygd2hlbiB0aGUgbGFzdCB1cGRhdGVcbiAqIGhhcHBlbmVkIGZvciBlYWNoIGtleXByZXNzXG4gKi9cbkNoYXJhY3RlckNvdW50LnByb3RvdHlwZS5oYW5kbGVLZXlVcCA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy51cGRhdGVWaXNpYmxlQ291bnRNZXNzYWdlKCk7XG4gIHRoaXMubGFzdElucHV0VGltZXN0YW1wID0gRGF0ZS5ub3coKTtcbn07XG5cbi8qKlxuICogSGFuZGxlIGZvY3VzIGV2ZW50XG4gKlxuICogU3BlZWNoIHJlY29nbml0aW9uIHNvZnR3YXJlIHN1Y2ggYXMgRHJhZ29uIE5hdHVyYWxseVNwZWFraW5nIHdpbGwgbW9kaWZ5IHRoZVxuICogZmllbGRzIGJ5IGRpcmVjdGx5IGNoYW5naW5nIGl0cyBgdmFsdWVgLiBUaGVzZSBjaGFuZ2VzIGRvbid0IHRyaWdnZXIgZXZlbnRzXG4gKiBpbiBKYXZhU2NyaXB0LCBzbyB3ZSBuZWVkIHRvIHBvbGwgdG8gaGFuZGxlIHdoZW4gYW5kIGlmIHRoZXkgb2NjdXIuXG4gKlxuICogT25jZSB0aGUga2V5dXAgZXZlbnQgaGFzbid0IGJlZW4gZGV0ZWN0ZWQgZm9yIGF0IGxlYXN0IDEwMDAgbXMgKDFzKSwgY2hlY2sgaWZcbiAqIHRoZSB0ZXh0YXJlYSB2YWx1ZSBoYXMgY2hhbmdlZCBhbmQgdXBkYXRlIHRoZSBjb3VudCBtZXNzYWdlIGlmIGl0IGhhcy5cbiAqXG4gKiBUaGlzIGlzIHNvIHRoYXQgdGhlIHVwZGF0ZSB0cmlnZ2VyZWQgYnkgdGhlIG1hbnVhbCBjb21wYXJpc29uIGRvZXNuJ3RcbiAqIGNvbmZsaWN0IHdpdGggZGVib3VuY2VkIEtleWJvYXJkRXZlbnQgdXBkYXRlcy5cbiAqL1xuQ2hhcmFjdGVyQ291bnQucHJvdG90eXBlLmhhbmRsZUZvY3VzID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLnZhbHVlQ2hlY2tlciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMubGFzdElucHV0VGltZXN0YW1wIHx8IChEYXRlLm5vdygpIC0gNTAwKSA+PSB0aGlzLmxhc3RJbnB1dFRpbWVzdGFtcCkge1xuICAgICAgdGhpcy51cGRhdGVJZlZhbHVlQ2hhbmdlZCgpO1xuICAgIH1cbiAgfS5iaW5kKHRoaXMpLCAxMDAwKTtcbn07XG5cbi8qKlxuICogSGFuZGxlIGJsdXIgZXZlbnRcbiAqXG4gKiBTdG9wIGNoZWNraW5nIHRoZSB0ZXh0YXJlYSB2YWx1ZSBvbmNlIHRoZSB0ZXh0YXJlYSBubyBsb25nZXIgaGFzIGZvY3VzXG4gKi9cbkNoYXJhY3RlckNvdW50LnByb3RvdHlwZS5oYW5kbGVCbHVyID0gZnVuY3Rpb24gKCkge1xuICAvLyBDYW5jZWwgdmFsdWUgY2hlY2tpbmcgb24gYmx1clxuICBjbGVhckludGVydmFsKHRoaXMudmFsdWVDaGVja2VyKTtcbn07XG5cbi8qKlxuICogVXBkYXRlIGNvdW50IG1lc3NhZ2UgaWYgdGV4dGFyZWEgdmFsdWUgaGFzIGNoYW5nZWRcbiAqL1xuQ2hhcmFjdGVyQ291bnQucHJvdG90eXBlLnVwZGF0ZUlmVmFsdWVDaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xuICBpZiAoIXRoaXMuJHRleHRhcmVhLm9sZFZhbHVlKSB0aGlzLiR0ZXh0YXJlYS5vbGRWYWx1ZSA9ICcnO1xuICBpZiAodGhpcy4kdGV4dGFyZWEudmFsdWUgIT09IHRoaXMuJHRleHRhcmVhLm9sZFZhbHVlKSB7XG4gICAgdGhpcy4kdGV4dGFyZWEub2xkVmFsdWUgPSB0aGlzLiR0ZXh0YXJlYS52YWx1ZTtcbiAgICB0aGlzLnVwZGF0ZUNvdW50TWVzc2FnZSgpO1xuICB9XG59O1xuXG4vKipcbiAqIFVwZGF0ZSBjb3VudCBtZXNzYWdlXG4gKlxuICogSGVscGVyIGZ1bmN0aW9uIHRvIHVwZGF0ZSBib3RoIHRoZSB2aXNpYmxlIGFuZCBzY3JlZW4gcmVhZGVyLXNwZWNpZmljXG4gKiBjb3VudGVycyBzaW11bHRhbmVvdXNseSAoZS5nLiBvbiBpbml0KVxuICovXG5DaGFyYWN0ZXJDb3VudC5wcm90b3R5cGUudXBkYXRlQ291bnRNZXNzYWdlID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLnVwZGF0ZVZpc2libGVDb3VudE1lc3NhZ2UoKTtcbiAgdGhpcy51cGRhdGVTY3JlZW5SZWFkZXJDb3VudE1lc3NhZ2UoKTtcbn07XG5cbi8qKlxuICogVXBkYXRlIHZpc2libGUgY291bnQgbWVzc2FnZVxuICovXG5DaGFyYWN0ZXJDb3VudC5wcm90b3R5cGUudXBkYXRlVmlzaWJsZUNvdW50TWVzc2FnZSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyICR0ZXh0YXJlYSA9IHRoaXMuJHRleHRhcmVhO1xuICB2YXIgJHZpc2libGVDb3VudE1lc3NhZ2UgPSB0aGlzLiR2aXNpYmxlQ291bnRNZXNzYWdlO1xuICB2YXIgcmVtYWluaW5nTnVtYmVyID0gdGhpcy5tYXhMZW5ndGggLSB0aGlzLmNvdW50KCR0ZXh0YXJlYS52YWx1ZSk7XG5cbiAgLy8gSWYgaW5wdXQgaXMgb3ZlciB0aGUgdGhyZXNob2xkLCByZW1vdmUgdGhlIGRpc2FibGVkIGNsYXNzIHdoaWNoIHJlbmRlcnMgdGhlXG4gIC8vIGNvdW50ZXIgaW52aXNpYmxlLlxuICBpZiAodGhpcy5pc092ZXJUaHJlc2hvbGQoKSkge1xuICAgICR2aXNpYmxlQ291bnRNZXNzYWdlLmNsYXNzTGlzdC5yZW1vdmUoJ2dvdnVrLWNoYXJhY3Rlci1jb3VudF9fbWVzc2FnZS0tZGlzYWJsZWQnKTtcbiAgfSBlbHNlIHtcbiAgICAkdmlzaWJsZUNvdW50TWVzc2FnZS5jbGFzc0xpc3QuYWRkKCdnb3Z1ay1jaGFyYWN0ZXItY291bnRfX21lc3NhZ2UtLWRpc2FibGVkJyk7XG4gIH1cblxuICAvLyBVcGRhdGUgc3R5bGVzXG4gIGlmIChyZW1haW5pbmdOdW1iZXIgPCAwKSB7XG4gICAgJHRleHRhcmVhLmNsYXNzTGlzdC5hZGQoJ2dvdnVrLXRleHRhcmVhLS1lcnJvcicpO1xuICAgICR2aXNpYmxlQ291bnRNZXNzYWdlLmNsYXNzTGlzdC5yZW1vdmUoJ2dvdnVrLWhpbnQnKTtcbiAgICAkdmlzaWJsZUNvdW50TWVzc2FnZS5jbGFzc0xpc3QuYWRkKCdnb3Z1ay1lcnJvci1tZXNzYWdlJyk7XG4gIH0gZWxzZSB7XG4gICAgJHRleHRhcmVhLmNsYXNzTGlzdC5yZW1vdmUoJ2dvdnVrLXRleHRhcmVhLS1lcnJvcicpO1xuICAgICR2aXNpYmxlQ291bnRNZXNzYWdlLmNsYXNzTGlzdC5yZW1vdmUoJ2dvdnVrLWVycm9yLW1lc3NhZ2UnKTtcbiAgICAkdmlzaWJsZUNvdW50TWVzc2FnZS5jbGFzc0xpc3QuYWRkKCdnb3Z1ay1oaW50Jyk7XG4gIH1cblxuICAvLyBVcGRhdGUgbWVzc2FnZVxuICAkdmlzaWJsZUNvdW50TWVzc2FnZS5pbm5lclRleHQgPSB0aGlzLmdldENvdW50TWVzc2FnZSgpO1xufTtcblxuLyoqXG4gKiBVcGRhdGUgc2NyZWVuIHJlYWRlciBjb3VudCBtZXNzYWdlXG4gKi9cbkNoYXJhY3RlckNvdW50LnByb3RvdHlwZS51cGRhdGVTY3JlZW5SZWFkZXJDb3VudE1lc3NhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciAkc2NyZWVuUmVhZGVyQ291bnRNZXNzYWdlID0gdGhpcy4kc2NyZWVuUmVhZGVyQ291bnRNZXNzYWdlO1xuXG4gIC8vIElmIG92ZXIgdGhlIHRocmVzaG9sZCwgcmVtb3ZlIHRoZSBhcmlhLWhpZGRlbiBhdHRyaWJ1dGUsIGFsbG93aW5nIHNjcmVlblxuICAvLyByZWFkZXJzIHRvIGFubm91bmNlIHRoZSBjb250ZW50IG9mIHRoZSBlbGVtZW50LlxuICBpZiAodGhpcy5pc092ZXJUaHJlc2hvbGQoKSkge1xuICAgICRzY3JlZW5SZWFkZXJDb3VudE1lc3NhZ2UucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWhpZGRlbicpO1xuICB9IGVsc2Uge1xuICAgICRzY3JlZW5SZWFkZXJDb3VudE1lc3NhZ2Uuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsIHRydWUpO1xuICB9XG5cbiAgLy8gVXBkYXRlIG1lc3NhZ2VcbiAgJHNjcmVlblJlYWRlckNvdW50TWVzc2FnZS5pbm5lclRleHQgPSB0aGlzLmdldENvdW50TWVzc2FnZSgpO1xufTtcblxuLyoqXG4gKiBDb3VudCB0aGUgbnVtYmVyIG9mIGNoYXJhY3RlcnMgKG9yIHdvcmRzLCBpZiBgY29uZmlnLm1heHdvcmRzYCBpcyBzZXQpXG4gKiBpbiB0aGUgZ2l2ZW4gdGV4dFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gVGhlIHRleHQgdG8gY291bnQgdGhlIGNoYXJhY3RlcnMgb2ZcbiAqIEByZXR1cm5zIHtudW1iZXJ9IHRoZSBudW1iZXIgb2YgY2hhcmFjdGVycyAob3Igd29yZHMpIGluIHRoZSB0ZXh0XG4gKi9cbkNoYXJhY3RlckNvdW50LnByb3RvdHlwZS5jb3VudCA9IGZ1bmN0aW9uICh0ZXh0KSB7XG4gIGlmICh0aGlzLmNvbmZpZy5tYXh3b3Jkcykge1xuICAgIHZhciB0b2tlbnMgPSB0ZXh0Lm1hdGNoKC9cXFMrL2cpIHx8IFtdOyAvLyBNYXRjaGVzIGNvbnNlY3V0aXZlIG5vbi13aGl0ZXNwYWNlIGNoYXJzXG4gICAgcmV0dXJuIHRva2Vucy5sZW5ndGhcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdGV4dC5sZW5ndGhcbiAgfVxufTtcblxuLyoqXG4gKiBHZXQgY291bnQgbWVzc2FnZVxuICpcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFN0YXR1cyBtZXNzYWdlXG4gKi9cbkNoYXJhY3RlckNvdW50LnByb3RvdHlwZS5nZXRDb3VudE1lc3NhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciByZW1haW5pbmdOdW1iZXIgPSB0aGlzLm1heExlbmd0aCAtIHRoaXMuY291bnQodGhpcy4kdGV4dGFyZWEudmFsdWUpO1xuXG4gIHZhciBjb3VudFR5cGUgPSB0aGlzLmNvbmZpZy5tYXh3b3JkcyA/ICd3b3JkcycgOiAnY2hhcmFjdGVycyc7XG4gIHJldHVybiB0aGlzLmZvcm1hdENvdW50TWVzc2FnZShyZW1haW5pbmdOdW1iZXIsIGNvdW50VHlwZSlcbn07XG5cbi8qKlxuICogRm9ybWF0cyB0aGUgbWVzc2FnZSBzaG93biB0byB1c2VycyBhY2NvcmRpbmcgdG8gd2hhdCdzIGNvdW50ZWRcbiAqIGFuZCBob3cgbWFueSByZW1haW5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gcmVtYWluaW5nTnVtYmVyIC0gVGhlIG51bWJlciBvZiB3b3Jkcy9jaGFyYWNhdGVycyByZW1haW5pbmdcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb3VudFR5cGUgLSBcIndvcmRzXCIgb3IgXCJjaGFyYWN0ZXJzXCJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFN0YXR1cyBtZXNzYWdlXG4gKi9cbkNoYXJhY3RlckNvdW50LnByb3RvdHlwZS5mb3JtYXRDb3VudE1lc3NhZ2UgPSBmdW5jdGlvbiAocmVtYWluaW5nTnVtYmVyLCBjb3VudFR5cGUpIHtcbiAgaWYgKHJlbWFpbmluZ051bWJlciA9PT0gMCkge1xuICAgIHJldHVybiB0aGlzLmkxOG4udChjb3VudFR5cGUgKyAnQXRMaW1pdCcpXG4gIH1cblxuICB2YXIgdHJhbnNsYXRpb25LZXlTdWZmaXggPSByZW1haW5pbmdOdW1iZXIgPCAwID8gJ092ZXJMaW1pdCcgOiAnVW5kZXJMaW1pdCc7XG5cbiAgcmV0dXJuIHRoaXMuaTE4bi50KGNvdW50VHlwZSArIHRyYW5zbGF0aW9uS2V5U3VmZml4LCB7IGNvdW50OiBNYXRoLmFicyhyZW1haW5pbmdOdW1iZXIpIH0pXG59O1xuXG4vKipcbiAqIENoZWNrIGlmIGNvdW50IGlzIG92ZXIgdGhyZXNob2xkXG4gKlxuICogQ2hlY2tzIHdoZXRoZXIgdGhlIHZhbHVlIGlzIG92ZXIgdGhlIGNvbmZpZ3VyZWQgdGhyZXNob2xkIGZvciB0aGUgaW5wdXQuXG4gKiBJZiB0aGVyZSBpcyBubyBjb25maWd1cmVkIHRocmVzaG9sZCwgaXQgaXMgc2V0IHRvIDAgYW5kIHRoaXMgZnVuY3Rpb24gd2lsbFxuICogYWx3YXlzIHJldHVybiB0cnVlLlxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIHRoZSBjdXJyZW50IGNvdW50IGlzIG92ZXIgdGhlIGNvbmZpZy50aHJlc2hvbGRcbiAqICAgKG9yIG5vIHRocmVzaG9sZCBpcyBzZXQpXG4gKi9cbkNoYXJhY3RlckNvdW50LnByb3RvdHlwZS5pc092ZXJUaHJlc2hvbGQgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIE5vIHRocmVzaG9sZCBtZWFucyB3ZSdyZSBhbHdheXMgYWJvdmUgdGhyZXNob2xkIHNvIHNhdmUgc29tZSBjb21wdXRhdGlvblxuICBpZiAoIXRoaXMuY29uZmlnLnRocmVzaG9sZCkge1xuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICB2YXIgJHRleHRhcmVhID0gdGhpcy4kdGV4dGFyZWE7XG5cbiAgLy8gRGV0ZXJtaW5lIHRoZSByZW1haW5pbmcgbnVtYmVyIG9mIGNoYXJhY3RlcnMvd29yZHNcbiAgdmFyIGN1cnJlbnRMZW5ndGggPSB0aGlzLmNvdW50KCR0ZXh0YXJlYS52YWx1ZSk7XG4gIHZhciBtYXhMZW5ndGggPSB0aGlzLm1heExlbmd0aDtcblxuICB2YXIgdGhyZXNob2xkVmFsdWUgPSBtYXhMZW5ndGggKiB0aGlzLmNvbmZpZy50aHJlc2hvbGQgLyAxMDA7XG5cbiAgcmV0dXJuICh0aHJlc2hvbGRWYWx1ZSA8PSBjdXJyZW50TGVuZ3RoKVxufTtcblxuLyoqXG4gKiBDaGFyYWN0ZXIgY291bnQgY29uZmlnXG4gKlxuICogQHR5cGVkZWYge0NoYXJhY3RlckNvdW50Q29uZmlnV2l0aE1heExlbmd0aCB8IENoYXJhY3RlckNvdW50Q29uZmlnV2l0aE1heFdvcmRzfSBDaGFyYWN0ZXJDb3VudENvbmZpZ1xuICovXG5cbi8qKlxuICogQ2hhcmFjdGVyIGNvdW50IGNvbmZpZyAod2l0aCBtYXhpbXVtIG51bWJlciBvZiBjaGFyYWN0ZXJzKVxuICpcbiAqIEB0eXBlZGVmIHtvYmplY3R9IENoYXJhY3RlckNvdW50Q29uZmlnV2l0aE1heExlbmd0aFxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhsZW5ndGhdIC0gVGhlIG1heGltdW0gbnVtYmVyIG9mIGNoYXJhY3RlcnMuXG4gKiAgSWYgbWF4d29yZHMgaXMgcHJvdmlkZWQsIHRoZSBtYXhsZW5ndGggb3B0aW9uIHdpbGwgYmUgaWdub3JlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdGhyZXNob2xkID0gMF0gLSBUaGUgcGVyY2VudGFnZSB2YWx1ZSBvZiB0aGUgbGltaXQgYXRcbiAqICB3aGljaCBwb2ludCB0aGUgY291bnQgbWVzc2FnZSBpcyBkaXNwbGF5ZWQuIElmIHRoaXMgYXR0cmlidXRlIGlzIHNldCwgdGhlXG4gKiAgY291bnQgbWVzc2FnZSB3aWxsIGJlIGhpZGRlbiBieSBkZWZhdWx0LlxuICogQHByb3BlcnR5IHtDaGFyYWN0ZXJDb3VudFRyYW5zbGF0aW9uc30gW2kxOG4gPSBDSEFSQUNURVJfQ09VTlRfVFJBTlNMQVRJT05TXSAtIFNlZSBjb25zdGFudCB7QGxpbmsgQ0hBUkFDVEVSX0NPVU5UX1RSQU5TTEFUSU9OU31cbiAqL1xuXG4vKipcbiAqIENoYXJhY3RlciBjb3VudCBjb25maWcgKHdpdGggbWF4aW11bSBudW1iZXIgb2Ygd29yZHMpXG4gKlxuICogQHR5cGVkZWYge29iamVjdH0gQ2hhcmFjdGVyQ291bnRDb25maWdXaXRoTWF4V29yZHNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4d29yZHNdIC0gVGhlIG1heGltdW0gbnVtYmVyIG9mIHdvcmRzLiBJZiBtYXh3b3JkcyBpc1xuICogIHByb3ZpZGVkLCB0aGUgbWF4bGVuZ3RoIG9wdGlvbiB3aWxsIGJlIGlnbm9yZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RocmVzaG9sZCA9IDBdIC0gVGhlIHBlcmNlbnRhZ2UgdmFsdWUgb2YgdGhlIGxpbWl0IGF0XG4gKiAgd2hpY2ggcG9pbnQgdGhlIGNvdW50IG1lc3NhZ2UgaXMgZGlzcGxheWVkLiBJZiB0aGlzIGF0dHJpYnV0ZSBpcyBzZXQsIHRoZVxuICogIGNvdW50IG1lc3NhZ2Ugd2lsbCBiZSBoaWRkZW4gYnkgZGVmYXVsdC5cbiAqIEBwcm9wZXJ0eSB7Q2hhcmFjdGVyQ291bnRUcmFuc2xhdGlvbnN9IFtpMThuID0gQ0hBUkFDVEVSX0NPVU5UX1RSQU5TTEFUSU9OU10gLSBTZWUgY29uc3RhbnQge0BsaW5rIENIQVJBQ1RFUl9DT1VOVF9UUkFOU0xBVElPTlN9XG4gKi9cblxuLyoqXG4gKiBDaGFyYWN0ZXIgY291bnQgdHJhbnNsYXRpb25zXG4gKlxuICogQHR5cGVkZWYge29iamVjdH0gQ2hhcmFjdGVyQ291bnRUcmFuc2xhdGlvbnNcbiAqXG4gKiBNZXNzYWdlcyBzaG93biB0byB1c2VycyBhcyB0aGV5IHR5cGUuIEl0IHByb3ZpZGVzIGZlZWRiYWNrIG9uIGhvdyBtYW55IHdvcmRzXG4gKiBvciBjaGFyYWN0ZXJzIHRoZXkgaGF2ZSByZW1haW5pbmcgb3IgaWYgdGhleSBhcmUgb3ZlciB0aGUgbGltaXQuIFRoaXMgYWxzb1xuICogaW5jbHVkZXMgYSBtZXNzYWdlIHVzZWQgYXMgYW4gYWNjZXNzaWJsZSBkZXNjcmlwdGlvbiBmb3IgdGhlIHRleHRhcmVhLlxuICogQHByb3BlcnR5IHtUcmFuc2xhdGlvblBsdXJhbEZvcm1zfSBbY2hhcmFjdGVyc1VuZGVyTGltaXRdIC0gTWVzc2FnZSBkaXNwbGF5ZWRcbiAqICAgd2hlbiB0aGUgbnVtYmVyIG9mIGNoYXJhY3RlcnMgaXMgdW5kZXIgdGhlIGNvbmZpZ3VyZWQgbWF4aW11bSwgYG1heGxlbmd0aGAuXG4gKiAgIFRoaXMgbWVzc2FnZSBpcyBkaXNwbGF5ZWQgdmlzdWFsbHkgYW5kIHRocm91Z2ggYXNzaXN0aXZlIHRlY2hub2xvZ2llcy4gVGhlXG4gKiAgIGNvbXBvbmVudCB3aWxsIHJlcGxhY2UgdGhlIGAle2NvdW50fWAgcGxhY2Vob2xkZXIgd2l0aCB0aGUgbnVtYmVyIG9mXG4gKiAgIHJlbWFpbmluZyBjaGFyYWN0ZXJzLiBUaGlzIGlzIGEgW3BsdXJhbGlzZWQgbGlzdCBvZlxuICogICBtZXNzYWdlc10oaHR0cHM6Ly9mcm9udGVuZC5kZXNpZ24tc3lzdGVtLnNlcnZpY2UuZ292LnVrL2xvY2FsaXNlLWdvdnVrLWZyb250ZW5kKS5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY2hhcmFjdGVyc0F0TGltaXRdIC0gTWVzc2FnZSBkaXNwbGF5ZWQgd2hlbiB0aGUgbnVtYmVyIG9mXG4gKiAgIGNoYXJhY3RlcnMgcmVhY2hlcyB0aGUgY29uZmlndXJlZCBtYXhpbXVtLCBgbWF4bGVuZ3RoYC4gVGhpcyBtZXNzYWdlIGlzXG4gKiAgIGRpc3BsYXllZCB2aXN1YWxseSBhbmQgdGhyb3VnaCBhc3Npc3RpdmUgdGVjaG5vbG9naWVzLlxuICogQHByb3BlcnR5IHtUcmFuc2xhdGlvblBsdXJhbEZvcm1zfSBbY2hhcmFjdGVyc092ZXJMaW1pdF0gLSBNZXNzYWdlIGRpc3BsYXllZFxuICogICB3aGVuIHRoZSBudW1iZXIgb2YgY2hhcmFjdGVycyBpcyBvdmVyIHRoZSBjb25maWd1cmVkIG1heGltdW0sIGBtYXhsZW5ndGhgLlxuICogICBUaGlzIG1lc3NhZ2UgaXMgZGlzcGxheWVkIHZpc3VhbGx5IGFuZCB0aHJvdWdoIGFzc2lzdGl2ZSB0ZWNobm9sb2dpZXMuIFRoZVxuICogICBjb21wb25lbnQgd2lsbCByZXBsYWNlIHRoZSBgJXtjb3VudH1gIHBsYWNlaG9sZGVyIHdpdGggdGhlIG51bWJlciBvZlxuICogICByZW1haW5pbmcgY2hhcmFjdGVycy4gVGhpcyBpcyBhIFtwbHVyYWxpc2VkIGxpc3Qgb2ZcbiAqICAgbWVzc2FnZXNdKGh0dHBzOi8vZnJvbnRlbmQuZGVzaWduLXN5c3RlbS5zZXJ2aWNlLmdvdi51ay9sb2NhbGlzZS1nb3Z1ay1mcm9udGVuZCkuXG4gKiBAcHJvcGVydHkge1RyYW5zbGF0aW9uUGx1cmFsRm9ybXN9IFt3b3Jkc1VuZGVyTGltaXRdIC0gTWVzc2FnZSBkaXNwbGF5ZWQgd2hlblxuICogICB0aGUgbnVtYmVyIG9mIHdvcmRzIGlzIHVuZGVyIHRoZSBjb25maWd1cmVkIG1heGltdW0sIGBtYXhsZW5ndGhgLiBUaGlzXG4gKiAgIG1lc3NhZ2UgaXMgZGlzcGxheWVkIHZpc3VhbGx5IGFuZCB0aHJvdWdoIGFzc2lzdGl2ZSB0ZWNobm9sb2dpZXMuIFRoZVxuICogICBjb21wb25lbnQgd2lsbCByZXBsYWNlIHRoZSBgJXtjb3VudH1gIHBsYWNlaG9sZGVyIHdpdGggdGhlIG51bWJlciBvZlxuICogICByZW1haW5pbmcgd29yZHMuIFRoaXMgaXMgYSBbcGx1cmFsaXNlZCBsaXN0IG9mXG4gKiAgIG1lc3NhZ2VzXShodHRwczovL2Zyb250ZW5kLmRlc2lnbi1zeXN0ZW0uc2VydmljZS5nb3YudWsvbG9jYWxpc2UtZ292dWstZnJvbnRlbmQpLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt3b3Jkc0F0TGltaXRdIC0gTWVzc2FnZSBkaXNwbGF5ZWQgd2hlbiB0aGUgbnVtYmVyIG9mXG4gKiAgIHdvcmRzIHJlYWNoZXMgdGhlIGNvbmZpZ3VyZWQgbWF4aW11bSwgYG1heGxlbmd0aGAuIFRoaXMgbWVzc2FnZSBpc1xuICogICBkaXNwbGF5ZWQgdmlzdWFsbHkgYW5kIHRocm91Z2ggYXNzaXN0aXZlIHRlY2hub2xvZ2llcy5cbiAqIEBwcm9wZXJ0eSB7VHJhbnNsYXRpb25QbHVyYWxGb3Jtc30gW3dvcmRzT3ZlckxpbWl0XSAtIE1lc3NhZ2UgZGlzcGxheWVkIHdoZW5cbiAqICAgdGhlIG51bWJlciBvZiB3b3JkcyBpcyBvdmVyIHRoZSBjb25maWd1cmVkIG1heGltdW0sIGBtYXhsZW5ndGhgLiBUaGlzXG4gKiAgIG1lc3NhZ2UgaXMgZGlzcGxheWVkIHZpc3VhbGx5IGFuZCB0aHJvdWdoIGFzc2lzdGl2ZSB0ZWNobm9sb2dpZXMuIFRoZVxuICogICBjb21wb25lbnQgd2lsbCByZXBsYWNlIHRoZSBgJXtjb3VudH1gIHBsYWNlaG9sZGVyIHdpdGggdGhlIG51bWJlciBvZlxuICogICByZW1haW5pbmcgd29yZHMuIFRoaXMgaXMgYSBbcGx1cmFsaXNlZCBsaXN0IG9mXG4gKiAgIG1lc3NhZ2VzXShodHRwczovL2Zyb250ZW5kLmRlc2lnbi1zeXN0ZW0uc2VydmljZS5nb3YudWsvbG9jYWxpc2UtZ292dWstZnJvbnRlbmQpLlxuICogQHByb3BlcnR5IHtUcmFuc2xhdGlvblBsdXJhbEZvcm1zfSBbdGV4dGFyZWFEZXNjcmlwdGlvbl0gLSBNZXNzYWdlIG1hZGVcbiAqICAgYXZhaWxhYmxlIHRvIGFzc2lzdGl2ZSB0ZWNobm9sb2dpZXMsIGlmIG5vbmUgaXMgYWxyZWFkeSBwcmVzZW50IGluIHRoZVxuICogICBIVE1MLCB0byBkZXNjcmliZSB0aGF0IHRoZSBjb21wb25lbnQgYWNjZXB0cyBvbmx5IGEgbGltaXRlZCBhbW91bnQgb2ZcbiAqICAgY29udGVudC4gSXQgaXMgdmlzaWJsZSBvbiB0aGUgcGFnZSB3aGVuIEphdmFTY3JpcHQgaXMgdW5hdmFpbGFibGUuIFRoZVxuICogICBjb21wb25lbnQgd2lsbCByZXBsYWNlIHRoZSBgJXtjb3VudH1gIHBsYWNlaG9sZGVyIHdpdGggdGhlIHZhbHVlIG9mIHRoZVxuICogICBgbWF4bGVuZ3RoYCBvciBgbWF4d29yZHNgIHBhcmFtZXRlci5cbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtpbXBvcnQoJy4uLy4uL2kxOG4ubWpzJykuVHJhbnNsYXRpb25QbHVyYWxGb3Jtc30gVHJhbnNsYXRpb25QbHVyYWxGb3Jtc1xuICovXG5cbi8qKlxuICogQ2hlY2tib3hlcyBjb21wb25lbnRcbiAqXG4gKiBAY2xhc3NcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9ICRtb2R1bGUgLSBIVE1MIGVsZW1lbnQgdG8gdXNlIGZvciBjaGVja2JveGVzXG4gKi9cbmZ1bmN0aW9uIENoZWNrYm94ZXMgKCRtb2R1bGUpIHtcbiAgdGhpcy4kbW9kdWxlID0gJG1vZHVsZTtcbiAgdGhpcy4kaW5wdXRzID0gJG1vZHVsZS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKTtcbn1cblxuLyoqXG4gKiBJbml0aWFsaXNlIENoZWNrYm94ZXNcbiAqXG4gKiBDaGVja2JveGVzIGNhbiBiZSBhc3NvY2lhdGVkIHdpdGggYSAnY29uZGl0aW9uYWxseSByZXZlYWxlZCcgY29udGVudCBibG9jayDigJNcbiAqIGZvciBleGFtcGxlLCBhIGNoZWNrYm94IGZvciAnUGhvbmUnIGNvdWxkIHJldmVhbCBhbiBhZGRpdGlvbmFsIGZvcm0gZmllbGQgZm9yXG4gKiB0aGUgdXNlciB0byBlbnRlciB0aGVpciBwaG9uZSBudW1iZXIuXG4gKlxuICogVGhlc2UgYXNzb2NpYXRpb25zIGFyZSBtYWRlIHVzaW5nIGEgYGRhdGEtYXJpYS1jb250cm9sc2AgYXR0cmlidXRlLCB3aGljaCBpc1xuICogcHJvbW90ZWQgdG8gYW4gYXJpYS1jb250cm9scyBhdHRyaWJ1dGUgZHVyaW5nIGluaXRpYWxpc2F0aW9uLlxuICpcbiAqIFdlIGFsc28gbmVlZCB0byByZXN0b3JlIHRoZSBzdGF0ZSBvZiBhbnkgY29uZGl0aW9uYWwgcmV2ZWFscyBvbiB0aGUgcGFnZSAoZm9yXG4gKiBleGFtcGxlIGlmIHRoZSB1c2VyIGhhcyBuYXZpZ2F0ZWQgYmFjayksIGFuZCBzZXQgdXAgZXZlbnQgaGFuZGxlcnMgdG8ga2VlcFxuICogdGhlIHJldmVhbCBpbiBzeW5jIHdpdGggdGhlIGNoZWNrYm94IHN0YXRlLlxuICovXG5DaGVja2JveGVzLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgJG1vZHVsZSA9IHRoaXMuJG1vZHVsZTtcbiAgdmFyICRpbnB1dHMgPSB0aGlzLiRpbnB1dHM7XG5cbiAgbm9kZUxpc3RGb3JFYWNoKCRpbnB1dHMsIGZ1bmN0aW9uICgkaW5wdXQpIHtcbiAgICB2YXIgdGFyZ2V0ID0gJGlucHV0LmdldEF0dHJpYnV0ZSgnZGF0YS1hcmlhLWNvbnRyb2xzJyk7XG5cbiAgICAvLyBTa2lwIGNoZWNrYm94ZXMgd2l0aG91dCBkYXRhLWFyaWEtY29udHJvbHMgYXR0cmlidXRlcywgb3Igd2hlcmUgdGhlXG4gICAgLy8gdGFyZ2V0IGVsZW1lbnQgZG9lcyBub3QgZXhpc3QuXG4gICAgaWYgKCF0YXJnZXQgfHwgIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhcmdldCkpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIFByb21vdGUgdGhlIGRhdGEtYXJpYS1jb250cm9scyBhdHRyaWJ1dGUgdG8gYSBhcmlhLWNvbnRyb2xzIGF0dHJpYnV0ZVxuICAgIC8vIHNvIHRoYXQgdGhlIHJlbGF0aW9uc2hpcCBpcyBleHBvc2VkIGluIHRoZSBBT01cbiAgICAkaW5wdXQuc2V0QXR0cmlidXRlKCdhcmlhLWNvbnRyb2xzJywgdGFyZ2V0KTtcbiAgICAkaW5wdXQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWFyaWEtY29udHJvbHMnKTtcbiAgfSk7XG5cbiAgLy8gV2hlbiB0aGUgcGFnZSBpcyByZXN0b3JlZCBhZnRlciBuYXZpZ2F0aW5nICdiYWNrJyBpbiBzb21lIGJyb3dzZXJzIHRoZVxuICAvLyBzdGF0ZSBvZiBmb3JtIGNvbnRyb2xzIGlzIG5vdCByZXN0b3JlZCB1bnRpbCAqYWZ0ZXIqIHRoZSBET01Db250ZW50TG9hZGVkXG4gIC8vIGV2ZW50IGlzIGZpcmVkLCBzbyB3ZSBuZWVkIHRvIHN5bmMgYWZ0ZXIgdGhlIHBhZ2VzaG93IGV2ZW50IGluIGJyb3dzZXJzXG4gIC8vIHRoYXQgc3VwcG9ydCBpdC5cbiAgaWYgKCdvbnBhZ2VzaG93JyBpbiB3aW5kb3cpIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncGFnZXNob3cnLCB0aGlzLnN5bmNBbGxDb25kaXRpb25hbFJldmVhbHMuYmluZCh0aGlzKSk7XG4gIH0gZWxzZSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCB0aGlzLnN5bmNBbGxDb25kaXRpb25hbFJldmVhbHMuYmluZCh0aGlzKSk7XG4gIH1cblxuICAvLyBBbHRob3VnaCB3ZSd2ZSBzZXQgdXAgaGFuZGxlcnMgdG8gc3luYyBzdGF0ZSBvbiB0aGUgcGFnZXNob3cgb3JcbiAgLy8gRE9NQ29udGVudExvYWRlZCBldmVudCwgaW5pdCBjb3VsZCBiZSBjYWxsZWQgYWZ0ZXIgdGhvc2UgZXZlbnRzIGhhdmUgZmlyZWQsXG4gIC8vIGZvciBleGFtcGxlIGlmIHRoZXkgYXJlIGFkZGVkIHRvIHRoZSBwYWdlIGR5bmFtaWNhbGx5LCBzbyBzeW5jIG5vdyB0b28uXG4gIHRoaXMuc3luY0FsbENvbmRpdGlvbmFsUmV2ZWFscygpO1xuXG4gICRtb2R1bGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZUNsaWNrLmJpbmQodGhpcykpO1xufTtcblxuLyoqXG4gKiBTeW5jIHRoZSBjb25kaXRpb25hbCByZXZlYWwgc3RhdGVzIGZvciBhbGwgaW5wdXRzIGluIHRoaXMgJG1vZHVsZS5cbiAqL1xuQ2hlY2tib3hlcy5wcm90b3R5cGUuc3luY0FsbENvbmRpdGlvbmFsUmV2ZWFscyA9IGZ1bmN0aW9uICgpIHtcbiAgbm9kZUxpc3RGb3JFYWNoKHRoaXMuJGlucHV0cywgdGhpcy5zeW5jQ29uZGl0aW9uYWxSZXZlYWxXaXRoSW5wdXRTdGF0ZS5iaW5kKHRoaXMpKTtcbn07XG5cbi8qKlxuICogU3luYyBjb25kaXRpb25hbCByZXZlYWwgd2l0aCB0aGUgaW5wdXQgc3RhdGVcbiAqXG4gKiBTeW5jaHJvbmlzZSB0aGUgdmlzaWJpbGl0eSBvZiB0aGUgY29uZGl0aW9uYWwgcmV2ZWFsLCBhbmQgaXRzIGFjY2Vzc2libGVcbiAqIHN0YXRlLCB3aXRoIHRoZSBpbnB1dCdzIGNoZWNrZWQgc3RhdGUuXG4gKlxuICogQHBhcmFtIHtIVE1MSW5wdXRFbGVtZW50fSAkaW5wdXQgLSBDaGVja2JveCBpbnB1dFxuICovXG5DaGVja2JveGVzLnByb3RvdHlwZS5zeW5jQ29uZGl0aW9uYWxSZXZlYWxXaXRoSW5wdXRTdGF0ZSA9IGZ1bmN0aW9uICgkaW5wdXQpIHtcbiAgdmFyICR0YXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgkaW5wdXQuZ2V0QXR0cmlidXRlKCdhcmlhLWNvbnRyb2xzJykpO1xuXG4gIGlmICgkdGFyZ2V0ICYmICR0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdnb3Z1ay1jaGVja2JveGVzX19jb25kaXRpb25hbCcpKSB7XG4gICAgdmFyIGlucHV0SXNDaGVja2VkID0gJGlucHV0LmNoZWNrZWQ7XG5cbiAgICAkaW5wdXQuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgaW5wdXRJc0NoZWNrZWQpO1xuICAgICR0YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgnZ292dWstY2hlY2tib3hlc19fY29uZGl0aW9uYWwtLWhpZGRlbicsICFpbnB1dElzQ2hlY2tlZCk7XG4gIH1cbn07XG5cbi8qKlxuICogVW5jaGVjayBvdGhlciBjaGVja2JveGVzXG4gKlxuICogRmluZCBhbnkgb3RoZXIgY2hlY2tib3ggaW5wdXRzIHdpdGggdGhlIHNhbWUgbmFtZSB2YWx1ZSwgYW5kIHVuY2hlY2sgdGhlbS5cbiAqIFRoaXMgaXMgdXNlZnVsIGZvciB3aGVuIGEg4oCcTm9uZSBvZiB0aGVzZVwiIGNoZWNrYm94IGlzIGNoZWNrZWQuXG4gKi9cbkNoZWNrYm94ZXMucHJvdG90eXBlLnVuQ2hlY2tBbGxJbnB1dHNFeGNlcHQgPSBmdW5jdGlvbiAoJGlucHV0KSB7XG4gIHZhciBhbGxJbnB1dHNXaXRoU2FtZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl1bbmFtZT1cIicgKyAkaW5wdXQubmFtZSArICdcIl0nKTtcblxuICBub2RlTGlzdEZvckVhY2goYWxsSW5wdXRzV2l0aFNhbWVOYW1lLCBmdW5jdGlvbiAoJGlucHV0V2l0aFNhbWVOYW1lKSB7XG4gICAgdmFyIGhhc1NhbWVGb3JtT3duZXIgPSAoJGlucHV0LmZvcm0gPT09ICRpbnB1dFdpdGhTYW1lTmFtZS5mb3JtKTtcbiAgICBpZiAoaGFzU2FtZUZvcm1Pd25lciAmJiAkaW5wdXRXaXRoU2FtZU5hbWUgIT09ICRpbnB1dCkge1xuICAgICAgJGlucHV0V2l0aFNhbWVOYW1lLmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuc3luY0NvbmRpdGlvbmFsUmV2ZWFsV2l0aElucHV0U3RhdGUoJGlucHV0V2l0aFNhbWVOYW1lKTtcbiAgICB9XG4gIH0uYmluZCh0aGlzKSk7XG59O1xuXG4vKipcbiAqIFVuY2hlY2sgZXhjbHVzaXZlIGlucHV0c1xuICpcbiAqIEZpbmQgYW55IGNoZWNrYm94IGlucHV0cyB3aXRoIHRoZSBzYW1lIG5hbWUgdmFsdWUgYW5kIHRoZSAnZXhjbHVzaXZlJyBiZWhhdmlvdXIsXG4gKiBhbmQgdW5jaGVjayB0aGVtLiBUaGlzIGhlbHBzIHByZXZlbnQgc29tZW9uZSBjaGVja2luZyBib3RoIGEgcmVndWxhciBjaGVja2JveCBhbmQgYVxuICogXCJOb25lIG9mIHRoZXNlXCIgY2hlY2tib3ggaW4gdGhlIHNhbWUgZmllbGRzZXQuXG4gKi9cbkNoZWNrYm94ZXMucHJvdG90eXBlLnVuQ2hlY2tFeGNsdXNpdmVJbnB1dHMgPSBmdW5jdGlvbiAoJGlucHV0KSB7XG4gIHZhciBhbGxJbnB1dHNXaXRoU2FtZU5hbWVBbmRFeGNsdXNpdmVCZWhhdmlvdXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxuICAgICdpbnB1dFtkYXRhLWJlaGF2aW91cj1cImV4Y2x1c2l2ZVwiXVt0eXBlPVwiY2hlY2tib3hcIl1bbmFtZT1cIicgKyAkaW5wdXQubmFtZSArICdcIl0nXG4gICk7XG5cbiAgbm9kZUxpc3RGb3JFYWNoKGFsbElucHV0c1dpdGhTYW1lTmFtZUFuZEV4Y2x1c2l2ZUJlaGF2aW91ciwgZnVuY3Rpb24gKCRleGNsdXNpdmVJbnB1dCkge1xuICAgIHZhciBoYXNTYW1lRm9ybU93bmVyID0gKCRpbnB1dC5mb3JtID09PSAkZXhjbHVzaXZlSW5wdXQuZm9ybSk7XG4gICAgaWYgKGhhc1NhbWVGb3JtT3duZXIpIHtcbiAgICAgICRleGNsdXNpdmVJbnB1dC5jaGVja2VkID0gZmFsc2U7XG4gICAgICB0aGlzLnN5bmNDb25kaXRpb25hbFJldmVhbFdpdGhJbnB1dFN0YXRlKCRleGNsdXNpdmVJbnB1dCk7XG4gICAgfVxuICB9LmJpbmQodGhpcykpO1xufTtcblxuLyoqXG4gKiBDbGljayBldmVudCBoYW5kbGVyXG4gKlxuICogSGFuZGxlIGEgY2xpY2sgd2l0aGluIHRoZSAkbW9kdWxlIOKAkyBpZiB0aGUgY2xpY2sgb2NjdXJyZWQgb24gYSBjaGVja2JveCwgc3luY1xuICogdGhlIHN0YXRlIG9mIGFueSBhc3NvY2lhdGVkIGNvbmRpdGlvbmFsIHJldmVhbCB3aXRoIHRoZSBjaGVja2JveCBzdGF0ZS5cbiAqXG4gKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50IC0gQ2xpY2sgZXZlbnRcbiAqL1xuQ2hlY2tib3hlcy5wcm90b3R5cGUuaGFuZGxlQ2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgdmFyICR0YXJnZXQgPSBldmVudC50YXJnZXQ7XG5cbiAgLy8gSWdub3JlIGNsaWNrcyBvbiB0aGluZ3MgdGhhdCBhcmVuJ3QgY2hlY2tib3ggaW5wdXRzXG4gIGlmICgkdGFyZ2V0LnR5cGUgIT09ICdjaGVja2JveCcpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIC8vIElmIHRoZSBjaGVja2JveCBjb25kaXRpb25hbGx5LXJldmVhbHMgc29tZSBjb250ZW50LCBzeW5jIHRoZSBzdGF0ZVxuICB2YXIgaGFzQXJpYUNvbnRyb2xzID0gJHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2FyaWEtY29udHJvbHMnKTtcbiAgaWYgKGhhc0FyaWFDb250cm9scykge1xuICAgIHRoaXMuc3luY0NvbmRpdGlvbmFsUmV2ZWFsV2l0aElucHV0U3RhdGUoJHRhcmdldCk7XG4gIH1cblxuICAvLyBObyBmdXJ0aGVyIGJlaGF2aW91ciBuZWVkZWQgZm9yIHVuY2hlY2tpbmdcbiAgaWYgKCEkdGFyZ2V0LmNoZWNrZWQpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIC8vIEhhbmRsZSAnZXhjbHVzaXZlJyBjaGVja2JveCBiZWhhdmlvdXIgKGllIFwiTm9uZSBvZiB0aGVzZVwiKVxuICB2YXIgaGFzQmVoYXZpb3VyRXhjbHVzaXZlID0gKCR0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWJlaGF2aW91cicpID09PSAnZXhjbHVzaXZlJyk7XG4gIGlmIChoYXNCZWhhdmlvdXJFeGNsdXNpdmUpIHtcbiAgICB0aGlzLnVuQ2hlY2tBbGxJbnB1dHNFeGNlcHQoJHRhcmdldCk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy51bkNoZWNrRXhjbHVzaXZlSW5wdXRzKCR0YXJnZXQpO1xuICB9XG59O1xuXG4vKipcbiAqIEphdmFTY3JpcHQgZW5oYW5jZW1lbnRzIGZvciB0aGUgRXJyb3JTdW1tYXJ5XG4gKlxuICogVGFrZXMgZm9jdXMgb24gaW5pdGlhbGlzYXRpb24gZm9yIGFjY2Vzc2libGUgYW5ub3VuY2VtZW50LCB1bmxlc3MgZGlzYWJsZWQgaW4gY29uZmlndXJhdGlvbi5cbiAqXG4gKiBAY2xhc3NcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9ICRtb2R1bGUgLSBUaGUgZWxlbWVudCB0aGlzIGNvbXBvbmVudCBjb250cm9sc1xuICogQHBhcmFtIHtFcnJvclN1bW1hcnlDb25maWd9IGNvbmZpZyAtIEVycm9yIHN1bW1hcnkgY29uZmlnXG4gKi9cbmZ1bmN0aW9uIEVycm9yU3VtbWFyeSAoJG1vZHVsZSwgY29uZmlnKSB7XG4gIC8vIFNvbWUgY29uc3VtaW5nIGNvZGUgbWF5IG5vdCBiZSBwYXNzaW5nIGEgbW9kdWxlLFxuICAvLyBmb3IgZXhhbXBsZSBpZiB0aGV5IGluaXRpYWxpc2UgdGhlIGNvbXBvbmVudFxuICAvLyBvbiB0aGVpciBvd24gYnkgZGlyZWN0bHkgcGFzc2luZyB0aGUgcmVzdWx0XG4gIC8vIG9mIGBkb2N1bWVudC5xdWVyeVNlbGVjdG9yYC5cbiAgLy8gVG8gYXZvaWQgYnJlYWtpbmcgZnVydGhlciBKYXZhU2NyaXB0IGluaXRpYWxpc2F0aW9uXG4gIC8vIHdlIG5lZWQgdG8gc2FmZWd1YXJkIGFnYWluc3QgdGhpcyBzbyB0aGluZ3Mga2VlcFxuICAvLyB3b3JraW5nIHRoZSBzYW1lIG5vdyB3ZSByZWFkIHRoZSBlbGVtZW50cyBkYXRhIGF0dHJpYnV0ZXNcbiAgaWYgKCEkbW9kdWxlKSB7XG4gICAgLy8gTGl0dGxlIHNhZmV0eSBpbiBjYXNlIGNvZGUgZ2V0cyBwb3J0ZWQgYXMtaXNcbiAgICAvLyBpbnRvIGFuZCBFUzYgY2xhc3MgY29uc3RydWN0b3IsIHdoZXJlIHRoZSByZXR1cm4gdmFsdWUgbWF0dGVyc1xuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICB0aGlzLiRtb2R1bGUgPSAkbW9kdWxlO1xuXG4gIHZhciBkZWZhdWx0Q29uZmlnID0ge1xuICAgIGRpc2FibGVBdXRvRm9jdXM6IGZhbHNlXG4gIH07XG4gIHRoaXMuY29uZmlnID0gbWVyZ2VDb25maWdzKFxuICAgIGRlZmF1bHRDb25maWcsXG4gICAgY29uZmlnIHx8IHt9LFxuICAgIG5vcm1hbGlzZURhdGFzZXQoJG1vZHVsZS5kYXRhc2V0KVxuICApO1xufVxuXG5FcnJvclN1bW1hcnkucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciAkbW9kdWxlID0gdGhpcy4kbW9kdWxlO1xuICBpZiAoISRtb2R1bGUpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIHRoaXMuc2V0Rm9jdXMoKTtcbiAgJG1vZHVsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlQ2xpY2suYmluZCh0aGlzKSk7XG59O1xuXG4vKipcbiAqIEZvY3VzIHRoZSBlcnJvciBzdW1tYXJ5XG4gKi9cbkVycm9yU3VtbWFyeS5wcm90b3R5cGUuc2V0Rm9jdXMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciAkbW9kdWxlID0gdGhpcy4kbW9kdWxlO1xuXG4gIGlmICh0aGlzLmNvbmZpZy5kaXNhYmxlQXV0b0ZvY3VzKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICAvLyBTZXQgdGFiaW5kZXggdG8gLTEgdG8gbWFrZSB0aGUgZWxlbWVudCBwcm9ncmFtbWF0aWNhbGx5IGZvY3VzYWJsZSwgYnV0XG4gIC8vIHJlbW92ZSBpdCBvbiBibHVyIGFzIHRoZSBlcnJvciBzdW1tYXJ5IGRvZXNuJ3QgbmVlZCB0byBiZSBmb2N1c2VkIGFnYWluLlxuICAkbW9kdWxlLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnLTEnKTtcblxuICAkbW9kdWxlLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBmdW5jdGlvbiAoKSB7XG4gICAgJG1vZHVsZS5yZW1vdmVBdHRyaWJ1dGUoJ3RhYmluZGV4Jyk7XG4gIH0pO1xuXG4gICRtb2R1bGUuZm9jdXMoKTtcbn07XG5cbi8qKlxuICogQ2xpY2sgZXZlbnQgaGFuZGxlclxuICpcbiAqIEBwYXJhbSB7TW91c2VFdmVudH0gZXZlbnQgLSBDbGljayBldmVudFxuICovXG5FcnJvclN1bW1hcnkucHJvdG90eXBlLmhhbmRsZUNsaWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gIHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQ7XG4gIGlmICh0aGlzLmZvY3VzVGFyZ2V0KHRhcmdldCkpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICB9XG59O1xuXG4vKipcbiAqIEZvY3VzIHRoZSB0YXJnZXQgZWxlbWVudFxuICpcbiAqIEJ5IGRlZmF1bHQsIHRoZSBicm93c2VyIHdpbGwgc2Nyb2xsIHRoZSB0YXJnZXQgaW50byB2aWV3LiBCZWNhdXNlIG91ciBsYWJlbHNcbiAqIG9yIGxlZ2VuZHMgYXBwZWFyIGFib3ZlIHRoZSBpbnB1dCwgdGhpcyBtZWFucyB0aGUgdXNlciB3aWxsIGJlIHByZXNlbnRlZCB3aXRoXG4gKiBhbiBpbnB1dCB3aXRob3V0IGFueSBjb250ZXh0LCBhcyB0aGUgbGFiZWwgb3IgbGVnZW5kIHdpbGwgYmUgb2ZmIHRoZSB0b3Agb2ZcbiAqIHRoZSBzY3JlZW4uXG4gKlxuICogTWFudWFsbHkgaGFuZGxpbmcgdGhlIGNsaWNrIGV2ZW50LCBzY3JvbGxpbmcgdGhlIHF1ZXN0aW9uIGludG8gdmlldyBhbmQgdGhlblxuICogZm9jdXNzaW5nIHRoZSBlbGVtZW50IHNvbHZlcyB0aGlzLlxuICpcbiAqIFRoaXMgYWxzbyByZXN1bHRzIGluIHRoZSBsYWJlbCBhbmQvb3IgbGVnZW5kIGJlaW5nIGFubm91bmNlZCBjb3JyZWN0bHkgaW5cbiAqIE5WREEgKGFzIHRlc3RlZCBpbiAyMDE4LjMuMikgLSB3aXRob3V0IHRoaXMgb25seSB0aGUgZmllbGQgdHlwZSBpcyBhbm5vdW5jZWRcbiAqIChlLmcuIFwiRWRpdCwgaGFzIGF1dG9jb21wbGV0ZVwiKS5cbiAqXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAkdGFyZ2V0IC0gRXZlbnQgdGFyZ2V0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgdGFyZ2V0IHdhcyBhYmxlIHRvIGJlIGZvY3Vzc2VkXG4gKi9cbkVycm9yU3VtbWFyeS5wcm90b3R5cGUuZm9jdXNUYXJnZXQgPSBmdW5jdGlvbiAoJHRhcmdldCkge1xuICAvLyBJZiB0aGUgZWxlbWVudCB0aGF0IHdhcyBjbGlja2VkIHdhcyBub3QgYSBsaW5rLCByZXR1cm4gZWFybHlcbiAgaWYgKCR0YXJnZXQudGFnTmFtZSAhPT0gJ0EnIHx8ICR0YXJnZXQuaHJlZiA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHZhciBpbnB1dElkID0gdGhpcy5nZXRGcmFnbWVudEZyb21VcmwoJHRhcmdldC5ocmVmKTtcbiAgdmFyICRpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlucHV0SWQpO1xuICBpZiAoISRpbnB1dCkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgdmFyICRsZWdlbmRPckxhYmVsID0gdGhpcy5nZXRBc3NvY2lhdGVkTGVnZW5kT3JMYWJlbCgkaW5wdXQpO1xuICBpZiAoISRsZWdlbmRPckxhYmVsKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICAvLyBTY3JvbGwgdGhlIGxlZ2VuZCBvciBsYWJlbCBpbnRvIHZpZXcgKmJlZm9yZSogY2FsbGluZyBmb2N1cyBvbiB0aGUgaW5wdXQgdG9cbiAgLy8gYXZvaWQgZXh0cmEgc2Nyb2xsaW5nIGluIGJyb3dzZXJzIHRoYXQgZG9uJ3Qgc3VwcG9ydCBgcHJldmVudFNjcm9sbGAgKHdoaWNoXG4gIC8vIGF0IHRpbWUgb2Ygd3JpdGluZyBpcyBtb3N0IG9mIHRoZW0uLi4pXG4gICRsZWdlbmRPckxhYmVsLnNjcm9sbEludG9WaWV3KCk7XG4gICRpbnB1dC5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSk7XG5cbiAgcmV0dXJuIHRydWVcbn07XG5cbi8qKlxuICogR2V0IGZyYWdtZW50IGZyb20gVVJMXG4gKlxuICogRXh0cmFjdCB0aGUgZnJhZ21lbnQgKGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIGhhc2gpIGZyb20gYSBVUkwsIGJ1dCBub3QgaW5jbHVkaW5nXG4gKiB0aGUgaGFzaC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsIC0gVVJMXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBGcmFnbWVudCBmcm9tIFVSTCwgd2l0aG91dCB0aGUgaGFzaFxuICovXG5FcnJvclN1bW1hcnkucHJvdG90eXBlLmdldEZyYWdtZW50RnJvbVVybCA9IGZ1bmN0aW9uICh1cmwpIHtcbiAgaWYgKHVybC5pbmRleE9mKCcjJykgPT09IC0xKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICByZXR1cm4gdXJsLnNwbGl0KCcjJykucG9wKClcbn07XG5cbi8qKlxuICogR2V0IGFzc29jaWF0ZWQgbGVnZW5kIG9yIGxhYmVsXG4gKlxuICogUmV0dXJucyB0aGUgZmlyc3QgZWxlbWVudCB0aGF0IGV4aXN0cyBmcm9tIHRoaXMgbGlzdDpcbiAqXG4gKiAtIFRoZSBgPGxlZ2VuZD5gIGFzc29jaWF0ZWQgd2l0aCB0aGUgY2xvc2VzdCBgPGZpZWxkc2V0PmAgYW5jZXN0b3IsIGFzIGxvbmdcbiAqICAgYXMgdGhlIHRvcCBvZiBpdCBpcyBubyBtb3JlIHRoYW4gaGFsZiBhIHZpZXdwb3J0IGhlaWdodCBhd2F5IGZyb20gdGhlXG4gKiAgIGJvdHRvbSBvZiB0aGUgaW5wdXRcbiAqIC0gVGhlIGZpcnN0IGA8bGFiZWw+YCB0aGF0IGlzIGFzc29jaWF0ZWQgd2l0aCB0aGUgaW5wdXQgdXNpbmcgZm9yPVwiaW5wdXRJZFwiXG4gKiAtIFRoZSBjbG9zZXN0IHBhcmVudCBgPGxhYmVsPmBcbiAqXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAkaW5wdXQgLSBUaGUgaW5wdXRcbiAqIEByZXR1cm5zIHtIVE1MRWxlbWVudH0gQXNzb2NpYXRlZCBsZWdlbmQgb3IgbGFiZWwsIG9yIG51bGwgaWYgbm8gYXNzb2NpYXRlZFxuICogICAgICAgICAgICAgICAgICAgICAgICBsZWdlbmQgb3IgbGFiZWwgY2FuIGJlIGZvdW5kXG4gKi9cbkVycm9yU3VtbWFyeS5wcm90b3R5cGUuZ2V0QXNzb2NpYXRlZExlZ2VuZE9yTGFiZWwgPSBmdW5jdGlvbiAoJGlucHV0KSB7XG4gIHZhciAkZmllbGRzZXQgPSAkaW5wdXQuY2xvc2VzdCgnZmllbGRzZXQnKTtcblxuICBpZiAoJGZpZWxkc2V0KSB7XG4gICAgdmFyIGxlZ2VuZHMgPSAkZmllbGRzZXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2xlZ2VuZCcpO1xuXG4gICAgaWYgKGxlZ2VuZHMubGVuZ3RoKSB7XG4gICAgICB2YXIgJGNhbmRpZGF0ZUxlZ2VuZCA9IGxlZ2VuZHNbMF07XG5cbiAgICAgIC8vIElmIHRoZSBpbnB1dCB0eXBlIGlzIHJhZGlvIG9yIGNoZWNrYm94LCBhbHdheXMgdXNlIHRoZSBsZWdlbmQgaWYgdGhlcmVcbiAgICAgIC8vIGlzIG9uZS5cbiAgICAgIGlmICgkaW5wdXQudHlwZSA9PT0gJ2NoZWNrYm94JyB8fCAkaW5wdXQudHlwZSA9PT0gJ3JhZGlvJykge1xuICAgICAgICByZXR1cm4gJGNhbmRpZGF0ZUxlZ2VuZFxuICAgICAgfVxuXG4gICAgICAvLyBGb3Igb3RoZXIgaW5wdXQgdHlwZXMsIG9ubHkgc2Nyb2xsIHRvIHRoZSBmaWVsZHNldOKAmXMgbGVnZW5kIChpbnN0ZWFkIG9mXG4gICAgICAvLyB0aGUgbGFiZWwgYXNzb2NpYXRlZCB3aXRoIHRoZSBpbnB1dCkgaWYgdGhlIGlucHV0IHdvdWxkIGVuZCB1cCBpbiB0aGVcbiAgICAgIC8vIHRvcCBoYWxmIG9mIHRoZSBzY3JlZW4uXG4gICAgICAvL1xuICAgICAgLy8gVGhpcyBzaG91bGQgYXZvaWQgc2l0dWF0aW9ucyB3aGVyZSB0aGUgaW5wdXQgZWl0aGVyIGVuZHMgdXAgb2ZmIHRoZVxuICAgICAgLy8gc2NyZWVuLCBvciBvYnNjdXJlZCBieSBhIHNvZnR3YXJlIGtleWJvYXJkLlxuICAgICAgdmFyIGxlZ2VuZFRvcCA9ICRjYW5kaWRhdGVMZWdlbmQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xuICAgICAgdmFyIGlucHV0UmVjdCA9ICRpbnB1dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgLy8gSWYgdGhlIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0XG4gICAgICAvLyBvciB3aW5kb3cuaW5uZXJIZWlnaHQgKGxpa2UgSUU4KSwgYmFpbCBhbmQganVzdCBsaW5rIHRvIHRoZSBsYWJlbC5cbiAgICAgIGlmIChpbnB1dFJlY3QuaGVpZ2h0ICYmIHdpbmRvdy5pbm5lckhlaWdodCkge1xuICAgICAgICB2YXIgaW5wdXRCb3R0b20gPSBpbnB1dFJlY3QudG9wICsgaW5wdXRSZWN0LmhlaWdodDtcblxuICAgICAgICBpZiAoaW5wdXRCb3R0b20gLSBsZWdlbmRUb3AgPCB3aW5kb3cuaW5uZXJIZWlnaHQgLyAyKSB7XG4gICAgICAgICAgcmV0dXJuICRjYW5kaWRhdGVMZWdlbmRcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwibGFiZWxbZm9yPSdcIiArICRpbnB1dC5nZXRBdHRyaWJ1dGUoJ2lkJykgKyBcIiddXCIpIHx8XG4gICAgJGlucHV0LmNsb3Nlc3QoJ2xhYmVsJylcbn07XG5cbi8qKlxuICogRXJyb3Igc3VtbWFyeSBjb25maWdcbiAqXG4gKiBAdHlwZWRlZiB7b2JqZWN0fSBFcnJvclN1bW1hcnlDb25maWdcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2Rpc2FibGVBdXRvRm9jdXMgPSBmYWxzZV0gLVxuICogIElmIHNldCB0byBgdHJ1ZWAgdGhlIGVycm9yIHN1bW1hcnkgd2lsbCBub3QgYmUgZm9jdXNzZWQgd2hlbiB0aGUgcGFnZSBsb2Fkcy5cbiAqL1xuXG4vKipcbiAqIE5vdGlmaWNhdGlvbiBCYW5uZXIgY29tcG9uZW50XG4gKlxuICogQGNsYXNzXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAkbW9kdWxlIC0gSFRNTCBlbGVtZW50IHRvIHVzZSBmb3Igbm90aWZpY2F0aW9uIGJhbm5lclxuICogQHBhcmFtIHtOb3RpZmljYXRpb25CYW5uZXJDb25maWd9IGNvbmZpZyAtIE5vdGlmaWNhdGlvbiBiYW5uZXIgY29uZmlnXG4gKi9cbmZ1bmN0aW9uIE5vdGlmaWNhdGlvbkJhbm5lciAoJG1vZHVsZSwgY29uZmlnKSB7XG4gIHRoaXMuJG1vZHVsZSA9ICRtb2R1bGU7XG5cbiAgdmFyIGRlZmF1bHRDb25maWcgPSB7XG4gICAgZGlzYWJsZUF1dG9Gb2N1czogZmFsc2VcbiAgfTtcbiAgdGhpcy5jb25maWcgPSBtZXJnZUNvbmZpZ3MoXG4gICAgZGVmYXVsdENvbmZpZyxcbiAgICBjb25maWcgfHwge30sXG4gICAgbm9ybWFsaXNlRGF0YXNldCgkbW9kdWxlLmRhdGFzZXQpXG4gICk7XG59XG5cbi8qKlxuICogSW5pdGlhbGlzZSB0aGUgY29tcG9uZW50XG4gKi9cbk5vdGlmaWNhdGlvbkJhbm5lci5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyICRtb2R1bGUgPSB0aGlzLiRtb2R1bGU7XG4gIC8vIENoZWNrIGZvciBtb2R1bGVcbiAgaWYgKCEkbW9kdWxlKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICB0aGlzLnNldEZvY3VzKCk7XG59O1xuXG4vKipcbiAqIEZvY3VzIHRoZSBlbGVtZW50XG4gKlxuICogSWYgYHJvbGU9XCJhbGVydFwiYCBpcyBzZXQsIGZvY3VzIHRoZSBlbGVtZW50IHRvIGhlbHAgc29tZSBhc3Npc3RpdmUgdGVjaG5vbG9naWVzXG4gKiBwcmlvcml0aXNlIGFubm91bmNpbmcgaXQuXG4gKlxuICogWW91IGNhbiB0dXJuIG9mZiB0aGUgYXV0by1mb2N1cyBmdW5jdGlvbmFsaXR5IGJ5IHNldHRpbmcgYGRhdGEtZGlzYWJsZS1hdXRvLWZvY3VzPVwidHJ1ZVwiYCBpbiB0aGVcbiAqIGNvbXBvbmVudCBIVE1MLiBZb3UgbWlnaHQgd2lzaCB0byBkbyB0aGlzIGJhc2VkIG9uIHVzZXIgcmVzZWFyY2ggZmluZGluZ3MsIG9yIHRvIGF2b2lkIGEgY2xhc2hcbiAqIHdpdGggYW5vdGhlciBlbGVtZW50IHdoaWNoIHNob3VsZCBiZSBmb2N1c2VkIHdoZW4gdGhlIHBhZ2UgbG9hZHMuXG4gKi9cbk5vdGlmaWNhdGlvbkJhbm5lci5wcm90b3R5cGUuc2V0Rm9jdXMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciAkbW9kdWxlID0gdGhpcy4kbW9kdWxlO1xuXG4gIGlmICh0aGlzLmNvbmZpZy5kaXNhYmxlQXV0b0ZvY3VzKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICBpZiAoJG1vZHVsZS5nZXRBdHRyaWJ1dGUoJ3JvbGUnKSAhPT0gJ2FsZXJ0Jykge1xuICAgIHJldHVyblxuICB9XG5cbiAgLy8gU2V0IHRhYmluZGV4IHRvIC0xIHRvIG1ha2UgdGhlIGVsZW1lbnQgZm9jdXNhYmxlIHdpdGggSmF2YVNjcmlwdC5cbiAgLy8gUmVtb3ZlIHRoZSB0YWJpbmRleCBvbiBibHVyIGFzIHRoZSBjb21wb25lbnQgZG9lc24ndCBuZWVkIHRvIGJlIGZvY3VzYWJsZSBhZnRlciB0aGUgcGFnZSBoYXNcbiAgLy8gbG9hZGVkLlxuICBpZiAoISRtb2R1bGUuZ2V0QXR0cmlidXRlKCd0YWJpbmRleCcpKSB7XG4gICAgJG1vZHVsZS5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJy0xJyk7XG5cbiAgICAkbW9kdWxlLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICAkbW9kdWxlLnJlbW92ZUF0dHJpYnV0ZSgndGFiaW5kZXgnKTtcbiAgICB9KTtcbiAgfVxuXG4gICRtb2R1bGUuZm9jdXMoKTtcbn07XG5cbi8qKlxuICogTm90aWZpY2F0aW9uIGJhbm5lciBjb25maWdcbiAqXG4gKiBAdHlwZWRlZiB7b2JqZWN0fSBOb3RpZmljYXRpb25CYW5uZXJDb25maWdcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2Rpc2FibGVBdXRvRm9jdXMgPSBmYWxzZV0gLVxuICogICBJZiBzZXQgdG8gYHRydWVgIHRoZSBub3RpZmljYXRpb24gYmFubmVyIHdpbGwgbm90IGJlIGZvY3Vzc2VkIHdoZW4gdGhlIHBhZ2VcbiAqICAgbG9hZHMuIFRoaXMgb25seSBhcHBsaWVzIGlmIHRoZSBjb21wb25lbnQgaGFzIGEgYHJvbGVgIG9mIGBhbGVydGAg4oCTIGluXG4gKiAgIG90aGVyIGNhc2VzIHRoZSBjb21wb25lbnQgd2lsbCBub3QgYmUgZm9jdXNlZCBvbiBwYWdlIGxvYWQsIHJlZ2FyZGxlc3Mgb2ZcbiAqICAgdGhpcyBvcHRpb24uXG4gKi9cblxuLyoqXG4gKiBIZWFkZXIgY29tcG9uZW50XG4gKlxuICogQGNsYXNzXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAkbW9kdWxlIC0gSFRNTCBlbGVtZW50IHRvIHVzZSBmb3IgaGVhZGVyXG4gKi9cbmZ1bmN0aW9uIEhlYWRlciAoJG1vZHVsZSkge1xuICB0aGlzLiRtb2R1bGUgPSAkbW9kdWxlO1xuICB0aGlzLiRtZW51QnV0dG9uID0gJG1vZHVsZSAmJiAkbW9kdWxlLnF1ZXJ5U2VsZWN0b3IoJy5nb3Z1ay1qcy1oZWFkZXItdG9nZ2xlJyk7XG4gIHRoaXMuJG1lbnUgPSB0aGlzLiRtZW51QnV0dG9uICYmICRtb2R1bGUucXVlcnlTZWxlY3RvcihcbiAgICAnIycgKyB0aGlzLiRtZW51QnV0dG9uLmdldEF0dHJpYnV0ZSgnYXJpYS1jb250cm9scycpXG4gICk7XG5cbiAgLy8gU2F2ZSB0aGUgb3BlbmVkL2Nsb3NlZCBzdGF0ZSBmb3IgdGhlIG5hdiBpbiBtZW1vcnkgc28gdGhhdCB3ZSBjYW5cbiAgLy8gYWNjdXJhdGVseSBtYWludGFpbiBzdGF0ZSB3aGVuIHRoZSBzY3JlZW4gaXMgY2hhbmdlZCBmcm9tIHNtYWxsIHRvXG4gIC8vIGJpZyBhbmQgYmFjayB0byBzbWFsbFxuICB0aGlzLm1lbnVJc09wZW4gPSBmYWxzZTtcblxuICAvLyBBIGdsb2JhbCBjb25zdCBmb3Igc3RvcmluZyBhIG1hdGNoTWVkaWEgaW5zdGFuY2Ugd2hpY2ggd2UnbGwgdXNlIHRvXG4gIC8vIGRldGVjdCB3aGVuIGEgc2NyZWVuIHNpemUgY2hhbmdlIGhhcHBlbnMuIFdlIHNldCB0aGlzIGxhdGVyIGR1cmluZyB0aGVcbiAgLy8gaW5pdCBmdW5jdGlvbiBhbmQgcmVseSBvbiBpdCBiZWluZyBudWxsIGlmIHRoZSBmZWF0dXJlIGlzbid0IGF2YWlsYWJsZVxuICAvLyB0byBpbml0aWFsbHkgYXBwbHkgaGlkZGVuIGF0dHJpYnV0ZXNcbiAgdGhpcy5tcWwgPSBudWxsO1xufVxuXG4vKipcbiAqIEluaXRpYWxpc2UgaGVhZGVyXG4gKlxuICogQ2hlY2sgZm9yIHRoZSBwcmVzZW5jZSBvZiB0aGUgaGVhZGVyLCBtZW51IGFuZCBtZW51IGJ1dHRvbiDigJMgaWYgYW55IGFyZVxuICogbWlzc2luZyB0aGVuIHRoZXJlJ3Mgbm90aGluZyB0byBkbyBzbyByZXR1cm4gZWFybHkuXG4gKiBGZWF0dXJlIHNuaWZmIGZvciBhbmQgYXBwbHkgYSBtYXRjaE1lZGlhIGZvciBkZXNrdG9wIHdoaWNoIHdpbGxcbiAqIHRyaWdnZXIgYSBzdGF0ZSBzeW5jIGlmIHRoZSBicm93c2VyIHZpZXdwb3J0IG1vdmVzIGJldHdlZW4gc3RhdGVzLiBJZlxuICogbWF0Y2hNZWRpYSBpc24ndCBhdmFpbGFibGUsIGhpZGUgdGhlIG1lbnUgYnV0dG9uIGFuZCBwcmVzZW50IHRoZSBcIm5vIGpzXCJcbiAqIHZlcnNpb24gb2YgdGhlIG1lbnUgdG8gdGhlIHVzZXIuXG4gKi9cbkhlYWRlci5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKCF0aGlzLiRtb2R1bGUgfHwgIXRoaXMuJG1lbnVCdXR0b24gfHwgIXRoaXMuJG1lbnUpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIGlmICgnbWF0Y2hNZWRpYScgaW4gd2luZG93KSB7XG4gICAgLy8gU2V0IHRoZSBtYXRjaE1lZGlhIHRvIHRoZSBnb3Z1ay1mcm9udGVuZCBkZXNrdG9wIGJyZWFrcG9pbnRcbiAgICB0aGlzLm1xbCA9IHdpbmRvdy5tYXRjaE1lZGlhKCcobWluLXdpZHRoOiA0OC4wNjI1ZW0pJyk7XG5cbiAgICBpZiAoJ2FkZEV2ZW50TGlzdGVuZXInIGluIHRoaXMubXFsKSB7XG4gICAgICB0aGlzLm1xbC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB0aGlzLnN5bmNTdGF0ZS5iaW5kKHRoaXMpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gYWRkTGlzdGVuZXIgaXMgYSBkZXByZWNhdGVkIGZ1bmN0aW9uLCBob3dldmVyIGFkZEV2ZW50TGlzdGVuZXJcbiAgICAgIC8vIGlzbid0IHN1cHBvcnRlZCBieSBJRSBvciBTYWZhcmkuIFdlIHRoZXJlZm9yZSBhZGQgdGhpcyBpbiBhc1xuICAgICAgLy8gYSBmYWxsYmFjayBmb3IgdGhvc2UgYnJvd3NlcnNcbiAgICAgIHRoaXMubXFsLmFkZExpc3RlbmVyKHRoaXMuc3luY1N0YXRlLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHRoaXMuc3luY1N0YXRlKCk7XG4gICAgdGhpcy4kbWVudUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlTWVudUJ1dHRvbkNsaWNrLmJpbmQodGhpcykpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuJG1lbnVCdXR0b24uc2V0QXR0cmlidXRlKCdoaWRkZW4nLCAnJyk7XG4gIH1cbn07XG5cbi8qKlxuICogU3luYyBtZW51IHN0YXRlXG4gKlxuICogVXNlcyB0aGUgZ2xvYmFsIHZhcmlhYmxlIG1lbnVJc09wZW4gdG8gY29ycmVjdGx5IHNldCB0aGUgYWNjZXNzaWJsZSBhbmRcbiAqIHZpc3VhbCBzdGF0ZXMgb2YgdGhlIG1lbnUgYW5kIHRoZSBtZW51IGJ1dHRvbi5cbiAqIEFkZGl0aW9uYWxseSB3aWxsIGZvcmNlIHRoZSBtZW51IHRvIGJlIHZpc2libGUgYW5kIHRoZSBtZW51IGJ1dHRvbiB0byBiZVxuICogaGlkZGVuIGlmIHRoZSBtYXRjaE1lZGlhIGlzIHRyaWdnZXJlZCB0byBkZXNrdG9wLlxuICovXG5IZWFkZXIucHJvdG90eXBlLnN5bmNTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMubXFsLm1hdGNoZXMpIHtcbiAgICB0aGlzLiRtZW51LnJlbW92ZUF0dHJpYnV0ZSgnaGlkZGVuJyk7XG4gICAgdGhpcy4kbWVudUJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2hpZGRlbicsICcnKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLiRtZW51QnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSgnaGlkZGVuJyk7XG4gICAgdGhpcy4kbWVudUJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCB0aGlzLm1lbnVJc09wZW4pO1xuXG4gICAgaWYgKHRoaXMubWVudUlzT3Blbikge1xuICAgICAgdGhpcy4kbWVudS5yZW1vdmVBdHRyaWJ1dGUoJ2hpZGRlbicpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiRtZW51LnNldEF0dHJpYnV0ZSgnaGlkZGVuJywgJycpO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBIYW5kbGUgbWVudSBidXR0b24gY2xpY2tcbiAqXG4gKiBXaGVuIHRoZSBtZW51IGJ1dHRvbiBpcyBjbGlja2VkLCBjaGFuZ2UgdGhlIHZpc2liaWxpdHkgb2YgdGhlIG1lbnUgYW5kIHRoZW5cbiAqIHN5bmMgdGhlIGFjY2Vzc2liaWxpdHkgc3RhdGUgYW5kIG1lbnUgYnV0dG9uIHN0YXRlXG4gKi9cbkhlYWRlci5wcm90b3R5cGUuaGFuZGxlTWVudUJ1dHRvbkNsaWNrID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLm1lbnVJc09wZW4gPSAhdGhpcy5tZW51SXNPcGVuO1xuICB0aGlzLnN5bmNTdGF0ZSgpO1xufTtcblxuLyoqXG4gKiBSYWRpb3MgY29tcG9uZW50XG4gKlxuICogQGNsYXNzXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAkbW9kdWxlIC0gSFRNTCBlbGVtZW50IHRvIHVzZSBmb3IgcmFkaW9zXG4gKi9cbmZ1bmN0aW9uIFJhZGlvcyAoJG1vZHVsZSkge1xuICB0aGlzLiRtb2R1bGUgPSAkbW9kdWxlO1xuICB0aGlzLiRpbnB1dHMgPSAkbW9kdWxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJyYWRpb1wiXScpO1xufVxuXG4vKipcbiAqIEluaXRpYWxpc2UgUmFkaW9zXG4gKlxuICogUmFkaW9zIGNhbiBiZSBhc3NvY2lhdGVkIHdpdGggYSAnY29uZGl0aW9uYWxseSByZXZlYWxlZCcgY29udGVudCBibG9jayDigJMgZm9yXG4gKiBleGFtcGxlLCBhIHJhZGlvIGZvciAnUGhvbmUnIGNvdWxkIHJldmVhbCBhbiBhZGRpdGlvbmFsIGZvcm0gZmllbGQgZm9yIHRoZVxuICogdXNlciB0byBlbnRlciB0aGVpciBwaG9uZSBudW1iZXIuXG4gKlxuICogVGhlc2UgYXNzb2NpYXRpb25zIGFyZSBtYWRlIHVzaW5nIGEgYGRhdGEtYXJpYS1jb250cm9sc2AgYXR0cmlidXRlLCB3aGljaCBpc1xuICogcHJvbW90ZWQgdG8gYW4gYXJpYS1jb250cm9scyBhdHRyaWJ1dGUgZHVyaW5nIGluaXRpYWxpc2F0aW9uLlxuICpcbiAqIFdlIGFsc28gbmVlZCB0byByZXN0b3JlIHRoZSBzdGF0ZSBvZiBhbnkgY29uZGl0aW9uYWwgcmV2ZWFscyBvbiB0aGUgcGFnZSAoZm9yXG4gKiBleGFtcGxlIGlmIHRoZSB1c2VyIGhhcyBuYXZpZ2F0ZWQgYmFjayksIGFuZCBzZXQgdXAgZXZlbnQgaGFuZGxlcnMgdG8ga2VlcFxuICogdGhlIHJldmVhbCBpbiBzeW5jIHdpdGggdGhlIHJhZGlvIHN0YXRlLlxuICovXG5SYWRpb3MucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciAkbW9kdWxlID0gdGhpcy4kbW9kdWxlO1xuICB2YXIgJGlucHV0cyA9IHRoaXMuJGlucHV0cztcblxuICBub2RlTGlzdEZvckVhY2goJGlucHV0cywgZnVuY3Rpb24gKCRpbnB1dCkge1xuICAgIHZhciB0YXJnZXQgPSAkaW5wdXQuZ2V0QXR0cmlidXRlKCdkYXRhLWFyaWEtY29udHJvbHMnKTtcblxuICAgIC8vIFNraXAgcmFkaW9zIHdpdGhvdXQgZGF0YS1hcmlhLWNvbnRyb2xzIGF0dHJpYnV0ZXMsIG9yIHdoZXJlIHRoZVxuICAgIC8vIHRhcmdldCBlbGVtZW50IGRvZXMgbm90IGV4aXN0LlxuICAgIGlmICghdGFyZ2V0IHx8ICFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YXJnZXQpKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBQcm9tb3RlIHRoZSBkYXRhLWFyaWEtY29udHJvbHMgYXR0cmlidXRlIHRvIGEgYXJpYS1jb250cm9scyBhdHRyaWJ1dGVcbiAgICAvLyBzbyB0aGF0IHRoZSByZWxhdGlvbnNoaXAgaXMgZXhwb3NlZCBpbiB0aGUgQU9NXG4gICAgJGlucHV0LnNldEF0dHJpYnV0ZSgnYXJpYS1jb250cm9scycsIHRhcmdldCk7XG4gICAgJGlucHV0LnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1hcmlhLWNvbnRyb2xzJyk7XG4gIH0pO1xuXG4gIC8vIFdoZW4gdGhlIHBhZ2UgaXMgcmVzdG9yZWQgYWZ0ZXIgbmF2aWdhdGluZyAnYmFjaycgaW4gc29tZSBicm93c2VycyB0aGVcbiAgLy8gc3RhdGUgb2YgZm9ybSBjb250cm9scyBpcyBub3QgcmVzdG9yZWQgdW50aWwgKmFmdGVyKiB0aGUgRE9NQ29udGVudExvYWRlZFxuICAvLyBldmVudCBpcyBmaXJlZCwgc28gd2UgbmVlZCB0byBzeW5jIGFmdGVyIHRoZSBwYWdlc2hvdyBldmVudCBpbiBicm93c2Vyc1xuICAvLyB0aGF0IHN1cHBvcnQgaXQuXG4gIGlmICgnb25wYWdlc2hvdycgaW4gd2luZG93KSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BhZ2VzaG93JywgdGhpcy5zeW5jQWxsQ29uZGl0aW9uYWxSZXZlYWxzLmJpbmQodGhpcykpO1xuICB9IGVsc2Uge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgdGhpcy5zeW5jQWxsQ29uZGl0aW9uYWxSZXZlYWxzLmJpbmQodGhpcykpO1xuICB9XG5cbiAgLy8gQWx0aG91Z2ggd2UndmUgc2V0IHVwIGhhbmRsZXJzIHRvIHN5bmMgc3RhdGUgb24gdGhlIHBhZ2VzaG93IG9yXG4gIC8vIERPTUNvbnRlbnRMb2FkZWQgZXZlbnQsIGluaXQgY291bGQgYmUgY2FsbGVkIGFmdGVyIHRob3NlIGV2ZW50cyBoYXZlIGZpcmVkLFxuICAvLyBmb3IgZXhhbXBsZSBpZiB0aGV5IGFyZSBhZGRlZCB0byB0aGUgcGFnZSBkeW5hbWljYWxseSwgc28gc3luYyBub3cgdG9vLlxuICB0aGlzLnN5bmNBbGxDb25kaXRpb25hbFJldmVhbHMoKTtcblxuICAvLyBIYW5kbGUgZXZlbnRzXG4gICRtb2R1bGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZUNsaWNrLmJpbmQodGhpcykpO1xufTtcblxuLyoqXG4gKiBTeW5jIHRoZSBjb25kaXRpb25hbCByZXZlYWwgc3RhdGVzIGZvciBhbGwgaW5wdXRzIGluIHRoaXMgJG1vZHVsZS5cbiAqL1xuUmFkaW9zLnByb3RvdHlwZS5zeW5jQWxsQ29uZGl0aW9uYWxSZXZlYWxzID0gZnVuY3Rpb24gKCkge1xuICBub2RlTGlzdEZvckVhY2godGhpcy4kaW5wdXRzLCB0aGlzLnN5bmNDb25kaXRpb25hbFJldmVhbFdpdGhJbnB1dFN0YXRlLmJpbmQodGhpcykpO1xufTtcblxuLyoqXG4gKiBTeW5jIGNvbmRpdGlvbmFsIHJldmVhbCB3aXRoIHRoZSBpbnB1dCBzdGF0ZVxuICpcbiAqIFN5bmNocm9uaXNlIHRoZSB2aXNpYmlsaXR5IG9mIHRoZSBjb25kaXRpb25hbCByZXZlYWwsIGFuZCBpdHMgYWNjZXNzaWJsZVxuICogc3RhdGUsIHdpdGggdGhlIGlucHV0J3MgY2hlY2tlZCBzdGF0ZS5cbiAqXG4gKiBAcGFyYW0ge0hUTUxJbnB1dEVsZW1lbnR9ICRpbnB1dCAtIFJhZGlvIGlucHV0XG4gKi9cblJhZGlvcy5wcm90b3R5cGUuc3luY0NvbmRpdGlvbmFsUmV2ZWFsV2l0aElucHV0U3RhdGUgPSBmdW5jdGlvbiAoJGlucHV0KSB7XG4gIHZhciAkdGFyZ2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJGlucHV0LmdldEF0dHJpYnV0ZSgnYXJpYS1jb250cm9scycpKTtcblxuICBpZiAoJHRhcmdldCAmJiAkdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZ292dWstcmFkaW9zX19jb25kaXRpb25hbCcpKSB7XG4gICAgdmFyIGlucHV0SXNDaGVja2VkID0gJGlucHV0LmNoZWNrZWQ7XG5cbiAgICAkaW5wdXQuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgaW5wdXRJc0NoZWNrZWQpO1xuICAgICR0YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgnZ292dWstcmFkaW9zX19jb25kaXRpb25hbC0taGlkZGVuJywgIWlucHV0SXNDaGVja2VkKTtcbiAgfVxufTtcblxuLyoqXG4gKiBDbGljayBldmVudCBoYW5kbGVyXG4gKlxuICogSGFuZGxlIGEgY2xpY2sgd2l0aGluIHRoZSAkbW9kdWxlIOKAkyBpZiB0aGUgY2xpY2sgb2NjdXJyZWQgb24gYSByYWRpbywgc3luY1xuICogdGhlIHN0YXRlIG9mIHRoZSBjb25kaXRpb25hbCByZXZlYWwgZm9yIGFsbCByYWRpbyBidXR0b25zIGluIHRoZSBzYW1lIGZvcm1cbiAqIHdpdGggdGhlIHNhbWUgbmFtZSAoYmVjYXVzZSBjaGVja2luZyBvbmUgcmFkaW8gY291bGQgaGF2ZSB1bi1jaGVja2VkIGEgcmFkaW9cbiAqIGluIGFub3RoZXIgJG1vZHVsZSlcbiAqXG4gKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50IC0gQ2xpY2sgZXZlbnRcbiAqL1xuUmFkaW9zLnByb3RvdHlwZS5oYW5kbGVDbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xuICB2YXIgJGNsaWNrZWRJbnB1dCA9IGV2ZW50LnRhcmdldDtcblxuICAvLyBJZ25vcmUgY2xpY2tzIG9uIHRoaW5ncyB0aGF0IGFyZW4ndCByYWRpbyBidXR0b25zXG4gIGlmICgkY2xpY2tlZElucHV0LnR5cGUgIT09ICdyYWRpbycpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIC8vIFdlIG9ubHkgbmVlZCB0byBjb25zaWRlciByYWRpb3Mgd2l0aCBjb25kaXRpb25hbCByZXZlYWxzLCB3aGljaCB3aWxsIGhhdmVcbiAgLy8gYXJpYS1jb250cm9scyBhdHRyaWJ1dGVzLlxuICB2YXIgJGFsbElucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJyYWRpb1wiXVthcmlhLWNvbnRyb2xzXScpO1xuXG4gIG5vZGVMaXN0Rm9yRWFjaCgkYWxsSW5wdXRzLCBmdW5jdGlvbiAoJGlucHV0KSB7XG4gICAgdmFyIGhhc1NhbWVGb3JtT3duZXIgPSAoJGlucHV0LmZvcm0gPT09ICRjbGlja2VkSW5wdXQuZm9ybSk7XG4gICAgdmFyIGhhc1NhbWVOYW1lID0gKCRpbnB1dC5uYW1lID09PSAkY2xpY2tlZElucHV0Lm5hbWUpO1xuXG4gICAgaWYgKGhhc1NhbWVOYW1lICYmIGhhc1NhbWVGb3JtT3duZXIpIHtcbiAgICAgIHRoaXMuc3luY0NvbmRpdGlvbmFsUmV2ZWFsV2l0aElucHV0U3RhdGUoJGlucHV0KTtcbiAgICB9XG4gIH0uYmluZCh0aGlzKSk7XG59O1xuXG4vKipcbiAqIFNraXAgbGluayBjb21wb25lbnRcbiAqXG4gKiBAY2xhc3NcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9ICRtb2R1bGUgLSBIVE1MIGVsZW1lbnQgdG8gdXNlIGZvciBza2lwIGxpbmtcbiAqL1xuZnVuY3Rpb24gU2tpcExpbmsgKCRtb2R1bGUpIHtcbiAgdGhpcy4kbW9kdWxlID0gJG1vZHVsZTtcbiAgdGhpcy4kbGlua2VkRWxlbWVudCA9IG51bGw7XG4gIHRoaXMubGlua2VkRWxlbWVudExpc3RlbmVyID0gZmFsc2U7XG59XG5cbi8qKlxuICogSW5pdGlhbGlzZSB0aGUgY29tcG9uZW50XG4gKi9cblNraXBMaW5rLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAvLyBDaGVjayBmb3IgbW9kdWxlXG4gIGlmICghdGhpcy4kbW9kdWxlKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICAvLyBDaGVjayBmb3IgbGlua2VkIGVsZW1lbnRcbiAgdGhpcy4kbGlua2VkRWxlbWVudCA9IHRoaXMuZ2V0TGlua2VkRWxlbWVudCgpO1xuICBpZiAoIXRoaXMuJGxpbmtlZEVsZW1lbnQpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIHRoaXMuJG1vZHVsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZm9jdXNMaW5rZWRFbGVtZW50LmJpbmQodGhpcykpO1xufTtcblxuLyoqXG4gKiBHZXQgbGlua2VkIGVsZW1lbnRcbiAqXG4gKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR9ICRsaW5rZWRFbGVtZW50IC0gRE9NIGVsZW1lbnQgbGlua2VkIHRvIGZyb20gdGhlIHNraXAgbGlua1xuICovXG5Ta2lwTGluay5wcm90b3R5cGUuZ2V0TGlua2VkRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGxpbmtlZEVsZW1lbnRJZCA9IHRoaXMuZ2V0RnJhZ21lbnRGcm9tVXJsKCk7XG5cbiAgaWYgKCFsaW5rZWRFbGVtZW50SWQpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChsaW5rZWRFbGVtZW50SWQpXG59O1xuXG4vKipcbiAqIEZvY3VzIHRoZSBsaW5rZWQgZWxlbWVudFxuICpcbiAqIFNldCB0YWJpbmRleCBhbmQgaGVscGVyIENTUyBjbGFzcy4gU2V0IGxpc3RlbmVyIHRvIHJlbW92ZSB0aGVtIG9uIGJsdXIuXG4gKi9cblNraXBMaW5rLnByb3RvdHlwZS5mb2N1c0xpbmtlZEVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciAkbGlua2VkRWxlbWVudCA9IHRoaXMuJGxpbmtlZEVsZW1lbnQ7XG5cbiAgaWYgKCEkbGlua2VkRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JykpIHtcbiAgICAvLyBTZXQgdGhlIGVsZW1lbnQgdGFiaW5kZXggdG8gLTEgc28gaXQgY2FuIGJlIGZvY3VzZWQgd2l0aCBKYXZhU2NyaXB0LlxuICAgICRsaW5rZWRFbGVtZW50LnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnLTEnKTtcbiAgICAkbGlua2VkRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdnb3Z1ay1za2lwLWxpbmstZm9jdXNlZC1lbGVtZW50Jyk7XG5cbiAgICAvLyBBZGQgbGlzdGVuZXIgZm9yIGJsdXIgb24gdGhlIGZvY3VzZWQgZWxlbWVudCAodW5sZXNzIHRoZSBsaXN0ZW5lciBoYXMgcHJldmlvdXNseSBiZWVuIGFkZGVkKVxuICAgIGlmICghdGhpcy5saW5rZWRFbGVtZW50TGlzdGVuZXIpIHtcbiAgICAgIHRoaXMuJGxpbmtlZEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIHRoaXMucmVtb3ZlRm9jdXNQcm9wZXJ0aWVzLmJpbmQodGhpcykpO1xuICAgICAgdGhpcy5saW5rZWRFbGVtZW50TGlzdGVuZXIgPSB0cnVlO1xuICAgIH1cbiAgfVxuICAkbGlua2VkRWxlbWVudC5mb2N1cygpO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgdGhlIHRhYmluZGV4IHRoYXQgbWFrZXMgdGhlIGxpbmtlZCBlbGVtZW50IGZvY3VzYWJsZSBiZWNhdXNlIHRoZSBlbGVtZW50IG9ubHkgbmVlZHMgdG8gYmVcbiAqIGZvY3VzYWJsZSB1bnRpbCBpdCBoYXMgcmVjZWl2ZWQgcHJvZ3JhbW1hdGljIGZvY3VzIGFuZCBhIHNjcmVlbiByZWFkZXIgaGFzIGFubm91bmNlZCBpdC5cbiAqXG4gKiBSZW1vdmUgdGhlIENTUyBjbGFzcyB0aGF0IHJlbW92ZXMgdGhlIG5hdGl2ZSBmb2N1cyBzdHlsZXMuXG4gKi9cblNraXBMaW5rLnByb3RvdHlwZS5yZW1vdmVGb2N1c1Byb3BlcnRpZXMgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuJGxpbmtlZEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCd0YWJpbmRleCcpO1xuICB0aGlzLiRsaW5rZWRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2dvdnVrLXNraXAtbGluay1mb2N1c2VkLWVsZW1lbnQnKTtcbn07XG5cbi8qKlxuICogR2V0IGZyYWdtZW50IGZyb20gVVJMXG4gKlxuICogRXh0cmFjdCB0aGUgZnJhZ21lbnQgKGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIGhhc2ggc3ltYm9sKSBmcm9tIGEgVVJMLCBidXQgbm90IGluY2x1ZGluZ1xuICogdGhlIHN5bWJvbC5cbiAqXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBGcmFnbWVudCBmcm9tIFVSTCwgd2l0aG91dCB0aGUgaGFzaCBzeW1ib2xcbiAqL1xuU2tpcExpbmsucHJvdG90eXBlLmdldEZyYWdtZW50RnJvbVVybCA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gQmFpbCBpZiB0aGUgYW5jaG9yIGxpbmsgZG9lc24ndCBoYXZlIGEgaGFzaFxuICBpZiAoIXRoaXMuJG1vZHVsZS5oYXNoKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICByZXR1cm4gdGhpcy4kbW9kdWxlLmhhc2guc3BsaXQoJyMnKS5wb3AoKVxufTtcblxuKGZ1bmN0aW9uKHVuZGVmaW5lZCkge1xuXG4gICAgLy8gRGV0ZWN0aW9uIGZyb20gaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0ZpbmFuY2lhbC1UaW1lcy9wb2x5ZmlsbC1saWJyYXJ5L21hc3Rlci9wb2x5ZmlsbHMvRWxlbWVudC9wcm90b3R5cGUvbmV4dEVsZW1lbnRTaWJsaW5nL2RldGVjdC5qc1xuICAgIHZhciBkZXRlY3QgPSAoXG4gICAgICAnZG9jdW1lbnQnIGluIHRoaXMgJiYgXCJuZXh0RWxlbWVudFNpYmxpbmdcIiBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnRcbiAgICApO1xuXG4gICAgaWYgKGRldGVjdCkgcmV0dXJuXG5cbiAgICAvLyBQb2x5ZmlsbCBmcm9tIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9GaW5hbmNpYWwtVGltZXMvcG9seWZpbGwtbGlicmFyeS9tYXN0ZXIvcG9seWZpbGxzL0VsZW1lbnQvcHJvdG90eXBlL25leHRFbGVtZW50U2libGluZy9wb2x5ZmlsbC5qc1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShFbGVtZW50LnByb3RvdHlwZSwgXCJuZXh0RWxlbWVudFNpYmxpbmdcIiwge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpe1xuICAgICAgICB2YXIgZWwgPSB0aGlzLm5leHRTaWJsaW5nO1xuICAgICAgICB3aGlsZSAoZWwgJiYgZWwubm9kZVR5cGUgIT09IDEpIHsgZWwgPSBlbC5uZXh0U2libGluZzsgfVxuICAgICAgICByZXR1cm4gZWw7XG4gICAgICB9XG4gICAgfSk7XG5cbn0pLmNhbGwoJ29iamVjdCcgPT09IHR5cGVvZiB3aW5kb3cgJiYgd2luZG93IHx8ICdvYmplY3QnID09PSB0eXBlb2Ygc2VsZiAmJiBzZWxmIHx8ICdvYmplY3QnID09PSB0eXBlb2YgZ2xvYmFsICYmIGdsb2JhbCB8fCB7fSk7XG5cbihmdW5jdGlvbih1bmRlZmluZWQpIHtcblxuICAgIC8vIERldGVjdGlvbiBmcm9tIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9GaW5hbmNpYWwtVGltZXMvcG9seWZpbGwtbGlicmFyeS9tYXN0ZXIvcG9seWZpbGxzL0VsZW1lbnQvcHJvdG90eXBlL3ByZXZpb3VzRWxlbWVudFNpYmxpbmcvZGV0ZWN0LmpzXG4gICAgdmFyIGRldGVjdCA9IChcbiAgICAgICdkb2N1bWVudCcgaW4gdGhpcyAmJiBcInByZXZpb3VzRWxlbWVudFNpYmxpbmdcIiBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnRcbiAgICApO1xuXG4gICAgaWYgKGRldGVjdCkgcmV0dXJuXG5cbiAgICAvLyBQb2x5ZmlsbCBmcm9tIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9GaW5hbmNpYWwtVGltZXMvcG9seWZpbGwtbGlicmFyeS9tYXN0ZXIvcG9seWZpbGxzL0VsZW1lbnQvcHJvdG90eXBlL3ByZXZpb3VzRWxlbWVudFNpYmxpbmcvcG9seWZpbGwuanNcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRWxlbWVudC5wcm90b3R5cGUsICdwcmV2aW91c0VsZW1lbnRTaWJsaW5nJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpe1xuICAgICAgICB2YXIgZWwgPSB0aGlzLnByZXZpb3VzU2libGluZztcbiAgICAgICAgd2hpbGUgKGVsICYmIGVsLm5vZGVUeXBlICE9PSAxKSB7IGVsID0gZWwucHJldmlvdXNTaWJsaW5nOyB9XG4gICAgICAgIHJldHVybiBlbDtcbiAgICAgIH1cbiAgICB9KTtcblxufSkuY2FsbCgnb2JqZWN0JyA9PT0gdHlwZW9mIHdpbmRvdyAmJiB3aW5kb3cgfHwgJ29iamVjdCcgPT09IHR5cGVvZiBzZWxmICYmIHNlbGYgfHwgJ29iamVjdCcgPT09IHR5cGVvZiBnbG9iYWwgJiYgZ2xvYmFsIHx8IHt9KTtcblxuLyoqXG4gKiBUYWJzIGNvbXBvbmVudFxuICpcbiAqIEBjbGFzc1xuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gJG1vZHVsZSAtIEhUTUwgZWxlbWVudCB0byB1c2UgZm9yIHRhYnNcbiAqL1xuZnVuY3Rpb24gVGFicyAoJG1vZHVsZSkge1xuICB0aGlzLiRtb2R1bGUgPSAkbW9kdWxlO1xuICB0aGlzLiR0YWJzID0gJG1vZHVsZS5xdWVyeVNlbGVjdG9yQWxsKCcuZ292dWstdGFic19fdGFiJyk7XG5cbiAgdGhpcy5rZXlzID0geyBsZWZ0OiAzNywgcmlnaHQ6IDM5LCB1cDogMzgsIGRvd246IDQwIH07XG4gIHRoaXMuanNIaWRkZW5DbGFzcyA9ICdnb3Z1ay10YWJzX19wYW5lbC0taGlkZGVuJztcbn1cblxuVGFicy5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cubWF0Y2hNZWRpYSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHRoaXMuc2V0dXBSZXNwb25zaXZlQ2hlY2tzKCk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5zZXR1cCgpO1xuICB9XG59O1xuXG5UYWJzLnByb3RvdHlwZS5zZXR1cFJlc3BvbnNpdmVDaGVja3MgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMubXFsID0gd2luZG93Lm1hdGNoTWVkaWEoJyhtaW4td2lkdGg6IDQwLjA2MjVlbSknKTtcbiAgdGhpcy5tcWwuYWRkTGlzdGVuZXIodGhpcy5jaGVja01vZGUuYmluZCh0aGlzKSk7XG4gIHRoaXMuY2hlY2tNb2RlKCk7XG59O1xuXG5UYWJzLnByb3RvdHlwZS5jaGVja01vZGUgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICh0aGlzLm1xbC5tYXRjaGVzKSB7XG4gICAgdGhpcy5zZXR1cCgpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMudGVhcmRvd24oKTtcbiAgfVxufTtcblxuVGFicy5wcm90b3R5cGUuc2V0dXAgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciAkbW9kdWxlID0gdGhpcy4kbW9kdWxlO1xuICB2YXIgJHRhYnMgPSB0aGlzLiR0YWJzO1xuICB2YXIgJHRhYkxpc3QgPSAkbW9kdWxlLnF1ZXJ5U2VsZWN0b3IoJy5nb3Z1ay10YWJzX19saXN0Jyk7XG4gIHZhciAkdGFiTGlzdEl0ZW1zID0gJG1vZHVsZS5xdWVyeVNlbGVjdG9yQWxsKCcuZ292dWstdGFic19fbGlzdC1pdGVtJyk7XG5cbiAgaWYgKCEkdGFicyB8fCAhJHRhYkxpc3QgfHwgISR0YWJMaXN0SXRlbXMpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gICR0YWJMaXN0LnNldEF0dHJpYnV0ZSgncm9sZScsICd0YWJsaXN0Jyk7XG5cbiAgbm9kZUxpc3RGb3JFYWNoKCR0YWJMaXN0SXRlbXMsIGZ1bmN0aW9uICgkaXRlbSkge1xuICAgICRpdGVtLnNldEF0dHJpYnV0ZSgncm9sZScsICdwcmVzZW50YXRpb24nKTtcbiAgfSk7XG5cbiAgbm9kZUxpc3RGb3JFYWNoKCR0YWJzLCBmdW5jdGlvbiAoJHRhYikge1xuICAgIC8vIFNldCBIVE1MIGF0dHJpYnV0ZXNcbiAgICB0aGlzLnNldEF0dHJpYnV0ZXMoJHRhYik7XG5cbiAgICAvLyBTYXZlIGJvdW5kZWQgZnVuY3Rpb25zIHRvIHVzZSB3aGVuIHJlbW92aW5nIGV2ZW50IGxpc3RlbmVycyBkdXJpbmcgdGVhcmRvd25cbiAgICAkdGFiLmJvdW5kVGFiQ2xpY2sgPSB0aGlzLm9uVGFiQ2xpY2suYmluZCh0aGlzKTtcbiAgICAkdGFiLmJvdW5kVGFiS2V5ZG93biA9IHRoaXMub25UYWJLZXlkb3duLmJpbmQodGhpcyk7XG5cbiAgICAvLyBIYW5kbGUgZXZlbnRzXG4gICAgJHRhYi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICR0YWIuYm91bmRUYWJDbGljaywgdHJ1ZSk7XG4gICAgJHRhYi5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgJHRhYi5ib3VuZFRhYktleWRvd24sIHRydWUpO1xuXG4gICAgLy8gUmVtb3ZlIG9sZCBhY3RpdmUgcGFuZWxzXG4gICAgdGhpcy5oaWRlVGFiKCR0YWIpO1xuICB9LmJpbmQodGhpcykpO1xuXG4gIC8vIFNob3cgZWl0aGVyIHRoZSBhY3RpdmUgdGFiIGFjY29yZGluZyB0byB0aGUgVVJMJ3MgaGFzaCBvciB0aGUgZmlyc3QgdGFiXG4gIHZhciAkYWN0aXZlVGFiID0gdGhpcy5nZXRUYWIod2luZG93LmxvY2F0aW9uLmhhc2gpIHx8IHRoaXMuJHRhYnNbMF07XG4gIHRoaXMuc2hvd1RhYigkYWN0aXZlVGFiKTtcblxuICAvLyBIYW5kbGUgaGFzaGNoYW5nZSBldmVudHNcbiAgJG1vZHVsZS5ib3VuZE9uSGFzaENoYW5nZSA9IHRoaXMub25IYXNoQ2hhbmdlLmJpbmQodGhpcyk7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgJG1vZHVsZS5ib3VuZE9uSGFzaENoYW5nZSwgdHJ1ZSk7XG59O1xuXG5UYWJzLnByb3RvdHlwZS50ZWFyZG93biA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyICRtb2R1bGUgPSB0aGlzLiRtb2R1bGU7XG4gIHZhciAkdGFicyA9IHRoaXMuJHRhYnM7XG4gIHZhciAkdGFiTGlzdCA9ICRtb2R1bGUucXVlcnlTZWxlY3RvcignLmdvdnVrLXRhYnNfX2xpc3QnKTtcbiAgdmFyICR0YWJMaXN0SXRlbXMgPSAkbW9kdWxlLnF1ZXJ5U2VsZWN0b3JBbGwoJy5nb3Z1ay10YWJzX19saXN0LWl0ZW0nKTtcblxuICBpZiAoISR0YWJzIHx8ICEkdGFiTGlzdCB8fCAhJHRhYkxpc3RJdGVtcykge1xuICAgIHJldHVyblxuICB9XG5cbiAgJHRhYkxpc3QucmVtb3ZlQXR0cmlidXRlKCdyb2xlJyk7XG5cbiAgbm9kZUxpc3RGb3JFYWNoKCR0YWJMaXN0SXRlbXMsIGZ1bmN0aW9uICgkaXRlbSkge1xuICAgICRpdGVtLnJlbW92ZUF0dHJpYnV0ZSgncm9sZScsICdwcmVzZW50YXRpb24nKTtcbiAgfSk7XG5cbiAgbm9kZUxpc3RGb3JFYWNoKCR0YWJzLCBmdW5jdGlvbiAoJHRhYikge1xuICAgIC8vIFJlbW92ZSBldmVudHNcbiAgICAkdGFiLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgJHRhYi5ib3VuZFRhYkNsaWNrLCB0cnVlKTtcbiAgICAkdGFiLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAkdGFiLmJvdW5kVGFiS2V5ZG93biwgdHJ1ZSk7XG5cbiAgICAvLyBVbnNldCBIVE1MIGF0dHJpYnV0ZXNcbiAgICB0aGlzLnVuc2V0QXR0cmlidXRlcygkdGFiKTtcbiAgfS5iaW5kKHRoaXMpKTtcblxuICAvLyBSZW1vdmUgaGFzaGNoYW5nZSBldmVudCBoYW5kbGVyXG4gIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgJG1vZHVsZS5ib3VuZE9uSGFzaENoYW5nZSwgdHJ1ZSk7XG59O1xuXG5UYWJzLnByb3RvdHlwZS5vbkhhc2hDaGFuZ2UgPSBmdW5jdGlvbiAoZSkge1xuICB2YXIgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoO1xuICB2YXIgJHRhYldpdGhIYXNoID0gdGhpcy5nZXRUYWIoaGFzaCk7XG4gIGlmICghJHRhYldpdGhIYXNoKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICAvLyBQcmV2ZW50IGNoYW5naW5nIHRoZSBoYXNoXG4gIGlmICh0aGlzLmNoYW5naW5nSGFzaCkge1xuICAgIHRoaXMuY2hhbmdpbmdIYXNoID0gZmFsc2U7XG4gICAgcmV0dXJuXG4gIH1cblxuICAvLyBTaG93IGVpdGhlciB0aGUgYWN0aXZlIHRhYiBhY2NvcmRpbmcgdG8gdGhlIFVSTCdzIGhhc2ggb3IgdGhlIGZpcnN0IHRhYlxuICB2YXIgJHByZXZpb3VzVGFiID0gdGhpcy5nZXRDdXJyZW50VGFiKCk7XG5cbiAgdGhpcy5oaWRlVGFiKCRwcmV2aW91c1RhYik7XG4gIHRoaXMuc2hvd1RhYigkdGFiV2l0aEhhc2gpO1xuICAkdGFiV2l0aEhhc2guZm9jdXMoKTtcbn07XG5cblRhYnMucHJvdG90eXBlLmhpZGVUYWIgPSBmdW5jdGlvbiAoJHRhYikge1xuICB0aGlzLnVuaGlnaGxpZ2h0VGFiKCR0YWIpO1xuICB0aGlzLmhpZGVQYW5lbCgkdGFiKTtcbn07XG5cblRhYnMucHJvdG90eXBlLnNob3dUYWIgPSBmdW5jdGlvbiAoJHRhYikge1xuICB0aGlzLmhpZ2hsaWdodFRhYigkdGFiKTtcbiAgdGhpcy5zaG93UGFuZWwoJHRhYik7XG59O1xuXG5UYWJzLnByb3RvdHlwZS5nZXRUYWIgPSBmdW5jdGlvbiAoaGFzaCkge1xuICByZXR1cm4gdGhpcy4kbW9kdWxlLnF1ZXJ5U2VsZWN0b3IoJy5nb3Z1ay10YWJzX190YWJbaHJlZj1cIicgKyBoYXNoICsgJ1wiXScpXG59O1xuXG5UYWJzLnByb3RvdHlwZS5zZXRBdHRyaWJ1dGVzID0gZnVuY3Rpb24gKCR0YWIpIHtcbiAgLy8gc2V0IHRhYiBhdHRyaWJ1dGVzXG4gIHZhciBwYW5lbElkID0gdGhpcy5nZXRIcmVmKCR0YWIpLnNsaWNlKDEpO1xuICAkdGFiLnNldEF0dHJpYnV0ZSgnaWQnLCAndGFiXycgKyBwYW5lbElkKTtcbiAgJHRhYi5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAndGFiJyk7XG4gICR0YWIuc2V0QXR0cmlidXRlKCdhcmlhLWNvbnRyb2xzJywgcGFuZWxJZCk7XG4gICR0YWIuc2V0QXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJywgJ2ZhbHNlJyk7XG4gICR0YWIuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICctMScpO1xuXG4gIC8vIHNldCBwYW5lbCBhdHRyaWJ1dGVzXG4gIHZhciAkcGFuZWwgPSB0aGlzLmdldFBhbmVsKCR0YWIpO1xuICAkcGFuZWwuc2V0QXR0cmlidXRlKCdyb2xlJywgJ3RhYnBhbmVsJyk7XG4gICRwYW5lbC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWxsZWRieScsICR0YWIuaWQpO1xuICAkcGFuZWwuY2xhc3NMaXN0LmFkZCh0aGlzLmpzSGlkZGVuQ2xhc3MpO1xufTtcblxuVGFicy5wcm90b3R5cGUudW5zZXRBdHRyaWJ1dGVzID0gZnVuY3Rpb24gKCR0YWIpIHtcbiAgLy8gdW5zZXQgdGFiIGF0dHJpYnV0ZXNcbiAgJHRhYi5yZW1vdmVBdHRyaWJ1dGUoJ2lkJyk7XG4gICR0YWIucmVtb3ZlQXR0cmlidXRlKCdyb2xlJyk7XG4gICR0YWIucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWNvbnRyb2xzJyk7XG4gICR0YWIucmVtb3ZlQXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJyk7XG4gICR0YWIucmVtb3ZlQXR0cmlidXRlKCd0YWJpbmRleCcpO1xuXG4gIC8vIHVuc2V0IHBhbmVsIGF0dHJpYnV0ZXNcbiAgdmFyICRwYW5lbCA9IHRoaXMuZ2V0UGFuZWwoJHRhYik7XG4gICRwYW5lbC5yZW1vdmVBdHRyaWJ1dGUoJ3JvbGUnKTtcbiAgJHBhbmVsLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1sYWJlbGxlZGJ5Jyk7XG4gICRwYW5lbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuanNIaWRkZW5DbGFzcyk7XG59O1xuXG5UYWJzLnByb3RvdHlwZS5vblRhYkNsaWNrID0gZnVuY3Rpb24gKGUpIHtcbiAgaWYgKCFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2dvdnVrLXRhYnNfX3RhYicpKSB7XG4gIC8vIEFsbG93IGV2ZW50cyBvbiBjaGlsZCBET00gZWxlbWVudHMgdG8gYnViYmxlIHVwIHRvIHRhYiBwYXJlbnRcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIHZhciAkbmV3VGFiID0gZS50YXJnZXQ7XG4gIHZhciAkY3VycmVudFRhYiA9IHRoaXMuZ2V0Q3VycmVudFRhYigpO1xuICB0aGlzLmhpZGVUYWIoJGN1cnJlbnRUYWIpO1xuICB0aGlzLnNob3dUYWIoJG5ld1RhYik7XG4gIHRoaXMuY3JlYXRlSGlzdG9yeUVudHJ5KCRuZXdUYWIpO1xufTtcblxuVGFicy5wcm90b3R5cGUuY3JlYXRlSGlzdG9yeUVudHJ5ID0gZnVuY3Rpb24gKCR0YWIpIHtcbiAgdmFyICRwYW5lbCA9IHRoaXMuZ2V0UGFuZWwoJHRhYik7XG5cbiAgLy8gU2F2ZSBhbmQgcmVzdG9yZSB0aGUgaWRcbiAgLy8gc28gdGhlIHBhZ2UgZG9lc24ndCBqdW1wIHdoZW4gYSB1c2VyIGNsaWNrcyBhIHRhYiAod2hpY2ggY2hhbmdlcyB0aGUgaGFzaClcbiAgdmFyIGlkID0gJHBhbmVsLmlkO1xuICAkcGFuZWwuaWQgPSAnJztcbiAgdGhpcy5jaGFuZ2luZ0hhc2ggPSB0cnVlO1xuICB3aW5kb3cubG9jYXRpb24uaGFzaCA9IHRoaXMuZ2V0SHJlZigkdGFiKS5zbGljZSgxKTtcbiAgJHBhbmVsLmlkID0gaWQ7XG59O1xuXG5UYWJzLnByb3RvdHlwZS5vblRhYktleWRvd24gPSBmdW5jdGlvbiAoZSkge1xuICBzd2l0Y2ggKGUua2V5Q29kZSkge1xuICAgIGNhc2UgdGhpcy5rZXlzLmxlZnQ6XG4gICAgY2FzZSB0aGlzLmtleXMudXA6XG4gICAgICB0aGlzLmFjdGl2YXRlUHJldmlvdXNUYWIoKTtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGJyZWFrXG4gICAgY2FzZSB0aGlzLmtleXMucmlnaHQ6XG4gICAgY2FzZSB0aGlzLmtleXMuZG93bjpcbiAgICAgIHRoaXMuYWN0aXZhdGVOZXh0VGFiKCk7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBicmVha1xuICB9XG59O1xuXG5UYWJzLnByb3RvdHlwZS5hY3RpdmF0ZU5leHRUYWIgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBjdXJyZW50VGFiID0gdGhpcy5nZXRDdXJyZW50VGFiKCk7XG4gIHZhciBuZXh0VGFiTGlzdEl0ZW0gPSBjdXJyZW50VGFiLnBhcmVudE5vZGUubmV4dEVsZW1lbnRTaWJsaW5nO1xuICBpZiAobmV4dFRhYkxpc3RJdGVtKSB7XG4gICAgdmFyIG5leHRUYWIgPSBuZXh0VGFiTGlzdEl0ZW0ucXVlcnlTZWxlY3RvcignLmdvdnVrLXRhYnNfX3RhYicpO1xuICB9XG4gIGlmIChuZXh0VGFiKSB7XG4gICAgdGhpcy5oaWRlVGFiKGN1cnJlbnRUYWIpO1xuICAgIHRoaXMuc2hvd1RhYihuZXh0VGFiKTtcbiAgICBuZXh0VGFiLmZvY3VzKCk7XG4gICAgdGhpcy5jcmVhdGVIaXN0b3J5RW50cnkobmV4dFRhYik7XG4gIH1cbn07XG5cblRhYnMucHJvdG90eXBlLmFjdGl2YXRlUHJldmlvdXNUYWIgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBjdXJyZW50VGFiID0gdGhpcy5nZXRDdXJyZW50VGFiKCk7XG4gIHZhciBwcmV2aW91c1RhYkxpc3RJdGVtID0gY3VycmVudFRhYi5wYXJlbnROb2RlLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG4gIGlmIChwcmV2aW91c1RhYkxpc3RJdGVtKSB7XG4gICAgdmFyIHByZXZpb3VzVGFiID0gcHJldmlvdXNUYWJMaXN0SXRlbS5xdWVyeVNlbGVjdG9yKCcuZ292dWstdGFic19fdGFiJyk7XG4gIH1cbiAgaWYgKHByZXZpb3VzVGFiKSB7XG4gICAgdGhpcy5oaWRlVGFiKGN1cnJlbnRUYWIpO1xuICAgIHRoaXMuc2hvd1RhYihwcmV2aW91c1RhYik7XG4gICAgcHJldmlvdXNUYWIuZm9jdXMoKTtcbiAgICB0aGlzLmNyZWF0ZUhpc3RvcnlFbnRyeShwcmV2aW91c1RhYik7XG4gIH1cbn07XG5cblRhYnMucHJvdG90eXBlLmdldFBhbmVsID0gZnVuY3Rpb24gKCR0YWIpIHtcbiAgdmFyICRwYW5lbCA9IHRoaXMuJG1vZHVsZS5xdWVyeVNlbGVjdG9yKHRoaXMuZ2V0SHJlZigkdGFiKSk7XG4gIHJldHVybiAkcGFuZWxcbn07XG5cblRhYnMucHJvdG90eXBlLnNob3dQYW5lbCA9IGZ1bmN0aW9uICgkdGFiKSB7XG4gIHZhciAkcGFuZWwgPSB0aGlzLmdldFBhbmVsKCR0YWIpO1xuICAkcGFuZWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmpzSGlkZGVuQ2xhc3MpO1xufTtcblxuVGFicy5wcm90b3R5cGUuaGlkZVBhbmVsID0gZnVuY3Rpb24gKHRhYikge1xuICB2YXIgJHBhbmVsID0gdGhpcy5nZXRQYW5lbCh0YWIpO1xuICAkcGFuZWwuY2xhc3NMaXN0LmFkZCh0aGlzLmpzSGlkZGVuQ2xhc3MpO1xufTtcblxuVGFicy5wcm90b3R5cGUudW5oaWdobGlnaHRUYWIgPSBmdW5jdGlvbiAoJHRhYikge1xuICAkdGFiLnNldEF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcsICdmYWxzZScpO1xuICAkdGFiLnBhcmVudE5vZGUuY2xhc3NMaXN0LnJlbW92ZSgnZ292dWstdGFic19fbGlzdC1pdGVtLS1zZWxlY3RlZCcpO1xuICAkdGFiLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnLTEnKTtcbn07XG5cblRhYnMucHJvdG90eXBlLmhpZ2hsaWdodFRhYiA9IGZ1bmN0aW9uICgkdGFiKSB7XG4gICR0YWIuc2V0QXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJywgJ3RydWUnKTtcbiAgJHRhYi5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ2dvdnVrLXRhYnNfX2xpc3QtaXRlbS0tc2VsZWN0ZWQnKTtcbiAgJHRhYi5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJzAnKTtcbn07XG5cblRhYnMucHJvdG90eXBlLmdldEN1cnJlbnRUYWIgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLiRtb2R1bGUucXVlcnlTZWxlY3RvcignLmdvdnVrLXRhYnNfX2xpc3QtaXRlbS0tc2VsZWN0ZWQgLmdvdnVrLXRhYnNfX3RhYicpXG59O1xuXG4vLyB0aGlzIGlzIGJlY2F1c2UgSUUgZG9lc24ndCBhbHdheXMgcmV0dXJuIHRoZSBhY3R1YWwgdmFsdWUgYnV0IGEgcmVsYXRpdmUgZnVsbCBwYXRoXG4vLyBzaG91bGQgYmUgYSB1dGlsaXR5IGZ1bmN0aW9uIG1vc3QgcHJvYlxuLy8gaHR0cDovL2xhYnMudGhlc2VkYXlzLmNvbS9ibG9nLzIwMTAvMDEvMDgvZ2V0dGluZy10aGUtaHJlZi12YWx1ZS13aXRoLWpxdWVyeS1pbi1pZS9cblRhYnMucHJvdG90eXBlLmdldEhyZWYgPSBmdW5jdGlvbiAoJHRhYikge1xuICB2YXIgaHJlZiA9ICR0YWIuZ2V0QXR0cmlidXRlKCdocmVmJyk7XG4gIHZhciBoYXNoID0gaHJlZi5zbGljZShocmVmLmluZGV4T2YoJyMnKSwgaHJlZi5sZW5ndGgpO1xuICByZXR1cm4gaGFzaFxufTtcblxuLyoqXG4gKiBJbml0aWFsaXNlIGFsbCBjb21wb25lbnRzXG4gKlxuICogVXNlIHRoZSBgZGF0YS1tb2R1bGVgIGF0dHJpYnV0ZXMgdG8gZmluZCwgaW5zdGFudGlhdGUgYW5kIGluaXQgYWxsIG9mIHRoZVxuICogY29tcG9uZW50cyBwcm92aWRlZCBhcyBwYXJ0IG9mIEdPVi5VSyBGcm9udGVuZC5cbiAqXG4gKiBAcGFyYW0ge0NvbmZpZ30gW2NvbmZpZ10gLSBDb25maWcgZm9yIGFsbCBjb21wb25lbnRzXG4gKi9cbmZ1bmN0aW9uIGluaXRBbGwgKGNvbmZpZykge1xuICBjb25maWcgPSB0eXBlb2YgY29uZmlnICE9PSAndW5kZWZpbmVkJyA/IGNvbmZpZyA6IHt9O1xuXG4gIC8vIEFsbG93IHRoZSB1c2VyIHRvIGluaXRpYWxpc2UgR09WLlVLIEZyb250ZW5kIGluIG9ubHkgY2VydGFpbiBzZWN0aW9ucyBvZiB0aGUgcGFnZVxuICAvLyBEZWZhdWx0cyB0byB0aGUgZW50aXJlIGRvY3VtZW50IGlmIG5vdGhpbmcgaXMgc2V0LlxuICB2YXIgJHNjb3BlID0gdHlwZW9mIGNvbmZpZy5zY29wZSAhPT0gJ3VuZGVmaW5lZCcgPyBjb25maWcuc2NvcGUgOiBkb2N1bWVudDtcblxuICB2YXIgJGFjY29yZGlvbnMgPSAkc2NvcGUucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtbW9kdWxlPVwiZ292dWstYWNjb3JkaW9uXCJdJyk7XG4gIG5vZGVMaXN0Rm9yRWFjaCgkYWNjb3JkaW9ucywgZnVuY3Rpb24gKCRhY2NvcmRpb24pIHtcbiAgICBuZXcgQWNjb3JkaW9uKCRhY2NvcmRpb24sIGNvbmZpZy5hY2NvcmRpb24pLmluaXQoKTtcbiAgfSk7XG5cbiAgdmFyICRidXR0b25zID0gJHNjb3BlLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLW1vZHVsZT1cImdvdnVrLWJ1dHRvblwiXScpO1xuICBub2RlTGlzdEZvckVhY2goJGJ1dHRvbnMsIGZ1bmN0aW9uICgkYnV0dG9uKSB7XG4gICAgbmV3IEJ1dHRvbigkYnV0dG9uLCBjb25maWcuYnV0dG9uKS5pbml0KCk7XG4gIH0pO1xuXG4gIHZhciAkY2hhcmFjdGVyQ291bnRzID0gJHNjb3BlLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLW1vZHVsZT1cImdvdnVrLWNoYXJhY3Rlci1jb3VudFwiXScpO1xuICBub2RlTGlzdEZvckVhY2goJGNoYXJhY3RlckNvdW50cywgZnVuY3Rpb24gKCRjaGFyYWN0ZXJDb3VudCkge1xuICAgIG5ldyBDaGFyYWN0ZXJDb3VudCgkY2hhcmFjdGVyQ291bnQsIGNvbmZpZy5jaGFyYWN0ZXJDb3VudCkuaW5pdCgpO1xuICB9KTtcblxuICB2YXIgJGNoZWNrYm94ZXMgPSAkc2NvcGUucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtbW9kdWxlPVwiZ292dWstY2hlY2tib3hlc1wiXScpO1xuICBub2RlTGlzdEZvckVhY2goJGNoZWNrYm94ZXMsIGZ1bmN0aW9uICgkY2hlY2tib3gpIHtcbiAgICBuZXcgQ2hlY2tib3hlcygkY2hlY2tib3gpLmluaXQoKTtcbiAgfSk7XG5cbiAgdmFyICRkZXRhaWxzID0gJHNjb3BlLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLW1vZHVsZT1cImdvdnVrLWRldGFpbHNcIl0nKTtcbiAgbm9kZUxpc3RGb3JFYWNoKCRkZXRhaWxzLCBmdW5jdGlvbiAoJGRldGFpbCkge1xuICAgIG5ldyBEZXRhaWxzKCRkZXRhaWwpLmluaXQoKTtcbiAgfSk7XG5cbiAgLy8gRmluZCBmaXJzdCBlcnJvciBzdW1tYXJ5IG1vZHVsZSB0byBlbmhhbmNlLlxuICB2YXIgJGVycm9yU3VtbWFyeSA9ICRzY29wZS5xdWVyeVNlbGVjdG9yKCdbZGF0YS1tb2R1bGU9XCJnb3Z1ay1lcnJvci1zdW1tYXJ5XCJdJyk7XG4gIGlmICgkZXJyb3JTdW1tYXJ5KSB7XG4gICAgbmV3IEVycm9yU3VtbWFyeSgkZXJyb3JTdW1tYXJ5LCBjb25maWcuZXJyb3JTdW1tYXJ5KS5pbml0KCk7XG4gIH1cblxuICAvLyBGaW5kIGZpcnN0IGhlYWRlciBtb2R1bGUgdG8gZW5oYW5jZS5cbiAgdmFyICRoZWFkZXIgPSAkc2NvcGUucXVlcnlTZWxlY3RvcignW2RhdGEtbW9kdWxlPVwiZ292dWstaGVhZGVyXCJdJyk7XG4gIGlmICgkaGVhZGVyKSB7XG4gICAgbmV3IEhlYWRlcigkaGVhZGVyKS5pbml0KCk7XG4gIH1cblxuICB2YXIgJG5vdGlmaWNhdGlvbkJhbm5lcnMgPSAkc2NvcGUucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtbW9kdWxlPVwiZ292dWstbm90aWZpY2F0aW9uLWJhbm5lclwiXScpO1xuICBub2RlTGlzdEZvckVhY2goJG5vdGlmaWNhdGlvbkJhbm5lcnMsIGZ1bmN0aW9uICgkbm90aWZpY2F0aW9uQmFubmVyKSB7XG4gICAgbmV3IE5vdGlmaWNhdGlvbkJhbm5lcigkbm90aWZpY2F0aW9uQmFubmVyLCBjb25maWcubm90aWZpY2F0aW9uQmFubmVyKS5pbml0KCk7XG4gIH0pO1xuXG4gIHZhciAkcmFkaW9zID0gJHNjb3BlLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLW1vZHVsZT1cImdvdnVrLXJhZGlvc1wiXScpO1xuICBub2RlTGlzdEZvckVhY2goJHJhZGlvcywgZnVuY3Rpb24gKCRyYWRpbykge1xuICAgIG5ldyBSYWRpb3MoJHJhZGlvKS5pbml0KCk7XG4gIH0pO1xuXG4gIC8vIEZpbmQgZmlyc3Qgc2tpcCBsaW5rIG1vZHVsZSB0byBlbmhhbmNlLlxuICB2YXIgJHNraXBMaW5rID0gJHNjb3BlLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLW1vZHVsZT1cImdvdnVrLXNraXAtbGlua1wiXScpO1xuICBuZXcgU2tpcExpbmsoJHNraXBMaW5rKS5pbml0KCk7XG5cbiAgdmFyICR0YWJzID0gJHNjb3BlLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLW1vZHVsZT1cImdvdnVrLXRhYnNcIl0nKTtcbiAgbm9kZUxpc3RGb3JFYWNoKCR0YWJzLCBmdW5jdGlvbiAoJHRhYnMpIHtcbiAgICBuZXcgVGFicygkdGFicykuaW5pdCgpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBDb25maWcgZm9yIGFsbCBjb21wb25lbnRzXG4gKlxuICogQHR5cGVkZWYge29iamVjdH0gQ29uZmlnXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fSBbc2NvcGU9ZG9jdW1lbnRdIC0gU2NvcGUgdG8gcXVlcnkgZm9yIGNvbXBvbmVudHNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KCcuL2NvbXBvbmVudHMvYWNjb3JkaW9uL2FjY29yZGlvbi5tanMnKS5BY2NvcmRpb25Db25maWd9IFthY2NvcmRpb25dIC0gQWNjb3JkaW9uIGNvbmZpZ1xuICogQHByb3BlcnR5IHtpbXBvcnQoJy4vY29tcG9uZW50cy9idXR0b24vYnV0dG9uLm1qcycpLkJ1dHRvbkNvbmZpZ30gW2J1dHRvbl0gLSBCdXR0b24gY29uZmlnXG4gKiBAcHJvcGVydHkge2ltcG9ydCgnLi9jb21wb25lbnRzL2NoYXJhY3Rlci1jb3VudC9jaGFyYWN0ZXItY291bnQubWpzJykuQ2hhcmFjdGVyQ291bnRDb25maWd9IFtjaGFyYWN0ZXJDb3VudF0gLSBDaGFyYWN0ZXIgQ291bnQgY29uZmlnXG4gKiBAcHJvcGVydHkge2ltcG9ydCgnLi9jb21wb25lbnRzL2Vycm9yLXN1bW1hcnkvZXJyb3Itc3VtbWFyeS5tanMnKS5FcnJvclN1bW1hcnlDb25maWd9IFtlcnJvclN1bW1hcnldIC0gRXJyb3IgU3VtbWFyeSBjb25maWdcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KCcuL2NvbXBvbmVudHMvbm90aWZpY2F0aW9uLWJhbm5lci9ub3RpZmljYXRpb24tYmFubmVyLm1qcycpLk5vdGlmaWNhdGlvbkJhbm5lckNvbmZpZ30gW25vdGlmaWNhdGlvbkJhbm5lcl0gLSBOb3RpZmljYXRpb24gQmFubmVyIGNvbmZpZ1xuICovXG5cbmV4cG9ydHMuaW5pdEFsbCA9IGluaXRBbGw7XG5leHBvcnRzLkFjY29yZGlvbiA9IEFjY29yZGlvbjtcbmV4cG9ydHMuQnV0dG9uID0gQnV0dG9uO1xuZXhwb3J0cy5EZXRhaWxzID0gRGV0YWlscztcbmV4cG9ydHMuQ2hhcmFjdGVyQ291bnQgPSBDaGFyYWN0ZXJDb3VudDtcbmV4cG9ydHMuQ2hlY2tib3hlcyA9IENoZWNrYm94ZXM7XG5leHBvcnRzLkVycm9yU3VtbWFyeSA9IEVycm9yU3VtbWFyeTtcbmV4cG9ydHMuSGVhZGVyID0gSGVhZGVyO1xuZXhwb3J0cy5Ob3RpZmljYXRpb25CYW5uZXIgPSBOb3RpZmljYXRpb25CYW5uZXI7XG5leHBvcnRzLlJhZGlvcyA9IFJhZGlvcztcbmV4cG9ydHMuU2tpcExpbmsgPSBTa2lwTGluaztcbmV4cG9ydHMuVGFicyA9IFRhYnM7XG5cbn0pKSk7XG4iXX0=
