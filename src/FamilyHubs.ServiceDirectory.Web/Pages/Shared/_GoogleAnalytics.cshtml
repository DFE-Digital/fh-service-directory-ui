@inject IConfiguration Configuration

@{
    string googleAnalyticsKey = Configuration.GetValue<string>("GA_MEASUREMENT_ID") ?? string.Empty;

    if (googleAnalyticsKey != "")
    {
        var googleAnalyticsUrl = $"https://www.googletagmanager.com/gtag/js?id={googleAnalyticsKey}";

        <script>
            window.GA_MEASUREMENT_ID = '@googleAnalyticsKey';
            var f = document.getElementsByTagName('script')[0];
            var j = document.createElement('script');
            j.async = true;
            j.src = '@googleAnalyticsUrl';
            f.parentNode.insertBefore(j, f);
        </script>

@*        <script async src='@googleAnalyticsUrl'></script>
        <script>
            window.GA_MEASUREMENT_ID = '@googleAnalyticsKey';
        </script>*@
    }
}